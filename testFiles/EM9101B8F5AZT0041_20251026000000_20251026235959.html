<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>展示轮廓</title>
    <style>
        body {
            margin: 0;
            padding: 0;
        }

        #mapContainer {
            width: 100vw;
            height: 100vh;
            position: relative;
        }

        #mapLoading {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 999;
            transition: opacity 0.3s;
        }

        .loading-text {
            font-size: 16px;
            color: #333;
            padding: 10px 20px;
            background: white;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .wkt-input-container {
            position: absolute;
            top: 20px;
            right: 10px;
            z-index: 1000;
            background: white;
            padding: 12px;
            border-radius: 6px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            width: min(320px, 90vw);
            box-sizing: border-box;
            transition: all 0.3s;
        }

        .minimize-btn {
            position: absolute;
            top: -5px;
            right: -4px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #f0f0f0;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: #666;
            z-index: 1001;
            transition: background 0.2s;
        }

        .minimize-btn:hover {
            background: #e0e0e0;
        }

        .content-wrapper {
            transition: all 0.3s;
        }

        .wkt-input-container.minimized {
            width: 40px;
            height: 40px;
            padding: 0;
        }

        .wkt-input-container.minimized .content-wrapper {
            display: none;
        }

        .wkt-input-container.minimized .min-icon {
            display: none;
        }

        .wkt-input-container.minimized .restore-icon {
            display: inline;
        }

        #wktTextarea {
            width: 100%;
            height: 120px;
            margin-bottom: 10px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: monospace;
            resize: vertical;
            box-sizing: border-box;
        }

        .button-group {
            display: flex;
            gap: 10px;
        }

        /* 页签样式 */
        .tabs-header {
            display: flex;
            gap: 8px;
            margin-bottom: 8px;
        }
        .tab-btn {
            flex: 1;
            padding: 6px 0;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            background: #f5f5f5;
            color: #333;
            transition: background 0.2s;
        }
        .tab-btn.active { background: #337AFF; color: #fff; }
        .tab-pane { display: none; }
        .tab-pane.active { display: block; }

        /* Multi → Polygons 分割器样式 */
        .split-section {
            margin-top: 10px;
            padding: 10px;
            background: #fafafa;
            border: 1px solid #eee;
            border-radius: 6px;
        }
        .split-section .title {
            font-size: 13px;
            font-weight: 600;
            color: #333;
            margin-bottom: 6px;
        }
        .split-section .desc {
            font-size: 12px;
            color: #666;
            margin-bottom: 8px;
        }
        #multiInput, #polyOutput {
            width: 100%;
            height: 90px;
            margin-bottom: 8px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: monospace;
            resize: vertical;
            box-sizing: border-box;
        }
        .split-actions {
            display: flex;
            gap: 8px;
            margin-bottom: 8px;
        }
        .split-actions button {
            flex: 1;
            padding: 6px 0;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            transition: background 0.2s;
        }
        #splitMultiBtn { background: #337AFF; color: #fff; }
        #splitMultiBtn:hover { background: #2860E0; }
        #copyPolysBtn { background: #f5f5f5; color: #333; }
        #copyPolysBtn:hover { background: #e0e0e0; }
        #drawButton,
        #clearButton,
        #drawTrackButton,
        #clearTrackButton {
            width: 50%;
            padding: 8px 0;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.2s;
        }

        #drawButton,
        #drawTrackButton {
            background: #337AFF;
            color: white;
        }

        #drawButton:hover,
        #drawTrackButton:hover {
            background: #2860E0;
        }

        #clearButton,
        #clearTrackButton {
            background: #f5f5f5;
            color: #333;
        }

        #clearButton:hover,
        #clearTrackButton:hover {
            background: #e0e0e0;
        }

        #drawButton:disabled,
        #clearButton:disabled,
        #drawTrackButton:disabled,
        #clearTrackButton:disabled {
            background: #e0e0e0;
            color: #999;
            cursor: not-allowed;
        }

        .tip {
            font-size: 12px;
            color: #666;
            margin-bottom: 8px;
            line-height: 1.4;
        }

        .area-label {
             position: absolute;
             background: rgba(255, 0, 0, 0.85);
             border: 1px solid #000;
             border-radius: 3px;
             padding: 4px 6px;
             font-size: 12px;
             color: #fff;
             font-weight: 600;
             box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
             white-space: nowrap;
             z-index: 9999;
             pointer-events: none;
         }
         /* 默认隐藏标签容器下的标签 */
          .labels-hidden .area-label { display: none; }

          /* Batch → Generator 样式 */
          .batch-section { margin-top: 10px; padding: 10px; background: #fafafa; border: 1px solid #eee; border-radius: 6px; }
          .batch-section .title { font-size: 13px; font-weight: 600; color: #333; margin-bottom: 6px; }
          .batch-section .desc { font-size: 12px; color: #666; margin-bottom: 8px; }
          #batchInput, #multiOutput { width: 100%; height: 90px; margin-bottom: 8px; padding: 8px; border: 1px solid #ddd; border-radius: 4px; font-family: monospace; resize: vertical; box-sizing: border-box; }
          .batch-actions { display: flex; gap: 8px; margin-bottom: 8px; }
          .batch-actions button { flex: 1; padding: 6px 0; border: none; border-radius: 4px; cursor: pointer; font-size: 13px; transition: background 0.2s; }
          #generateMultiBtn { background: #337AFF; color: #fff; }
          #generateMultiBtn:hover { background: #2860E0; }
          #copyMultiBtn { background: #f5f5f5; color: #333; }
          #copyMultiBtn:hover { background: #e0e0e0; }
          
          /* 左侧工具条样式 */
          #leftToolbar {
              position: absolute;
              bottom: 20px;
              left: 20px;
              z-index: 1000;
              background: white;
              border-radius: 4px;
              box-shadow: 0 1px 4px rgba(0, 0, 0, 0.15);
              padding: 6px 0;
              display: flex;
              flex-direction: column;
              gap: 2px;
              width: 40px;
          }
          
          .toolbar-btn {
              width: 100%;
              padding: 6px 0;
              border: none;
              background: transparent;
              cursor: pointer;
              font-size: 12px;
              color: #333;
              transition: background 0.2s;
              display: flex;
              flex-direction: column;
              align-items: center;
              justify-content: center;
          }
          
          .toolbar-btn:hover {
              background: #f5f5f5;
          }
          
          .toolbar-btn span {
              font-size: 12px;
              margin-top: 4px;
          }
          
          .toolbar-divider {
            height: 1px;
            background-color: #e0e0e0;
            margin: 2px 4px;
        }
        
        /* 颜色选择器样式 */
        .color-picker-container {
            margin-top: 10px;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 4px;
            border: 1px solid #e0e0e0;
        }
        
        .color-picker-title {
            font-size: 13px;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }
        
        .color-picker-row {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .color-picker-label {
            font-size: 12px;
            color: #555;
            width: 60px;
            flex-shrink: 0;
        }
        
        .color-picker {
            width: 30px;
            height: 30px;
            border: 1px solid #ccc;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 8px;
            flex-shrink: 0;
        }
        
        .color-input {
            flex: 1;
            padding: 4px 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 12px;
            font-family: monospace;
        }
        
        .opacity-slider-container {
            display: flex;
            align-items: center;
            margin-top: 8px;
        }
        
        .opacity-slider {
            flex: 1;
            margin-right: 8px;
        }
        
        .opacity-value {
            font-size: 12px;
            color: #555;
            width: 40px;
            text-align: right;
        }
      </style>
    <script src="https://api.tianditu.gov.cn/api?v=4.0&tk=9ed3674d01dd7c129ab38e3c38bf651a"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/Turf.js/6.5.0/turf.min.js"></script>
    <script src="https://lib.baomitu.com/terraformer/1.0.12/terraformer.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://unpkg.com/terraformer-wkt-parser@1.2.1/terraformer-wkt-parser.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- 已移除动态备用加载器 ensureTerraformer：改为仅使用静态脚本标签加载 Terraformer 核心库与 WKT 解析器 -->
    <script>
        // 检查Turf.js是否加载成功
        window.addEventListener('load', function () {
            if (typeof turf === 'undefined') {
                console.warn('Turf.js加载失败，已启用备用面积算法');
            } else {
                console.log('Turf.js加载成功');
            }
        });
    </script>
</head>

<body>
<!-- 左侧工具条 -->
<div id="leftToolbar">
    <button class="toolbar-btn" id="measureDistanceBtn" title="测距">
        <span>测距</span>
    </button>
    <div class="toolbar-divider"></div>
    <button class="toolbar-btn" id="measureAreaBtn" title="测面">
        <span>测面</span>
    </button>
    <div class="toolbar-divider"></div>
    <button class="toolbar-btn" id="mapTypeBtn" title="切换地图类型">
        <span>地图</span>
    </button>
</div>

<div id="mapContainer">
    <div id="mapLoading">
        <div class="loading-text">地图正在加载中...</div>
    </div>
</div>

<div class="wkt-input-container">
    <div class="minimize-btn" id="minimizeBtn">
        <span class="min-icon">−</span>
        <span class="restore-icon" style="display:none;">+</span>
    </div>

    <div class="content-wrapper">
        <div class="tabs-header">
            <button class="tab-btn active" id="tabDrawBtn">轮廓</button>
            <button class="tab-btn" id="tabTrackBtn">轨迹</button>
            <button class="tab-btn" id="tabSplitBtn">分割器</button>
            <button class="tab-btn" id="tabBatchBtn">合并器</button>
        </div>
        <div class="tab-pane active" id="tabDraw">
            <div class="tip">请输入WKT字符串（支持POLYGON/MULTIPOLYGON）：</div>
            <textarea id="wktTextarea">MULTIPOLYGON (((124.51334281969511 45.38036766090901, 124.51334726880391 45.38036962325811, 124.51334962277126 45.38037041463538, 124.51335469222249 45.380371487412276, 124.5135059204583 45.3803894728422, 124.51350837422193 45.38038985301141, 124.5135094681592 45.38039006274792, 124.51351419322755 45.38039133459228, 124.51351846978744 45.380393237933006, 124.51352212998826 45.38039569806582, 124.51352503017056 45.380398618432906, 124.51352705650481 45.38040188441271, 124.51352812945926 45.38040536781869, 124.51352820692124 45.38040893193046, 124.5135272858503 45.38041243686009, 124.51352696999396 45.38041320417916, 124.51352614520648 45.38041489051341, 124.5134909619407 45.38047669551281, 124.51335943313457 45.38072012181094, 124.5133583295506 45.38072187656212, 124.51335710137583 45.38072357811906, 124.513355735527 45.380725243606044, 124.51310375930825 45.380997748548424, 124.51310237932607 45.38099909986188, 124.51279916595459 45.38126876092846, 124.51279654016089 45.381271761203884, 124.51279486476187 45.381274751766654, 124.51279409481644 45.38127773915693, 124.51279416667478 45.38128077500223, 124.51279507757545 45.381283742634196, 124.51279679251373 45.381286528009994, 124.51279924558519 45.38128902408844, 124.5128023425192 45.381291134946395, 124.51280596430419 45.38129277946563, 124.5128099717545 45.38129389444719, 124.5128142108674 45.38129443704339, 124.51281851873604 45.38129438640248, 124.51282272981054 45.381293744470604, 124.51282665406137 45.38129254453986, 124.51283080942562 45.38129050605996, 124.51283377309662 45.38128844857473, 124.51314062857752 45.38101554831629, 124.513396501194 45.380738641160484, 124.51339890482357 45.38073535940707, 124.51353264715304 45.38048802796571, 124.51356931128603 45.380423627171865, 124.51357047319821 45.3804218675792, 124.51357110976959 45.38042102552461, 124.51357420220432 45.380417822081675, 124.51357508015869 45.38041709531421, 124.51357697511115 45.38041568803228, 124.51359178257624 45.380405816387714, 124.51359357794419 45.38040472618102, 124.51359428730589 45.38040433434746, 124.51359851699219 45.38040243859335, 124.51360319075752 45.38040116179234, 124.51360852588003 45.38040011522711, 124.51361396785835 45.38039859184714, 124.51361658528998 45.38039755912369, 124.51385622131035 45.38028874404787, 124.51385846713859 45.380287834412435, 124.5142095559824 45.38016187594719, 124.51459743218028 45.380019289058225, 124.51469319382213 45.379980638715985, 124.51469487523629 45.37998001740774, 124.51480256431252 45.37994375574077, 124.51490548767235 45.37989474403644, 124.5149070614475 45.37989405193133, 124.51494570494181 45.37987840259493, 124.51526910429342 45.37973926529403, 124.51560888101709 45.379604749568294, 124.51593045489113 45.37947661551864, 124.51598332872926 45.37945255216995, 124.51598571766286 45.37945158937451, 124.5159950481973 45.37944828584076, 124.51612581520249 45.37939632136572, 124.51612812079712 45.3793955103731, 124.51612924573011 45.379395163486755, 124.51613414514081 45.37939405181789, 124.51613926137851 45.37939365530996, 124.51614438649217 45.37939399007916, 124.5161493121702 45.37939504251869, 124.51615044535902 45.37939537579231, 124.51615277030304 45.379396158870655, 124.51628067615312 45.379444973210674, 124.5162829105237 45.37944593343963, 124.51628380442756 45.37944636338428, 124.51628779761035 45.37944874058186, 124.51629102009247 45.379451641112134, 124.51629333678635 45.37945494338392, 124.51629465057533 45.37945850896486, 124.5162949063845 45.37946218838453, 124.51629409349019 45.379465827400296, 124.51629224596896 45.37946927346331, 124.51628944126952 45.37947238211329, 124.51628579696563 45.37947502303443, 124.51628146582803 45.37947708551831, 124.5162805500586 45.37947743115348, 124.51627810256426 45.37947824046588, 124.51626991012861 45.37948056431145, 124.51616491458876 45.379506703051355, 124.5161620363775 45.379507661706974, 124.51596157268469 45.37958407217744, 124.5157586304145 45.379657858206926, 124.51562626457829 45.37971215880899, 124.51562510340318 45.37971260716156, 124.51558895924603 45.37972571608937, 124.51504816865058 45.3799432296283, 124.51482528238498 45.380035140602075, 124.51482392713041 45.380035661359955, 124.51470899867832 45.380076696314994, 124.51459675969375 45.38012138529513, 124.51447619075724 45.380167216280746, 124.51431281517283 45.380226987831115, 124.5141884998419 45.38027209280598, 124.51398611000238 45.38034163545327, 124.5139818773863 45.38034355217365, 124.51397838358149 45.380345829624595, 124.51397711390923 45.380346979175954, 124.51397418422445 45.38035032652303, 124.51397283045499 45.3803517220195, 124.51397212311545 45.38035238229772, 124.51396888952002 45.38035487472757, 124.51396505197681 45.38035689740475, 124.51396405004073 45.38035732854389, 124.51396194633485 45.38035814073611, 124.5138791618795 45.3803866243034, 124.51387426197604 45.38038886904139, 124.51387299556191 45.380389641040225, 124.51386930984398 45.38039262860916, 124.51386751421404 45.38039461097196, 124.51386076280308 45.38040350249505, 124.51385792784818 45.38040774879452, 124.513856102463 45.38041003402067, 124.5138481764291 45.38041845543963, 124.51384683745634 45.380419749182735, 124.51384618153975 45.380420327060726, 124.51384294953537 45.38042269440401, 124.51383916062056 45.38042460814741, 124.51383887623766 45.38042472569011, 124.51383476332191 45.380426094627985, 124.51383335892474 45.38042645819262, 124.51383094879667 45.38042698838694, 124.51377236492094 45.380437667021006, 124.51376776743763 45.380438915394244, 124.5137639083664 45.38044054956775, 124.51376075803702 45.38044255404772, 124.51375821285265 45.380444947724726, 124.51375636764277 45.38044764141445, 124.51375529882633 45.38045051413924, 124.51375499603127 45.38045402203157, 124.51375543476676 45.38045691581202, 124.51376456429904 45.380485001767575, 124.5137650107186 45.380486781754215, 124.51376517084549 45.380487682100735, 124.51376528721309 45.380491359127795, 124.51376518420416 45.38049226360868, 124.51376503146382 45.38049325756473, 124.51376402769533 45.38049843988007, 124.51376428329988 45.380501426829056, 124.51376531214221 45.3805042207551, 124.51376748427498 45.38050731779172, 124.51377043240284 45.38051026978142, 124.51377175499631 45.3805117404904, 124.51377235715114 45.38051248775748, 124.51377436815352 45.38051566424598, 124.51377475188104 45.38051647257663, 124.51377542588293 45.38051816219673, 124.51378791330613 45.38055656705586, 124.51378820421546 45.38055759962662, 124.51379592101785 45.380589912435426, 124.51379731867348 45.38059330574872, 124.5137993568045 45.380596235950286, 124.51380059469291 45.38059745438468, 124.51380456782098 45.38060056700881, 124.51380614268828 45.3806019290609, 124.51380680771591 45.38060256530145, 124.51380935625073 45.380605580714395, 124.51381102560748 45.38060888743605, 124.5138117522633 45.380612359638285, 124.51381150856703 45.380615865196155, 124.51381030379181 45.38061927071531, 124.51380818378183 45.380622446608186, 124.51380522920796 45.38062527202488, 124.51380155249849 45.38062763945195, 124.51380066409956 45.38062810816347, 124.51379857804474 45.38062909960037, 124.51375598375391 45.38064725821783, 124.51375465934898 45.38064778550846, 124.51363051817943 45.38069382760524, 124.5136262956194 45.380695883688894, 124.51362298533935 45.38069821797241, 124.51362055477406 45.380700812472256, 124.5136188071464 45.380703883816864, 124.51361627896866 45.38071295533049, 124.51361594315998 45.38071638158539, 124.51361628265245 45.38071946329199, 124.5136740759983 45.380922421161145, 124.51367447893695 45.38092440147921, 124.5136745985878 45.380925370511704, 124.51367445811918 45.38092937394072, 124.51367306456989 45.380933256308865, 124.5136725792776 45.380934166897866, 124.5136714318191 45.380936002081874, 124.51365017864292 45.380965429527286, 124.51364912699725 45.380966745845804, 124.51364857196302 45.38096737703075, 124.51364601823155 45.38096980043496, 124.51364292554817 45.38097188886702, 124.51364210628851 45.38097235582844, 124.513640384514 45.38097325564503, 124.51354331442668 45.38101966506576, 124.51353955427051 45.381021956906345, 124.51353621304528 45.38102487461281, 124.5135341745409 45.38102744776048, 124.51350456868381 45.381078537881876, 124.51350362665063 45.38107997856486, 124.51350311933008 45.3810806722287, 124.51350068277344 45.38108338012359, 124.51349760286016 45.3810857402312, 124.51349397740462 45.38108767759708, 124.5134930389314 45.381088091830605, 124.51349121120214 45.3810888264753, 124.51345863222632 45.38110069531887, 124.51345478903016 45.38110280907874, 124.51345205795569 45.381105035823964, 124.51344995954597 45.38110761460629, 124.51344859832774 45.38111042827635, 124.51344802437364 45.381113373333115, 124.5134482587967 45.38111634144132, 124.51344929297451 45.38111922342078, 124.51345108886332 45.38112191325395, 124.51345358040267 45.381124311997596, 124.51345681546024 45.38112642243038, 124.51346077539591 45.38112820923207, 124.51346355330338 45.38112911415094, 124.51349661799378 45.381137860329844, 124.51350147556408 45.38113845392044, 124.51350569417889 45.381138377309966, 124.5135098538628 45.38113772198768, 124.51351375595058 45.38113651335184, 124.51351725378433 45.38113479682838, 124.51352027319595 45.38113259515369, 124.51352298096032 45.38112968624304, 124.5135246201333 45.38112727080921, 124.51352582813203 45.38112569696518, 124.51352636773106 45.38112507053725, 124.51352949808461 45.38112215295025, 124.51353340103569 45.3811197418003, 124.5135379152831 45.381117936735436, 124.5135428542618 45.381116812355394, 124.5135480138536 45.38111641512858, 124.5135531808229 45.38111676147158, 124.51362085156714 45.38112626243863, 124.51362522459937 45.38112654759224, 124.51363050561424 45.38112630075334, 124.51363539624501 45.3811256770171, 124.51364058953448 45.381125395193784, 124.51364575590905 45.381125861992174, 124.51365452844584 45.38112730755401, 124.51365931710691 45.381127470719576, 124.51366412037794 45.38112701226816, 124.5136672077381 45.38112639973269, 124.51371470381487 45.38111438906619, 124.51375549612932 45.381100498914485, 124.51375757293484 45.38109987005925, 124.51375833870061 45.38109966598391, 124.5137628978636 45.38109878094621, 124.51376761043556 45.38109850364825, 124.51377401720704 45.38109854627705, 124.51377962215095 45.3810979789332, 124.51378444415056 45.381096832547094, 124.51386615815308 45.38106930279108, 124.51386954555474 45.3810677892112, 124.51387320186157 45.3810654867287, 124.51387570686778 45.38106316109545, 124.51387755690446 45.381060525228875, 124.51387866747267 45.381057690610994, 124.51387901130492 45.38105464695378, 124.51387858417266 45.3810515881791, 124.51387722855868 45.381047242463566, 124.51387663324311 45.3810433279695, 124.51387726029817 45.38103941593732, 124.51387856717405 45.381035337761865, 124.5138789746204 45.381031641433786, 124.51387783637948 45.38102494912018, 124.51387771174511 45.38102160826325, 124.513878466015 45.381018308794836, 124.51388007316547 45.381015164552224, 124.51388247774669 45.381012284017146, 124.51388773364334 45.38100714768145, 124.51388964954762 45.3810043354286, 124.51389071476112 45.381001461326214, 124.5138909958322 45.380998344605814, 124.51389050805615 45.38099528417284, 124.51388922794303 45.38099134845303, 124.51388859393154 45.38098786529583, 124.51388893207108 45.38098436169298, 124.51389022948044 45.38098097111147, 124.51389243673543 45.380977822712765, 124.51389546975257 45.38097503643258, 124.51389921299126 45.38097271841195, 124.5138999759185 45.38097233198216, 124.51390182321543 45.380971479197136, 124.51393449271718 45.380957782695, 124.51393820973266 45.3809554559361, 124.51394077156203 45.38095305668674, 124.51394263941908 45.38095032453577, 124.5139437160323 45.380947388259536, 124.51394396012743 45.380944360425886, 124.51394335817825 45.38094133616676, 124.51394172940766 45.38093801909944, 124.51394037909262 45.380936164286325, 124.51393936777109 45.38093459410097, 124.51393897442527 45.38093389634143, 124.51393756916877 45.380930420221, 124.51393717815164 45.38092681630454, 124.51393720333357 45.380926086167825, 124.51393769468073 45.3809229838909, 124.5139377303507 45.38092285860478, 124.5139391640515 45.38091953117546, 124.51394147926344 45.38091646025676, 124.51394458950236 45.38091376056194, 124.51394837858624 45.38091153293721, 124.51395270497486 45.38090986059481, 124.51395377845118 45.3809095363652, 124.5139560079893 45.38090894806593, 124.51397453473685 45.380904742378505, 124.51410263905221 45.38086244349617, 124.51410678196676 45.38086063942893, 124.51411038525808 45.38085839608219, 124.51411145383811 45.38085750767559, 124.51411595702307 45.38085298321781, 124.51411911558368 45.3808503779766, 124.51412291772371 45.38084824198622, 124.51412344293712 45.38084800073275, 124.51412524051939 45.38084724709847, 124.514248859087 45.380800140509294, 124.51431583180472 45.380772561035684, 124.51431822372487 45.38077169181103, 124.51431899197479 45.38077144784297, 124.51432471923692 45.38077017500517, 124.51433039299619 45.38076941594541, 124.514336058071 45.380768134980684, 124.51434039266476 45.38076651421394, 124.51438068292292 45.38074687557277, 124.51444232057231 45.38071087438088, 124.51444400458415 45.38070997107156, 124.51444573579892 45.38070911992629, 124.51444719581245 45.38070845305642, 124.51446018797552 45.38070295250812, 124.51446408870143 45.38070055741258, 124.51446982288822 45.38069533402642, 124.51447212983005 45.38069350461673, 124.51447254632545 45.38069321644941, 124.51447391112919 45.38069233822422, 124.51450434687423 45.380674132313764, 124.51450745454035 45.380671407948, 124.51450941234022 45.38066874388555, 124.51451060854876 45.380665833391554, 124.51451100189347 45.38066261770698, 124.51451024679879 45.380656598816735, 124.51451034227468 45.38065279660631, 124.51451156956263 45.38064909346303, 124.51451387383757 45.380645654812824, 124.51451715216321 45.380642634266266, 124.5145179402391 45.38064204855976, 124.5145199473801 45.380640710002034, 124.51456379675757 45.380614486708026, 124.51456552406448 45.38061354037053, 124.51467410002314 45.380559149904656, 124.51467780617422 45.38055678963591, 124.51468059885678 45.38055425281968, 124.5146826306395 45.38055138793821, 124.51468514307808 45.38054529703723, 124.5146868590295 45.38054222325087, 124.51468934341372 45.38053942233056, 124.51469251249895 45.38053698867619, 124.51469311981096 45.38053660072178, 124.51469484766558 45.380535590824685, 124.5147050342757 45.38053015137076, 124.51470705316392 45.380529177003055, 124.51470806145694 45.38052873886121, 124.51471244882373 45.38052721982577, 124.51471716657704 45.38052631790771, 124.51472204176922 45.38052606617035, 124.51472436700749 45.38052612144709, 124.51473157654037 45.380526464812085, 124.51473617895984 45.38052602577958, 124.51474067584024 45.38052490156211, 124.51474519978831 45.38052305154553, 124.5148580245055 45.38046272019196, 124.51486106178257 45.380460624022966, 124.51486408078554 45.38045765648153, 124.51486585936237 45.38045483840307, 124.51486681029097 45.38045180508147, 124.51486688244762 45.380448699029614, 124.51486603798419 45.38044551359436, 124.51486432033992 45.380442401914195, 124.51486194685722 45.38043930625429, 124.51485970551984 45.380435297796325, 124.5148584356532 45.38043186964701, 124.51485782292559 45.38042965575848, 124.51485773727508 45.380429193717106, 124.5148575797684 45.38042565505441, 124.51485840857076 45.3804221631636, 124.51486019159128 45.38041885324915, 124.514862859792 45.38041585346939, 124.51486590992968 45.3804130750277, 124.51486896026414 45.38040945157009, 124.51487037582491 45.380406557622045, 124.51487099013914 45.380403293657494, 124.51487075733998 45.38039973935557, 124.51486146648341 45.38035971535833, 124.51486119223365 45.38035805023282, 124.51486069264489 45.3803529523049, 124.51485944645788 45.38034842350584, 124.51485898653175 45.38034457720592, 124.51485899562535 45.38034430341074, 124.51485909806377 45.38034306036044, 124.51486105085898 45.38032824433918, 124.51486081238649 45.38032468768686, 124.51486080821019 45.380323053990516, 124.5148608577474 45.38032225405393, 124.51486147856578 45.38031901947903, 124.51486291837958 45.380315917172396, 124.51486336807527 45.38031518186168, 124.51486438131285 45.38031371247923, 124.51488387575436 45.38028843061186, 124.51488536716333 45.38028672921572, 124.51488616496279 45.38028592302278, 124.51488990231117 45.38028292114014, 124.5148909328023 45.380282258828224, 124.51489299902606 45.38028106425437, 124.51492420434865 45.38026487192788, 124.51492752624566 45.380262357456274, 124.51492972737722 45.380259850063766, 124.51493122219448 45.38025706477272, 124.51493193355408 45.380254129421054, 124.51493183519399 45.38025115237656, 124.5149309307458 45.380248243539775, 124.51492925359899 45.38024551029688, 124.51492686566932 45.380243053551276, 124.5149238551104 45.38024096399714, 124.5149203330647 45.38023931877566, 124.51491638399398 45.38023816531528, 124.51491159451702 45.38023746597142, 124.51490922288282 45.380237352297705, 124.51490670672432 45.38023714289417, 124.51490577306166 45.38023703185083, 124.51490089063765 45.38023609265103, 124.51489636703079 45.380234493178385, 124.51489238000383 45.38023229628687, 124.51488908623357 45.38022958830704, 124.51488661515413 45.380226475653465, 124.51488506387066 45.38022308064308, 124.5148844933431 45.38021953668844, 124.51488492599118 45.38021598305513, 124.51488634481312 45.38021255938899, 124.51488869405372 45.3802094002286, 124.51489188139568 45.38020662971832, 124.51489578158696 45.38020435672989, 124.51489656748578 45.38020398454197, 124.5148987300474 45.38020306638239, 124.514941548593 45.380186863956425, 124.51503812669537 45.38014706432846, 124.515084791181 45.38012921040033, 124.51508780047692 45.38012763391572, 124.51510746686503 45.38011349286408, 124.51510916850557 45.38011237592853, 124.51511011998856 45.380111806149685, 124.51511427882585 45.38010977883931, 124.51511537099582 45.38010935239767, 124.51511713345982 45.38010872572635, 124.51512569213705 45.380105969717775, 124.51513018708684 45.380103817287, 124.51513318810755 45.38010164320167, 124.51513554892149 45.38009906519686, 124.5151371420126 45.380096209728315, 124.51513795153497 45.38009300392682, 124.5151379376084 45.380087156118535, 124.51513838207609 45.38008378311653, 124.51513971578669 45.38008052860907, 124.51514189146319 45.38007750796074, 124.51514483198291 45.38007482824633, 124.51514843311126 45.380072584455355, 124.51514929879721 45.38007213991565, 124.5151512538308 45.380071229739556, 124.515180387619 45.38005898119659, 124.51526993256859 45.38001187684389, 124.51527106854286 45.38001131254112, 124.51536664499078 45.379966527818794, 124.51536849343182 45.37996573907496, 124.51556410349907 45.3798900507484, 124.51565890206388 45.379850815715514, 124.51566164484312 45.379849832126936, 124.5156720108717 45.37984665352123, 124.5157820493242 45.379803975834584, 124.51579069241488 45.37979972181507, 124.5157931029637 45.37979867064897, 124.51581544187877 45.37979009956087, 124.51590199949537 45.3797537354305, 124.5159031181337 45.37975329194354, 124.51596957566763 45.379728473368175, 124.51621713901459 45.37962998046863, 124.51630330892613 45.37959871342588, 124.51637683375145 45.37956676307694, 124.5163897023195 45.37955974114901, 124.51639207442902 45.37955859144896, 124.51639328299586 45.3795580738881, 124.51639850067079 45.37955637318929, 124.51639984291326 45.379556059315014, 124.51640131857407 45.379555748732436, 124.51640714344258 45.37955465648417, 124.51641155848306 45.37955316624225, 124.51641564964135 45.37955101701491, 124.51641650970983 45.37955042027428, 124.51641884987947 45.379548983202156, 124.5164212960234 45.3795476564495, 124.51642349044856 45.37954658997786, 124.51643427594405 45.37954191422921, 124.51643819167313 45.379539470671816, 124.5164409185693 45.37953692545956, 124.51644502685208 45.37953126207668, 124.51644851157366 45.379527631289044, 124.51644912818107 45.37952713264148, 124.51645241715187 45.37952490922229, 124.5164612567784 45.379519920540204, 124.51646421940639 45.37951847786521, 124.51647013471296 45.379516012536314, 124.51647350431863 45.3795148350123, 124.51647571634997 45.379514200392464, 124.51647851739422 45.37951352729953, 124.51653735378089 45.37950202384334, 124.51653900064507 45.37950174297685, 124.5165429628607 45.379501164595446, 124.51654838728595 45.37949980354774, 124.51655118754455 45.379498773737936, 124.51665567165989 45.379453973115226, 124.51677579144211 45.37939919016557, 124.51678087887095 45.37939617850724, 124.51678911869936 45.37938985996991, 124.51679161053792 45.379388190296574, 124.51679444680704 45.37938653120513, 124.5167974709385 45.37938500985332, 124.51689599235505 45.379342715228454, 124.51698228534215 45.37930718075878, 124.51705590910883 45.379271429190965, 124.51705788471835 45.37927056071223, 124.51714760503907 45.379235018035025, 124.51731428712473 45.379162611569065, 124.51752055494947 45.379079880877754, 124.51765718530243 45.37902201821475, 124.51765888445426 45.37902135919679, 124.51766268489746 45.37902001511575, 124.51780270210716 45.37896282498179, 124.51788997994113 45.37892530998833, 124.51801250813577 45.37887606648566, 124.51809043240722 45.37883785354012, 124.51809341905786 45.378835948499585, 124.51812890260317 45.378809984925674, 124.51813074824557 45.37880876212723, 124.51813267056376 45.378807609640184, 124.51813467906713 45.3788065217633, 124.51820579132215 45.37877181900538, 124.5182165333135 45.37876701943532, 124.51830275318565 45.37872593549109, 124.51853516217922 45.378619783378156, 124.51859319646427 45.37859364088231, 124.51862516309042 45.37857799003779, 124.51878671549224 45.37850095070692, 124.51900040756055 45.378402552953915, 124.51910296217254 45.37835133002087, 124.5192215003187 45.37829455046215, 124.51933799548604 45.37823579928968, 124.51945247790364 45.378175237355364, 124.51948952289278 45.378157364713275, 124.5194910536578 45.3781566819362, 124.51955244552637 45.378131402947716, 124.5195544628683 45.37813065532428, 124.51955489952005 45.37813051065203, 124.51955979430666 45.378129299376816, 124.51956866680376 45.37812779629385, 124.51957338023357 45.37812640855361, 124.51957611761019 45.378125269832246, 124.52001912597846 45.37791207612013, 124.52002429212115 45.37790868176998, 124.52006894533118 45.37787015985681, 124.520071537844 45.37786721519205, 124.52007215396881 45.377866271974376, 124.52007359286343 45.37786277497426, 124.5200739429229 45.37785963829278, 124.52007338516191 45.377856516575875, 124.52007194265614 45.37785353897458, 124.5200696750849 45.37785082867814, 124.52006667626227 45.377848497816835, 124.52006257839729 45.37784638980218, 124.52006128060503 45.3778459204859, 124.52005582759357 45.37784456743506, 124.5199600758086 45.37782974145281, 124.5199551435485 45.377829389467315, 124.51995295861465 45.37782943615977, 124.51995089657517 45.37782964357554, 124.51994822082504 45.37783011852868, 124.51994639667107 45.377830601687876, 124.51994375137596 45.377831557219224, 124.51993974043214 45.37783340966571, 124.51974644704839 45.37793817921871, 124.51968843816823 45.37797689587202, 124.51968608998531 45.37797828448713, 124.51958318052918 45.378032064642255, 124.51958201676906 45.37803263816643, 124.51948655288838 45.37807695056555, 124.51926523878612 45.37819256017796, 124.51895576573753 45.37834182368724, 124.51885733600948 45.378388016952776, 124.51875557694243 45.37843339804791, 124.51854392633265 45.37853574551377, 124.51833252962693 45.37863393268036, 124.51800485116486 45.37878133817512, 124.51788827304023 45.378830591189946, 124.51764913791556 45.378927241627125, 124.51741318341709 45.379025127183404, 124.51735472776323 45.379048835823426, 124.51713654882221 45.379143049448984, 124.51702059516592 45.379188891054795, 124.51666729599987 45.379340515600646, 124.51666485665476 45.37934143860436, 124.51666254624834 45.37934220213818, 124.51665959246212 45.37934302453024, 124.51664426722242 45.379346531939895, 124.51664106366314 45.37934710654422, 124.51661977788656 45.37934990502533, 124.51661511814727 45.37935115801202, 124.51661168624187 45.37935267596842, 124.51660815976224 45.3793550544914, 124.51660514239154 45.37935782258788, 124.51660359420696 45.37935911265044, 124.51660278791668 45.379359723833915, 124.51659921200591 45.37936196943435, 124.516598257924 45.37936246372945, 124.51659628996433 45.37936338752116, 124.51643744915175 45.37943068229698, 124.51643632756041 45.37943131832225, 124.51643330272206 45.37943279387776, 124.516430159615 45.379434101726886, 124.5164268652659 45.379435255589875, 124.51639920037763 45.37944325000936, 124.51639681342881 45.37944384417846, 124.51639572724733 45.37944407255361, 124.51639076224059 45.37944474817464, 124.51638570567518 45.37944472090154, 124.51638075592325 45.37944399180425, 124.51637610716647 45.3794425894857, 124.51637194177832 45.37944056895967, 124.51636842316955 45.37943800949263, 124.51636568937695 45.37943501149395, 124.5163638476488 45.3794316925769, 124.51636354138772 45.379430923466444, 124.51636297908087 45.37942918399656, 124.5163372303603 45.37932618931401, 124.5163369276408 45.37932453038384, 124.5163368370623 45.37932374792179, 124.51633689203013 45.37932040657978, 124.51633782278957 45.379317130026934, 124.516339597236 45.37931403127989, 124.51634215416418 45.37931121722227, 124.51634540537906 45.379308784918074, 124.51634923873806 45.37930681826359, 124.51635019633011 45.37930641715614, 124.51635228601906 45.37930563189398, 124.51668879816886 45.37919297699391, 124.51708664798582 45.379032435846206, 124.51748452802696 45.37886690178052, 124.51786066253946 45.378719517550586, 124.51824504601035 45.378543271733555, 124.51869129102174 45.378316663453404, 124.51916438229222 45.37808610628752, 124.51958557482281 45.37787401684218, 124.51994840946995 45.377696582531954, 124.52021180535272 45.37757947689158, 124.52021407218174 45.37757857954581, 124.52021520576626 45.3775781828988, 124.52022006402524 45.37757689792946, 124.52022519060104 45.37757633185132, 124.52022645540083 45.377576284020726, 124.52022905331467 45.377576279069615, 124.52039528906064 45.377581930169235, 124.52039818800401 45.37758214614675, 124.52039960047502 45.377582309291775, 124.52040519976451 45.377583429918126, 124.52040652308784 45.377583814307414, 124.52040915042814 45.37758470434507, 124.52059280561814 45.37765628864788, 124.52059538739242 45.377657442364864, 124.52059785317259 45.377658696164445, 124.52060022058889 45.37766005898657, 124.52083239853687 45.37781091759567, 124.52114345573469 45.37800695044902, 124.52154070922883 45.3782524890797, 124.52180543750873 45.37842294093861, 124.52210704440405 45.37861169495129, 124.52237514211185 45.37878091238716, 124.52260539673215 45.378910851236085, 124.52301623069971 45.37916072657516, 124.52302043902588 45.37916276990602, 124.52305564947731 45.37917655636327, 124.52305793581523 45.37917756654323, 124.52306013394521 45.37917865587888, 124.52306210253018 45.37917973651941, 124.52308021307098 45.379190721299544, 124.52308418446027 45.37919254501044, 124.52336603426886 45.37930101120839, 124.52336823609072 45.37930196349965, 124.52336915832998 45.37930240915064, 124.52337309745145 45.37930475825223, 124.52337628584236 45.379307617598954, 124.52337859324871 45.379310870379406, 124.52337992540717 45.37931438370941, 124.52338022789552 45.37931801406069, 124.52337948835621 45.37932161312433, 124.52337773700103 45.37932503386953, 124.52337504537708 45.37932813655027, 124.52337152344384 45.3793307944142, 124.52337068155164 45.3793313130708, 124.52336907099784 45.37933222689456, 124.52336243891178 45.37933568757791, 124.52335896274536 45.37933815380711, 124.5233566617836 45.3793405282126, 124.5233548091764 45.379343348234265, 124.52335391946349 45.379345325631974, 124.5233220467333 45.379434569212755, 124.52332132681705 45.379436238435474, 124.52332098468574 45.379436912381934, 124.52331887570976 45.37944006471362, 124.5233159439391 45.37944287136298, 124.52331229937522 45.379445227023076, 124.52330807876386 45.379447043308296, 124.52330344046476 45.37944825207069, 124.52329855850911 45.37944880795682, 124.5232936160707 45.37944869010956, 124.52328879859233 45.37944790295059, 124.52328428682833 45.37944647601453, 124.52328025006251 45.37944446284078, 124.52327683975635 45.379441938964675, 124.5232762138768 45.379441375241726, 124.52327485937467 45.379440032906594, 124.52326149256747 45.37942541245097, 124.52326028193566 45.379424408559316, 124.52325804559163 45.37942294482018, 124.52325408476291 45.37942087051959, 124.52291000368427 45.37926804385562, 124.52290776911248 45.37926692905705, 124.52256545791997 45.379075939847326, 124.52256421099821 45.37907519721636, 124.52222665506879 45.37886074994973, 124.5219089541046 45.37864824789806, 124.52160692502821 45.378427441007034, 124.52138911979057 45.378300994392234, 124.52138774150923 45.37830013357889, 124.52138641078174 45.378299240038224, 124.52138513308722 45.378298318379585, 124.52121499851425 45.37816646024397, 124.52121239576772 45.378164851041895, 124.52088791807047 45.37798726760884, 124.52085269717709 45.3779715788863, 124.5207589260796 45.37792810229311, 124.52075753183803 45.3779274076913, 124.52071191944115 45.377903031785046, 124.52071001485382 45.37790190698556, 124.52069314356478 45.377890915094326, 124.5206913723621 45.3778896406959, 124.52068190090105 45.377882113112506, 124.52067863887325 45.37788010613018, 124.52067667009149 45.377879138359, 124.52061719664513 45.377853235706375, 124.5206127425233 45.377852037817206, 124.52060865159162 45.37785154120168, 124.5206044609331 45.37785160106525, 124.52060036246827 45.37785222006059, 124.52059650500962 45.37785337571237, 124.52059302862254 45.37785502605864, 124.52059005953231 45.37785711117641, 124.5205877055468 45.3778595553549, 124.52058605213833 45.37786226984705, 124.52058515934215 45.377865156089946, 124.52058505957535 45.37786810928453, 124.52058575646099 45.377871022202136, 124.52058722469494 45.37787378907359, 124.52058950946699 45.377876422988386, 124.52059261830863 45.3778788965839, 124.52059497915509 45.377880331276415, 124.5206831626008 45.377927372706004, 124.5206849596037 45.37792842587358, 124.52077318689014 45.37798514340084, 124.52083797537672 45.378023554277625, 124.5208421503309 45.37802549108035, 124.52084630285646 45.37802674854466, 124.52085243677438 45.378027651732836, 124.52085613852088 45.37802794888562, 124.52086189446828 45.378028896298304, 124.52086718698897 45.37803075121547, 124.52086824610947 45.37803123760005, 124.52087056724753 45.37803244028326, 124.5209983077366 45.37810680558647, 124.52100028828515 45.37810808809028, 124.5210009599313 45.378108571409115, 124.52100448678111 45.37811175801503, 124.52100691547753 45.378115419004914, 124.52100922377078 45.37812025028323, 124.5210115891342 45.37812351495773, 124.52101449957044 45.378126243532385, 124.52107984760214 45.378174828200606, 124.52116527151583 45.378231188234565, 124.52119247846298 45.378248224799165, 124.52119669829959 45.37825029053794, 124.5212009784426 45.378251661272266, 124.52120585654764 45.37825244708724, 124.52120774042947 45.37825253879852, 124.52121234845751 45.37825243279907, 124.52121476333939 45.378252457801814, 124.52121593127134 45.37825250890688, 124.52122069707474 45.378253039381484, 124.52122523615002 45.37825419231224, 124.52122938637342 45.37825592651951, 124.5212303320316 45.37825641226899, 124.52123208118186 45.37825739629647, 124.52125962937838 45.37827433944218, 124.52126396269229 45.378276129157804, 124.52126819810354 45.37827718539841, 124.52127490972099 45.3782782012592, 124.52127966982073 45.37827927435138, 124.52128404207285 45.37828098044777, 124.52128458810769 45.378281245814826, 124.5212863139715 45.378282162896596, 124.52134243929623 45.378314701934045, 124.52134439415738 45.37831596058404, 124.52134528918315 45.37831659993808, 124.52134859349903 45.37831951001964, 124.52135097614743 45.37832283747204, 124.52135233488416 45.37832643950768, 124.52135253297496 45.37832732672903, 124.52135271256854 45.37832830509806, 124.52135336254024 45.37833281446329, 124.5213546243266 45.3783358224576, 124.52135667544889 45.3783385887932, 124.5213595854836 45.37834123095925, 124.5213618509668 45.37834279236418, 124.52140404927904 45.37836828666381, 124.52144835941867 45.37839350262721, 124.52151388037774 45.378433597548025, 124.52157440464042 45.37847194903248, 124.52164094168725 45.37851700995406, 124.52164207504048 45.37851782786561, 124.52177086449356 45.378616880725005, 124.52189395212393 45.378707287227584, 124.52208794952728 45.378833632341184, 124.52215193482115 45.378874324472584, 124.52220808537028 45.37890497023154, 124.52221055304467 45.37890650626857, 124.52226320889137 45.37894380930126, 124.52238288263638 45.3790233186825, 124.52245031513588 45.37906097609154, 124.52245200393764 45.379062007110775, 124.52253930911007 45.37912021056682, 124.52261508169984 45.37916888625557, 124.52266215238545 45.37919578379363, 124.52270713295351 45.37922289415312, 124.52275497813261 45.37924925782618, 124.52279734412389 45.37927197926546, 124.52284070886506 45.37929415142088, 124.52288525726391 45.3793159176306, 124.52294986182784 45.37934512162906, 124.52296683478276 45.37935123680189, 124.52297330211314 45.37935311941358, 124.52297605336538 45.37935405992231, 124.52301428943761 45.37936918770148, 124.52307889288083 45.379393050135896, 124.52316177436495 45.37942522765569, 124.52322470603497 45.37945229425454, 124.52322657553228 45.37945318107626, 124.52322746480196 45.379453644376916, 124.52323082312408 45.379455739277184, 124.52323155159395 45.379456281260985, 124.52323308523646 45.379457532797886, 124.5232550673478 45.37947723349687, 124.5232568480334 45.3794790482303, 124.52326214894035 45.3794852290434, 124.523263538968 45.379487086766034, 124.523314377381 45.379565858282355, 124.52331702592252 45.37956892897756, 124.52332011519235 45.3795713813646, 124.52332362481927 45.37957324043829, 124.52332758901692 45.37957457040335, 124.52333184936903 45.37957531811203, 124.52333623562606 45.37957545368478, 124.52334057250471 45.37957497170391, 124.52334468669775 45.37957389143003, 124.52334841379486 45.379572256032674, 124.52335160485548 45.37957013086482, 124.5233541142928 45.37956761893659, 124.5233561746136 45.37956428514115, 124.52335717924636 45.37956136129758, 124.52337018214689 45.37948140484829, 124.52337050073972 45.37947996444931, 124.52339127471065 45.37940590062924, 124.5233922000445 45.37940349314259, 124.52339335156208 45.37940115366444, 124.52339474043568 45.37939885949659, 124.52342288815474 45.37936006127137, 124.52342415798515 45.37935850726919, 124.52342483761478 45.379357763857975, 124.5234280021266 45.379354960731526, 124.5234288772565 45.37935432693594, 124.52343074050003 45.37935310565929, 124.52348756130114 45.379319423145446, 124.52349099152471 45.37931685262041, 124.52349349162466 45.37931415404148, 124.52349509868833 45.37931133383699, 124.52349589335896 45.37930834675991, 124.52349584503814 45.37930530782754, 124.52349495558643 45.37930233405003, 124.52349326549918 45.37929955022284, 124.52349060155333 45.379296818134875, 124.52348394552618 45.379292117632346, 124.52348000133932 45.37928995172081, 124.52347612325406 45.37928838885683, 124.52330579583654 45.37923771636983, 124.52330339527182 45.37923689553983, 124.52308886088558 45.379153510548214, 124.52308647348717 45.37915245758714, 124.52308418264982 45.37915131865286, 124.52308197679133 45.3791500882966, 124.52291710236953 45.37904722283886, 124.52263419358123 45.37888673423768, 124.52250141840953 45.378805967158414, 124.52223203663654 45.378636356437895, 124.52200559985035 45.378496078908505, 124.5216999172189 45.37830128129935, 124.52138568408614 45.37810176823321, 124.52110626775327 45.37791475492672, 124.5208196599341 45.377753040008486, 124.52081822856285 45.377752169146184, 124.5205218034547 45.37755786093325, 124.52051816518623 45.37755621250271, 124.52051446929696 45.377555132335665, 124.52051026919777 45.377554435707395, 124.52050740612532 45.37755421822842, 124.52042259213644 45.37755133513193, 124.52041970085835 45.377551120039364, 124.52041829193675 45.377550957614616, 124.52041270652957 45.37754984235411, 124.52041138610143 45.377549459798736, 124.52040879102957 45.377548584425824, 124.52030568100936 45.377508622538144, 124.52030406587065 45.37750818374607, 124.52030145420542 45.37750768448939, 124.5202994509193 45.37750746494931, 124.5202967471699 45.3775073670995, 124.52029472337306 45.377507451782655, 124.52029205162208 45.37750776002135, 124.52029021027626 45.37750812318639, 124.52028750665323 45.37750889492818, 124.5202833470226 45.377510455766625, 124.52021570837333 45.37754052090968, 124.52021345630473 45.37754141302937, 124.52021232816307 45.37754180838547, 124.52020749907938 45.37754309024863, 124.52020240288499 45.3775436615228, 124.52020114497653 45.37754371166338, 124.5201986443114 45.37754372488277, 124.5201537471353 45.37754241108616, 124.52015185405294 45.37754253978658, 124.52014906853071 45.37754294767852, 124.52014716002184 45.37754339540346, 124.52014438205256 45.3775443152419, 124.5201401522593 45.377546139428645, 124.51979271399003 45.37772333718154, 124.51943558415634 45.37789940896825, 124.51907463643826 45.37808337073387, 124.51869369178547 45.37826835210902, 124.51831447527564 45.378458958279296, 124.5179310112122 45.37864562794005, 124.51792923512271 45.378646418495336, 124.51753543854325 45.378806119355396, 124.51715004019977 45.37895589237135, 124.51679032734563 45.37910815282602, 124.51653897457349 45.379208255457826, 124.51653736444399 45.379208844477134, 124.51631062334458 45.37928470983525, 124.5161419660683 45.37934246171983, 124.51602017823859 45.37939796373859, 124.51601873454513 45.3793985750428, 124.51594286960817 45.37942833925663, 124.5156840431196 45.37952497023709, 124.51568016440275 45.379526908616874, 124.51567636810026 45.37952936260713, 124.5156746068264 45.37953040226479, 124.51567279123951 45.37953137948598, 124.5156708944198 45.37953230781017, 124.51544797726058 45.37963118428404, 124.51544580882408 45.379632045091775, 124.51522597331417 45.3797096204194, 124.51504118854135 45.37979164830005, 124.51488162385212 45.379867980300396, 124.51487999033901 45.379868699831874, 124.51467244975863 45.37995261522207, 124.51467072277772 45.37995325300444, 124.51446774372704 45.380021383453844, 124.51396629254143 45.380206810716416, 124.5136591860546 45.3803287376946, 124.5135969971121 45.38036192144016, 124.5135948999539 45.38036292895341, 124.51359382814253 45.38036339061636, 124.51358913186796 45.38036497494891, 124.51358407716633 45.380365854902614, 124.5135788742624 45.380365993880254, 124.51357762070157 45.3803659370325, 124.5135750313006 45.38036572562975, 124.51337460496204 45.38034200167775, 124.51337165758908 45.38034152481978, 124.51337023463792 45.38034123110481, 124.5133646818789 45.38033956072411, 124.5133633965818 45.38033903974391, 124.5133608690983 45.3803378696558, 124.51298002428868 45.380137838771745, 124.51297569110308 45.38013607795789, 124.51297139980855 45.380134986311916, 124.5129671398475 45.38013453239219, 124.5129628360826 45.380134672883734, 124.51295865390523 45.38013540238757, 124.51295475403411 45.38013669286922, 124.51295128633843 45.38013849473658, 124.512948384081 45.38014073874413, 124.51294615879237 45.38014333865719, 124.51294469599031 45.380146194561654, 124.51294405188942 45.380149196706334, 124.51294425124215 45.3801522297222, 124.51294528638738 45.3801551770507, 124.51294710447972 45.380157905817846, 124.51295011855399 45.380160772353875, 124.51295313231816 45.38016280422999, 124.51334281969511 45.38036766090901)), ((124.5010288229027 45.375244018663864, 124.50102871573768 45.37524646538979, 124.50103380891579 45.37536310146573, 124.50105390146467 45.37545668403437, 124.50105529207201 45.37546018907137, 124.50105737055351 45.375463180096126, 124.50106010033652 45.37546566464629, 124.50106348618213 45.375467709145184, 124.50106738838103 45.37546922923104, 124.50107164591847 45.375470162181216, 124.5010766883125 45.37547051141517, 124.50107807608073 45.37547045435409, 124.50108356065678 45.37546967540019, 124.5010867015303 45.37546888645414, 124.50113045677251 45.37545544736765, 124.50113287482701 45.375454805223, 124.50113396976028 45.37545455827111, 124.50113901943183 45.375453805474926, 124.50114418074007 45.37545378393646, 124.50114924270562 45.37545449453616, 124.50115399840968 45.375455908226726, 124.50115825345287 45.375457967220555, 124.50116183390088 45.37546058735187, 124.50116459339533 45.37546366151718, 124.50116641913586 45.37546706405336, 124.50116671500831 45.375467847013084, 124.501167252145 45.375469625394544, 124.50117515358522 45.375504311177394, 124.50125998065242 45.37582466021981, 124.50128500810388 45.37592472773303, 124.5013320806473 45.37608879184503, 124.50133329489981 45.376091458270935, 124.50133553805506 45.37609476426387, 124.50136556745844 45.37612908884876, 124.50136681846 45.376130696850055, 124.50136737689404 45.37613151044521, 124.5013691521605 45.37613495308724, 124.50136946522879 45.37613582953144, 124.50136997105066 45.37613762840723, 124.50137987646471 45.376185551249435, 124.50138123999963 45.37618908234825, 124.50138329630857 45.37619209314833, 124.50138601036937 45.376194595766464, 124.50138938749616 45.37619665899398, 124.50139381965235 45.37619840710395, 124.50139512696298 45.37619874717751, 124.50140060430554 45.37619958069307, 124.50140390514082 45.376199740050275, 124.50149835519464 45.37619948260936, 124.50150201401271 45.37619910989927, 124.50150446008928 45.37619894494004, 124.50150567166459 45.37619890456271, 124.50151057456657 45.37619907415612, 124.50151174784699 45.376199195184846, 124.50151420070799 45.37619953539308, 124.50179961796692 45.376249464579935, 124.50180311767261 45.37624978787575, 124.50196838325496 45.3762579603588, 124.50197076890143 45.376258158172575, 124.50197192862386 45.37625829358143, 124.5019765683001 45.37625915752853, 124.50198089659406 45.376260618172545, 124.50198190443969 45.37626104461979, 124.50198390344288 45.37626198335293, 124.50202121214036 45.376281349725836, 124.50202332014466 45.3762825716716, 124.5020241631949 45.3762831161434, 124.50202791342784 45.37628614796565, 124.50203061432259 45.376289691191644, 124.50203213090421 45.37629356875192, 124.50203333891089 45.376298948168554, 124.5020571152997 45.37638318631561, 124.50212502114799 45.37664848788502, 124.502126398015 45.37665171795259, 124.50212729298276 45.376653210574275, 124.50212818235555 45.37665493394951, 124.50212894298154 45.376656680192475, 124.50212957882455 45.376658458394594, 124.50215508936157 45.376749064203885, 124.50218196556811 45.37684263460024, 124.50220277293985 45.37692298975131, 124.50220313223711 45.376925035512166, 124.50220332361395 45.37692708119729, 124.50220334858876 45.37692914176467, 124.50219473367345 45.37705357871618, 124.50219377525423 45.37711081168187, 124.50219425245852 45.377113530564934, 124.50219571233878 45.377116948968094, 124.502197729579 45.377119607505875, 124.5022004633088 45.377121954196724, 124.50220379410545 45.377123879923914, 124.50220759396812 45.37712531068268, 124.50221211277159 45.3771262760692, 124.50221641851076 45.37712667317638, 124.50221688734668 45.37712666753999, 124.50222112991548 45.37712633079153, 124.50222354447149 45.377125879129686, 124.50222697018857 45.37712497519997, 124.5022293277928 45.377124443423114, 124.50223040549712 45.37712424035947, 124.5022352839369 45.37712367053445, 124.50224022673265 45.37712377423968, 124.50224504843622 45.37712454758423, 124.50224956814239 45.37712596155308, 124.50225361627666 45.37712796309559, 124.50225704095739 45.37713047711608, 124.50225971369414 45.3771334092912, 124.50226153420842 45.377136649608836, 124.50226184252122 45.37713740519896, 124.50226241052265 45.37713910325011, 124.50228691590787 45.37723241234591, 124.50230880948703 45.37732492797787, 124.50233425382481 45.377412006541995, 124.50233628604299 45.37741614144136, 124.50240299154581 45.37750383544758, 124.50240584958013 45.37750671486585, 124.50240908214704 45.377508986645445, 124.50241266765606 45.377510669939916, 124.50241665023186 45.37751182790619, 124.50242087682537 45.37751241604405, 124.50242518501182 45.37751241175182, 124.5024294092289 45.377511815194474, 124.5024333871435 45.37751064929719, 124.50243696588502 45.37750895886522, 124.50244000792601 45.3775068088601, 124.50244239636075 45.37750428190664, 124.5024440394045 45.377501475113, 124.50244487391532 45.37749849634391, 124.50244486786741 45.37749548173446, 124.50244386140228 45.37749198518574, 124.50244235130886 45.37748924099239, 124.50237986373979 45.37740704658214, 124.50237836132199 45.377404672805966, 124.50237711075874 45.37740223778881, 124.5023761061662 45.37739972538145, 124.50235315430682 45.37732077108171, 124.50234531333408 45.377287776598955, 124.50234502713664 45.37728607412508, 124.50234495869498 45.37728538879384, 124.50234509257484 45.37728189535342, 124.50234618215991 45.377278486050585, 124.50234818634408 45.377275289506045, 124.50235102951653 45.37727242631386, 124.50235460441445 45.377270004491926, 124.50236047890078 45.37726673541997, 124.50236594468073 45.377262786657575, 124.50236967550379 45.377260563198234, 124.50237393902066 45.37725888137055, 124.50237857906804 45.377257802776214, 124.50238342569119 45.37725736692175, 124.50238830136882 45.37725758977157, 124.5023894316053 45.3772577188108, 124.50239171038828 45.37725805476915, 124.50242590484682 45.377264255204295, 124.50243083463597 45.37726447942709, 124.50243502218096 45.37726408375879, 124.50243906255433 45.3772631157225, 124.50244276142813 45.37726161577208, 124.5024459794211 45.37725964042878, 124.50244859527096 45.37725726412852, 124.50245051040591 45.37725457641643, 124.50245165265963 45.377251678571746, 124.50245197898911 45.377248679792004, 124.50245147709802 45.37724569307852, 124.50245016589817 45.37724283097673, 124.50244809480024 45.377240201340086, 124.50244521767746 45.3772377996045, 124.50244153853228 45.37723565884564, 124.50243882595 45.37723447876409, 124.502425351753 45.3772294444559, 124.50242331343456 45.377228595298504, 124.50242236224274 45.377228155854446, 124.50241866329095 45.37722607763394, 124.5024155718884 45.37722355411708, 124.50241319417717 45.37722067194789, 124.50241161179508 45.377217530084565, 124.50241133228472 45.37721675309953, 124.50241085782649 45.377215119960624, 124.50239785889224 45.37715672485294, 124.50237687991694 45.37707582191194, 124.50235191906896 45.37698496261508, 124.50232586535182 45.37688777406701, 124.50229697979326 45.376785180671725, 124.5022698657927 45.37668377565045, 124.50220887636326 45.37646679225457, 124.50214899328304 45.376235565697066, 124.50214775174535 45.37623276322111, 124.50214545230489 45.3762295902651, 124.50214279751425 45.376227231821865, 124.50213951827175 45.37622526907895, 124.50213575931713 45.37622379419716, 124.50213166469753 45.37622286369546, 124.50212739132176 45.37622251323143, 124.50212305835522 45.37622275876233, 124.50211373191546 45.37622459795955, 124.50210872912334 45.376225214797145, 124.5021036520778 45.37622512146004, 124.50209870171753 45.37622432164236, 124.50209407396694 45.37622284699913, 124.50208995198274 45.376220755893605, 124.50208649890399 45.376218131087214, 124.50208385139608 45.37621507646418, 124.5020834011827 45.37621441745227, 124.50208245515537 45.376212846016415, 124.50206609987188 45.376181637840546, 124.50206361640178 45.37617872378476, 124.50206082315856 45.37617654827925, 124.50205746075174 45.37617476970174, 124.50205367960814 45.376173474513074, 124.50204961787924 45.37617271003567, 124.50204542396516 45.376172504200454, 124.5020412510975 45.37617286452806, 124.50203725173859 45.376173777853275, 124.50203357201043 45.376175210806544, 124.50203034635751 45.376177111032796, 124.50202769263483 45.3761794091039, 124.50202570779975 45.3761820210568, 124.50202440833924 45.37618497900463, 124.50202382927498 45.37618826575313, 124.50202386534659 45.37619047809312, 124.5020258586811 45.37620891651022, 124.50202592733021 45.37621064417865, 124.502025908465 45.376211307194914, 124.50202532014356 45.37621480338781, 124.5020237770574 45.37621815190102, 124.50202133829039 45.37622122452198, 124.50201809722117 45.376223903601826, 124.5020141779483 45.37622608656018, 124.50200973053835 45.37622768981282, 124.50200492528022 45.37622865197215, 124.50199994616432 45.37622893619761, 124.50199498383812 45.37622853160639, 124.5019888427871 45.37622759475831, 124.50198476376443 45.376227206262556, 124.50180986742339 45.37621855754446, 124.50180766214427 45.376218380319855, 124.50180547610034 45.37621813639105, 124.50180330099823 45.37621782483267, 124.50151826470761 45.3761678127371, 124.5015158435713 45.376167296919085, 124.50151469316508 45.376167007269835, 124.5015101267527 45.376165483356516, 124.50150607560249 45.37616335546815, 124.50150269839378 45.376160706951886, 124.50150197575392 45.376160012773624, 124.50150058239622 45.376158525007945, 124.50149219055145 45.37614851934788, 124.5014910495204 45.376146997006224, 124.50149001670397 45.376145443290646, 124.5014890873521 45.376143851055446, 124.50144850576824 45.376063610253254, 124.50144795251327 45.376062378067004, 124.5014474637933 45.37606113619478, 124.50144703682186 45.37605987693616, 124.50142383563154 45.37597856636689, 124.50140138671256 45.375883304715195, 124.50139995727699 45.37587886130066, 124.50139965530663 45.37587776621582, 124.50137677973638 45.37577846002096, 124.50134688674346 45.37566981595489, 124.5013198641398 45.37556076314221, 124.50128787678769 45.375442691227725, 124.50125928005887 45.375312527036705, 124.50124970463287 45.3752552802531, 124.50124954007285 45.37525369061214, 124.50124951700917 45.375253120895884, 124.50124981885594 45.37524980232233, 124.5012509820661 45.37524657957919, 124.50125296690518 45.37524356275222, 124.50125784574244 45.375237649812156, 124.5012593491523 45.37523462330364, 124.50125994556416 45.37523155096675, 124.50125966078019 45.37522845593817, 124.50125850612729 45.37522546307582, 124.50125646774845 45.375222608218714, 124.50125361481095 45.37521999894097, 124.50124897283001 45.37521673072726, 124.50124583072564 45.375214041888356, 124.50124348264873 45.37521097671044, 124.50124201661083 45.37520765008392, 124.50124148756247 45.37520418669893, 124.50124117521005 45.37518280220004, 124.50123697440783 45.37513995419406, 124.5012369334735 45.37513800555815, 124.50123720977831 45.375133062949985, 124.50123706443127 45.375130277512454, 124.50122820778853 45.37506711534348, 124.50122717979644 45.37506375513267, 124.50122551046887 45.375060844425015, 124.50122322339882 45.37505835972148, 124.5012203075722 45.3750562269451, 124.50121686943531 45.37505452395554, 124.5012130344993 45.375053312921416, 124.5012089427622 45.375052638052786, 124.50120474359706 45.3750525239864, 124.50120059029824 45.375052974886344, 124.50119663448523 45.37505397429218, 124.50119302056916 45.37505548571956, 124.5011898804794 45.37505745399235, 124.50118732884773 45.37505980725696, 124.50118547213596 45.37506244072416, 124.50118416718293 45.3750657965997, 124.50118374996516 45.37506866943201, 124.50118542040151 45.37514825173697, 124.50118525448386 45.37515058300027, 124.50117275643903 45.37522682094063, 124.50117233956983 45.37522858742074, 124.50117207832741 45.375229432191546, 124.50117050992756 45.37523283416243, 124.50116801764781 45.3752359502259, 124.50116469999575 45.375238657219235, 124.50116380978082 45.37523925209967, 124.50116245347888 45.375240096163985, 124.5011565712176 45.375243503169024, 124.50115595823907 45.37524398477378, 124.50115436322528 45.37524551099145, 124.50115336923821 45.37524671469529, 124.50115227703508 45.37524840758211, 124.50115165730371 45.375249730044914, 124.50115127671103 45.37525093701758, 124.50115092966709 45.375256757707284, 124.50115082180886 45.375257818326205, 124.50115069270667 45.37525871522106, 124.50114961031956 45.37526237891112, 124.50114747602015 45.3752658055459, 124.50114438213905 45.37526884688735, 124.50114353277102 45.37526952093434, 124.50114198400507 45.37527064707733, 124.50113221674349 45.375277155823554, 124.50112905582765 45.375280173812875, 124.50112710306338 45.37528315514242, 124.50112525651254 45.37528808157948, 124.50112487904187 45.375288795648984, 124.50112573432551 45.37529038546423, 124.50112586639402 45.37529073245285, 124.5011264049064 45.37529249653853, 124.50115108213002 45.3753990815617, 124.50115135748274 45.37540076825426, 124.50115143341371 45.37540156158586, 124.50115130328277 45.37540495220386, 124.50115027259095 45.37540826536054, 124.50114837796701 45.37541138331188, 124.5011456867427 45.37541419525109, 124.50114229455963 45.37541660124655, 124.50113832197007 45.37541851579318, 124.50113733482002 45.375418900744755, 124.5011351743179 45.37541965170946, 124.50112537979497 45.3754226600262, 124.50112295011874 45.375423304790004, 124.50112185153505 45.375423552157265, 124.50111677708942 45.37542430507505, 124.50111159145645 45.37542431972584, 124.5011065086094 45.3754235955051, 124.50110173827989 45.375422162296104, 124.50109747730458 45.37542007923688, 124.50109390150253 45.375417432280024, 124.50109115842085 45.375414330646, 124.50108936124614 45.375410902316474, 124.50108908175899 45.37541013778672, 124.5010885528691 45.375408298923524, 124.50107846217242 45.37536054381939, 124.50107819527798 45.37535843523303, 124.50107552482378 45.37529594725031, 124.50107557616649 45.375294143162584, 124.50107561193084 45.37529378479177, 124.5010764799236 45.37529023272344, 124.50107673082813 45.37528977843764, 124.5010763898675 45.37528924641169, 124.50107525885524 45.37528580363724, 124.50107520375138 45.375285504636494, 124.50107500266178 45.37528372876569, 124.50107365736935 45.37525224916036, 124.50107371710759 45.375250363590226, 124.5010742284256 45.37524555225233, 124.50108022010069 45.3750463355595, 124.50104823385522 45.3747362336733, 124.50104742640514 45.37473335856858, 124.50104561840934 45.37473002580191, 124.50104333216314 45.37472747797113, 124.50104036342282 45.374725277757626, 124.50103684270425 45.37472352802285, 124.50103290530677 45.374722296008414, 124.50102870254265 45.37472162906, 124.50102439592142 45.37472155280798, 124.5010201509441 45.37472207018267, 124.50101613074241 45.37472316130174, 124.50101248981065 45.37472478423397, 124.50100936806685 45.37472687661165, 124.50100688548011 45.374729358024204, 124.50100513745218 45.374732133114854, 124.50100413511434 45.37473527067475, 124.50100391060472 45.37473878990102, 124.50103553259723 45.375046413532075, 124.50103559338345 45.3750481021228, 124.50102979376811 45.37523738699152, 124.50102963272595 45.3752390531477, 124.5010288229027 45.375244018663864)), ((124.50016782898616 45.372849736204735, 124.50016781217803 45.372851805412274, 124.50016851011749 45.37285572263169, 124.50017157124928 45.37286407958328, 124.50017235781122 45.37286779883262, 124.50017237037501 45.37286800330514, 124.50017237726631 45.372869438604226, 124.50016887636957 45.37293698786636, 124.50016904768833 45.37293821331674, 124.50016959130379 45.372940087699604, 124.5001702167873 45.372941451693556, 124.50017131408136 45.372943202757426, 124.50017227865193 45.37294437141759, 124.50017402439335 45.37294602676927, 124.50017722523984 45.37294847800139, 124.50021513840635 45.372973531796, 124.5002166825893 45.37297464451142, 124.50021740659493 45.372975213497504, 124.50022005780042 45.37297769963603, 124.50022206196319 45.37298047042872, 124.50022246914095 45.37298117879644, 124.50022320905919 45.3729826453312, 124.50023947106187 45.37301991015232, 124.50024159531681 45.37302326561682, 124.50024429649162 45.3730260295433, 124.50024798257503 45.3730285126423, 124.50024913284355 45.37302907388593, 124.50025416829733 45.37303085001736, 124.50025735447566 45.37303159307672, 124.5003127508551 45.373041582655475, 124.50031478724023 45.373042014311324, 124.50031577510289 45.37304225576264, 124.5003196600323 45.373043469143, 124.50032320556873 45.37304511992738, 124.5003240269893 45.373045575886614, 124.50032552719993 45.373046476898374, 124.50034794787165 45.37306103221575, 124.5003516223276 45.373062743991824, 124.50035531381924 45.373063930097544, 124.50035791351853 45.37306451788852, 124.50063004745299 45.37311438100198, 124.5006325552066 45.373114939143036, 124.500633644879 45.373115225951544, 124.50063835044307 45.37311687106429, 124.50064247867381 45.37311916016371, 124.50064585478756 45.37312199633245, 124.50064833584393 45.37312525949091, 124.50064981679816 45.3731288114813, 124.50065023494855 45.37313250191708, 124.50064957259073 45.37313617455005, 124.5006478577681 45.37313967388575, 124.50064736693123 45.373140417148946, 124.50064613586464 45.37314205507017, 124.50059245094745 45.373205366397826, 124.50059034179135 45.37320872350609, 124.50058924371636 45.37321198318639, 124.50058911625975 45.37321514209479, 124.50059000968818 45.373218677781196, 124.50059046720865 45.3732196088791, 124.50059304537402 45.37322314392945, 124.50059496407131 45.3732250454472, 124.50062404864777 45.37325014864083, 124.5006249376913 45.37325096232278, 124.50062755844026 45.37325350803972, 124.50063119766538 45.373256049749735, 124.5006347720524 45.373257708612385, 124.50063894315849 45.37325890317217, 124.50064350638694 45.37325957088423, 124.50064636574025 45.373259679883, 124.50064650249426 45.37325967403269, 124.50065221988424 45.373258992661185, 124.50065536904346 45.37325822376142, 124.50065901183967 45.37325672576713, 124.50065922278863 45.37325661326053, 124.50066215482026 45.37325478950828, 124.5006625702743 45.3732544639298, 124.5006648178949 45.373252391265666, 124.50066715661245 45.373249722432895, 124.50067057943387 45.37324662998758, 124.50067625702187 45.37324251724148, 124.5006793053939 45.37323948041765, 124.50068112621081 45.37323682020812, 124.50068576864946 45.3732276586171, 124.50068687123421 45.3732243681044, 124.50068725070082 45.37322187545635, 124.50068720154283 45.373217001649394, 124.50068655108875 45.373212795061406, 124.50068641270995 45.37321139475287, 124.50068638411624 45.37321073462857, 124.5006867463273 45.37320711658361, 124.50068813071088 45.37320362325461, 124.50069048100902 45.37320039660137, 124.50069370171136 45.373197567746615, 124.50069766193724 45.37319525164758, 124.5007022007531 45.37319354242444, 124.50070713371353 45.373192509535535, 124.50071226035594 45.37319219495475, 124.50071737234715 45.373192611465775, 124.50072226194938 45.373193742142746, 124.50072673046198 45.3731955410379, 124.5007305962963 45.373197935048886, 124.50073123428614 45.373198418751, 124.5007328909673 45.37319980936607, 124.50074949273531 45.37321526614108, 124.50075094316566 45.37321676858372, 124.50075160419765 45.37321753374127, 124.5007538252603 45.373220808701554, 124.50075425494163 45.373221651802176, 124.50075500291555 45.37322339091039, 124.50085907518474 45.37351826263471, 124.50085950906107 45.373519761241525, 124.50085985124201 45.37352126739588, 124.50086010296856 45.37352278656045, 124.50089277698356 45.37383449776407, 124.5008937273064 45.37383795859278, 124.50089536758918 45.3738409588557, 124.50089767100881 45.373843524648144, 124.50090064037276 45.37384572441405, 124.50090416156944 45.373847473617175, 124.5009080992807 45.37384870503642, 124.50091230218332 45.37384937134927, 124.5009166087616 45.3738494469496, 124.50092085351605 45.373848928932105, 124.50092487332294 45.373847837203954, 124.50092851370327 45.37384621371973, 124.50093163475984 45.37384412086859, 124.50093411655067 45.37384163907897, 124.50093585123743 45.373838883525586, 124.50093695035446 45.373835400737754, 124.50093715462793 45.37383246851652, 124.50090419470965 45.37351694683676, 124.50090355396887 45.373514035420506, 124.50079578551876 45.37320888750868, 124.50079366407898 45.373204992985954, 124.5007913969343 45.37320221428948, 124.50072204112583 45.37313754142248, 124.50072063079553 45.3731360827143, 124.50072000978162 45.373135367342904, 124.5007178162858 45.3731321684377, 124.50071655740041 45.37312872810242, 124.50071628221346 45.37312518048722, 124.50071700145523 45.373121663925424, 124.50071868707987 45.37311831553946, 124.50071919374076 45.37311755671331, 124.50072037981785 45.373115986786004, 124.50077157170745 45.373055623110766, 124.50077414354327 45.37305157380767, 124.50077591406156 45.37304771604784, 124.50077809494873 45.3730442575006, 124.5007812540534 45.37304119701925, 124.50078525159054 45.37303867002468, 124.50078991067618 45.3730367883319, 124.50079090460876 45.373036479702506, 124.50079334246882 45.373035825371566, 124.50099569331607 45.37298970864245, 124.50132952099015 45.37288047393393, 124.50133377318618 45.37287862610089, 124.50133717549969 45.372876483939564, 124.5013397665624 45.372874058284125, 124.5013416364363 45.37287132295332, 124.50134271326347 45.37286838306417, 124.5013429556619 45.372865351596396, 124.50134235431642 45.372862345044354, 124.5013409323375 45.372859478952385, 124.50133874436932 45.3728568634591, 124.50133587449623 45.37285459907873, 124.5013324330044 45.37285277282895, 124.50132855214913 45.37285145489188, 124.5013243810692 45.37285069591498, 124.5013201107451 45.37285052628432, 124.50131510008669 45.37285103274415, 124.5013111244613 45.37285193731021, 124.50097975399441 45.372960192691174, 124.5009768600049 45.3729609911574, 124.50065884650824 45.37303333561681, 124.50065563481715 45.373033907065576, 124.50065248529667 45.37303431640547, 124.50064901891176 45.373034596040725, 124.50062600330187 45.37303533574139, 124.500623225409 45.37303531837057, 124.5006019417212 45.373034367357974, 124.50059792481828 45.373034521786764, 124.50059313029463 45.37303527345022, 124.50058932733138 45.37303644304438, 124.5005858823098 45.37303811031522, 124.50058276976586 45.373040333150605, 124.50057832874776 45.37304482942874, 124.50057526322827 45.37304738769956, 124.5005715782077 45.373049501285124, 124.50056740132679 45.37305109697556, 124.50056287726338 45.37305211949973, 124.50055816272078 45.37305253343971, 124.50055342100018 45.373052324457525, 124.50055236970918 45.373052208191645, 124.50054999948163 45.37305186422574, 124.50034970586398 45.37301574576576, 124.50034765840849 45.37301531140255, 124.50034666545196 45.37301506834639, 124.50034276076269 45.373013845770764, 124.50033920007112 45.37301218130298, 124.50033837577863 45.373011721585, 124.50033675605809 45.373010737762534, 124.50026594099171 45.372963941866004, 124.5002643904712 45.372962824169306, 124.50026366377307 45.3729622526403, 124.50026100383825 45.37295975445185, 124.5002589969587 45.37295696967679, 124.50025858997343 45.37295625784456, 124.50025785115162 45.37295478394233, 124.50021909626403 45.37286526562164, 124.50021855775404 45.37286380483646, 124.50021833438687 45.372863074280126, 124.50021778671069 45.3728600831617, 124.50021773961116 45.37285933657089, 124.50021773429879 45.372857827285806, 124.50022614329055 45.372707757916594, 124.50024010347258 45.37255970136285, 124.50023984949131 45.37255618118367, 124.50023882111465 45.372553047415565, 124.50023705021424 45.372550279557814, 124.50023454722567 45.37254780839298, 124.50023140833684 45.37254572888584, 124.50022775417325 45.37254412095045, 124.50022372516293 45.372543046379164, 124.50021947613763 45.37254254646686, 124.50021517038546 45.372542640425, 124.50021097337348 45.37254332464283, 124.50020704639118 45.37254457282608, 124.50020354034896 45.37254633700827, 124.50020058998345 45.372548549392185, 124.50019832500733 45.37255110651821, 124.50019654372592 45.37255444856709, 124.50019575994635 45.37255732601997, 124.50016782898616 45.372849736204735)))</textarea>
            <div class="coord-settings" style="margin-bottom:8px;font-size:12px;color:#333;">
                <label>WKT坐标系：
                    <select id="coordSysSelect" style="margin-left:6px;">
                        <option value="wgs84" selected>WGS84</option>
                        <option value="gcj02">GCJ-02（国测局）</option>
                        <option value="bd09">BD-09（百度）</option>
                        <option value="cgcs2000">CGCS2000</option>
                    </select>
                </label>
                <!-- 已移除“不进行绘制坐标转换”选项，统一使用WGS84绘制 -->
            </div>

            <div class="button-group">
                <button id="drawButton">绘制轮廓</button>
                <button id="clearButton">清空轮廓</button>
            </div>
            <!-- 显示开关：仅保留显示亩数 -->
            <div class="display-toggles" style="margin-top:8px;font-size:12px;color:#333;">
                <label><input type="checkbox" id="toggleLabelsCheckbox"> 显示亩数</label>
            </div>
            <!-- 颜色选择器 -->
            <div class="color-picker-container" style="margin-top:8px;">
                <div style="margin-bottom:6px;font-size:12px;color:#333;">轮廓颜色设置：</div>
                <div style="display:flex;align-items:center;gap:8px;">
                    <div style="display:flex;align-items:center;gap:4px;">
                        <label style="font-size:12px;">边框颜色:</label>
                        <div id="outlineColorPicker" class="color-picker" style="width:24px;height:24px;border:1px solid #ccc;cursor:pointer;background-color:#FFD700;"></div>
                        <input type="color" id="outlineColorInput" value="#FFD700" style="display:none;">
                    </div>
                    <div style="display:flex;align-items:center;gap:4px;">
                        <label style="font-size:12px;">填充颜色:</label>
                        <div id="fillColorPicker" class="color-picker" style="width:24px;height:24px;border:1px solid #ccc;cursor:pointer;background-color:#FFFF00;"></div>
                        <input type="color" id="fillColorInput" value="#FFFF00" style="display:none;">
                    </div>
                    <div style="display:flex;align-items:center;gap:4px;">
                        <label style="font-size:12px;">透明度:</label>
                        <input type="range" id="fillOpacitySlider" min="0" max="100" value="35" style="width:60px;">
                        <span id="fillOpacityValue" style="font-size:12px;">35%</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-pane" id="tabSplit">
            <!-- MultiPolygon → 多个 Polygon 分割器 -->
            <div class="split-section">
                <div class="title">MultiPolygon → 多个 Polygon 分割器</div>
                <div class="desc">输入一个 MULTIPOLYGON WKT，分割为多行 POLYGON WKT。</div>
                <textarea id="multiInput"></textarea>
                <div class="split-actions">
                    <button id="splitMultiBtn">分割为多个 POLYGON</button>
                    <button id="copyPolysBtn">复制结果</button>
                </div>
                <textarea id="polyOutput" readonly></textarea>
            </div>
        </div>

        <div class="tab-pane" id="tabBatch">
            <!-- 批量POLYGON → MULTIPOLYGON 生成器 -->
            <div class="batch-section">
                <div class="title">批量POLYGON → MULTIPOLYGON 合并器</div>
                <div class="desc">每行一个 POLYGON WKT（或用分号分隔）。生成后可一键填充到上方并绘制。</div>
                <textarea id="batchInput"></textarea>
                <div class="batch-actions">
                    <button id="generateMultiBtn">生成 MULTIPOLYGON</button>
                    <button id="copyMultiBtn">复制结果</button>
                </div>
                <textarea id="multiOutput" readonly></textarea>
            </div>
        </div>
        <div class="tab-pane" id="tabTrack">
            <div class="tip">请粘贴轨迹文本（支持两种格式：1）每行一条：定位时间yyyyMMddHHmmss, 经度, 纬度；2）单行#分隔：经度,纬度,定位时间yyyyMMddHHmmss#经度,纬度,定位时间yyyyMMddHHmmss#…）。</div>
            <div class="coord-settings" style="margin-bottom:8px;font-size:12px;color:#333;">
                <label>轨迹坐标系：
                    <select id="trackCoordSysSelect" style="margin-left:6px;">
                        <option value="wgs84" selected>WGS84</option>
                        <option value="gcj02">GCJ-02（国测局）</option>
                        <option value="bd09">BD-09（百度）</option>
                        <option value="cgcs2000">CGCS2000</option>
                    </select>
                </label>
            </div>
            <textarea id="trackTextarea" style="width:100%;height:120px;margin-bottom:10px;padding:8px;border:1px solid #ddd;border-radius:4px;font-family:monospace;resize:vertical;box-sizing:border-box;">20251026070913,124.504478,45.342070
20251026070923,124.504457,45.342095
20251026070933,124.504473,45.342090
20251026070943,124.504470,45.342091
20251026070953,124.504470,45.342092
20251026072557,124.504442,45.342061
20251026072607,124.504448,45.342046
20251026072617,124.504211,45.341974
20251026072627,124.503904,45.341932
20251026072637,124.503733,45.341892
20251026072647,124.503316,45.341757
20251026072657,124.502903,45.341637
20251026072707,124.502600,45.341977
20251026072717,124.502340,45.342350
20251026072727,124.502025,45.342477
20251026072737,124.501643,45.342732
20251026072747,124.501239,45.342690
20251026072757,124.500959,45.342962
20251026072807,124.500619,45.343330
20251026072817,124.500228,45.343719
20251026072827,124.499718,45.344275
20251026072837,124.499090,45.344970
20251026072847,124.498582,45.345561
20251026072857,124.498217,45.346022
20251026072907,124.498007,45.346464
20251026072917,124.498392,45.347121
20251026072927,124.498615,45.347829
20251026072937,124.498705,45.348489
20251026072947,124.498687,45.349042
20251026072957,124.498666,45.349617
20251026073007,124.498683,45.350207
20251026073017,124.498755,45.350742
20251026073027,124.498802,45.351288
20251026073037,124.499082,45.351873
20251026073047,124.499531,45.352439
20251026073057,124.499927,45.353023
20251026073107,124.500244,45.353657
20251026073117,124.500475,45.354266
20251026073127,124.500717,45.354936
20251026073137,124.500959,45.355563
20251026073148,124.501259,45.356153
20251026073158,124.501540,45.356684
20251026073208,124.501929,45.357104
20251026073218,124.502194,45.357453
20251026073228,124.502431,45.357795
20251026073238,124.502765,45.358104
20251026073248,124.503148,45.358367
20251026073258,124.503463,45.358696
20251026073308,124.503532,45.359118
20251026073318,124.503284,45.359578
20251026073328,124.502889,45.360018
20251026073338,124.502482,45.360476
20251026073348,124.502045,45.360940
20251026073358,124.501325,45.361107
20251026073408,124.500777,45.361455
20251026073418,124.500428,45.361913
20251026073428,124.500497,45.362429
20251026073438,124.500407,45.362956
20251026073448,124.500054,45.363433
20251026073458,124.499718,45.363888
20251026073508,124.499564,45.364131
20251026073518,124.499413,45.364417
20251026073528,124.499492,45.365015
20251026073538,124.499636,45.365657
20251026073548,124.499764,45.366264
20251026073558,124.499874,45.366848
20251026073608,124.499961,45.367379
20251026073618,124.500044,45.367879
20251026073628,124.500097,45.368377
20251026073638,124.500122,45.368852
20251026073648,124.500146,45.369348
20251026073658,124.500175,45.369852
20251026073708,124.500208,45.370337
20251026073718,124.500242,45.370760
20251026073728,124.500282,45.371191
20251026073738,124.500305,45.371649
20251026073748,124.500260,45.372122
20251026073758,124.500218,45.372558
20251026073808,124.500190,45.372852
20251026073818,124.500261,45.373016
20251026073828,124.500566,45.373071
20251026073838,124.500988,45.372975
20251026073848,124.501321,45.372866
20251026073858,124.501660,45.372846
20251026073908,124.502022,45.373022
20251026073918,124.502371,45.373202
20251026073928,124.502721,45.373360
20251026073938,124.503082,45.373537
20251026073948,124.503427,45.373718
20251026073958,124.503776,45.373905
20251026074008,124.504092,45.374068
20251026074018,124.504445,45.374252
20251026074028,124.504804,45.374441
20251026074038,124.505154,45.374636
20251026074048,124.505503,45.374826
20251026074058,124.505852,45.374990
20251026074108,124.506182,45.375192
20251026074118,124.506428,45.375439
20251026074128,124.506654,45.375684
20251026074138,124.506853,45.375958
20251026074148,124.507000,45.376194
20251026074158,124.507145,45.376461
20251026074208,124.507278,45.376743
20251026074218,124.507422,45.377016
20251026074228,124.507591,45.377296
20251026074238,124.507804,45.377522
20251026074248,124.508117,45.377737
20251026074258,124.508544,45.377922
20251026074308,124.508943,45.378088
20251026074318,124.509335,45.378236
20251026074328,124.509728,45.378397
20251026074338,124.510169,45.378591
20251026074348,124.510560,45.378781
20251026074358,124.511020,45.379022
20251026074408,124.511403,45.379255
20251026074418,124.511765,45.379476
20251026074428,124.512224,45.379747
20251026074438,124.512577,45.379943
20251026074448,124.512966,45.380150
20251026074458,124.513358,45.380356
20251026074508,124.513603,45.380385
20251026074518,124.513845,45.380275
20251026074528,124.514199,45.380148
20251026074538,124.514588,45.380005
20251026074548,124.514934,45.379865
20251026074558,124.515257,45.379726
20251026074608,124.515598,45.379591
20251026074618,124.515917,45.379464
20251026074628,124.516153,45.379356
20251026074638,124.516320,45.379299
20251026074648,124.516676,45.379180
20251026074658,124.517075,45.379019
20251026074708,124.517474,45.378853
20251026074718,124.517847,45.378707
20251026074728,124.518231,45.378531
20251026074738,124.518678,45.378304
20251026074748,124.519152,45.378073
20251026074758,124.519573,45.377861
20251026074808,124.519937,45.377683
20251026074818,124.520297,45.377523
20251026074828,124.520610,45.377645
20251026074838,124.520847,45.377799
20251026074848,124.521158,45.377995
20251026074858,124.521556,45.378241
20251026074908,124.521820,45.378411
20251026074918,124.522122,45.378600
20251026074928,124.522388,45.378768
20251026074938,124.522684,45.378935
20251026074948,124.522904,45.379060
20251026074958,124.523093,45.379178
20251026075008,124.523376,45.379287
20251026075018,124.523474,45.379307
20251026075028,124.523408,45.379346
20251026075038,124.523371,45.379397
20251026075048,124.523348,45.379479
20251026075058,124.523335,45.379560
20251026075108,124.523279,45.379473
20251026075118,124.523243,45.379441
20251026075128,124.523243,45.379441
20251026075137,124.523243,45.379441
20251026075147,124.523243,45.379441
20251026075157,124.523239,45.379440
20251026075207,124.523174,45.379412
20251026075217,124.523089,45.379379
20251026075227,124.523024,45.379355
20251026075237,124.522971,45.379334
20251026075247,124.522976,45.379337
20251026075257,124.522963,45.379332
20251026075307,124.522963,45.379332
20251026075317,124.522963,45.379332
20251026075327,124.522963,45.379332
20251026075337,124.522963,45.379332
20251026075347,124.522963,45.379332
20251026075357,124.522963,45.379332
20251026075407,124.522963,45.379332
20251026075417,124.522963,45.379332
20251026075427,124.522963,45.379332
20251026075437,124.522963,45.379332
20251026075447,124.522962,45.379332
20251026075457,124.522962,45.379332
20251026075507,124.522962,45.379332
20251026075517,124.522962,45.379332
20251026075527,124.522962,45.379332
20251026075537,124.522962,45.379332
20251026075547,124.522962,45.379332
20251026075557,124.522962,45.379332
20251026075607,124.522942,45.379323
20251026075617,124.522898,45.379303
20251026075627,124.522853,45.379281
20251026075637,124.522810,45.379259
20251026075647,124.522769,45.379237
20251026075657,124.522720,45.379210
20251026075707,124.522677,45.379184
20251026075717,124.522628,45.379156
20251026075727,124.522555,45.379109
20251026075737,124.522465,45.379049
20251026075747,124.522395,45.379010
20251026075757,124.522341,45.378974
20251026075807,124.522278,45.378932
20251026075817,124.522223,45.378893
20251026075827,124.522164,45.378861
20251026075837,124.522103,45.378822
20251026075847,124.522043,45.378783
20251026075857,124.521971,45.378736
20251026075907,124.521908,45.378695
20251026075917,124.521851,45.378653
20251026075927,124.521787,45.378606
20251026075937,124.521723,45.378557
20251026075947,124.521657,45.378506
20251026075957,124.521589,45.378460
20251026080007,124.521529,45.378422
20251026080017,124.521462,45.378381
20251026080027,124.521418,45.378356
20251026080037,124.521375,45.378330
20251026080047,124.521446,45.378369
20251026080057,124.521200,45.378178
20251026080107,124.520904,45.378016
20251026080117,124.520877,45.378001
20251026080127,124.520877,45.378001
20251026080137,124.520877,45.378001
20251026080147,124.520877,45.378001
20251026080157,124.520877,45.378001
20251026080207,124.520877,45.378001
20251026080217,124.520877,45.378001
20251026080227,124.520877,45.378001
20251026080237,124.520877,45.378001
20251026080247,124.520877,45.378001
20251026080257,124.520877,45.378001
20251026080307,124.520877,45.378001
20251026080317,124.520877,45.378001
20251026080327,124.520877,45.378001
20251026080337,124.520877,45.378001
20251026080347,124.520877,45.378001
20251026080357,124.520877,45.378001
20251026080407,124.520877,45.378001
20251026080417,124.520877,45.378001
20251026080427,124.520877,45.378001
20251026080437,124.520877,45.378001
20251026080447,124.520877,45.378001
20251026080457,124.520877,45.378001
20251026080507,124.520841,45.377985
20251026080517,124.520746,45.377941
20251026080527,124.520607,45.377867
20251026080537,124.520666,45.377893
20251026080547,124.520677,45.377902
20251026080557,124.520789,45.377974
20251026080607,124.520853,45.378012
20251026080617,124.520819,45.377982
20251026080627,124.521032,45.378106
20251026080637,124.521106,45.378155
20251026080647,124.521179,45.378203
20251026080657,124.521273,45.378262
20251026080707,124.521095,45.378142
20251026080717,124.521030,45.378115
20251026080727,124.521096,45.378164
20251026080737,124.521181,45.378220
20251026080747,124.521208,45.378237
20251026080757,124.521175,45.378197
20251026080807,124.521222,45.378228
20251026080817,124.521224,45.378228
20251026080827,124.521224,45.378228
20251026080837,124.521222,45.378228
20251026080847,124.521222,45.378228
20251026080857,124.521266,45.378250
20251026080907,124.521592,45.378439
20251026080917,124.521894,45.378660
20251026080927,124.522211,45.378872
20251026080937,124.522551,45.379088
20251026080947,124.522897,45.379281
20251026080957,124.523244,45.379435
20251026081007,124.523326,45.379527
20251026081017,124.523336,45.379460
20251026081027,124.523376,45.379348
20251026081037,124.523468,45.379303
20251026081047,124.523296,45.379252
20251026081057,124.523031,45.379149
20251026081107,124.522791,45.379003
20251026081117,124.522487,45.378818
20251026081127,124.522217,45.378648
20251026081137,124.521991,45.378508
20251026081147,124.521685,45.378313
20251026081157,124.521370,45.378113
20251026081207,124.521094,45.377928
20251026081217,124.520805,45.377765
20251026081227,124.520508,45.377570
20251026081237,124.520155,45.377558
20251026081247,124.519806,45.377736
20251026081257,124.519449,45.377912
20251026081307,124.519088,45.378096
20251026081317,124.518707,45.378281
20251026081327,124.518327,45.378472
20251026081337,124.517943,45.378659
20251026081347,124.517546,45.378820
20251026081357,124.517160,45.378970
20251026081407,124.516801,45.379122
20251026081417,124.516550,45.379222
20251026083907,124.519705,45.377988
20251026083917,124.519681,45.378001
20251026083927,124.519596,45.378045
20251026083937,124.519501,45.378089
20251026083947,124.519404,45.378140
20251026083957,124.519279,45.378205
20251026084007,124.519159,45.378263
20251026084017,124.519064,45.378309
20251026084027,124.518968,45.378355
20251026084037,124.518870,45.378401
20251026084047,124.518769,45.378446
20251026084057,124.518662,45.378497
20251026084107,124.518556,45.378549
20251026084117,124.518453,45.378596
20251026084127,124.518345,45.378647
20251026084137,124.518241,45.378694
20251026084147,124.518125,45.378745
20251026084157,124.518016,45.378795
20251026084207,124.517900,45.378844
20251026084217,124.517780,45.378892
20251026084227,124.517660,45.378941
20251026084237,124.517544,45.378989
20251026084247,124.517428,45.379037
20251026084257,124.517513,45.379003
20251026084306,124.517520,45.379000
20251026084316,124.517519,45.379000
20251026084326,124.517518,45.379000
20251026084336,124.517518,45.379000
20251026084346,124.517484,45.379014
20251026084356,124.517367,45.379062
20251026084406,124.517260,45.379108
20251026084416,124.517147,45.379157
20251026084426,124.517033,45.379202
20251026084436,124.516911,45.379255
20251026084446,124.516826,45.379291
20251026084456,124.516826,45.379291
20251026084506,124.516826,45.379291
20251026084516,124.516787,45.379308
20251026084526,124.516674,45.379356
20251026084536,124.516553,45.379408
20251026084546,124.516420,45.379462
20251026084556,124.516554,45.379406
20251026084606,124.516617,45.379373
20251026084616,124.516451,45.379443
20251026084626,124.516445,45.379466
20251026084636,124.516400,45.379540
20251026084646,124.516428,45.379506
20251026084656,124.516408,45.379481
20251026084706,124.516441,45.379495
20251026084716,124.516506,45.379467
20251026084726,124.516575,45.379440
20251026084736,124.516423,45.379491
20251026084746,124.516444,45.379504
20251026084756,124.516535,45.379486
20251026084806,124.516654,45.379436
20251026084816,124.516653,45.379436
20251026084826,124.516648,45.379438
20251026084836,124.516535,45.379479
20251026084846,124.516619,45.379424
20251026084856,124.516652,45.379408
20251026084906,124.516699,45.379387
20251026084916,124.516805,45.379341
20251026084926,124.516802,45.379339
20251026084936,124.516706,45.379349
20251026084946,124.516707,45.379349
20251026084956,124.516708,45.379349
20251026085006,124.516708,45.379349
20251026085016,124.516707,45.379349
20251026085026,124.516708,45.379349
20251026085036,124.516708,45.379348
20251026085046,124.516709,45.379348
20251026085056,124.516709,45.379348
20251026085106,124.516650,45.379362
20251026085116,124.516625,45.379365
20251026085126,124.516625,45.379365
20251026085136,124.516625,45.379365
20251026085146,124.516625,45.379365
20251026085156,124.516625,45.379365
20251026085206,124.516625,45.379365
20251026085216,124.516625,45.379365
20251026085226,124.516625,45.379365
20251026085236,124.516625,45.379365
20251026085246,124.516625,45.379365
20251026085256,124.516625,45.379365
20251026085306,124.516625,45.379365
20251026085316,124.516625,45.379365
20251026085326,124.516625,45.379365
20251026085336,124.516625,45.379365
20251026085346,124.516625,45.379365
20251026085356,124.516625,45.379365
20251026085406,124.516625,45.379365
20251026085416,124.516625,45.379365
20251026085426,124.516625,45.379365
20251026085436,124.516729,45.379357
20251026085446,124.516860,45.379318
20251026085456,124.516967,45.379275
20251026085506,124.517076,45.379227
20251026085516,124.517185,45.379183
20251026085526,124.517286,45.379140
20251026085536,124.517390,45.379096
20251026085546,124.517514,45.379041
20251026085556,124.517638,45.378993
20251026085606,124.517756,45.378944
20251026085616,124.517877,45.378893
20251026085626,124.517995,45.378846
20251026085636,124.518046,45.378823
20251026085646,124.518159,45.378773
20251026085656,124.518204,45.378754
20251026085706,124.518207,45.378752
20251026085716,124.518290,45.378713
20251026085726,124.518386,45.378670
20251026085736,124.518490,45.378622
20251026085746,124.518579,45.378581
20251026085756,124.518669,45.378538
20251026085806,124.518774,45.378488
20251026085816,124.518884,45.378437
20251026085826,124.518989,45.378389
20251026085836,124.519095,45.378336
20251026085846,124.519208,45.378282
20251026085856,124.519325,45.378223
20251026085906,124.519432,45.378166
20251026085916,124.519548,45.378110
20251026085926,124.519662,45.378051
20251026085936,124.519777,45.377997
20251026085946,124.519731,45.378008
20251026085956,124.519660,45.378018
20251026090006,124.519660,45.378018
20251026090016,124.519660,45.378018
20251026090026,124.519660,45.378018
20251026090036,124.519660,45.378018
20251026090046,124.519761,45.377950
20251026090056,124.519955,45.377845
20251026090106,124.520052,45.377860
20251026090116,124.520007,45.377899
20251026090126,124.519899,45.377950
20251026090136,124.519795,45.378002
20251026090146,124.519691,45.378050
20251026090156,124.519650,45.378070
20251026090206,124.519562,45.378113
20251026090216,124.519599,45.378094
20251026090226,124.519463,45.378150
20251026090236,124.519340,45.378215
20251026090246,124.519245,45.378262
20251026090256,124.519176,45.378297
20251026090306,124.519064,45.378351
20251026090316,124.518946,45.378408
20251026090326,124.518830,45.378461
20251026090336,124.518692,45.378526
20251026090346,124.518582,45.378580
20251026090356,124.518473,45.378630
20251026090406,124.518360,45.378680
20251026090416,124.518242,45.378735
20251026090426,124.518117,45.378796
20251026090436,124.518076,45.378826
20251026090446,124.517998,45.378864
20251026090456,124.517925,45.378893
20251026090506,124.517985,45.378869
20251026090516,124.517983,45.378870
20251026090526,124.517983,45.378870
20251026090536,124.517983,45.378870
20251026090546,124.517983,45.378870
20251026090556,124.517983,45.378870
20251026090606,124.517983,45.378870
20251026090616,124.517962,45.378878
20251026090626,124.517878,45.378912
20251026090636,124.517792,45.378949
20251026090646,124.517723,45.378977
20251026090656,124.517650,45.379007
20251026090706,124.517675,45.378996
20251026090716,124.517675,45.378996
20251026090726,124.517675,45.378996
20251026090736,124.517675,45.378996
20251026090746,124.517645,45.379009
20251026090756,124.517575,45.379039
20251026090806,124.517510,45.379066
20251026090816,124.517445,45.379092
20251026090826,124.517377,45.379120
20251026090836,124.517306,45.379148
20251026090846,124.517326,45.379139
20251026090856,124.517230,45.379181
20251026090906,124.517135,45.379222
20251026090916,124.517044,45.379258
20251026090926,124.516968,45.379295
20251026090936,124.516885,45.379329
20251026090946,124.516794,45.379369
20251026090956,124.516687,45.379414
20251026091006,124.516801,45.379357
20251026091016,124.516764,45.379386
20251026091026,124.516643,45.379441
20251026091036,124.516538,45.379486
20251026091046,124.516580,45.379467
20251026091056,124.516580,45.379467
20251026091106,124.516579,45.379467
20251026091116,124.516579,45.379467
20251026091126,124.516579,45.379467
20251026091136,124.516579,45.379467
20251026091146,124.516579,45.379467
20251026091156,124.516632,45.379445
20251026091206,124.516542,45.379419
20251026091216,124.516413,45.379457
20251026091226,124.516279,45.379495
20251026091236,124.516174,45.379521
20251026091246,124.516065,45.379562
20251026091256,124.515972,45.379598
20251026091306,124.515880,45.379631
20251026091316,124.515771,45.379671
20251026091326,124.515749,45.379680
20251026091336,124.515637,45.379726
20251026091346,124.515601,45.379739
20251026091356,124.515497,45.379781
20251026091406,124.515391,45.379824
20251026091416,124.515277,45.379870
20251026091426,124.515167,45.379914
20251026091436,124.515059,45.379957
20251026091446,124.515059,45.379958
20251026091456,124.514938,45.380006
20251026091506,124.514836,45.380049
20251026091516,124.514721,45.380090
20251026091526,124.514608,45.380135
20251026091535,124.514487,45.380181
20251026091545,124.514364,45.380225
20251026091555,124.514323,45.380241
20251026091605,124.514199,45.380286
20251026091615,124.514108,45.380317
20251026091625,124.514048,45.380338
20251026091635,124.513995,45.380356
20251026091645,124.514069,45.380342
20251026091655,124.513963,45.380400
20251026091705,124.513837,45.380443
20251026091715,124.513905,45.380422
20251026091725,124.514063,45.380341
20251026091735,124.513888,45.380401
20251026091745,124.513881,45.380410
20251026091755,124.514035,45.380367
20251026091805,124.513953,45.380434
20251026091815,124.513901,45.380455
20251026091825,124.513874,45.380468
20251026091835,124.513786,45.380499
20251026091845,124.513873,45.380485
20251026091855,124.513872,45.380492
20251026091905,124.513828,45.380512
20251026091915,124.513837,45.380513
20251026091925,124.513848,45.380552
20251026091935,124.513854,45.380528
20251026091945,124.513815,45.380542
20251026091955,124.513810,45.380554
20251026092005,124.513818,45.380588
20251026092015,124.513822,45.380519
20251026092025,124.513803,45.380506
20251026092035,124.513865,45.380506
20251026092045,124.513902,45.380496
20251026092055,124.513888,45.380532
20251026092105,124.513929,45.380522
20251026092115,124.513858,45.380474
20251026092125,124.513849,45.380443
20251026092135,124.513903,45.380406
20251026092145,124.513902,45.380406
20251026092155,124.513902,45.380406
20251026092205,124.513902,45.380406
20251026092215,124.513902,45.380406
20251026092225,124.513902,45.380406
20251026092235,124.513902,45.380406
20251026092245,124.513979,45.380406
20251026092255,124.514040,45.380385
20251026092305,124.514098,45.380361
20251026092315,124.514203,45.380324
20251026092325,124.514321,45.380281
20251026092335,124.514445,45.380236
20251026092345,124.514576,45.380188
20251026092355,124.514707,45.380137
20251026092405,124.514837,45.380088
20251026092415,124.514968,45.380036
20251026092425,124.515015,45.380017
20251026092435,124.515016,45.380017
20251026092445,124.515016,45.380017
20251026092455,124.515016,45.380017
20251026092505,124.515016,45.380017
20251026092515,124.515016,45.380017
20251026092525,124.515030,45.380011
20251026092535,124.515130,45.379972
20251026092545,124.515247,45.379923
20251026092555,124.515362,45.379876
20251026092605,124.515471,45.379830
20251026092615,124.515595,45.379781
20251026092625,124.515727,45.379729
20251026092635,124.515858,45.379677
20251026092645,124.515991,45.379626
20251026092655,124.516125,45.379576
20251026092705,124.516216,45.379540
20251026092715,124.516259,45.379523
20251026092725,124.516175,45.379539
20251026092735,124.516118,45.379554
20251026092745,124.516118,45.379554
20251026092755,124.516118,45.379554
20251026092805,124.516118,45.379554
20251026092815,124.516118,45.379554
20251026092825,124.516118,45.379554
20251026092835,124.516224,45.379519
20251026092845,124.516422,45.379529
20251026092855,124.516400,45.379538
20251026092905,124.516463,45.379496
20251026092915,124.516462,45.379497
20251026092925,124.516462,45.379497
20251026092935,124.516462,45.379497
20251026092945,124.516462,45.379496
20251026092955,124.516462,45.379496
20251026093005,124.516462,45.379496
20251026093015,124.516462,45.379496
20251026093025,124.516462,45.379496
20251026093035,124.516462,45.379496
20251026093045,124.516462,45.379496
20251026093055,124.516462,45.379496
20251026093105,124.516462,45.379496
20251026093115,124.516462,45.379496
20251026093125,124.516462,45.379497
20251026093135,124.516461,45.379497
20251026093145,124.516460,45.379497
20251026093155,124.516397,45.379504
20251026093205,124.516300,45.379532
20251026093215,124.516202,45.379572
20251026093225,124.516091,45.379615
20251026093235,124.515989,45.379653
20251026093245,124.515894,45.379688
20251026093255,124.515795,45.379728
20251026093305,124.515705,45.379765
20251026093315,124.515658,45.379783
20251026093325,124.515585,45.379811
20251026093335,124.515617,45.379802
20251026093345,124.515527,45.379848
20251026093355,124.515451,45.379880
20251026093405,124.515360,45.379907
20251026093415,124.515265,45.379940
20251026093425,124.515151,45.379989
20251026093435,124.515039,45.380035
20251026093445,124.514925,45.380078
20251026093455,124.514808,45.380124
20251026093505,124.514681,45.380175
20251026093515,124.514557,45.380221
20251026093525,124.514433,45.380266
20251026093535,124.514310,45.380310
20251026093545,124.514184,45.380355
20251026093555,124.514070,45.380394
20251026093605,124.514104,45.380384
20251026093615,124.514104,45.380384
20251026093625,124.514104,45.380384
20251026093635,124.514026,45.380411
20251026093645,124.513882,45.380411
20251026093655,124.513802,45.380496
20251026093705,124.513854,45.380516
20251026093715,124.513985,45.380467
20251026093725,124.514082,45.380432
20251026093735,124.514201,45.380389
20251026093745,124.514329,45.380345
20251026093755,124.514454,45.380298
20251026093805,124.514582,45.380249
20251026093815,124.514714,45.380202
20251026093825,124.514850,45.380150
20251026093835,124.514979,45.380100
20251026093845,124.515110,45.380044
20251026093855,124.515237,45.379993
20251026093905,124.515366,45.379937
20251026093915,124.515492,45.379889
20251026093925,124.515627,45.379836
20251026093935,124.515753,45.379785
20251026093945,124.515886,45.379731
20251026093955,124.516013,45.379682
20251026094005,124.516039,45.379671
20251026094015,124.516160,45.379624
20251026094025,124.516264,45.379583
20251026094035,124.516363,45.379543
20251026094045,124.516140,45.379616
20251026094055,124.516130,45.379618
20251026094105,124.516130,45.379618
20251026094115,124.516207,45.379591
20251026094125,124.516346,45.379452
20251026094135,124.516139,45.379373
20251026094145,124.515983,45.379435
20251026094155,124.515902,45.379462
20251026094205,124.515902,45.379463
20251026094215,124.515902,45.379463
20251026094225,124.515903,45.379463
20251026094235,124.515902,45.379463
20251026094245,124.515902,45.379463
20251026094255,124.515902,45.379463
20251026094305,124.515902,45.379463
20251026094315,124.515906,45.379461
20251026094325,124.515982,45.379434
20251026094335,124.516036,45.379414
20251026094345,124.516180,45.379352
20251026094355,124.516309,45.379304
20251026094405,124.516342,45.379436
20251026094415,124.516326,45.379541
20251026094425,124.516460,45.379500
20251026094435,124.516465,45.379500
20251026094445,124.516452,45.379505
20251026094455,124.516364,45.379554
20251026094505,124.516290,45.379586
20251026094515,124.516204,45.379617
20251026094525,124.516237,45.379604
20251026094535,124.516131,45.379647
20251026094545,124.516039,45.379683
20251026094555,124.515958,45.379715
20251026094605,124.515891,45.379740
20251026094615,124.515803,45.379777
20251026094625,124.515820,45.379770
20251026094635,124.515711,45.379813
20251026094645,124.515772,45.379790
20251026094655,124.515745,45.379800
20251026094705,124.515661,45.379833
20251026094715,124.515653,45.379835
20251026094725,124.515585,45.379863
20251026094735,124.515554,45.379876
20251026094745,124.515462,45.379911
20251026094755,124.515355,45.379953
20251026094805,124.515257,45.379999
20251026094815,124.515168,45.380046
20251026094825,124.515066,45.380088
20251026094835,124.514961,45.380132
20251026094845,124.514853,45.380172
20251026094855,124.514733,45.380218
20251026094905,124.514604,45.380266
20251026094915,124.514468,45.380318
20251026094925,124.514334,45.380368
20251026094935,124.514197,45.380416
20251026094945,124.514053,45.380468
20251026094955,124.514149,45.380431
20251026095005,124.513976,45.380417
20251026095015,124.513777,45.380453
20251026095025,124.513817,45.380575
20251026095035,124.513927,45.380552
20251026095045,124.513941,45.380548
20251026095055,124.514056,45.380507
20251026095105,124.514161,45.380472
20251026095115,124.514272,45.380430
20251026095125,124.514229,45.380434
20251026095135,124.514253,45.380423
20251026095145,124.514371,45.380382
20251026095155,124.514484,45.380342
20251026095205,124.514580,45.380305
20251026095215,124.514688,45.380264
20251026095225,124.514797,45.380224
20251026095235,124.514931,45.380173
20251026095245,124.515028,45.380133
20251026095255,124.515073,45.380116
20251026095305,124.515099,45.380097
20251026095315,124.515116,45.380092
20251026095325,124.514986,45.380095
20251026095335,124.514999,45.380035
20251026095345,124.514920,45.380060
20251026095355,124.514743,45.380132
20251026095405,124.514716,45.380146
20251026095415,124.514716,45.380146
20251026095425,124.514716,45.380146
20251026095435,124.514716,45.380146
20251026095445,124.514538,45.380215
20251026095455,124.514230,45.380339
20251026095505,124.514221,45.380420
20251026095515,124.514226,45.380443
20251026095525,124.514189,45.380473
20251026095535,124.514194,45.380472
20251026095545,124.514125,45.380502
20251026095555,124.514066,45.380530
20251026095605,124.514125,45.380488
20251026095615,124.513972,45.380545
20251026095625,124.513852,45.380585
20251026095635,124.513952,45.380549
20251026095645,124.513952,45.380550
20251026095655,124.513952,45.380550
20251026095705,124.513952,45.380550
20251026095715,124.513952,45.380550
20251026095725,124.513952,45.380550
20251026095735,124.513952,45.380550
20251026095745,124.513951,45.380550
20251026095755,124.513882,45.380602
20251026095805,124.513870,45.380617
20251026095815,124.513767,45.380661
20251026095825,124.513640,45.380708
20251026095835,124.513700,45.380701
20251026095845,124.513720,45.380686
20251026095855,124.513679,45.380762
20251026095905,124.513712,45.380773
20251026095915,124.513766,45.380859
20251026095925,124.513714,45.380780
20251026095935,124.513708,45.380815
20251026095945,124.513750,45.380906
20251026095955,124.513716,45.380909
20251026100005,124.513664,45.380981
20251026100015,124.513555,45.381033
20251026100025,124.513503,45.381123
20251026100035,124.513470,45.381114
20251026100045,124.513605,45.381066
20251026100055,124.513718,45.381024
20251026100105,124.513826,45.380984
20251026100115,124.513922,45.380945
20251026100125,124.513800,45.380995
20251026100135,124.513637,45.381054
20251026100144,124.513554,45.381097
20251026100154,124.513655,45.381077
20251026100204,124.513733,45.381050
20251026100214,124.513843,45.381010
20251026100224,124.513869,45.380999
20251026100234,124.513688,45.381064
20251026100244,124.513562,45.381102
20251026100254,124.513626,45.381111
20251026100304,124.513723,45.381088
20251026100314,124.513831,45.381045
20251026100324,124.513857,45.381032
20251026100334,124.513660,45.381091
20251026100344,124.513658,45.381112
20251026100354,124.513706,45.381100
20251026100404,124.513834,45.381056
20251026100414,124.513774,45.381083
20251026100424,124.513857,45.381055
20251026100434,124.513656,45.381077
20251026100444,124.513528,45.381101
20251026100454,124.513578,45.381054
20251026100504,124.513684,45.381008
20251026100514,124.513808,45.380962
20251026100524,124.513915,45.380924
20251026100534,124.513709,45.381002
20251026100544,124.513705,45.380976
20251026100554,124.513817,45.380929
20251026100604,124.513947,45.380880
20251026100614,124.514070,45.380836
20251026100624,124.514193,45.380789
20251026100634,124.514323,45.380737
20251026100644,124.514448,45.380690
20251026100654,124.514294,45.380752
20251026100704,124.514126,45.380815
20251026100714,124.513978,45.380870
20251026100724,124.513877,45.380910
20251026100734,124.513967,45.380890
20251026100744,124.514094,45.380848
20251026100754,124.514068,45.380851
20251026100804,124.514239,45.380786
20251026100814,124.514370,45.380732
20251026100824,124.514327,45.380754
20251026100834,124.514368,45.380734
20251026100844,124.514489,45.380663
20251026100854,124.514375,45.380729
20251026100904,124.514482,45.380644
20251026100914,124.514455,45.380659
20251026100924,124.514555,45.380599
20251026100934,124.514662,45.380546
20251026100944,124.514540,45.380607
20251026100954,124.514653,45.380535
20251026101004,124.514629,45.380551
20251026101014,124.514732,45.380496
20251026101024,124.514845,45.380450
20251026101034,124.514731,45.380511
20251026101044,124.514709,45.380487
20251026101054,124.514826,45.380427
20251026101104,124.514837,45.380436
20251026101114,124.514763,45.380476
20251026101124,124.514741,45.380370
20251026101134,124.514729,45.380350
20251026101144,124.514782,45.380390
20251026101154,124.514735,45.380300
20251026101204,124.514789,45.380398
20251026101214,124.514820,45.380358
20251026101224,124.514792,45.380349
20251026101234,124.514797,45.380342
20251026101244,124.514811,45.380343
20251026101254,124.514778,45.380300
20251026101304,124.514772,45.380391
20251026101314,124.514802,45.380301
20251026101324,124.514910,45.380253
20251026101334,124.514853,45.380282
20251026101344,124.514803,45.380282
20251026101354,124.514864,45.380261
20251026101404,124.514885,45.380254
20251026101414,124.514821,45.380337
20251026101424,124.514767,45.380298
20251026101434,124.514700,45.380305
20251026101444,124.514742,45.380285
20251026101454,124.514742,45.380285
20251026101504,124.514742,45.380285
20251026101514,124.514742,45.380285
20251026101524,124.514742,45.380286
20251026101534,124.514742,45.380286
20251026101544,124.514742,45.380285
20251026101554,124.514735,45.380289
20251026101604,124.514665,45.380319
20251026101614,124.514565,45.380355
20251026101624,124.514473,45.380391
20251026101634,124.514407,45.380414
20251026101644,124.514363,45.380431
20251026101654,124.514242,45.380480
20251026101704,124.514212,45.380493
20251026101714,124.514077,45.380547
20251026101724,124.514106,45.380535
20251026101734,124.513944,45.380596
20251026101744,124.513916,45.380614
20251026101754,124.513772,45.380688
20251026101804,124.513695,45.380808
20251026101814,124.513708,45.380915
20251026101824,124.513700,45.381054
20251026101834,124.513675,45.380981
20251026101844,124.513793,45.380906
20251026101854,124.513903,45.380867
20251026101904,124.514019,45.380824
20251026101914,124.514159,45.380768
20251026101924,124.514298,45.380715
20251026101934,124.514371,45.380686
20251026101944,124.514447,45.380662
20251026101954,124.514566,45.380589
20251026102004,124.514646,45.380543
20251026102014,124.514827,45.380428
20251026102024,124.514793,45.380314
20251026102034,124.514708,45.380336
20251026102044,124.514614,45.380369
20251026102054,124.514520,45.380402
20251026102104,124.514416,45.380443
20251026102114,124.514299,45.380492
20251026102124,124.514167,45.380544
20251026102134,124.514030,45.380594
20251026102144,124.513878,45.380653
20251026102154,124.513859,45.380659
20251026102204,124.513735,45.380686
20251026102214,124.513638,45.380716
20251026102325,124.513711,45.380972
20251026102335,124.513760,45.380894
20251026102345,124.513868,45.380847
20251026102355,124.514000,45.380799
20251026102405,124.514146,45.380744
20251026102416,124.514293,45.380685
20251026102426,124.514449,45.380625
20251026102436,124.514535,45.380593
20251026102446,124.514708,45.380508
20251026102456,124.514827,45.380404
20251026102506,124.514839,45.380328
20251026102516,124.514696,45.380371
20251026102526,124.514569,45.380418
20251026102536,124.514437,45.380468
20251026102546,124.514297,45.380523
20251026102556,124.514153,45.380579
20251026102606,124.514010,45.380634
20251026102616,124.513857,45.380693
20251026102626,124.513764,45.380727
20251026102636,124.513935,45.380638
20251026102646,124.514008,45.380569
20251026102656,124.514007,45.380569
20251026102706,124.514007,45.380569
20251026102716,124.514007,45.380569
20251026102726,124.514007,45.380569
20251026102736,124.514007,45.380569
20251026102746,124.514007,45.380569
20251026102756,124.514007,45.380569
20251026102806,124.513976,45.380582
20251026103206,124.513797,45.380855
20251026103216,124.513755,45.380835
20251026103226,124.513864,45.380818
20251026103236,124.513983,45.380774
20251026103246,124.514112,45.380722
20251026103256,124.514248,45.380672
20251026103306,124.514386,45.380617
20251026103316,124.514525,45.380565
20251026103326,124.514623,45.380529
20251026103336,124.514826,45.380433
20251026103346,124.514839,45.380356
20251026103356,124.514725,45.380394
20251026103406,124.514623,45.380432
20251026103416,124.514510,45.380472
20251026103426,124.514393,45.380519
20251026103436,124.514260,45.380569
20251026103446,124.514129,45.380620
20251026103456,124.513995,45.380670
20251026103506,124.513860,45.380724
20251026103516,124.513848,45.380729
20251026103526,124.513724,45.380769
20251026103536,124.513692,45.380797
20251026103546,124.513782,45.380813
20251026103556,124.513900,45.380774
20251026103606,124.514027,45.380724
20251026103616,124.514168,45.380669
20251026103626,124.514316,45.380610
20251026103636,124.514470,45.380555
20251026103646,124.514628,45.380496
20251026103656,124.514662,45.380482
20251026103706,124.514849,45.380403
20251026103716,124.514836,45.380349
20251026103726,124.514718,45.380427
20251026103736,124.514593,45.380478
20251026103746,124.514462,45.380526
20251026103756,124.514322,45.380580
20251026103806,124.514166,45.380638
20251026103816,124.514000,45.380700
20251026103826,124.513832,45.380768
20251026103836,124.513945,45.380733
20251026103846,124.513959,45.380734
20251026103856,124.513959,45.380734
20251026103906,124.513959,45.380734
20251026103916,124.513894,45.380671
20251026103926,124.513887,45.380560
20251026103936,124.514099,45.380446
20251026103946,124.514490,45.380282
20251026103956,124.514862,45.380108
20251026104006,124.515180,45.379984
20251026104016,124.515323,45.379919
20251026104026,124.515639,45.379771
20251026104036,124.515870,45.379683
20251026104046,124.516119,45.379627
20251026104056,124.516296,45.379567
20251026104106,124.516377,45.379473
20251026104116,124.516219,45.379338
20251026104126,124.515954,45.379442
20251026104136,124.515714,45.379532
20251026104146,124.515694,45.379539
20251026104156,124.515694,45.379539
20251026104206,124.515694,45.379539
20251026104216,124.515694,45.379539
20251026104226,124.515711,45.379533
20251026104236,124.515718,45.379530
20251026104246,124.515459,45.379645
20251026104256,124.515240,45.379722
20251026104306,124.515240,45.379722
20251026104316,124.515240,45.379722
20251026104326,124.515240,45.379722
20251026104336,124.515240,45.379722
20251026104346,124.515240,45.379722
20251026104356,124.515240,45.379722
20251026104406,124.515240,45.379722
20251026104416,124.515053,45.379805
20251026104426,124.514792,45.379930
20251026104436,124.514479,45.380035
20251026104446,124.514084,45.380181
20251026104456,124.513976,45.380221
20251026104506,124.513671,45.380342
20251026104516,124.513589,45.380386
20251026104526,124.513585,45.380389
20251026104536,124.513583,45.380390
20251026104546,124.513581,45.380391
20251026104556,124.513553,45.380410
20251026104606,124.513512,45.380482
20251026104616,124.513378,45.380730
20251026104626,124.513122,45.381007
20251026104636,124.512816,45.381279
20251026104646,124.512519,45.381525
20251026104656,124.512261,45.381744
20251026104706,124.512008,45.381964
20251026104716,124.511707,45.382224
20251026104726,124.511408,45.382470
20251026104736,124.511059,45.382816
20251026104746,124.510654,45.383055
20251026104756,124.510159,45.383217
20251026104806,124.509592,45.383380
20251026104816,124.508979,45.383412
20251026104826,124.508399,45.383336
20251026104836,124.507906,45.383253
20251026104846,124.507496,45.383179
20251026104856,124.507040,45.383098
20251026104906,124.506566,45.383016
20251026104916,124.506020,45.382929
20251026110716,124.502423,45.377497
20251026110726,124.502356,45.377409
20251026110736,124.502331,45.377323
20251026110746,124.502309,45.377230
20251026110756,124.502283,45.377131
20251026110806,124.502269,45.377082
20251026110816,124.502243,45.376989
20251026110826,124.502233,45.377004
20251026110836,124.502217,45.377111
20251026110846,124.502216,45.377111
20251026110856,124.502216,45.377111
20251026110906,124.502216,45.377111
20251026110916,124.502216,45.377111
20251026110926,124.502216,45.377111
20251026110936,124.502216,45.377111
20251026110946,124.502216,45.377111
20251026110956,124.502216,45.377110
20251026111006,124.502217,45.377055
20251026111016,124.502226,45.376925
20251026111026,124.502204,45.376840
20251026111036,124.502177,45.376746
20251026111046,124.502148,45.376643
20251026111056,124.502147,45.376646
20251026111106,124.502128,45.376571
20251026111116,124.502106,45.376485
20251026111126,124.502083,45.376396
20251026111136,124.502079,45.376380
20251026111146,124.502055,45.376295
20251026111156,124.502050,45.376225
20251026111206,124.502046,45.376188
20251026111216,124.502068,45.376231
20251026111226,124.502087,45.376302
20251026111236,124.502111,45.376390
20251026111246,124.502134,45.376479
20251026111256,124.502157,45.376574
20251026111306,124.502185,45.376669
20251026111316,124.502214,45.376768
20251026111326,124.502240,45.376859
20251026111336,124.502268,45.376960
20251026111346,124.502294,45.377058
20251026111356,124.502321,45.377157
20251026111406,124.502346,45.377255
20251026111416,124.502339,45.377215
20251026111426,124.502430,45.377249
20251026111436,124.502393,45.377242
20251026111446,124.502392,45.377232
20251026111455,124.502376,45.377160
20251026111506,124.502355,45.377079
20251026111516,124.502330,45.376988
20251026111526,124.502304,45.376891
20251026111536,124.502275,45.376788
20251026111546,124.502248,45.376687
20251026111556,124.502218,45.376581
20251026111606,124.502187,45.376470
20251026111616,124.502157,45.376354
20251026111626,124.502127,45.376238
20251026111636,124.502157,45.376357
20251026111646,124.502135,45.376333
20251026111656,124.502116,45.376311
20251026111706,124.501985,45.376243
20251026111716,124.501803,45.376234
20251026111726,124.501616,45.376201
20251026111736,124.501426,45.376168
20251026111746,124.501354,45.376086
20251026111756,124.501333,45.376013
20251026111806,124.501307,45.375922
20251026111816,124.501282,45.375822
20251026111826,124.501255,45.375721
20251026111836,124.501226,45.375611
20251026111846,124.501197,45.375501
20251026111856,124.501172,45.375391
20251026111906,124.501164,45.375358
20251026111916,124.501148,45.375288
20251026111925,124.501238,45.375231
20251026111936,124.501231,45.375232
20251026111946,124.501173,45.375254
20251026111955,124.501174,45.375258
20251026112006,124.501174,45.375258
20251026112016,124.501174,45.375258
20251026112025,124.501187,45.375311
20251026112036,124.501205,45.375400
20251026112046,124.501229,45.375499
20251026112056,124.501256,45.375605
20251026112106,124.501286,45.375713
20251026112116,124.501315,45.375821
20251026112126,124.501341,45.375931
20251026112136,124.501372,45.376037
20251026112146,124.501402,45.376184
20251026112156,124.501496,45.376184
20251026112206,124.501470,45.376153
20251026112216,124.501426,45.376066
20251026112226,124.501402,45.375982
20251026112236,124.501380,45.375888
20251026112246,124.501378,45.375882
20251026112256,124.501355,45.375782
20251026112306,124.501325,45.375673
20251026112316,124.501298,45.375564
20251026112326,124.501266,45.375446
20251026112336,124.501237,45.375314
20251026112346,124.501219,45.375206
20251026112356,124.501219,45.375185
20251026112406,124.501214,45.375134
20251026112416,124.501215,45.375133
20251026112426,124.501206,45.375068
20251026112436,124.501208,45.375149
20251026112446,124.501208,45.375149
20251026112456,124.501208,45.375149
20251026112506,124.501208,45.375149
20251026112516,124.501208,45.375149
20251026112526,124.501208,45.375149
20251026112536,124.501208,45.375149
20251026112546,124.501208,45.375149
20251026112556,124.501208,45.375149
20251026112606,124.501208,45.375149
20251026112616,124.501188,45.375271
20251026112626,124.501211,45.375341
20251026112635,124.501215,45.375402
20251026112645,124.501215,45.375402
20251026112655,124.501215,45.375402
20251026112705,124.501215,45.375402
20251026112715,124.501215,45.375402
20251026112725,124.501215,45.375402
20251026112735,124.501215,45.375402
20251026112745,124.501215,45.375402
20251026112755,124.501215,45.375402
20251026112805,124.501216,45.375412
20251026112815,124.501076,45.375455
20251026112825,124.501056,45.375362
20251026112835,124.501051,45.375245
20251026112845,124.501052,45.375245
20251026112855,124.501051,45.375245
20251026112905,124.501052,45.375245
20251026112915,124.501052,45.375245
20251026112925,124.501052,45.375245
20251026112935,124.501058,45.375046
20251026112945,124.501026,45.374737
20251026112955,124.500997,45.374437
20251026113005,124.500950,45.374151
20251026113015,124.500915,45.373834
20251026113025,124.500882,45.373518
20251026113035,124.500774,45.373212
20251026113045,124.500600,45.373050
20251026113055,124.500622,45.373051
20251026113105,124.500621,45.373051
20251026113115,124.500613,45.373052
20251026113125,124.500613,45.373052
20251026113135,124.500612,45.373051
20251026113145,124.500612,45.373051
20251026113155,124.500612,45.373051
20251026113205,124.500605,45.373052
20251026113215,124.500713,45.373048
20251026113225,124.500753,45.373047
20251026113235,124.500611,45.373214
20251026113245,124.500646,45.373244
20251026113255,124.500645,45.373244
20251026114822,124.500646,45.373244
20251026114832,124.500657,45.373224
20251026114842,124.500655,45.373226
20251026114852,124.500654,45.373231
20251026114902,124.500654,45.373233
20251026114912,124.500655,45.373235
20251026114922,124.500664,45.373214
20251026114932,124.500665,45.373217
20251026114942,124.500665,45.373222
20251026114952,124.500663,45.373226
20251026115002,124.500660,45.373227
20251026115012,124.500658,45.373226
20251026115022,124.500654,45.373216
20251026115032,124.500654,45.373220
20251026115042,124.500656,45.373224
20251026115052,124.500657,45.373229
20251026115102,124.500659,45.373232
20251026115112,124.500660,45.373232
20251026115122,124.500656,45.373212
20251026115132,124.500652,45.373213
20251026115142,124.500649,45.373216
20251026115152,124.500647,45.373225
20251026115202,124.500684,45.373108
20251026115212,124.500362,45.373049
20251026115222,124.500191,45.372936
20251026115232,124.500204,45.372704
20251026115242,124.500249,45.372258
20251026115252,124.500300,45.371801
20251026115302,124.500288,45.371147
20251026115312,124.500229,45.370479
20251026115322,124.500184,45.369804
20251026115332,124.500149,45.369130
20251026115342,124.500111,45.368390
20251026115352,124.500018,45.367624
20251026115402,124.499884,45.366823
20251026115412,124.499731,45.366062
20251026115422,124.499591,45.365406
20251026115432,124.499429,45.364674
20251026115442,124.499639,45.364006
20251026115452,124.500085,45.363408
20251026115502,124.500429,45.362926
20251026115512,124.500509,45.362805
20251026115522,124.500454,45.362284
20251026115532,124.500580,45.361714
20251026115542,124.500995,45.361238
20251026115552,124.501799,45.361064
20251026115602,124.502405,45.360576
20251026115612,124.502953,45.359957
20251026115622,124.503461,45.359364
20251026115632,124.503460,45.358707
20251026115642,124.503115,45.358362
20251026115652,124.502644,45.358004
20251026115702,124.502217,45.357489
20251026115712,124.501722,45.356886
20251026115722,124.501321,45.356324
20251026115732,124.501083,45.355794
20251026115742,124.500815,45.355186
20251026115752,124.500599,45.354574
20251026115802,124.500351,45.353935
20251026115812,124.500326,45.353881
20251026115822,124.500326,45.353881
20251026115832,124.500321,45.353867
20251026115842,124.500199,45.353531
20251026115852,124.499857,45.352911
20251026115902,124.499417,45.352301
20251026115912,124.498962,45.351677
20251026115922,124.498767,45.351037
20251026115932,124.498741,45.350608
20251026115942,124.498689,45.350260
20251026115952,124.498668,45.349864
20251026120002,124.498673,45.349261
20251026120012,124.498719,45.348655
20251026120022,124.498651,45.348035
20251026120032,124.498534,45.347386
20251026120042,124.498231,45.346884
20251026120052,124.498125,45.346678
20251026120102,124.498041,45.346249
20251026120112,124.498577,45.345591
20251026120122,124.498906,45.345172
20251026120132,124.499417,45.344621
20251026120142,124.499962,45.344025
20251026120152,124.500387,45.343543
20251026120202,124.500738,45.343217
20251026120212,124.501089,45.342808
20251026120222,124.501512,45.342726
20251026120232,124.502016,45.342493
20251026120242,124.502419,45.342262
20251026120252,124.502784,45.341741
20251026120302,124.503203,45.341728
20251026120312,124.503735,45.341889
20251026120322,124.504188,45.341972
20251026120332,124.504545,45.342075
20251026120342,124.504552,45.342070
20251026120352,124.504518,45.342077
20251026120402,124.504465,45.342087
20251026120412,124.504387,45.342124</textarea>
            <div class="button-group">
                <button id="drawTrackButton" disabled style="flex: 1;">绘制轨迹</button>
                <button id="showTrackPointsButton" disabled style="flex: 1;" class="btn-warning">打点</button>
                <button id="clearTrackButton" disabled style="flex: 1;">清空轨迹</button>
            </div>
            <!-- 轨迹颜色选择器 -->
            <div class="color-picker-container" style="margin-top:8px;">
                <div style="margin-bottom:6px;font-size:12px;color:#333;">轨迹颜色设置：</div>
                <div style="display:flex;align-items:center;gap:8px;">
                    <div style="display:flex;align-items:center;gap:4px;">
                        <label style="font-size:12px;">轨迹线颜色:</label>
                        <div id="trackLineColorPicker" class="color-picker" style="width:24px;height:24px;border:1px solid #ccc;cursor:pointer;background-color:#FF0000;"></div>
                        <input type="color" id="trackLineColorInput" value="#FF0000" style="display:none;">
                    </div>
                    <div style="display:flex;align-items:center;gap:4px;">
                        <label style="font-size:12px;">轨迹点颜色:</label>
                        <div id="trackPointColorPicker" class="color-picker" style="width:24px;height:24px;border:1px solid #ccc;cursor:pointer;background-color:#68EAF3;"></div>
                        <input type="color" id="trackPointColorInput" value="#68EAF3" style="display:none;">
                    </div>
                </div>
            </div>
            <!-- 回放控制 -->
            <div class="split-section" style="margin-top:8px;">
                <div class="title">轨迹回放</div>
                <div class="playback-actions" style="display:flex;gap:8px;margin-bottom:8px;">
                    <button id="playbackStartBtn" disabled>开始</button>
                    <button id="playbackPauseBtn" disabled>继续</button>
                    <button id="playbackStopBtn" disabled>结束</button>
                </div>
                <div class="playback-speed" style="display:flex;align-items:center;gap:8px;margin-bottom:8px;">
                    <label>速度：
                        <select id="playbackSpeedSelect" disabled>
                            <option value="1" selected>1×</option>
                            <option value="2">2×</option>
                            <option value="4">4×</option>
                            <option value="8">8×</option>
                            <option value="16">16×</option>
                            <option value="32">32×</option>
                            <option value="64">64×</option>
                            <option value="128">128×</option>
                            <option value="256">256×</option>
                            <option value="512">512×</option>
                            <option value="1024">1024×</option>
                        </select>
                    </label>
                    <span id="playbackTimeLabel" style="font-size:12px;color:#666;">时间：—</span>
                </div>
                <div class="playback-time" style="display:flex;flex-direction:column;gap:4px;margin-bottom:8px;">
                    <label class="playback-time-label" style="display:flex;align-items:center;gap:8px;flex:1 1 auto;min-width:0;">
                        <span class="playback-time-text" style="white-space:nowrap;">起始时间：</span>
                        <input type="range" id="playbackTimeSlider" disabled min="0" max="0" step="1000" value="0" style="flex:1 1 auto;min-width:0;max-width:100%;vertical-align:middle;">
                    </label>
                    <span id="playbackTimeCursor" style="font-size:12px;color:#666;align-self:flex-end;">—</span>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    let map;
    let currentPolygons = []; // 存储多边形和其标签
    let currentTracks = []; // 存储轨迹折线及相关覆盖物
    let mapLoaded = false;
    let mapLabelHandlers = []; // 存储地图事件处理器
    let labelsEnabled = false; // 标签显示开关（默认关闭）
    let isDrawing = false; // 绘制进行中防止重复点击
    let currentMapType = 'satellite'; // 当前地图类型：'satellite'（卫星图）或'street'（街道图）

    window.onload = function () {
        if (typeof T === 'undefined') {
            alert("天地图API加载失败，请检查网络或密钥！");
            return;
        }
        initMap();
        bindDrawEvent();
        bindMinimizeEvent();
        bindTabs();
        bindBatchGenerator();
        bindMultiSplitter();
        bindLabelsToggle(); // 绑定标签显示开关
        bindTrackEvents();  // 绑定轨迹绘制与清空
        bindPlaybackControls(); // 绑定轨迹回放
        bindMeasureEvents(); // 绑定测量功能
        bindMapTypeEvent(); // 绑定地图类型切换功能
        initColorPickers(); // 初始化颜色选择器
    };

    function initMap() {
        showLoading();
        disableButtons(true);

        try {
            map = new T.Map("mapContainer", {
                zoom: 12,
                center: new T.LngLat(116.40769, 39.90403)
            });

            // 已移除测试标签
            map.enableScrollWheelZoom();

            // 不再添加地图类型控件到地图，改为使用左侧工具条按钮切换
            // const mapTypeCtrl = new T.Control.MapType({
            //     mapTypes: [TMAP_NORMAL_MAP, TMAP_SATELLITE_MAP, TMAP_TERRAIN_MAP],
            //     position: T_ANCHOR_TOP_LEFT
            // });
            // map.addControl(mapTypeCtrl);

            // 加载影像底图（卫星）
            const tk = "9ed3674d01dd7c129ab38e3c38bf651a";

            // 方案1：使用默认地图类型（作为备选）
            map.setMapType(TMAP_SATELLITE_MAP);
            currentMapType = 'satellite';
            updateMapTypeButton('卫星图');

            // 方案2：手动添加影像图层（底图 + 标注）
            const vecLayer = new T.TileLayer(`https://t0.tianditu.gov.cn/img_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=img&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk=${tk}`);
            const cvaLayer = new T.TileLayer(`https://t0.tianditu.gov.cn/cia_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=cia&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk=${tk}`);

            // 添加图层并监听加载状态
            vecLayer.addEventListener("load", function () {
                console.log("影像底图加载完成");
            });

            vecLayer.addEventListener("error", function (e) {
                console.error("影像底图加载错误:", e);
                alert("影像底图加载错误，将使用默认地图类型");
            });

            map.addLayer(vecLayer);
            map.addLayer(cvaLayer);

            // 监听地图加载事件
            map.addEventListener("loaded", function () {
                console.log("地图加载完成");
                markMapLoaded();
            });
            map.addEventListener("load", function () {
                console.log("地图load事件触发");
                markMapLoaded();
            });
            map.addEventListener("tilesloaded", function () {
                console.log("地图瓦片加载完成");
                markMapLoaded();
            });
            // 监听地图加载失败事件
            map.addEventListener("error", function (e) {
                console.error("地图加载错误:", e);
                alert("地图加载错误: " + e.message);
                hideLoading();
            });

            // 监听地图移动事件，用于更新标签位置
            const moveHandler = function () {
                updateAllLabelsPosition();
            };
            map.addEventListener("move", moveHandler);
            map.addEventListener("zoom", moveHandler);

            // 存储事件处理器，用于清理
            mapLabelHandlers.push({ event: "move", handler: moveHandler });
            mapLabelHandlers.push({ event: "zoom", handler: moveHandler });

            // 超时容错
            setTimeout(() => {
                if (!mapLoaded) markMapLoaded();
            }, 8000);

        } catch (error) {
            alert("地图初始化失败：" + error.message);
            console.error(error);
            hideLoading();
        }
    }

    function markMapLoaded() {
        if (!mapLoaded) {
            mapLoaded = true;
            hideLoading();
            // 不再禁用按钮，保持按钮始终可用
            // disableButtons(false);
            disableTrackButtons(false);
            // 仅开启速度选择，回放按钮按状态控制
            const speedSel = document.getElementById('playbackSpeedSelect');
            if (speedSel) speedSel.disabled = false;
            updatePlaybackButtonsState('idle');
        }
    }

    function showLoading() {
        const loading = document.getElementById("mapLoading");
        loading.style.display = "flex";
        loading.style.opacity = "1";
    }

    function hideLoading() {
        const loading = document.getElementById("mapLoading");
        loading.style.opacity = "0";
        setTimeout(() => loading.style.display = "none", 300);
    }

    function disableButtons(disabled) {
        // 不再禁用按钮，保持按钮始终可用
        // document.getElementById("drawButton").disabled = disabled;
        // document.getElementById("clearButton").disabled = disabled;
    }

    function disableTrackButtons(disabled) {
        const drawTrackBtn = document.getElementById("drawTrackButton");
        const showTrackPointsBtn = document.getElementById("showTrackPointsButton");
        const clearTrackBtn = document.getElementById("clearTrackButton");
        if (drawTrackBtn) drawTrackBtn.disabled = disabled;
        if (showTrackPointsBtn) showTrackPointsBtn.disabled = disabled;
        if (clearTrackBtn) clearTrackBtn.disabled = disabled;
    }
    // 回放控件的禁用/启用
    function disablePlaybackButtons(disabled) {
        ["playbackStartBtn","playbackPauseBtn","playbackStopBtn","playbackSpeedSelect","playbackTimeSlider"].forEach(id=>{
            const el = document.getElementById(id);
            if (el) el.disabled = disabled;
        });
    }

    // 回放按钮状态管理：空闲/播放/暂停
    function updatePlaybackButtonsState(state){
        try {
            const startBtn = document.getElementById('playbackStartBtn');
            const pauseBtn = document.getElementById('playbackPauseBtn');
            const stopBtn = document.getElementById('playbackStopBtn');
            if (!startBtn || !pauseBtn || !stopBtn) return;
            if (state === 'idle') {
                startBtn.disabled = false;
                pauseBtn.disabled = true;
                stopBtn.disabled = true;
                pauseBtn.textContent = '继续';
            } else if (state === 'playing') {
                startBtn.disabled = true;
                pauseBtn.disabled = false;
                stopBtn.disabled = false;
                pauseBtn.textContent = '暂停';
            } else if (state === 'paused') {
                startBtn.disabled = true;
                pauseBtn.disabled = false;
                stopBtn.disabled = false;
                pauseBtn.textContent = '继续';
            }
        } catch(e) { console.warn('更新按钮状态失败:', e); }
    }

    function bindDrawEvent() {
        document.getElementById("drawButton").addEventListener("click", function () {
            if (isDrawing) { console.log('绘制进行中，忽略重复点击'); return; }
            isDrawing = true;
            showLoading();
            try {
                const wktStr = document.getElementById("wktTextarea").value.trim();
                if (!wktStr) { alert("请输入WKT字符串！"); return; }
                clearOverlays();
                const geojson = parseWkt(wktStr);
    
                const polygonData = [];
                if (geojson.type === "Polygon") {
                    polygonData.push({ index: 1, coordinates: geojson.coordinates });
                } else if (geojson.type === "MultiPolygon") {
                    geojson.coordinates.forEach((polygon, index) => {
                        polygonData.push({ index: index + 1, coordinates: polygon });
                    });
                }
    
                // 重置并绘制
                polygonInfoList = [];
                polygonData.forEach(pd => processPolygon(pd.index, pd.coordinates));
    
                // 视图居中到所有已绘制轮廓
                try { fitViewportToPolygons(); } catch (e) { console.warn('视图居中失败', e); }
    
                // 在视图稳定后再创建/更新标签
                setTimeout(() => {
                    if (labelsEnabled) {
                        try {
                            createAllLabels();
                            updateAllLabelsPosition();
                        } catch (e) {
                            console.warn('创建或更新标签失败:', e);
                        }
                    }
                }, 150);
            } catch (e) {
                alert('绘制失败：' + (e && e.message ? e.message : e));
                console.error('绘制异常:', e);
            } finally {
                hideLoading();
                isDrawing = false;
                // 不再禁用按钮，保持按钮始终可用
                // disableButtons(false);
            }
        });

        document.getElementById("clearButton").addEventListener("click", function () {
            if (isDrawing) { console.log('绘制进行中，暂不清空'); return; }
            clearOverlays();
            console.log("已清空所有轮廓");
        });
    }

    // 存储多边形数据，用于后续标签创建
    let polygonInfoList = [];

    // 处理单个多边形的绘制和面积计算
    function processPolygon(actualPolygonIndex, polygonCoords) {
        console.log('开始处理多边形', actualPolygonIndex);

        // 坐标系选择（绘制始终使用WGS84坐标）
        const coordSys = (document.getElementById('coordSysSelect') && document.getElementById('coordSysSelect').value) || 'wgs84';

        // 统一转换为WGS84用于绘制与面积计算
        function toWgs(point){
            const lng = point[0], lat = point[1];
            if (coordSys === 'wgs84' || coordSys === 'cgcs2000') {
                return [lng, lat];
            } else if (coordSys === 'gcj02') {
                const w = gcj02ToWgs84(lng, lat);
                return [w.lng, w.lat];
            } else if (coordSys === 'bd09') {
                const gcj = bd09ToGcj02(lng, lat);
                const w = gcj02ToWgs84(gcj.lng, gcj.lat);
                return [w.lng, w.lat];
            }
            return [lng, lat];
        }
        const coordsWGS84 = polygonCoords.map(ring => ring.map(toWgs));
        let outerRingWGS = coordsWGS84[0] || [];

        // 生成用于绘制的坐标（直接使用WGS84坐标）
        const rings = coordsWGS84.map(ring => ring.map(([lng, lat]) => new T.LngLat(lng, lat)));


         // 创建半透明填充的多边形（无边框）
          const polygon = new T.Polygon(rings, {
              color: currentOutlineColor,
              weight: 1,
              opacity: 1,
              fillColor: currentFillColor,
              fillOpacity: currentFillOpacity
          });
 
          // 使用WGS84坐标计算面积（更准确的面积计算）
         let areaSqm;
         let areaMu;



         try {
             // 检查Turf.js是否可用
             if (typeof turf !== 'undefined' && turf.area) {
                 // 使用Turf.js计算多边形面积
                // 构造GeoJSON格式的多边形
                const geoJsonPolygon = {
                    type: "Polygon",
                    coordinates: coordsWGS84
                };


                 // 使用Turf.js计算面积（平方米）
                 areaSqm = turf.area(geoJsonPolygon);
                 areaMu = (areaSqm / 666.6667).toFixed(4); // 转换为亩
                 console.log(`多边形${actualPolygonIndex}面积计算结果(Turf.js): ${areaSqm}平方米 = ${areaMu}亩`);
             } else {
                 // 如果Turf.js不可用，回退到之前的计算方法
                 console.warn('Turf.js不可用，使用备用计算方法');
                 // 计算带孔洞的多边形面积
                 areaSqm = 0;
                 // 计算外环面积
                 outerRingWGS = coordsWGS84[0] || [];
                 areaSqm += calculatePolygonArea(outerRingWGS);

                 // 减去内环（孔洞）面积
                 for (let i = 1; i < coordsWGS84.length; i++) {
                     const innerRingArea = calculatePolygonArea(coordsWGS84[i]);
                     areaSqm -= innerRingArea;
                 }

                  areaMu = (areaSqm / 666.6667).toFixed(4); // 使用更精确的转换系数
                  console.log(`多边形${actualPolygonIndex}面积计算结果(备用): ${areaSqm}平方米 = ${areaMu}亩`);
              }
          } catch (error) {
              console.error(`面积计算失败:`, error);
              areaSqm = 0;
              areaMu = '0.0000';
          }

          // 计算多边形的中心点和底部中心点（WGS84）
          const centerPoint = calculatePolygonCenter(outerRingWGS);
          const bottomCenterPoint = calculatePolygonBottomCenter(outerRingWGS);

          // 添加多边形到地图
          if (map) {
              map.addOverLay(polygon);
              console.log(`多边形${actualPolygonIndex}已添加到地图`);
          } else {
              console.error('地图对象不存在');
          }

          // 存储多边形信息，用于后续标签创建
          polygonInfoList.push({
              index: actualPolygonIndex,
              polygon: polygon,
              area: areaMu,
              bottomCenter: { lng: bottomCenterPoint.lng, lat: bottomCenterPoint.lat },
              ringPoints: rings
          });
      }

    // 视图居中：根据已绘制的GCJ-02点
    function fitViewportToPolygons() {
        const points = [];
        try {
            if (!map || !map.setViewport) return;
            polygonInfoList.forEach(info => {
                if (!info || !info.ringPoints) return;
                info.ringPoints.forEach(ring => {
                    ring.forEach(ll => points.push(ll));
                });
            });
            if (!points.length) return;
            map.setViewport(points);
        } catch (e) {
            try {
                const lngs = points.map(p => p.lng);
                const lats = points.map(p => p.lat);
                const center = new T.LngLat(
                    (Math.min(...lngs) + Math.max(...lngs)) / 2,
                    (Math.min(...lats) + Math.max(...lats)) / 2
                );
                if (map && map.panTo) map.panTo(center);
            } catch (e2) {
                console.warn('视图居中失败:', e2);
            }
        }
    }

    // 统一创建所有多边形的标签
    function createAllLabels() {
        const mapContainer = document.getElementById('mapContainer');
        if (!mapContainer || !map) return;

        polygonInfoList.forEach(info => {
            if (!info) return;
            // 防止重复创建
            if (info.labelRef) return;
            // 创建标签元素
            const labelDiv = document.createElement('div');
            labelDiv.className = 'area-label';
            labelDiv.innerHTML = `地块${info.index}：${info.area}亩`;

            // 添加到地图容器并根据屏幕边界定位到轮廓下方
            mapContainer.appendChild(labelDiv);
            positionLabelForPolygon(labelDiv, info);

            // 记录引用，避免重复创建
            info.labelRef = labelDiv;

            // 存储到 currentPolygons 以复用现有定位/清理逻辑
            const labelObj = {
                domElement: labelDiv,
                isDomLabel: true,
                polygonInfo: info
            };
            currentPolygons.push({ polygon: info.polygon, label: labelObj });
        });

        // 不清空 polygonInfoList，便于开关随时创建/隐藏标签
    }

    // 根据多边形屏幕边界定位标签，保证始终在轮廓下方
    function positionLabelForPolygon(labelDiv, info) {
        if (!map || !info || !info.ringPoints) return;
        const points = [];
        info.ringPoints.forEach(ring => {
            ring.forEach(ll => {
                const p = map.lngLatToContainerPoint(ll);
                points.push(p);
            });
        });
        if (!points.length) return;
        const minX = Math.min(...points.map(p => p.x));
        const maxX = Math.max(...points.map(p => p.x));
        const maxY = Math.max(...points.map(p => p.y));
        const container = document.getElementById('mapContainer');
        const labelWidth = labelDiv.offsetWidth;
        const labelHeight = labelDiv.offsetHeight;
        const targetLeft = Math.round((minX + maxX) / 2 - labelWidth / 2);
        const targetTop = Math.round(maxY + 6);
        const clampedLeft = Math.max(0, Math.min(targetLeft, container.clientWidth - labelWidth));
        const clampedTop = Math.max(0, Math.min(targetTop, container.clientHeight - labelHeight));
        labelDiv.style.left = clampedLeft + 'px';
        labelDiv.style.top = clampedTop + 'px';
    }

    // 更新所有标签位置（地图move/zoom时调用）
    function updateAllLabelsPosition() {
        try {
            if (!map) return;
            const container = document.getElementById('mapContainer');
            if (!container) return;
            currentPolygons.forEach(item => {
                if (!item || !item.label) return;
                const labelObj = item.label;
                if (labelObj.isDomLabel && labelObj.domElement && labelObj.polygonInfo) {
                    // 确保标签在容器中
                    if (!labelObj.domElement.parentNode) {
                        container.appendChild(labelObj.domElement);
                    }
                    positionLabelForPolygon(labelObj.domElement, labelObj.polygonInfo);
                }
            });
        } catch (e) {
            console.warn('更新标签位置时出错:', e);
        }
    }
    // 确保在全局可用（处理第三方库事件回调作用域差异）
    window.updateAllLabelsPosition = updateAllLabelsPosition;

    // 绑定“显示亩数标签”开关（默认隐藏）
    function bindLabelsToggle() {
        const cb = document.getElementById('toggleLabelsCheckbox');
        const container = document.getElementById('mapContainer');
        if (!cb || !container) return;
        // 默认隐藏标签
        container.classList.add('labels-hidden');
        cb.addEventListener('change', () => {
            labelsEnabled = cb.checked;
            if (labelsEnabled) {
                container.classList.remove('labels-hidden');
                const hasAnyLabel = currentPolygons.some(item => item && item.label && item.label.domElement);
                if (!hasAnyLabel) {
                    try { createAllLabels(); } catch (e) { console.warn('创建标签失败:', e); }
                }
                updateAllLabelsPosition();
            } else {
                container.classList.add('labels-hidden');
            }
        });
    }

    /**
     * 计算多边形中心点（比底部中心更适合显示标签）
     */
    function calculatePolygonCenter(outerRing) {
        let sumLng = 0, sumLat = 0;
        const len = outerRing.length;

        for (let i = 0; i < len; i++) {
            sumLng += outerRing[i][0];
            sumLat += outerRing[i][1];
        }

        return {
            lng: sumLng / len,
            lat: sumLat / len
        };
    }

    /**
     * 计算多边形面积（球面多边形面积计算）
     * 使用更准确的球面坐标面积计算方法，确保面积与视觉大小一致
     */
    function calculatePolygonArea(coordinates) {
        // 地球半径（米）- 使用更精确的值
        const R = 6371000.8;
        const n = coordinates.length;

        // 将所有坐标转换为弧度
        const coordsRad = coordinates.map(point => [
            point[0] * Math.PI / 180,
            point[1] * Math.PI / 180
        ]);

        let areaRad = 0;

        // 使用更准确的球面多边形面积公式（Girard定理）
        for (let i = 0; i < n; i++) {
            const j = (i + 1) % n;
            const lon1 = coordsRad[i][0];
            const lat1 = coordsRad[i][1];
            const lon2 = coordsRad[j][0];
            const lat2 = coordsRad[j][1];

            // 计算球面多边形面积增量
            const dlon = lon2 - lon1;
            const sinLat1 = Math.sin(lat1);
            const sinLat2 = Math.sin(lat2);
            const cosLat1 = Math.cos(lat1);
            const cosLat2 = Math.cos(lat2);

            // 使用更精确的公式
            areaRad += dlon * (sinLat1 * cosLat2 * Math.cos(dlon / 2) + sinLat2 * cosLat1);
        }

        // 计算总面积（平方米）
        const areaSqm = Math.abs(areaRad) * R * R * 0.5;

        return areaSqm;
    }

    /**
     * 清空所有多边形和标签（同时处理 polygonInfoList 与 currentPolygons）
     */
    function clearOverlays() {
        try {
            // 先移除 polygonInfoList 中记录的多边形与其DOM标签
            polygonInfoList.forEach(info => {
                if (info && info.polygon && map && map.removeOverLay) {
                    try { map.removeOverLay(info.polygon); } catch (e) { console.warn('移除多边形失败:', e); }
                }
                if (info && info.labelRef && info.labelRef.parentNode) {
                    try { info.labelRef.parentNode.removeChild(info.labelRef); } catch (e) { console.warn('移除DOM标签失败:', e); }
                    info.labelRef = null;
                }
            });

            // 再处理 currentPolygons（兼容旧路径与标签对象）
            currentPolygons.forEach(item => {
                if (item.polygon && map && map.removeOverLay) {
                    try { map.removeOverLay(item.polygon); } catch (e) { console.warn('移除多边形失败:', e); }
                }
                if (item.label) {
                    if (item.label.domElement && item.label.domElement.parentNode) {
                        try { item.label.domElement.parentNode.removeChild(item.label.domElement); } catch (e) { console.warn('移除DOM标签失败:', e); }
                    } else if (map && map.removeOverLay && !item.label.isDomLabel) {
                        try { map.removeOverLay(item.label); } catch (e) { console.warn('移除地图覆盖物标签失败:', e); }
                    }
                }
            });

            // 清空记录数组
            currentPolygons = [];
            polygonInfoList = [];

            console.log('已清空所有多边形和标签（保留事件监听器）');
        } catch (error) {
            console.error('清空覆盖物时出错:', error);
        }
    }

    // 其他辅助函数（保持不变）
    function bindMinimizeEvent() {
        const container = document.querySelector(".wkt-input-container");
        const btn = document.getElementById("minimizeBtn");
        const minIcon = btn?.querySelector(".min-icon");
        const restoreIcon = btn?.querySelector(".restore-icon");

        btn?.addEventListener("click", () => {
            const minimized = container.classList.toggle("minimized");
            if (minIcon && restoreIcon) {
                if (minimized) {
                    minIcon.style.display = "none";
                    restoreIcon.style.display = "";
                } else {
                    minIcon.style.display = "";
                    restoreIcon.style.display = "none";
                }
            }
        });
    }

    // 在脚本内部补充：页签切换（3个页签）
     function bindTabs() {
         const tabs = [
             { btn: document.getElementById('tabDrawBtn'), pane: document.getElementById('tabDraw'), key: 'draw' },
             { btn: document.getElementById('tabTrackBtn'), pane: document.getElementById('tabTrack'), key: 'track' },
             { btn: document.getElementById('tabSplitBtn'), pane: document.getElementById('tabSplit'), key: 'split' },
             { btn: document.getElementById('tabBatchBtn'), pane: document.getElementById('tabBatch'), key: 'batch' },
         ];
         if (tabs.some(t => !t.btn || !t.pane)) return;
         function activate(key) {
             tabs.forEach(t => {
                 const active = t.key === key;
                 t.btn.classList.toggle('active', active);
                 t.pane.classList.toggle('active', active);
             });
         }
         tabs.forEach(t => t.btn.addEventListener('click', () => activate(t.key)));
         activate('draw');
     }
    function updateParserStatus() {
        const el = document.getElementById('parserStatus');
        if (!el) return;
        const ok = (typeof Terraformer !== 'undefined' && Terraformer.WKT && typeof Terraformer.WKT.parse === 'function');
        if (ok) {
            el.textContent = 'Terraformer WKT Parser';
            el.style.color = '#2f8f2f';
        } else {
            el.textContent = '本地回退解析（仅支持POLYGON/MULTIPOLYGON）';
            el.style.color = '#c77d1e';
        }
    }
     function parseWkt(wkt) {
         wkt = wkt.trim();
         // 优先使用成熟库（Terraformer WKT Parser）
         if (typeof Terraformer !== 'undefined' && Terraformer.WKT && Terraformer.WKT.parse) {
             try {
                 return Terraformer.WKT.parse(wkt);
             } catch (e) {
                 console.warn('Terraformer解析失败，尝试本地回退解析:', e);
             }
         } else {
             // 不再提示“未加载”，由状态栏展示回退信息
         }
         // 回退解析：仅支持 POLYGON / MULTIPOLYGON
         const typeMatch = wkt.match(/^\s*(POLYGON|MULTIPOLYGON)\s*\(/i);
         if (!typeMatch) throw new Error('仅支持POLYGON/MULTIPOLYGON');
         const type = typeMatch[1].toUpperCase();
         const inner = wkt.substring(wkt.indexOf('('));
         if (type === 'POLYGON') {
             const coords = parsePolygonCoords(inner.replace(/^\(/, '').replace(/\)$/, ''));
             return { type: 'Polygon', coordinates: coords };
         } else {
             const trimmed = inner.replace(/^\(\(/, '').replace(/\)\)$/, '');
             const coords = parseMultiPolygonCoords(trimmed);
             return { type: 'MultiPolygon', coordinates: coords };
         }
     }

     function bindMultiSplitter() {
         const input = document.getElementById('multiInput');
         const output = document.getElementById('polyOutput');
         const splitBtn = document.getElementById('splitMultiBtn');
         const copyBtn = document.getElementById('copyPolysBtn');
         if (!input || !output || !splitBtn || !copyBtn) return;

         // 本地WKT序列化辅助
         function ringToText(ring) {
             if (!ring || !ring.length) return '()';
             const first = ring[0];
             const last = ring[ring.length - 1];
             const closed = (first[0] === last[0] && first[1] === last[1]) ? ring : ring.concat([[first[0], first[1]]]);
             return '(' + closed.map(pt => pt[0] + ' ' + pt[1]).join(', ') + ')';
         }
         function toWktPolygonCoords(coords) {
             return 'POLYGON(' + coords.map(ringToText).join(', ') + ')';
         }
         function toWktMulti(coords) {
             return 'MULTIPOLYGON(' + coords.map(poly => '(' + poly.map(ringToText).join(', ') + ')').join(', ') + ')';
         }

         function polygonsFromMulti(text) {
             const geo = parseWkt(text.trim());
             if (geo.type !== 'MultiPolygon') throw new Error('请输入有效的 MULTIPOLYGON WKT');
             const polys = geo.coordinates.map(rings => toWktPolygonCoords(rings));
             return polys;
         }
         splitBtn.addEventListener('click', () => {
             try {
                 const list = polygonsFromMulti(input.value.trim());
                 output.value = list.join('\n');
             } catch (e) {
                 alert('分割失败：' + e.message);
             }
         });
         copyBtn.addEventListener('click', async () => {
             const val = output.value.trim();
             if (!val) { alert('没有可复制的结果'); return; }
             try { await navigator.clipboard.writeText(val); alert('已复制到剪贴板'); } catch (e) { console.warn('复制失败', e); }
         });
     }

     function bindBatchGenerator() {
         const batchInput = document.getElementById('batchInput');
         const output = document.getElementById('multiOutput');
         const genBtn = document.getElementById('generateMultiBtn');
         const copyBtn = document.getElementById('copyMultiBtn');

         // 本地WKT序列化辅助（与分割器保持一致）
         function ringToText(ring) {
             if (!ring || !ring.length) return '()';
             const first = ring[0];
             const last = ring[ring.length - 1];
             const closed = (first[0] === last[0] && first[1] === last[1]) ? ring : ring.concat([[first[0], first[1]]]);
             return '(' + closed.map(pt => pt[0] + ' ' + pt[1]).join(', ') + ')';
         }
         function toWktMulti(coords) {
             return 'MULTIPOLYGON(' + coords.map(poly => '(' + poly.map(ringToText).join(', ') + ')').join(', ') + ')';
         }

         genBtn.addEventListener('click', () => {
             try {
                 const lines = batchInput.value.trim().split(/\n|;/).map(s => s.trim()).filter(Boolean);
                 if (lines.length === 0) throw new Error('请按每行或分号输入至少一个POLYGON');
                 const polygons = lines.map((line, idx) => {
                     const g = parseWkt(line);
                     if (g.type !== 'Polygon') throw new Error(`第${idx + 1}行不是有效的POLYGON WKT`);
                     return g;
                 });
                 const multiGeo = { type: 'MultiPolygon', coordinates: polygons.map(p => p.coordinates) };
                 output.value = toWktMulti(multiGeo.coordinates);
             } catch (e) {
                 alert('生成失败：' + e.message);
             }
         });

         copyBtn.addEventListener('click', async () => {
             const val = output.value.trim();
             if (!val) { alert('没有可复制的结果'); return; }
             try { await navigator.clipboard.writeText(val); alert('已复制到剪贴板'); } catch (e) { console.warn('复制失败', e); }
         });

     }

     function setExampleWkt() {
         const exampleWkt = "MULTIPOLYGON(" +
             "(" +
             "(116.35 39.93, 116.39 39.93, 116.39 39.90, 116.35 39.90, 116.35 39.93)," + // 外环
             "(116.36 39.92, 116.38 39.92, 116.38 39.91, 116.36 39.91, 116.36 39.92)" +  // 内环
             ")," +
             "(" +
             "(116.40 39.95, 116.43 39.97, 116.46 39.96, 116.49 39.98, 116.52 39.95, 116.55 39.93, 116.58 39.94, 116.61 39.92, 116.64 39.95, 116.40 39.95)" +
             ")" +
             ")";
         document.getElementById("wktTextarea").value = exampleWkt;
     }

     function parsePolygonCoords(coordStr) {
         const ringStrs = coordStr.split(/\)\s*,\s*\(/).map(s => s.replace(/[()]/g, '').trim());
         const rings = [];
         ringStrs.forEach(ringStr => {
             const pts = ringStr.split(/,\s*/).map(pointStr => {
                 const [lng, lat] = pointStr.split(/\s+/).map(Number);
                 if (isNaN(lng) || isNaN(lat)) throw new Error("坐标格式错误：" + pointStr);
                 return [lng, lat];
             });
             // 自动拆分：如果一个ring中包含多次回到起点（闭合），则拆分为多个环
             // 兼容用户将外环与内环错误地写在同一对括号中的情况
             let start = 0;
             while (start < pts.length) {
                 const startPt = pts[start];
                 let closeIdx = -1;
                 for (let i = start + 1; i < pts.length; i++) {
                     if (pts[i][0] === startPt[0] && pts[i][1] === startPt[1]) {
                         closeIdx = i;
                         break;
                     }
                 }
                 if (closeIdx === -1) {
                     // 未找到闭合：将剩余点视为一个环，并强制闭合
                     const ring = pts.slice(start);
                     if (ring.length && (ring[0][0] !== ring[ring.length - 1][0] || ring[0][1] !== ring[ring.length - 1][1])) {
                         ring.push([ring[0][0], ring[0][1]]);
                     }
                     rings.push(ring);
                     break;
                 } else {
                     const ring = pts.slice(start, closeIdx + 1);
                     rings.push(ring);
                     start = closeIdx + 1;
                 }
             }
         });
         return rings;
     }

     function parseMultiPolygonCoords(coordStr) {
         const polygonStrs = coordStr.split(/\)\s*\)\s*,\s*\(\s*\(/).map(s => s.replace(/[()]/g, '').trim());
         return polygonStrs.map(polygonStr => parsePolygonCoords(polygonStr));
     }

     function wgs84ToGcj02(lng, lat) {
         const x_PI = 3.14159265358979324 * 3000.0 / 180.0;
         const PI = 3.1415926535897932384626;
         const a = 6378245.0;
         const ee = 0.00669342162296594323;

         if (outOfChina(lng, lat)) return { lng, lat };

         let dlat = transformLat(lng - 105.0, lat - 35.0);
         let dlng = transformLng(lng - 105.0, lat - 35.0);
         const radlat = lat / 180.0 * PI;
         let magic = Math.sin(radlat);
         magic = 1 - ee * magic * magic;
         const sqrtmagic = Math.sqrt(magic);
         dlat = (dlat * 180.0) / ((a * (1 - ee)) / (magic * sqrtmagic) * PI);
         dlng = (dlng * 180.0) / (a / sqrtmagic * Math.cos(radlat) * PI);

         return { lng: lng + dlng, lat: lat + dlat };

         function outOfChina(lng, lat) {
             return (lng < 72.004 || lng > 137.8347) || (lat < 0.8293 || lat > 55.8271);
         }

         function transformLat(x, y) {
             let ret = -100.0 + 2.0 * x + 3.0 * y + 0.2 * y * y + 0.1 * x * y + 0.2 * Math.sqrt(Math.abs(x));
             ret += (20.0 * Math.sin(6.0 * x * PI) + 20.0 * Math.sin(2.0 * x * PI)) * 2.0 / 3.0;
             ret += (20.0 * Math.sin(y * PI) + 40.0 * Math.sin(y / 3.0 * PI)) * 2.0 / 3.0;
             ret += (160.0 * Math.sin(y / 12.0 * PI) + 320 * Math.sin(y * PI / 30.0)) * 2.0 / 3.0;
             return ret;
         }

         function transformLng(x, y) {
             let ret = 300.0 + x + 2.0 * y + 0.1 * x * x + 0.1 * x * y + 0.1 * Math.sqrt(Math.abs(x));
             ret += (20.0 * Math.sin(6.0 * x * PI) + 20.0 * Math.sin(2.0 * x * PI)) * 2.0 / 3.0;
             ret += (20.0 * Math.sin(x * PI) + 40.0 * Math.sin(x / 3.0 * PI)) * 2.0 / 3.0;
             ret += (150.0 * Math.sin(x / 12.0 * PI) + 300.0 * Math.sin(x / 30.0 * PI)) * 2.0 / 3.0;
             return ret;
         }
     }

     function gcj02ToWgs84(lng, lat) {
         const g = wgs84ToGcj02(lng, lat);
         return { lng: lng * 2 - g.lng, lat: lat * 2 - g.lat };
     }

     function bd09ToGcj02(bdLng, bdLat) {
         const x_PI = 3.14159265358979324 * 3000.0 / 180.0;
         const x = bdLng - 0.0065;
         const y = bdLat - 0.006;
         const z = Math.sqrt(x * x + y * y) - 0.00002 * Math.sin(y * x_PI);
         const theta = Math.atan2(y, x) - 0.000003 * Math.cos(x * x_PI);
         const ggLng = z * Math.cos(theta);
         const ggLat = z * Math.sin(theta);
         return { lng: ggLng, lat: ggLat };
     }

     function calculatePolygonBottomCenter(outerRing) {
         let minLat = Infinity;
         let bottomPoints = [];
         outerRing.forEach(point => {
             const lat = point[1];
             if (lat < minLat) {
                 minLat = lat;
                 bottomPoints = [point];
             } else if (lat === minLat) {
                 bottomPoints.push(point);
             }
         });

         const sumLng = bottomPoints.reduce((sum, point) => sum + point[0], 0);
         const centerLng = sumLng / bottomPoints.length;

         return { lng: centerLng, lat: minLat };
     }

     function fitBounds(geojson) {
         try {
             const allPoints = [];
             function collectPoints(coords) {
                 if (typeof coords[0] === 'number') {
                     allPoints.push(coords);
                 } else {
                     coords.forEach(coord => collectPoints(coord));
                 }
             }
             collectPoints(geojson.coordinates);

             if (allPoints.length === 0) return;

             const lats = allPoints.map(p => p[1]);
             const lngs = allPoints.map(p => p[0]);
             const minLng = Math.min(...lngs);
             const maxLng = Math.max(...lngs);
             const minLat = Math.min(...lats);
             const maxLat = Math.max(...lats);

             const sw = wgs84ToGcj02(minLng, minLat);
             const ne = wgs84ToGcj02(maxLng, maxLat);

             // 修复setViewport方法的使用，确保参数格式正确
             if (map && map.setViewport) {
                 map.setViewport([
                     new T.LngLat(sw.lng, sw.lat),
                     new T.LngLat(ne.lng, ne.lat)
                 ], { padding: [50, 50] });
             } else {
                 console.warn('地图对象或setViewport方法不可用');
             }
         } catch (error) {
             console.error('调整视图范围时出错:', error);
         }
     }
// 轨迹绘制与解析
    function bindTrackEvents() {
        const drawBtn = document.getElementById('drawTrackButton');
        const showPointsBtn = document.getElementById('showTrackPointsButton');
        const clearBtn = document.getElementById('clearTrackButton');
        const ta = document.getElementById('trackTextarea');
        if (!drawBtn || !showPointsBtn || !clearBtn || !ta) return;

        drawBtn.addEventListener('click', function(){
            try {
                const text = ta.value.trim();
                if (!text) { alert('请粘贴轨迹文本（时间戳,经度,纬度）'); return; }
                const points = parseTrackText(text);
                if (points.length < 2) { alert('有效轨迹点不足，至少需要两点'); return; }
                drawTrackFromPoints(points);
                fitViewportToTrack(points);
            } catch (e) {
                alert('绘制轨迹失败：' + (e && e.message ? e.message : e));
                console.error('绘制轨迹异常:', e);
            }
        });

        showPointsBtn.addEventListener('click', function(){
            try {
                const text = ta.value.trim();
                if (!text) { alert('请粘贴轨迹文本（时间戳,经度,纬度）'); return; }
                const points = parseTrackText(text);
                if (points.length === 0) { alert('未找到有效轨迹点'); return; }
                showTrackPoints(points);
                fitViewportToTrack(points);
            } catch (e) {
                alert('显示轨迹点失败：' + (e && e.message ? e.message : e));
                console.error('显示轨迹点异常:', e);
            }
        });

        clearBtn.addEventListener('click', function(){
            clearTrackOverlays();
            console.log('已清空轨迹');
        });
    }

    function showTrackPoints(points) {
        // 先移除旧轨迹（不影响轮廓）
        clearTrackOverlays(false);
        
        if (!map || !points || points.length === 0) {
            console.log('无轨迹点可显示');
            return;
        }
        
        console.log(`准备显示${points.length}个轨迹点`);
        
        // 使用批量处理和更小的图标来提高性能
        // 创建一个更小的自定义颜色点SVG图标
        const smallColoredDotIcon = new T.Icon({
            iconUrl: `data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="1" height="1"><circle cx="0.5" cy="0.5" r="0.3" fill="%23${currentTrackPointColor.substring(1)}"/></svg>`,
            iconSize: new T.Point(1, 1),
            iconAnchor: new T.Point(0.5, 0.5)
        });
        
        // 优化批量添加点的速度
        const batchSize = 2000; // 增加每批处理的点数
        const concurrentBatches = 4; // 并发批次数量
        
        // 预创建点击事件处理函数，避免重复创建
        function createClickHandler(point, index) {
            return function() {
                const infoWindow = new T.InfoWindow({
                    content: `点${index + 1}<br/>经度: ${point.lng.toFixed(6)}<br/>纬度: ${point.lat.toFixed(6)}`,
                    offset: new T.Point(0, -20)
                });
                infoWindow.open(map, point);
            };
        }
        
        // 使用setTimeout实现更高效的批量添加，避免阻塞UI
        let currentIndex = 0;
        
        function addBatch() {
            if (currentIndex >= points.length) {
                console.log(`已显示${points.length}个轨迹点`);
                return;
            }
            
            // 添加当前批次的点
            const endIndex = Math.min(currentIndex + batchSize, points.length);
            const markersToAdd = [];
            
            // 先创建所有标记
            for (let i = currentIndex; i < endIndex; i++) {
                const point = points[i];
                const index = i;
                
                const marker = new T.Marker(point, {
                    icon: smallColoredDotIcon
                });
                
                // 添加点击事件
                marker.addEventListener('click', createClickHandler(point, index));
                
                markersToAdd.push(marker);
            }
            
            // 批量添加到地图和数组
            markersToAdd.forEach(marker => {
                map.addOverLay(marker);
                currentTracks.push(marker);
            });
            
            currentIndex = endIndex;
            
            // 使用setTimeout而不是requestAnimationFrame，减少对渲染周期的依赖
            // 设置为0，将任务放入微任务队列，但允许UI有短暂的呼吸空间
            setTimeout(addBatch, 0);
        }
        
        // 启动批量添加
        addBatch();
    }
    
    // 恢复原始的clearTrackOverlays函数
    function clearTrackOverlays(resetArray = true){        
        try {
            currentTracks.forEach(pl => {
                if (pl && map && map.removeOverLay) {
                    try { map.removeOverLay(pl); } catch (e) { console.warn('移除轨迹失败:', e); }
                }
            });
            if (resetArray) currentTracks = [];
        } catch (e) {
            console.warn('清空轨迹时出错:', e);
        }
    }

    function parseTrackText(text){
        // 选择输入坐标系（优先使用轨迹页签专属选择器，若未设置则回退到绘制页签选择器）
        const coordSysEl = document.getElementById('trackCoordSysSelect') || document.getElementById('coordSysSelect');
        const coordSys = (coordSysEl && coordSysEl.value) || 'wgs84';
        const isHash = text.indexOf('#') !== -1;
        const items = isHash ? text.split('#') : text.split(/\r?\n/);
        const pts = [];
        for (let i=0;i<items.length;i++){
            const raw = items[i];
            if (!raw) continue;
            const line = raw.trim();
            if (!line) continue;
            const parts = line.split(',');
            if (parts.length < 3) continue;
            let lng = parseFloat((parts[isHash ? 0 : 1] || '').trim());
            let lat = parseFloat((parts[isHash ? 1 : 2] || '').trim());
            // 初步过滤：数值合法性与正常范围
            if (!isFinite(lng) || !isFinite(lat)) continue;
            if (lng === 0 || lat === 0) continue; // 丢弃0.0异常点
            if (lng < -180 || lng > 180 || lat < -90 || lat > 90) continue; // 超出经纬度范围丢弃

            // 将输入坐标转换为WGS84
            let w;
            if (coordSys === 'wgs84' || coordSys === 'cgcs2000') {
                w = { lng, lat };
            } else if (coordSys === 'gcj02') {
                w = gcj02ToWgs84(lng, lat);
            } else if (coordSys === 'bd09') {
                const g = bd09ToGcj02(lng, lat);
                w = gcj02ToWgs84(g.lng, g.lat);
            } else {
                w = { lng, lat };
            }
            // 转换结果兜底检查
            if (!isFinite(w.lng) || !isFinite(w.lat)) continue;
            if (w.lng < -180 || w.lng > 180 || w.lat < -90 || w.lat > 90) continue;

            // 使用WGS84坐标绘制到地图
            pts.push(new T.LngLat(w.lng, w.lat));
        }
        return pts;
    }

    function drawTrackFromPoints(points){
        // 先移除旧轨迹（不影响轮廓）
        clearTrackOverlays(false);
        const polyline = new T.Polyline(points, {
            color: currentTrackLineColor,
            weight: 1,
            opacity: 0.9
        });
        if (map) {
            map.addOverLay(polyline);
        }
        currentTracks.push(polyline);
    }

    function clearTrackOverlays(resetArray = true){
        try {
            currentTracks.forEach(pl => {
                if (pl && map && map.removeOverLay) {
                    try { map.removeOverLay(pl); } catch (e) { console.warn('移除轨迹失败:', e); }
                }
            });
            if (resetArray) currentTracks = [];
        } catch (e) {
            console.warn('清空轨迹时出错:', e);
        }
    }


    function fitViewportToTrack(points){
        try {
            if (!map || !map.setViewport || !points || !points.length) return;
            map.setViewport(points);
        } catch (e) {
            console.warn('轨迹视图居中失败:', e);
        }
    }

    // ========= 轨迹回放功能 =========
    let playbackState = { points: [], idx: 0, speed: 1, timer: null, running: false, marker: null, line: null, path: [] };

    function bindPlaybackControls(){
        const startBtn = document.getElementById('playbackStartBtn');
        const pauseBtn = document.getElementById('playbackPauseBtn');
        const stopBtn = document.getElementById('playbackStopBtn');
        const speedSel = document.getElementById('playbackSpeedSelect');
        const timeSlider = document.getElementById('playbackTimeSlider');
        const timeCursor = document.getElementById('playbackTimeCursor');
        const ta = document.getElementById('trackTextarea');
        if (!startBtn || !pauseBtn || !stopBtn || !speedSel) return;

        // 初始按钮状态
        updatePlaybackButtonsState('idle');

        startBtn.addEventListener('click', function(){
            try {
                const text = (ta && ta.value || '').trim();
                if (!text) { alert('请粘贴轨迹文本（时间戳,经度,纬度）'); return; }
                const pts = parseTrackTextWithTime(text);
                if (pts.length < 2) { alert('有效轨迹点不足，至少需要两点'); return; }
                startPlayback(pts);
                // 状态在startPlayback中已设置为playing
            } catch (e) {
                alert('开始回放失败：' + (e && e.message ? e.message : e));
                console.error('开始回放异常:', e);
            }
        });

        pauseBtn.addEventListener('click', function(){
            if (!playbackState.running) {
                // 继续
                playbackState.running = true;
                scheduleNext();
                updatePlaybackButtonsState('playing');
            } else {
                // 暂停
                if (playbackState.timer) { clearTimeout(playbackState.timer); playbackState.timer = null; }
                playbackState.running = false;
                updatePlaybackButtonsState('paused');
            }
        });

        stopBtn.addEventListener('click', function(){ 
            stopPlayback(); 
            updatePlaybackButtonsState('idle');
        });

        speedSel.addEventListener('change', function(){
            const v = parseFloat(speedSel.value);
            playbackState.speed = (isFinite(v) && v > 0) ? v : 1;
        });

        if (timeSlider) {
            timeSlider.addEventListener('input', function(){
                const ms = parseInt(timeSlider.value, 10);
                const txt = formatTimeForLabel(ms);
                if (timeCursor) timeCursor.textContent = txt;
            });
            timeSlider.addEventListener('change', function(){
                jumpToSliderTime();
            });
        }
    }

    function parseTrackTextWithTime(text){
        const coordSysEl = document.getElementById('trackCoordSysSelect') || document.getElementById('coordSysSelect');
        const coordSys = (coordSysEl && coordSysEl.value) || 'wgs84';
        const isHash = text.indexOf('#') !== -1;
        const items = isHash ? text.split('#') : text.split(/\r?\n/);
        const out = [];
        for (let i=0;i<items.length;i++){
            const raw = items[i];
            if (!raw) continue;
            const line = raw.trim();
            if (!line) continue;
            const parts = line.split(',');
            if (parts.length < 3) continue;
            const tsRaw = (parts[isHash ? 2 : 0] || '').trim();
            const ts = (tsRaw || '').replace(/\D/g,'');
            let lng = parseFloat((parts[isHash ? 0 : 1] || '').trim());
            let lat = parseFloat((parts[isHash ? 1 : 2] || '').trim());
            if (!isFinite(lng) || !isFinite(lat)) continue;
            if (lng === 0 || lat === 0) continue;
            if (lng < -180 || lng > 180 || lat < -90 || lat > 90) continue;
            const t = parseTimestamp(ts);
            if (!t) continue;
            let w;
            if (coordSys === 'wgs84' || coordSys === 'cgcs2000') {
                w = { lng, lat };
            } else if (coordSys === 'gcj02') {
                w = gcj02ToWgs84(lng, lat);
            } else if (coordSys === 'bd09') {
                const g = bd09ToGcj02(lng, lat);
                w = gcj02ToWgs84(g.lng, g.lat);
            } else { w = { lng, lat }; }
            if (!isFinite(w.lng) || !isFinite(w.lat)) continue;
            if (w.lng < -180 || w.lng > 180 || w.lat < -90 || w.lat > 90) continue;
            out.push({ ll: new T.LngLat(w.lng, w.lat), time: t, ts });
        }
        out.sort((a,b)=>a.time - b.time);
        return out;
    }

    function parseTimestamp(ts){
        const tstr = (ts || '').replace(/\D/g,'');
        const m = tstr && tstr.match(/^\d{14}$/);
        if (!m) return null;
        const y = parseInt(tstr.slice(0,4),10);
        const M = parseInt(tstr.slice(4,6),10) - 1;
        const d = parseInt(tstr.slice(6,8),10);
        const h = parseInt(tstr.slice(8,10),10);
        const m2 = parseInt(tstr.slice(10,12),10);
        const s = parseInt(tstr.slice(12,14),10);
        const dt = new Date(y,M,d,h,m2,s);
        return isNaN(dt.getTime()) ? null : dt;
    }

    function startPlayback(points){
        console.log('[Playback] startPlayback: 点数=', points && points.length);
        stopPlayback();
        playbackState.points = points;
        playbackState.idx = 0;
        playbackState.speed = playbackState.speed || 1;
        playbackState.running = true;
        // 配置时间滑动条，并尊重现有滑块位置作为起始
        configureTimeSlider(points);
        // 启用滑块
        const slider = document.getElementById('playbackTimeSlider');
        if (slider) slider.disabled = false;
        let initIdx = 0;
        if (slider && slider.min && slider.max) {
            const ms = parseInt(slider.value, 10);
            if (isFinite(ms)) initIdx = findIndexByTime(points, ms);
        }
        playbackState.idx = initIdx;
        const first = points[initIdx];
        console.log('[Playback] 首点:', first && first.ts, first && first.ll, 'initIdx=', initIdx);
        playbackState.path = points.slice(0, initIdx+1).map(p=>p.ll);
        playbackState.line = new T.Polyline(playbackState.path, { color: currentTrackLineColor, weight: 1, opacity: 0.9 });
        if (map) {
            map.addOverLay(playbackState.line);
        }
        currentTracks.push(playbackState.line);
        // 创建并定位DOM标记以保证可见移动
        ensurePlaybackDom(first.ll);
        updatePlaybackDom(first.ll);
        updatePlaybackTimeLabel(first.ts);
        try { fitViewportToTrack(points.map(p=>p.ll)); } catch(e){}
        // 更新按钮状态
        updatePlaybackButtonsState('playing');
        scheduleNext();
    }

    function scheduleNext(){
        if (!playbackState.running) return;
        if (!playbackState.points || playbackState.idx >= playbackState.points.length - 1) {
            playbackState.running = false;
            console.log('[Playback] 回放结束：idx=', playbackState.idx, '点数=', playbackState.points ? playbackState.points.length : 0);
            updatePlaybackButtonsState('idle'); // 播放结束后按钮回到初始状态：开始可点，继续/结束灰化
            return;
        }
        const next = playbackState.points[playbackState.idx+1];
        const speed = playbackState.speed || 1;
        const delay = Math.max(4, Math.round(1000 / speed)); // 1x=1000ms/点，2x=500ms/点...
        console.log('[Playback] scheduleNext: idx=', playbackState.idx, '->', playbackState.idx+1, 'delay=', delay, 'speed=', speed);
        playbackState.timer = setTimeout(()=>{
            playbackState.idx++;
            const nextLL = next.ll;
            console.log('[Playback] 下一点:', next && next.ts, nextLL);
            try {
                // 维护路径数组
                playbackState.path = playbackState.path || [];
                playbackState.path.push(nextLL);
                console.log('[Playback] 路径长度=', playbackState.path.length);
                // 使用DOM标记进行移动（容器/图层坐标）
                if (!playbackDom.el) console.log('[Playback] DOM标记不存在，将尝试创建');
                updatePlaybackDom(nextLL);
                // 折线更新：优先setLngLats，兜底重建
                if (playbackState.line && typeof playbackState.line.setLngLats === 'function') {
                    try { playbackState.line.setLngLats(playbackState.path); }
                    catch(e){
                        console.warn('[Playback] setLngLats失败，重建折线', e);
                        if (map) { try { map.removeOverLay(playbackState.line); } catch(e){} }
                        playbackState.line = new T.Polyline(playbackState.path, { color: currentTrackLineColor, weight: 1, opacity: 0.9 });
                        if (map) map.addOverLay(playbackState.line);
                    }
                } else {
                    console.log('[Playback] 折线不支持setLngLats，重建');
                    if (playbackState.line && map) { try { map.removeOverLay(playbackState.line); } catch(e){} }
                    playbackState.line = new T.Polyline(playbackState.path, { color: currentTrackLineColor, weight: 1, opacity: 0.9 });
                    if (map) map.addOverLay(playbackState.line);
                }
            } catch(e) { console.warn('更新回放覆盖物失败:', e); }
            updatePlaybackTimeLabel(next.ts);
            scheduleNext();
        }, delay);
    }

    function stopPlayback(){
        if (playbackState.timer) { clearTimeout(playbackState.timer); playbackState.timer = null; }
        playbackState.running = false;
        playbackState.idx = 0;
        try {
            // 移除DOM标记
            removePlaybackDom();
            if (playbackState.marker && map) map.removeOverLay(playbackState.marker);
            if (playbackState.line && map) map.removeOverLay(playbackState.line);
        } catch(e){}
        playbackState.marker = null;
        playbackState.line = null;
        updatePlaybackTimeLabel('—');
        // 按钮回到初始状态
        updatePlaybackButtonsState('idle');
    }

    function updatePlaybackTimeLabel(text){
        const el = document.getElementById('playbackTimeLabel');
        if (el) el.textContent = '时间：' + (text || '—');
    }

    // 时间滑动条：配置与跳转
    function configureTimeSlider(points){
        try {
            const slider = document.getElementById('playbackTimeSlider');
            const cursor = document.getElementById('playbackTimeCursor');
            if (!slider || !points || !points.length) return;
            const minMs = points[0].time.getTime();
            const maxMs = points[points.length - 1].time.getTime();
            const prev = parseInt(slider.value, 10);
            slider.min = String(minMs);
            slider.max = String(maxMs);
            slider.step = '1000'; // 以秒为步进
            let val = (isFinite(prev) && prev >= minMs && prev <= maxMs) ? prev : minMs;
            slider.value = String(val);
            if (cursor) cursor.textContent = formatTimeForLabel(val);
        } catch(e) { console.warn('配置时间滑动条失败:', e); }
    }
    function formatTimeForLabel(ms){
        if (!isFinite(ms)) return '—';
        const d = new Date(ms);
        const pad = n => String(n).padStart(2,'0');
        const y = d.getFullYear();
        const M = pad(d.getMonth()+1);
        const da = pad(d.getDate());
        const h = pad(d.getHours());
        const m = pad(d.getMinutes());
        const s = pad(d.getSeconds());
        return `${y}-${M}-${da} ${h}:${m}:${s}`;
    }
    function findIndexByTime(points, ms){
        try {
            if (!points || !points.length) return 0;
            const n = points.length;
            const minMs = points[0].time.getTime();
            const maxMs = points[n-1].time.getTime();
            if (!isFinite(ms)) return 0;
            if (ms <= minMs) return 0;
            if (ms >= maxMs) return n-1;
            let lo = 0, hi = n - 1, ans = 0;
            while (lo <= hi) {
                const mid = (lo + hi) >> 1;
                const t = points[mid].time.getTime();
                if (t < ms) { lo = mid + 1; ans = lo; }
                else { hi = mid - 1; ans = mid; }
            }
            return Math.max(0, Math.min(n-1, ans));
        } catch(e){ console.warn('findIndexByTime失败:', e); return 0; }
    }
    function jumpToSliderTime(){
        try {
            const slider = document.getElementById('playbackTimeSlider');
            if (!slider || !playbackState.points || !playbackState.points.length) return;
            const ms = parseInt(slider.value, 10);
            if (!isFinite(ms)) return;
            const idx = findIndexByTime(playbackState.points, ms);
            playbackState.idx = idx;
            const pts = playbackState.points;
            const ll = pts[idx].ll;
            playbackState.path = pts.slice(0, idx+1).map(p=>p.ll);
            // 更新折线
            try {
                if (playbackState.line && typeof playbackState.line.setLngLats === 'function') {
                    playbackState.line.setLngLats(playbackState.path);
                } else {
                    if (playbackState.line && map) { try { map.removeOverLay(playbackState.line); } catch(e){} }
                    playbackState.line = new T.Polyline(playbackState.path, { color: currentTrackLineColor, weight: 1, opacity: 0.9 });
                    if (map) map.addOverLay(playbackState.line);
                }
            } catch(e){ console.warn('滑块更新折线失败:', e); }
            // 更新标记与时间
            ensurePlaybackDom(ll);
            updatePlaybackDom(ll);
            updatePlaybackTimeLabel(pts[idx].ts);
            // 若正在播放，立即按新位置继续
            if (playbackState.running) {
                if (playbackState.timer) { clearTimeout(playbackState.timer); playbackState.timer = null; }
                scheduleNext();
            }
        } catch(e) { console.warn('滑块跳转失败:', e); }
    }

    // DOM标记：使用容器坐标实现可见移动
    let playbackDom = { el: null, lastLL: null, bound: false };

    function ensurePlaybackDom(ll){
        try {
            playbackDom.lastLL = ll;
            const pane = (map && map.getPanes && map.getPanes().overlayPane) || document.getElementById('mapContainer');
            if (!pane) { console.warn('未找到overlayPane或mapContainer'); return; }
            if (!playbackDom.el) {
                const el = document.createElement('div');
                el.id = 'playbackDomMarker';
                el.style.position = 'absolute';
                el.style.width = '0';
                el.style.height = '0';
                el.style.borderLeft = '3px solid transparent';
                el.style.borderRight = '3px solid transparent';
                el.style.borderBottom = '4px solid #2C64A7';
                el.style.borderTop = '0';
                el.style.transform = 'translate(-50%, -50%)';
                el.style.zIndex = '9999';
                // 添加伪元素来增强箭头效果
                el.style.clipPath = 'polygon(50% 0, 100% 100%, 0 100%)';
                pane.appendChild(el);
                playbackDom.el = el;
                console.log('[Playback] 创建DOM标记，父节点=', pane === document.getElementById('mapContainer') ? '#mapContainer' : 'overlayPane');
                bindPlaybackDomEvents();
            }
            updatePlaybackDom(ll);
        } catch(e) { console.warn('创建DOM标记失败:', e); }
    }

    function updatePlaybackDom(ll){
        try {
            playbackDom.lastLL = ll;
            if (!map || !playbackDom.el || !ll) { console.log('[Playback] update取消：map/el/ll缺失'); return; }
            let p;
            if (typeof map.lngLatToLayerPoint === 'function') {
                p = map.lngLatToLayerPoint(ll);
                console.log('[Playback] 使用layerPoint定位:', ll && ll.lng, ll && ll.lat, '=>', p && p.x, p && p.y);
            } else if (typeof map.lngLatToContainerPoint === 'function') {
                p = map.lngLatToContainerPoint(ll);
                console.log('[Playback] 使用containerPoint定位:', ll && ll.lng, ll && ll.lat, '=>', p && p.x, p && p.y);
            } else {
                console.warn('地图对象不支持lngLat到像素坐标转换');
                return;
            }
            playbackDom.el.style.left = p.x + 'px';
            playbackDom.el.style.top = p.y + 'px';
        } catch(e) { console.warn('更新DOM标记位置失败:', e); }
    }

    function bindPlaybackDomEvents(){
        if (playbackDom.bound) return;
        const updater = function(){
            try {
                if (!map || !playbackDom.el || !playbackDom.lastLL) return;
                let p;
                if (typeof map.lngLatToLayerPoint === 'function') {
                    p = map.lngLatToLayerPoint(playbackDom.lastLL);
                } else if (typeof map.lngLatToContainerPoint === 'function') {
                    p = map.lngLatToContainerPoint(playbackDom.lastLL);
                }
                if (!p) return;
                playbackDom.el.style.left = p.x + 'px';
                playbackDom.el.style.top = p.y + 'px';
            } catch(e){}
        };
        try {
            map.addEventListener('move', updater);
            map.addEventListener('zoom', updater);
            playbackDom.bound = true;
        } catch(e){}
    }

    function removePlaybackDom(){
        try {
            const el = playbackDom.el;
            playbackDom.lastLL = null;
            if (el && el.parentNode) el.parentNode.removeChild(el);
        } catch(e){}
        playbackDom.el = null;
        playbackDom.bound = false;
    }

    // 测量功能相关变量
    let measureState = {
        isActive: false,
        mode: '', // 'distance' or 'area'
        points: [],
        tempLine: null,
        lines: [],
        markers: [],
        labels: [],
        polygon: null,
        areaLabel: null
    };

    // 绑定测量按钮事件
    function bindMeasureEvents() {
        const distanceBtn = document.getElementById('measureDistanceBtn');
        const areaBtn = document.getElementById('measureAreaBtn');
        
        if (distanceBtn) {
            distanceBtn.addEventListener('click', function() {
                startMeasureDistance();
            });
        }
        
        if (areaBtn) {
            areaBtn.addEventListener('click', function() {
                startMeasureArea();
            });
        }
    }

    // 绑定地图类型切换按钮事件
    function bindMapTypeEvent() {
        const mapTypeBtn = document.getElementById('mapTypeBtn');
        
        if (mapTypeBtn) {
            mapTypeBtn.addEventListener('click', function() {
                toggleMapType();
            });
        }
    }

    // 切换地图类型
    function toggleMapType() {
        if (!map) {
            alert('地图未初始化');
            return;
        }
        
        // 切换地图类型
        if (currentMapType === 'satellite') {
            // 切换到街道地图
            map.setMapType(TMAP_NORMAL_MAP);
            currentMapType = 'street';
            updateMapTypeButton('街道图');
        } else {
            // 切换到卫星地图
            map.setMapType(TMAP_SATELLITE_MAP);
            currentMapType = 'satellite';
            updateMapTypeButton('卫星图');
        }
    }

    // 更新地图类型按钮显示
    function updateMapTypeButton(typeName) {
        const mapTypeBtn = document.getElementById('mapTypeBtn');
        if (mapTypeBtn) {
            mapTypeBtn.innerHTML = `<span>${typeName}</span>`;
            mapTypeBtn.title = `当前：${typeName}，点击切换`;
        }
    }

    // 开始测距
    function startMeasureDistance() {
        if (!map) {
            alert('地图未初始化');
            return;
        }
        
        // 先移除所有可能存在的事件监听器
        try {
            map.removeEventListener('click', handleMapClick);
            map.removeEventListener('click', handleAreaMapClick);
            map.removeEventListener('mousemove', handleMouseMove);
            map.removeEventListener('mousemove', handleAreaMouseMove);
            map.removeEventListener('dblclick', finishMeasure);
            map.removeEventListener('dblclick', finishAreaMeasure);
        } catch(e) {
            console.log('移除事件监听器时出错:', e);
        }
        
        // 重置测量状态
        clearMeasureResult();
        
        // 设置测量状态为激活
        measureState.isActive = true;
        measureState.mode = 'distance'; // 设置为距离测量模式
        
        // 禁用其他按钮
        disableButtons(true);
        
        // 添加地图点击事件监听器
        map.addEventListener('click', handleMapClick);
        
        // 添加鼠标移动事件监听器
        map.addEventListener('mousemove', handleMouseMove);
        
        // 添加双击事件监听器结束测量
        map.addEventListener('dblclick', finishMeasure);
        
        console.log('测距功能已启动');
    }

    // 开始测面
    function startMeasureArea() {
        if (!map) {
            alert('地图未初始化');
            return;
        }
        
        // 先移除所有可能存在的事件监听器
        try {
            map.removeEventListener('click', handleMapClick);
            map.removeEventListener('click', handleAreaMapClick);
            map.removeEventListener('mousemove', handleMouseMove);
            map.removeEventListener('mousemove', handleAreaMouseMove);
            map.removeEventListener('dblclick', finishMeasure);
            map.removeEventListener('dblclick', finishAreaMeasure);
        } catch(e) {
            console.log('移除事件监听器时出错:', e);
        }
        
        // 重置测量状态
        clearMeasureResult();
        
        // 设置测量状态为激活
        measureState.isActive = true;
        measureState.mode = 'area'; // 设置为面积测量模式
        
        // 禁用其他按钮
        disableButtons(true);
        
        // 添加地图点击事件监听器
        map.addEventListener('click', handleAreaMapClick);
        
        // 添加鼠标移动事件监听器
        map.addEventListener('mousemove', handleAreaMouseMove);
        
        // 添加双击事件监听器结束测量
        map.addEventListener('dblclick', finishAreaMeasure);
        
        console.log('测面功能已启动');
    }

    // 处理地图点击事件
    function handleMapClick(event) {
        if (!measureState.isActive || measureState.mode !== 'distance') return;
        
        const point = event.lnglat;
        measureState.points.push(point);
        
        // 创建小圆点图标
        const smallDotIcon = new T.Icon({
            iconUrl: 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="8" height="8"><circle cx="4" cy="4" r="3" fill="%23FF0000" stroke="%23FFFFFF" stroke-width="1"/></svg>',
            iconSize: new T.Point(8, 8),
            iconAnchor: new T.Point(4, 4)
        });
        
        // 创建点标记
        const marker = new T.Marker(point, {icon: smallDotIcon});
        map.addOverLay(marker);
        measureState.markers.push(marker);
        
        // 如果不是第一个点，创建线段
        if (measureState.points.length > 1) {
            const prevPoint = measureState.points[measureState.points.length - 2];
            const line = new T.Polyline([prevPoint, point], {
                color: '#FF0000',
                weight: 3,
                opacity: 0.8
            });
            map.addOverLay(line);
            measureState.lines.push(line);
            
            // 计算距离并显示标签
            const distance = calculateDistance(prevPoint, point);
            showDistanceLabel(point, distance);
        }
        
        // 移除临时线
        if (measureState.tempLine) {
            map.removeOverLay(measureState.tempLine);
            measureState.tempLine = null;
        }
    }

    // 处理测面地图点击事件
    function handleAreaMapClick(event) {
        if (!measureState.isActive || measureState.mode !== 'area') return;
        
        const point = event.lnglat;
        measureState.points.push(point);
        
        // 创建小圆点图标（与测距功能一致）
        const smallDotIcon = new T.Icon({
            iconUrl: 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="8" height="8"><circle cx="4" cy="4" r="3" fill="%23FF0000" stroke="%23FFFFFF" stroke-width="1"/></svg>',
            iconSize: new T.Point(8, 8),
            iconAnchor: new T.Point(4, 4)
        });
        
        // 创建点标记
        const marker = new T.Marker(point, {icon: smallDotIcon});
        map.addOverLay(marker);
        measureState.markers.push(marker);
        
        // 移除之前的多边形
        if (measureState.polygon) {
            map.removeOverLay(measureState.polygon);
        }
        
        // 如果点数大于2，创建多边形
        if (measureState.points.length >= 3) {
            const polygon = new T.Polygon(measureState.points, {
                color: currentOutlineColor,
                weight: 3,
                opacity: 0.8,
                fillColor: currentFillColor,
                fillOpacity: currentFillOpacity
            });
            map.addOverLay(polygon);
            measureState.polygon = polygon;
            
            // 计算面积并显示标签
            const area = calculatePolygonArea(measureState.points);
            showAreaLabel(getPolygonCenter(measureState.points), area);
        }
        
        // 移除临时线
        if (measureState.tempLine) {
            map.removeOverLay(measureState.tempLine);
            measureState.tempLine = null;
        }
    }

    // 处理鼠标移动事件
    function handleMouseMove(event) {
        if (!measureState.isActive || measureState.mode !== 'distance' || measureState.points.length === 0) return;
        
        const lastPoint = measureState.points[measureState.points.length - 1];
        const currentPoint = event.lnglat;
        
        // 移除之前的临时线
        if (measureState.tempLine) {
            map.removeOverLay(measureState.tempLine);
        }
        
        // 创建新的临时线
        measureState.tempLine = new T.Polyline([lastPoint, currentPoint], {
            color: '#0000FF',
            weight: 2,
            opacity: 0.6,
            dashArray: [5, 5]
        });
        map.addOverLay(measureState.tempLine);
    }

    // 处理测面鼠标移动事件
    function handleAreaMouseMove(event) {
        if (!measureState.isActive || measureState.mode !== 'area' || measureState.points.length === 0) return;
        
        const firstPoint = measureState.points[0];
        const lastPoint = measureState.points[measureState.points.length - 1];
        const currentPoint = event.lnglat;
        
        // 移除之前的临时线
        if (measureState.tempLine) {
            map.removeOverLay(measureState.tempLine);
        }
        
        // 创建新的临时线（从最后一个点到当前点，再到第一个点形成闭合效果）
        const tempPoints = [lastPoint, currentPoint];
        if (measureState.points.length >= 2) {
            tempPoints.push(firstPoint);
        }
        
        measureState.tempLine = new T.Polyline(tempPoints, {
            color: '#0000FF',
            weight: 2,
            opacity: 0.6,
            dashArray: [5, 5]
        });
        map.addOverLay(measureState.tempLine);
    }

    // 结束测量
    function finishMeasure() {
        if (!measureState.isActive || measureState.mode !== 'distance') return;
        
        // 移除事件监听器
        map.removeEventListener('click', handleMapClick);
        map.removeEventListener('mousemove', handleMouseMove);
        map.removeEventListener('dblclick', finishMeasure);
        
        // 移除临时线
        if (measureState.tempLine) {
            map.removeOverLay(measureState.tempLine);
            measureState.tempLine = null;
        }
        
        // 显示总距离
        if (measureState.points.length > 1) {
            const totalDistance = calculateTotalDistance();
            showTotalDistanceLabel(totalDistance);
        }
        
        // 重置测量状态
        measureState.isActive = false;
        measureState.mode = '';
        
        // 恢复其他按钮
        disableButtons(false);
        
        console.log('测距功能已完成');
    }

    // 结束测面测量
    function finishAreaMeasure() {
        if (!measureState.isActive || measureState.mode !== 'area') return;
        
        // 移除事件监听器
        map.removeEventListener('click', handleAreaMapClick);
        map.removeEventListener('mousemove', handleAreaMouseMove);
        map.removeEventListener('dblclick', finishAreaMeasure);
        
        // 移除临时线
        if (measureState.tempLine) {
            map.removeOverLay(measureState.tempLine);
            measureState.tempLine = null;
        }
        
        // 如果点数大于等于3，创建最终多边形
        if (measureState.points.length >= 3) {
            // 移除之前的多边形
            if (measureState.polygon) {
                map.removeOverLay(measureState.polygon);
            }
            
            const polygon = new T.Polygon(measureState.points, {
                color: currentOutlineColor,
                weight: 3,
                opacity: 0.8,
                fillColor: currentFillColor,
                fillOpacity: currentFillOpacity
            });
            map.addOverLay(polygon);
            measureState.polygon = polygon;
            
            // 计算并显示总面积
            const area = calculatePolygonArea(measureState.points);
            showTotalAreaLabel(getPolygonCenter(measureState.points), area);
        } else {
            // 点数不足3个，移除所有标记
            clearMeasureResult();
        }
        
        // 重置测量状态
        measureState.isActive = false;
        measureState.mode = '';
        
        // 恢复其他按钮
        disableButtons(false);
        
        console.log('测面功能已完成');
    }

    // 计算两点间距离（米）
    function calculateDistance(point1, point2) {
        // 使用天地图提供的距离计算方法
        if (T.CRS && T.CRS.EPSG4326 && T.CRS.EPSG4326.distance) {
            return T.CRS.EPSG4326.distance(point1, point2);
        }
        
        // 如果没有提供，则使用球面距离公式
        const R = 6371000; // 地球半径（米）
        const dLat = (point2.lat - point1.lat) * Math.PI / 180;
        const dLon = (point2.lng - point1.lng) * Math.PI / 180;
        const a = 
            Math.sin(dLat/2) * Math.sin(dLat/2) +
            Math.cos(point1.lat * Math.PI / 180) * Math.cos(point2.lat * Math.PI / 180) * 
            Math.sin(dLon/2) * Math.sin(dLon/2);
        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
        return R * c;
    }

    // 计算多边形面积（平方米）
    function calculatePolygonArea(points) {
        // 使用天地图提供的面积计算方法（如果可用）
        if (T.GeometryUtils && T.GeometryUtils.computeArea) {
            return T.GeometryUtils.computeArea(points);
        }
        
        // 如果没有提供，则使用球面多边形面积计算公式
        // 这里使用简单的平面近似计算，对于小面积比较准确
        if (points.length < 3) return 0;
        
        let area = 0;
        const n = points.length;
        
        for (let i = 0; i < n; i++) {
            const j = (i + 1) % n;
            area += points[i].lng * points[j].lat;
            area -= points[j].lng * points[i].lat;
        }
        
        area = Math.abs(area) / 2.0;
        
        // 转换为平方米（这是一个简化的近似值）
        // 更精确的计算需要考虑地球曲率
        const earthRadius = 6371000; // 地球半径（米）
        const degreeToMeter = (2 * Math.PI * earthRadius) / 360; // 每度对应的米数
        
        // 这个转换只是一个粗略的近似
        return area * degreeToMeter * degreeToMeter;
    }

    // 获取多边形中心点
    function getPolygonCenter(points) {
        if (points.length === 0) return null;
        
        let x = 0, y = 0;
        for (let i = 0; i < points.length; i++) {
            x += points[i].lng;
            y += points[i].lat;
        }
        
        return new T.LngLat(x / points.length, y / points.length);
    }

    // 计算总距离
    function calculateTotalDistance() {
        let total = 0;
        for (let i = 1; i < measureState.points.length; i++) {
            const distance = calculateDistance(measureState.points[i-1], measureState.points[i]);
            total += distance;
        }
        return total;
    }

    // 显示两点间距离标签
    function showDistanceLabel(point, distance) {
        const label = document.createElement('div');
        label.className = 'distance-label';
        label.innerHTML = distance.toFixed(2) + ' 米';
        label.style.position = 'absolute';
        label.style.backgroundColor = 'rgba(255, 255, 255, 0.9)';
        label.style.padding = '2px 6px';
        label.style.borderRadius = '3px';
        label.style.fontSize = '12px';
        label.style.boxShadow = '0 1px 2px rgba(0,0,0,0.3)';
        label.style.zIndex = '1000';
        label.style.transform = 'translate(-50%, -50%)';
        
        // 添加删除按钮
        const closeBtn = document.createElement('span');
        closeBtn.innerHTML = '×';
        closeBtn.style.marginLeft = '5px';
        closeBtn.style.cursor = 'pointer';
        closeBtn.style.fontWeight = 'bold';
        closeBtn.onclick = function() {
            if (label.parentNode) {
                label.parentNode.removeChild(label);
            }
        };
        label.appendChild(closeBtn);
        
        document.getElementById('mapContainer').appendChild(label);
        
        // 定位标签（向上偏移20像素）
        const pixel = map.lngLatToContainerPoint(point);
        label.style.left = pixel.x + 'px';
        label.style.top = (pixel.y - 20) + 'px';
        
        measureState.labels.push(label);
    }

    // 显示面积标签
    function showAreaLabel(point, area) {
        // 如果已存在面积标签，先移除它
        if (measureState.areaLabel) {
            if (measureState.areaLabel.parentNode) {
                measureState.areaLabel.parentNode.removeChild(measureState.areaLabel);
            }
        }
        
        const label = document.createElement('div');
        label.className = 'area-label';
        label.innerHTML = area.toFixed(2) + ' 平方米';
        label.style.position = 'absolute';
        label.style.backgroundColor = 'rgba(255, 255, 255, 0.9)';
        label.style.padding = '2px 6px';
        label.style.borderRadius = '3px';
        label.style.fontSize = '12px';
        label.style.boxShadow = '0 1px 2px rgba(0,0,0,0.3)';
        label.style.zIndex = '1000';
        label.style.transform = 'translate(-50%, -50%)';
        
        // 添加删除按钮
        const closeBtn = document.createElement('span');
        closeBtn.innerHTML = '×';
        closeBtn.style.marginLeft = '5px';
        closeBtn.style.cursor = 'pointer';
        closeBtn.style.fontWeight = 'bold';
        closeBtn.onclick = function() {
            if (label.parentNode) {
                label.parentNode.removeChild(label);
            }
        };
        label.appendChild(closeBtn);
        
        document.getElementById('mapContainer').appendChild(label);
        
        // 定位标签
        const pixel = map.lngLatToContainerPoint(point);
        label.style.left = pixel.x + 'px';
        label.style.top = (pixel.y - 20) + 'px';
        
        measureState.areaLabel = label;
        measureState.labels.push(label);
    }

    // 显示总面积标签
    function showTotalAreaLabel(point, area) {
        // 如果已存在面积标签，先移除它
        if (measureState.areaLabel) {
            if (measureState.areaLabel.parentNode) {
                measureState.areaLabel.parentNode.removeChild(measureState.areaLabel);
            }
        }
        
        // 计算亩数（1亩 ≈ 666.6667平方米）
        const areaInMu = area / 666.6667;
        
        const label = document.createElement('div');
        label.className = 'total-area-label';
        label.innerHTML = '总面积: ' + area.toFixed(2) + ' 平方米<br>' + areaInMu.toFixed(2) + ' 亩';
        label.style.position = 'absolute';
        label.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';
        label.style.color = 'white';
        label.style.padding = '4px 8px';
        label.style.borderRadius = '4px';
        label.style.fontSize = '14px';
        label.style.fontWeight = 'bold';
        label.style.boxShadow = '0 2px 4px rgba(0,0,0,0.3)';
        label.style.zIndex = '1000';
        label.style.transform = 'translate(-50%, -50%)';
        label.style.lineHeight = '1.4';
        
        // 添加删除按钮
        const closeBtn = document.createElement('span');
        closeBtn.innerHTML = ' ×';
        closeBtn.style.cursor = 'pointer';
        closeBtn.style.fontWeight = 'bold';
        closeBtn.onclick = function() {
            if (label.parentNode) {
                label.parentNode.removeChild(label);
            }
        };
        label.appendChild(closeBtn);
        
        document.getElementById('mapContainer').appendChild(label);
        
        // 定位标签
        const pixel = map.lngLatToContainerPoint(point);
        label.style.left = pixel.x + 'px';
        label.style.top = (pixel.y - 40) + 'px';
        
        measureState.areaLabel = label;
        measureState.labels.push(label);
    }

    // 显示总距离标签
    function showTotalDistanceLabel(totalDistance) {
        const lastPoint = measureState.points[measureState.points.length - 1];
        const label = document.createElement('div');
        label.className = 'total-distance-label';
        label.innerHTML = '总距离: ' + totalDistance.toFixed(2) + ' 米';
        label.style.position = 'absolute';
        label.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';
        label.style.color = 'white';
        label.style.padding = '4px 8px';
        label.style.borderRadius = '4px';
        label.style.fontSize = '14px';
        label.style.fontWeight = 'bold';
        label.style.boxShadow = '0 2px 4px rgba(0,0,0,0.3)';
        label.style.zIndex = '1000';
        label.style.transform = 'translate(-50%, -50%)';
        
        // 添加删除按钮
        const closeBtn = document.createElement('span');
        closeBtn.innerHTML = ' ×';
        closeBtn.style.cursor = 'pointer';
        closeBtn.style.fontWeight = 'bold';
        closeBtn.onclick = function() {
            if (label.parentNode) {
                label.parentNode.removeChild(label);
            }
        };
        label.appendChild(closeBtn);
        
        document.getElementById('mapContainer').appendChild(label);
        
        // 定位标签（向上偏移40像素，比段距离标签更高）
        const pixel = map.lngLatToContainerPoint(lastPoint);
        label.style.left = pixel.x + 'px';
        label.style.top = (pixel.y - 60) + 'px';  // 从-40改为-60，增加间距
        
        measureState.labels.push(label);
    }

    // 清除测量结果
    function clearMeasureResult() {
        // 移除所有线条
        measureState.lines.forEach(line => {
            if (map && map.removeOverLay) {
                try { map.removeOverLay(line); } catch(e) {}
            }
        });
        
        // 移除所有标记
        measureState.markers.forEach(marker => {
            if (map && map.removeOverLay) {
                try { map.removeOverLay(marker); } catch(e) {}
            }
        });
        
        // 移除所有标签
        measureState.labels.forEach(label => {
            if (label.parentNode) {
                try { label.parentNode.removeChild(label); } catch(e) {}
            }
        });
        
        // 移除临时线
        if (measureState.tempLine) {
            if (map && map.removeOverLay) {
                try { map.removeOverLay(measureState.tempLine); } catch(e) {}
            }
            measureState.tempLine = null;
        }
        
        // 移除多边形
        if (measureState.polygon) {
            if (map && map.removeOverLay) {
                try { map.removeOverLay(measureState.polygon); } catch(e) {}
            }
            measureState.polygon = null;
        }
        
        // 移除面积标签
        if (measureState.areaLabel) {
            if (measureState.areaLabel.parentNode) {
                try { measureState.areaLabel.parentNode.removeChild(measureState.areaLabel); } catch(e) {}
            }
            measureState.areaLabel = null;
        }
        
        // 重置状态
        measureState.points = [];
        measureState.lines = [];
        measureState.markers = [];
        measureState.labels = [];
        measureState.isActive = false;
        measureState.mode = '';
    }

    // 添加CSS样式用于距离标签
    const style = document.createElement('style');
    style.innerHTML = `
        .distance-label, .total-distance-label {
            font-family: Arial, sans-serif;
            pointer-events: auto;
        }
    `;
    document.head.appendChild(style);

    // 颜色选择器相关变量和函数
    let currentOutlineColor = "#FFD700"; // 默认边框颜色
    let currentFillColor = "#FFFF00";   // 默认填充颜色
    let currentFillOpacity = 0.35;       // 默认透明度
    
    // 轨迹颜色相关变量
    let currentTrackLineColor = "#FF0000"; // 默认轨迹线颜色
    let currentTrackPointColor = "#68EAF3"; // 默认轨迹点颜色

    // 初始化颜色选择器
    function initColorPickers() {
        // 边框颜色选择器
        const outlineColorPicker = document.getElementById('outlineColorPicker');
        const outlineColorInput = document.getElementById('outlineColorInput');
        
        outlineColorPicker.addEventListener('click', function() {
            outlineColorInput.click();
        });
        
        outlineColorInput.addEventListener('change', function() {
            currentOutlineColor = this.value;
            outlineColorPicker.style.backgroundColor = currentOutlineColor;
        });
        
        // 填充颜色选择器
        const fillColorPicker = document.getElementById('fillColorPicker');
        const fillColorInput = document.getElementById('fillColorInput');
        
        fillColorPicker.addEventListener('click', function() {
            fillColorInput.click();
        });
        
        fillColorInput.addEventListener('change', function() {
            currentFillColor = this.value;
            fillColorPicker.style.backgroundColor = currentFillColor;
        });
        
        // 透明度滑块
        const fillOpacitySlider = document.getElementById('fillOpacitySlider');
        const fillOpacityValue = document.getElementById('fillOpacityValue');
        
        fillOpacitySlider.addEventListener('input', function() {
            currentFillOpacity = this.value / 100;
            fillOpacityValue.textContent = this.value + '%';
        });
        
        // 轨迹线颜色选择器
        const trackLineColorPicker = document.getElementById('trackLineColorPicker');
        const trackLineColorInput = document.getElementById('trackLineColorInput');
        
        if (trackLineColorPicker && trackLineColorInput) {
            trackLineColorPicker.addEventListener('click', function() {
                trackLineColorInput.click();
            });
            
            trackLineColorInput.addEventListener('change', function() {
                currentTrackLineColor = this.value;
                trackLineColorPicker.style.backgroundColor = currentTrackLineColor;
            });
        }
        
        // 轨迹点颜色选择器
        const trackPointColorPicker = document.getElementById('trackPointColorPicker');
        const trackPointColorInput = document.getElementById('trackPointColorInput');
        
        if (trackPointColorPicker && trackPointColorInput) {
            // 设置初始背景色
            trackPointColorPicker.style.backgroundColor = currentTrackPointColor;
            
            trackPointColorPicker.addEventListener('click', function() {
                trackPointColorInput.click();
            });
            
            trackPointColorInput.addEventListener('change', function() {
                currentTrackPointColor = this.value;
                trackPointColorPicker.style.backgroundColor = currentTrackPointColor;
            });
        }
    }

</script>
</body>

</html>
