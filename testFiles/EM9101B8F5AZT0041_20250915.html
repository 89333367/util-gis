<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>展示轮廓</title>
    <style>
        body {
            margin: 0;
            padding: 0;
        }

        #mapContainer {
            width: 100vw;
            height: 100vh;
            position: relative;
        }

        #mapLoading {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 999;
            transition: opacity 0.3s;
        }

        .loading-text {
            font-size: 16px;
            color: #333;
            padding: 10px 20px;
            background: white;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .wkt-input-container {
            position: absolute;
            top: 20px;
            right: 10px;
            z-index: 1000;
            background: white;
            padding: 12px;
            border-radius: 6px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            width: min(320px, 90vw);
            box-sizing: border-box;
            transition: all 0.3s;
        }

        .minimize-btn {
            position: absolute;
            top: -5px;
            right: -4px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #f0f0f0;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: #666;
            z-index: 1001;
            transition: background 0.2s;
        }

        .minimize-btn:hover {
            background: #e0e0e0;
        }

        .content-wrapper {
            transition: all 0.3s;
        }

        .wkt-input-container.minimized {
            width: 40px;
            height: 40px;
            padding: 0;
        }

        .wkt-input-container.minimized .content-wrapper {
            display: none;
        }

        .wkt-input-container.minimized .min-icon {
            display: none;
        }

        .wkt-input-container.minimized .restore-icon {
            display: inline;
        }

        #wktTextarea {
            width: 100%;
            height: 120px;
            margin-bottom: 10px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: monospace;
            resize: vertical;
            box-sizing: border-box;
        }

        .button-group {
            display: flex;
            gap: 10px;
        }

        /* 页签样式 */
        .tabs-header {
            display: flex;
            gap: 8px;
            margin-bottom: 8px;
        }
        .tab-btn {
            flex: 1;
            padding: 6px 0;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            background: #f5f5f5;
            color: #333;
            transition: background 0.2s;
        }
        .tab-btn.active { background: #337AFF; color: #fff; }
        .tab-pane { display: none; }
        .tab-pane.active { display: block; }

        /* Multi → Polygons 分割器样式 */
        .split-section {
            margin-top: 10px;
            padding: 10px;
            background: #fafafa;
            border: 1px solid #eee;
            border-radius: 6px;
        }
        .split-section .title {
            font-size: 13px;
            font-weight: 600;
            color: #333;
            margin-bottom: 6px;
        }
        .split-section .desc {
            font-size: 12px;
            color: #666;
            margin-bottom: 8px;
        }
        #multiInput, #polyOutput {
            width: 100%;
            height: 90px;
            margin-bottom: 8px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: monospace;
            resize: vertical;
            box-sizing: border-box;
        }
        .split-actions {
            display: flex;
            gap: 8px;
            margin-bottom: 8px;
        }
        .split-actions button {
            flex: 1;
            padding: 6px 0;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            transition: background 0.2s;
        }
        #splitMultiBtn { background: #337AFF; color: #fff; }
        #splitMultiBtn:hover { background: #2860E0; }
        #copyPolysBtn { background: #f5f5f5; color: #333; }
        #copyPolysBtn:hover { background: #e0e0e0; }
        #drawButton,
        #clearButton,
        #drawTrackButton,
        #clearTrackButton {
            width: 50%;
            padding: 8px 0;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.2s;
        }

        #drawButton,
        #drawTrackButton {
            background: #337AFF;
            color: white;
        }

        #drawButton:hover,
        #drawTrackButton:hover {
            background: #2860E0;
        }

        #clearButton,
        #clearTrackButton {
            background: #f5f5f5;
            color: #333;
        }

        #clearButton:hover,
        #clearTrackButton:hover {
            background: #e0e0e0;
        }

        #drawButton:disabled,
        #clearButton:disabled,
        #drawTrackButton:disabled,
        #clearTrackButton:disabled {
            background: #e0e0e0;
            color: #999;
            cursor: not-allowed;
        }

        .tip {
            font-size: 12px;
            color: #666;
            margin-bottom: 8px;
            line-height: 1.4;
        }

        .area-label {
             position: absolute;
             background: rgba(255, 0, 0, 0.85);
             border: 1px solid #000;
             border-radius: 3px;
             padding: 4px 6px;
             font-size: 12px;
             color: #fff;
             font-weight: 600;
             box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
             white-space: nowrap;
             z-index: 9999;
             pointer-events: none;
         }
         /* 默认隐藏标签容器下的标签 */
          .labels-hidden .area-label { display: none; }

          /* Batch → Generator 样式 */
          .batch-section { margin-top: 10px; padding: 10px; background: #fafafa; border: 1px solid #eee; border-radius: 6px; }
          .batch-section .title { font-size: 13px; font-weight: 600; color: #333; margin-bottom: 6px; }
          .batch-section .desc { font-size: 12px; color: #666; margin-bottom: 8px; }
          #batchInput, #multiOutput { width: 100%; height: 90px; margin-bottom: 8px; padding: 8px; border: 1px solid #ddd; border-radius: 4px; font-family: monospace; resize: vertical; box-sizing: border-box; }
          .batch-actions { display: flex; gap: 8px; margin-bottom: 8px; }
          .batch-actions button { flex: 1; padding: 6px 0; border: none; border-radius: 4px; cursor: pointer; font-size: 13px; transition: background 0.2s; }
          #generateMultiBtn { background: #337AFF; color: #fff; }
          #generateMultiBtn:hover { background: #2860E0; }
          #copyMultiBtn { background: #f5f5f5; color: #333; }
          #copyMultiBtn:hover { background: #e0e0e0; }
      </style>
    <script src="https://api.tianditu.gov.cn/api?v=4.0&tk=648f621977051d0199ff0f965d3fd322"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/Turf.js/6.5.0/turf.min.js"></script>
    <script src="https://lib.baomitu.com/terraformer/1.0.12/terraformer.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://unpkg.com/terraformer-wkt-parser@1.2.1/terraformer-wkt-parser.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- 已移除动态备用加载器 ensureTerraformer：改为仅使用静态脚本标签加载 Terraformer 核心库与 WKT 解析器 -->
    <script>
        // 检查Turf.js是否加载成功
        window.addEventListener('load', function () {
            if (typeof turf === 'undefined') {
                console.warn('Turf.js加载失败，已启用备用面积算法');
            } else {
                console.log('Turf.js加载成功');
            }
        });
    </script>
</head>

<body>
<div id="mapContainer">
    <div id="mapLoading">
        <div class="loading-text">地图正在加载中...</div>
    </div>
</div>

<div class="wkt-input-container">
    <div class="minimize-btn" id="minimizeBtn">
        <span class="min-icon">−</span>
        <span class="restore-icon" style="display:none;">+</span>
    </div>

    <div class="content-wrapper">
        <div class="tabs-header">
            <button class="tab-btn active" id="tabDrawBtn">轮廓</button>
            <button class="tab-btn" id="tabTrackBtn">轨迹</button>
            <button class="tab-btn" id="tabSplitBtn">分割器</button>
            <button class="tab-btn" id="tabBatchBtn">合并器</button>
        </div>
        <div class="tab-pane active" id="tabDraw">
            <div class="tip">请输入WKT字符串（支持POLYGON/MULTIPOLYGON）：</div>
            <textarea id="wktTextarea">MULTIPOLYGON (((128.95830577948857 42.452557287865, 128.95830866821342 42.45263083275985, 128.95830898093098 42.45263278960923, 128.95830975514116 42.45263467486104, 128.95846104650022 42.45291199783855, 128.9586144367702 42.45319504507062, 128.95876510525585 42.453479362328, 128.95891278025317 42.453763205230224, 128.9590659494578 42.454045216258386, 128.95920886584773 42.45432533391712, 128.9593534812147 42.45459855862947, 128.9595051573897 42.45488283859824, 128.95965542340775 42.45516515576531, 128.9597987187913 42.45545222182372, 128.95994012737825 42.45571393324747, 128.96007255709452 42.455945400369224, 128.9602200857167 42.456228951232674, 128.96037689143188 42.45650885351719, 128.96051689346308 42.45677422430999, 128.96063020595975 42.45699882455701, 128.96076509901658 42.45725295625126, 128.960891129396 42.4574614127169, 128.9610313288565 42.45771778706105, 128.96107111616266 42.45780264324874, 128.96114501912882 42.457965529057375, 128.96114558460675 42.457966591325246, 128.96124270179112 42.458124710095646, 128.96126930917626 42.45818597445566, 128.96095528594196 42.458328146408164, 128.96095293687867 42.45832946037034, 128.9609509791363 42.45833108842997, 128.9609494879499 42.458332968021665, 128.9609485206249 42.458335026913794, 128.96094811433522 42.458337185984284, 128.96094828469427 42.45833936226126, 128.9609490251554 42.4583414721116, 128.960950307263 42.458343434454974, 128.9609520817467 42.45834517387955, 128.96095428041386 42.458346623540194, 128.96095681877105 42.458347727727265, 128.96095959927044 42.45834844400746, 128.96096251505912 42.4583487448545, 128.9609654540848 42.458348618707014, 128.96096830340232 42.45834807041279, 128.96097095351402 42.45834712104249, 128.9612927284388 42.458201439511214, 128.9613163226764 42.45823625196384, 128.961341814977 42.4582711797532, 128.96144840258478 42.45846778649687, 128.96154675677906 42.45865180793373, 128.96167482351586 42.458906561255475, 128.96167659173202 42.45890905569132, 128.96185128652917 42.45909398790802, 128.96185333984388 42.45909573951711, 128.96185583920877 42.459097137625605, 128.96185867588719 42.4590981214079, 128.96186172646773 42.45909864806392, 128.96186485823299 42.459098694681174, 128.9618679349335 42.45909825923155, 128.9622550290736 42.459011680645375, 128.96265346789383 42.458931853465685, 128.9630531815517 42.45884890261828, 128.9634561736331 42.458772586958794, 128.9638275992803 42.458695661892854, 128.96401926619671 42.45866245918929, 128.96405637669406 42.45867888590859, 128.96407539096032 42.458705955074485, 128.96408468146413 42.45872292118297, 128.96411486165465 42.45880377916678, 128.96411555211532 42.45880522974866, 128.9642614613336 42.459055127034745, 128.96441984233925 42.45933352062768, 128.96457169691752 42.459618086230094, 128.96473830056573 42.45989776495006, 128.96487158347003 42.460113230637674, 128.96492272181274 42.46019756825169, 128.9649232738742 42.46019838681301, 128.9649742433057 42.46026676879389, 128.96519557154892 42.460568485177205, 128.9651969987103 42.46057008452118, 128.9652717635899 42.46063993415263, 128.965345315782 42.460724895985535, 128.9653468145041 42.460726348739904, 128.9653486144295 42.46072760004406, 128.9653506669122 42.46072861607961, 128.965379284402 42.46074038584035, 128.96543184183665 42.460789487627366, 128.9654336078954 42.460790874535085, 128.96543566790385 42.46079201773224, 128.96543796133014 42.46079288362687, 128.96576572396975 42.46089143097944, 128.96593796324902 42.46094281640693, 128.9659397602643 42.46094325727343, 128.9661819681924 42.46099036684181, 128.96636227588243 42.46107862250882, 128.9664611037472 42.46114706670645, 128.96659540611995 42.461308819176196, 128.9666366922321 42.46136821246817, 128.96670097745076 42.46145411686566, 128.96673326005407 42.46149833270416, 128.96676688653298 42.461548676820776, 128.96683843676686 42.46165024623703, 128.96696957463084 42.46181985002125, 128.96706415439422 42.46194438892946, 128.9672606691885 42.462210684478784, 128.96745141506548 42.46248265751525, 128.96745179320803 42.46248316400559, 128.96756629668738 42.462627526563594, 128.9677353780505 42.46288229140116, 128.96773576805612 42.462882839871696, 128.96781829676146 42.4629914440502, 128.96787661479908 42.463077882477606, 128.96787707920296 42.46307851824579, 128.96808243685106 42.46333904332332, 128.96808394035605 42.46334061876976, 128.96808578896824 42.463341978120056, 128.96809804838128 42.46334954802656, 128.96812342272364 42.46338159101059, 128.96812548058725 42.46338361804664, 128.96812810518395 42.46338524717928, 128.9682612211045 42.463450303107784, 128.9683681339527 42.46351631878416, 128.96837142238795 42.46351786265685, 128.9686832415214 42.46362517622024, 128.96905943909923 42.46375124522543, 128.96938271964578 42.46388119102741, 128.96945620531287 42.463915096872476, 128.96971306609004 42.464048340971296, 128.969912999864 42.464149739961464, 128.96991558024368 42.464150789633955, 128.96991838762116 42.46415144641131, 128.9699213141106 42.4641516850539, 128.96992424724863 42.464151496390826, 128.9699270743161 42.46415088767233, 128.9699296866706 42.464149882291146, 128.9699319839207 42.4641485188835, 128.96993286730057 42.464147740371494, 128.97031919099948 42.464268133690794, 128.97070934247176 42.46439379544183, 128.9710836978481 42.464524184507965, 128.97108576416358 42.46452477081743, 128.9711211606799 42.46453265526714, 128.9711207617249 42.46453437208112, 128.9711208381548 42.46453655123537, 128.97112148730685 42.464538677477776, 128.97112268423456 42.46454066909805, 128.9711243829407 42.46454244955931, 128.971126518145 42.46454395043937, 128.97112900779268 42.46454511406028, 128.97113175620797 42.464545895704696, 128.971583454216 42.46463793536644, 128.9717736143229 42.46468472829498, 128.97202577241626 42.46480757060183, 128.97217090700903 42.46490478079193, 128.9724242747986 42.46509326643259, 128.97242568295758 42.46509419029591, 128.97281923779545 42.465321464800624, 128.97304008713368 42.46544948466075, 128.97304110456756 42.46545002533566, 128.97309901092987 42.46547816543741, 128.97310917763247 42.46548401899907, 128.97310995477267 42.465484437602754, 128.97339934466504 42.46563006550806, 128.973636562281 42.465816400106945, 128.97363818465146 42.46581750050854, 128.9738007722835 42.46591254220745, 128.97397583285598 42.466017986690964, 128.97421868712726 42.46621986084461, 128.97445649557594 42.46640816556339, 128.97471100524143 42.466613188420105, 128.97497005939562 42.46684416130911, 128.9750237878751 42.4668877526523, 128.9750248191107 42.46688868623071, 128.97502562936728 42.46688936178209, 128.9750283142947 42.46689142505238, 128.97525695917727 42.4670769295957, 128.9752596308535 42.467078640840356, 128.97529505462302 42.46709640429292, 128.97529920766436 42.46709959572098, 128.9753017665088 42.46710116905779, 128.9754004995086 42.46714928009838, 128.97561253493566 42.46725560557988, 128.97591660695244 42.467485467758614, 128.9761068543307 42.467728966981255, 128.97626144379603 42.46796211728362, 128.9764308540405 42.468190554287126, 128.97643237605465 42.468192226668286, 128.97674880996465 42.46847973778509, 128.9770565350254 42.468743192243366, 128.9772531421714 42.46893536881325, 128.97745119669753 42.46913370002897, 128.97745194912775 42.46913439364687, 128.97767599226194 42.46932479262606, 128.97791724972438 42.46954811430705, 128.97816042579197 42.469790404410226, 128.9781611849868 42.469791100489005, 128.9784065100118 42.46999838143888, 128.97840726165938 42.46999897162668, 128.97865693678028 42.470181212746716, 128.97886072186373 42.47037639750394, 128.9789202046581 42.47049754473569, 128.97895553574733 42.470585908434096, 128.97895593804057 42.47058678014428, 128.97906807881623 42.47080040857696, 128.9790691311613 42.47080201686307, 128.97915218652525 42.47090658947535, 128.9792652441514 42.471053602162705, 128.97941870384957 42.471327728802635, 128.97953288606553 42.471587568172374, 128.97959798420746 42.47174257516095, 128.9796278043364 42.47180729564686, 128.97968066635892 42.471939594369275, 128.9797132711555 42.47207428621603, 128.9797253324018 42.472261011918036, 128.97972544770494 42.47226195422104, 128.9797592360698 42.47244906371581, 128.97979425755855 42.47261729069193, 128.9797945062789 42.47261822025412, 128.97985366287114 42.4727986040436, 128.97985450659107 42.47280045173863, 128.9799313539885 42.47292999590258, 128.97993180527592 42.472930690254195, 128.98000033933653 42.47302740324534, 128.9800727832284 42.47312446514277, 128.98014044552832 42.47320859995623, 128.9801545945922 42.47323451541272, 128.98015731700627 42.47325025268924, 128.9801285868026 42.47327331822613, 128.98011736745525 42.47327335274515, 128.98011458538278 42.47327355385741, 128.98011190182152 42.473274133103395, 128.98010940970912 42.47327507042257, 128.98000388034137 42.473324404935674, 128.9799932325923 42.47332800083831, 128.97999143114842 42.47332872287691, 128.9798420855798 42.47339872943898, 128.9797206207801 42.473457601111534, 128.979578951267 42.473522891261965, 128.979455108917 42.47357970395071, 128.97941043827217 42.47359988558114, 128.97924028136583 42.47367409710745, 128.9790809051093 42.47374530368514, 128.9789042483001 42.47382723887278, 128.97873694519708 42.47390721688349, 128.9785750764565 42.47398354044664, 128.9785362718509 42.47400165296571, 128.97838170917362 42.47407128948133, 128.97822638372082 42.47414485572267, 128.97806636711718 42.474214956990046, 128.97789615381365 42.47429025693108, 128.9777811343157 42.4743424742291, 128.9777007558202 42.47437856709876, 128.97753811922166 42.474448542426984, 128.97735953955666 42.47452568964882, 128.97734889413798 42.474530240981345, 128.97722903756505 42.47457961221283, 128.9770688225773 42.47464831659966, 128.9769917815686 42.47468005127064, 128.97679335624895 42.47476130303584, 128.97661377522857 42.47483252258643, 128.97644840103706 42.47489647182503, 128.97644566954511 42.474896146214746, 128.97644272480488 42.474896226538526, 128.97643985790975 42.47489673089635, 128.9764371791882 42.474897639878705, 128.97643479172703 42.47489891850468, 128.97643278740446 42.474900517568116, 128.9764313673317 42.47490222634845, 128.9764306966124 42.47490165833792, 128.97642849465674 42.474900133884276, 128.97642592582366 42.474898965648094, 128.97642309359372 42.474898200689665, 128.9764201120583 42.474897869823955, 128.97641710132322 42.47489798637924, 128.97641418267034 42.47489854566039, 128.97641147367224 42.47489952513775, 128.97640908345622 42.474900885354835, 128.97640710830765 42.47490257151779, 128.97640562779196 42.474904515702605, 128.976404701549 42.47490663959129, 128.97640436689102 42.474908857626815, 128.97640463729905 42.47491108045961, 128.97640550188024 42.474913218546824, 128.97640692580669 42.47491518575944, 128.97648384290213 42.474999782541786, 128.9764857834056 42.47500151024337, 128.9764881534645 42.47500291389682, 128.97649085631193 42.475003936192685, 128.97649378159417 42.47500453539183, 128.9764968098754 42.4750046870297, 128.9764998175144 42.475004384915096, 128.97650268171296 42.47500364138302, 128.97650528552933 42.475002486790984, 128.9765075226528 42.475000968279595, 128.97650930174441 42.47499914784784, 128.97651055016595 42.47499709982177, 128.97653219628899 42.47494917785773, 128.97659813708057 42.47492333288903, 128.97670120087372 42.47488531585874, 128.97680150154122 42.47484440221668, 128.97688657684958 42.47480820497473, 128.97702158055532 42.47475072710947, 128.97702225477508 42.47475042231931, 128.97712949134802 42.47469903071632, 128.97719826995063 42.47466909498676, 128.9772813609067 42.47464537333117, 128.97728349237593 42.47464461728273, 128.9773982827563 42.47459533021382, 128.9775106061881 42.474548288835955, 128.97762477077384 42.47450001984781, 128.97774602266978 42.474448017381526, 128.97784849950514 42.47439997135048, 128.97789972994212 42.47437844049461, 128.97801866150064 42.47432469052858, 128.9781230109293 42.474277522703915, 128.97822115942554 42.47423401846564, 128.9783148103471 42.4741908802689, 128.97842342313817 42.474140258320986, 128.97853765151655 42.47408803276531, 128.97864828753694 42.47403716201224, 128.97874518934327 42.473990689725724, 128.9787949061126 42.47396631452022, 128.97879573758883 42.47396587604833, 128.97885784126532 42.47393071125915, 128.97893297316907 42.47390197413949, 128.97893415952657 42.473901468386316, 128.97903807322348 42.47385237012474, 128.97914130449286 42.473805375169604, 128.9793485861747 42.47371420619261, 128.97946337753694 42.47366491895625, 128.9795598584954 42.473620440406066, 128.97964589781225 42.47358020633376, 128.97973646893976 42.47353852662538, 128.97981955194774 42.473500759826194, 128.97988793092037 42.47347353480971, 128.97988998269037 42.47347255065767, 128.9799349487422 42.473446907533024, 128.9800208498777 42.4734038991553, 128.98008201285168 42.473374435618155, 128.98010486086488 42.473363917148625, 128.9801726058348 42.473330971865494, 128.98017946786112 42.47332852097722, 128.9801800963284 42.47332891305689, 128.9801826576192 42.47332996149246, 128.9801854449283 42.47333062232662, 128.98018835243255 42.473330870469994, 128.98019126974503 42.473330696501584, 128.98019408610665 42.47333010702629, 128.98019669459106 42.473329124424225, 128.98019899616415 42.47332778600101, 128.98020090344409 42.47332614257141, 128.98020234401886 42.473324256530105, 128.98020326319545 42.47332219948282, 128.9802036260764 42.473320049527665, 128.98020341888449 42.47331788829013, 128.98020316337346 42.47331677589212, 128.98020322214524 42.473316688366324, 128.98020398400809 42.47331467214544, 128.98020422186036 42.47331258594233, 128.98020392727048 42.47331050371102, 128.9802006286658 42.47329837214831, 128.98020109686894 42.4732984081924, 128.98032610227713 42.47339334007798, 128.98034003284053 42.473404423928656, 128.9807311995464 42.47391136659862, 128.9806310097747 42.47395581390889, 128.9804780840971 42.47402218147583, 128.98031636384275 42.474091650243246, 128.98014692721196 42.474169793897275, 128.9799763306519 42.47424706414277, 128.97981302109233 42.47432157767238, 128.97964239362258 42.474398861982706, 128.97947999325763 42.474479353946215, 128.97933865984828 42.474543415043385, 128.97933800834832 42.47454372776307, 128.979225654062 42.47460076428398, 128.9791205577555 42.47465506323963, 128.97911884266995 42.47465609626635, 128.9790911038099 42.474675483411204, 128.97909074597877 42.47467542642658, 128.97908777885 42.474675395633625, 128.97908486144198 42.474675797242284, 128.97899191860026 42.47469579022053, 128.97898917636883 42.47469660408135, 128.9789867023642 42.474697799538205, 128.97887075882045 42.47476675391198, 128.97887034260438 42.474766813863035, 128.97886762724255 42.47476763485308, 128.9788651791686 42.47476883082668, 128.978863091725 42.474770356182624, 128.97886144450402 42.47477215276059, 128.97886072356462 42.474773412491224, 128.97885990224572 42.47477430430342, 128.9788587477543 42.474776318411195, 128.9788581483467 42.47477846087604, 128.97885812722913 42.47478064875325, 128.97885868521894 42.47478279734004, 128.9788598007139 42.474784823454705, 128.97886143052816 42.47478664865697, 128.97886351156416 42.474788202284856, 128.9788659632553 42.47478942419023, 128.9788686906853 42.474790267067505, 128.97889118341737 42.47479536179074, 128.97891361493348 42.47481594720877, 128.9789157479188 42.47481754358219, 128.9789182706352 42.47481879019876, 128.97892108022208 42.47481963622915, 128.978924062122 42.474820047177495, 128.97892709475138 42.47482000628787, 128.97893005445843 42.47481951522754, 128.97893282056475 42.47481859401888, 128.97893528028564 42.47481728022307, 128.97893733332901 42.47481562740858, 128.97893889598456 42.474813702966884, 128.9789399045369 42.47481158536478, 128.97894031786365 42.474809360944924, 128.97894011911197 42.474807120405295, 128.97893931638575 42.474804955101156, 128.9789388889482 42.474804332353976, 128.97897165646253 42.4748120789581, 128.97897453149412 42.47481253501435, 128.9789774714574 42.474812567724676, 128.97898036370466 42.47481217583574, 128.97898309741632 42.474811374363156, 128.97898556784753 42.474810194016214, 128.9789876803412 42.47480868002113, 128.97898935395492 42.47480689038816, 128.9789905245626 42.47480489368893, 128.97899114731115 42.474802766429036, 128.97899119833954 42.47480059011655, 128.97899067569253 42.47479844813912, 128.978989599396 42.47479642256874, 128.9789885783785 42.474795245481666, 128.97904380690272 42.474796296906405, 128.97904693348787 42.47479611396077, 128.9790499406023 42.47479545437549, 128.97905269714852 42.4747943469057, 128.9791479403863 42.474745921984, 128.97914849958227 42.47474577837747, 128.97915103496481 42.47474467907806, 128.97916265832782 42.47473843431402, 128.97916484390348 42.47473700042328, 128.979166613377 42.47473528056477, 128.97916789986505 42.47473333974661, 128.97916865474033 42.47473125132875, 128.9791687046915 42.47473069800375, 128.9791740255652 42.4747263861861, 128.9791836519995 42.474720220255676, 128.97918531900234 42.474720262548466, 128.9791880535473 42.474719956349425, 128.97919066590964 42.47471928420642, 128.97926483978057 42.474694321130706, 128.97926689366852 42.47469348083395, 128.97928340313277 42.47468541973494, 128.97927679703514 42.47469755878128, 128.97927597144 42.47469964403077, 128.97927570942574 42.47470180832621, 128.97927602099801 42.47470396901978, 128.97927689425882 42.47470604360124, 128.97927829586106 42.47470795284864, 128.97928017228196 42.474709623853634, 128.97928245186674 42.47471099280569, 128.97928504756487 42.474712007428664, 128.97928786025474 42.47471262897723, 128.97929078252818 42.474712833716346, 128.97929370279257 42.47471261382765, 128.97929650953185 42.474711977708004, 128.97929909556512 42.4747109496489, 128.97932813663553 42.47469653386704, 128.9793310882399 42.474699769289316, 128.97931481200558 42.47470532335197, 128.97931233129674 42.47470639354639, 128.97931017097352 42.474707793607784, 128.9793084099674 42.47470947238238, 128.9793071126197 42.47471136853316, 128.9793063263316 42.47471341278082, 128.97930607983156 42.474715530435084, 128.97930638212588 42.47471764412369, 128.97930722216984 42.474719676619166, 128.9793085692709 42.4747215536606, 128.9793103742104 42.4747232066669, 128.97931257104148 42.474724575242455, 128.97931507949906 42.47472560938389, 128.97937525092664 42.474745096997474, 128.97937807919703 42.4747457752569, 128.97938103252088 42.47474602787672, 128.97938399520876 42.474745844961156, 128.97938685120442 42.47474523367552, 128.97938948863128 42.47474421796543, 128.9793918041744 42.47474283761892, 128.97939370712783 42.47474114670775, 128.9793951229482 42.47473921146929, 128.97939599617413 42.47473710771187, 128.97939629259918 42.47473491784505, 128.97939600061167 42.4747327276516, 128.97939513164954 42.47473062292705, 128.9793937197523 42.474728686118844, 128.9793936973954 42.4747286616122, 128.97939562352434 42.474728621006484, 128.9793985700981 42.474728109593016, 128.97940131838007 42.474727171303826, 128.9794143552079 42.474721477290345, 128.97945862835272 42.47472906086336, 128.9794615335953 42.47472934139154, 128.9794644571352 42.47472919909008, 128.97946728774778 42.47472863937275, 128.97946991774364 42.47472768353375, 128.97947224706596 42.47472636793755, 128.97947418709668 42.47472474263537, 128.97947566402848 42.474722869461026, 128.9794766216721 42.47472081967858, 128.97947702359457 42.474718671271, 128.97947687066548 42.474716712918706, 128.97958351363422 42.47467148312729, 128.97970943568154 42.47461298020717, 128.9798516129724 42.474546740920864, 128.97992917991442 42.474509470501694, 128.98000567118967 42.47447627126623, 128.98012913438825 42.47442000920414, 128.98025590748748 42.474361456219775, 128.9803977209931 42.47429824214628, 128.9805408861916 42.47423295528917, 128.98067752462896 42.47417433763528, 128.98083964531534 42.47410395417901, 128.98084206663705 42.47410264633457, 128.98084408898328 42.474101008634825, 128.9808456318287 42.47409910628945, 128.98084663374067 42.47409701504571, 128.9808470548252 42.47409481817239, 128.98084687831573 42.47409260314422, 128.98084684242428 42.474092502780394, 128.98085549195497 42.47408692920338, 128.9809390120693 42.47405972074963, 128.98094054723 42.474059140657396, 128.98105714992496 42.474008637776386, 128.98105931009363 42.47400750170301, 128.98106116698264 42.47400610230285, 128.98106620646035 42.47400156506353, 128.98106782790043 42.47399977680493, 128.98106895324926 42.47399779069228, 128.98106954028944 42.47399568123448, 128.98106956699823 42.47399352756774, 128.98106903237377 42.473991410486775, 128.98106795647251 42.473989409413704, 128.98106637965688 42.47398759941867, 128.98106436108105 42.47398604840352, 128.98106197647166 42.47398481455446, 128.98105931528727 42.47398394415928, 128.98105647736207 42.473983469870774, 128.98105356916054 42.47398340948187, 128.98105069978357 42.47398376525802, 128.98104797687577 42.473984523852344, 128.98103066451554 42.47399082477873, 128.9810873403728 42.47396539997486, 128.9811145749154 42.47395350496378, 128.98111703925196 42.47395216051179, 128.98111908421185 42.47395047411774, 128.98112062485842 42.47394851582545, 128.98112159720137 42.47394636697202, 128.98112196085478 42.4739441168094, 128.98112216774348 42.47393510646733, 128.9811219067516 42.47393284512825, 128.98112103098288 42.47393067011984, 128.98111957692024 42.47392867204912, 128.98111760513746 42.47392693415219, 128.9811151977757 42.47392552882679, 128.98111245512126 42.473924514616286, 128.9811094914284 42.4739239337709, 128.9811064301592 42.47392381048765, 128.9811033988409 42.47392414990228, 128.98110052375267 42.47392493787541, 128.98107450710634 42.47393440355531, 128.98107441934533 42.47393256923957, 128.98107374124993 42.47393044478404, 128.98107251556831 42.47392845933689, 128.9810707895371 42.47392668941538, 128.9810686296759 42.473925203230664, 128.98106611922387 42.473924058058834, 128.98106335493128 42.47392329803379, 128.9810604433316 42.473922952446145, 128.98105749663483 42.47392303461452, 128.98105462840405 42.47392354137227, 128.98101714558786 42.47393312633041, 128.98103504729858 42.47392505512462, 128.98103739117718 42.47392375019721, 128.98103934786064 42.473922132980334, 128.9810408427586 42.473920265123546, 128.9810418188845 42.47391821783099, 128.98104223902757 42.47391606914705, 128.98104208717191 42.47391390098122, 128.98104136910632 42.47391179598563, 128.98104011220408 42.473909834404274, 128.98103836437932 42.47390809101415, 128.9810361922605 42.47390663227461, 128.9810336786503 42.473905513793895, 128.98103091936954 42.47390477820934, 128.981028019604 42.473904453561964, 128.98102508989504 42.473904552227594, 128.98102224192522 42.47390507044503, 128.98101958426142 42.473905988459435, 128.98093590165342 42.47394264881515, 128.98096546206415 42.47392605357848, 128.98096765461156 42.473924545696526, 128.9809693998413 42.47392274596678, 128.98097062847665 42.47392072582946, 128.98097129174693 42.47391856547383, 128.98097136332382 42.473916350655166, 128.98097084036604 42.4739141692906, 128.9809697436324 42.47391210796932, 128.98096811665792 42.47391024851533, 128.98096602402515 42.47390866473962, 128.9809635488011 42.47390741951003, 128.98096078923976 42.47390656225591, 128.98095785488158 42.47390612700595, 128.98095486220595 42.473906131037324, 128.9809519300068 42.47390657419006, 128.98094917467768 42.473907438873205, 128.9809290315161 42.47391559949159, 128.98092732775936 42.47391640449469, 128.980840732853 42.473963676765635, 128.9808382807832 42.47396535721211, 128.9808252708033 42.473976506298776, 128.98082374215804 42.47397587680459, 128.98082109930925 42.47397522431626, 128.98081874884832 42.47397498591429, 128.98081155697096 42.47396385943486, 128.9809122792203 42.473920378164756, 128.98098243742893 42.473886644348575, 128.98098471505472 42.47388529922892, 128.98098659904392 42.47388365389917, 128.98098801851114 42.47388177026509, 128.9809889200489 42.47387971919867, 128.98098926973665 42.473877577871534, 128.98098905441753 42.47387542685135, 128.9809882821931 42.47387334707055, 128.98098698211817 42.473871416781094, 128.9809852031084 42.47386970861035, 128.98098301209924 42.47386828682841, 128.9809804915277 42.47386720493001, 128.9809777362305 42.47386650362164, 128.98097484987593 42.47386620929016, 128.98097194106347 42.473866333009795, 128.98096911923753 42.47386687012558, 128.98096649056953 42.473867800428515, 128.9808528881105 42.47391856491102, 128.98085377786427 42.47391760592107, 128.98100241947517 42.47384861580792, 128.98100473353017 42.47384729317901, 128.98100665767132 42.473845663766525, 128.98100811900983 42.47384378929471, 128.98100906218812 42.47384174077098, 128.9810094514777 42.47383959579604, 128.98100927213164 42.473837435624326, 128.98100853094397 42.473835342085856, 128.9810072559918 42.47383339448658, 128.9810054955721 42.47383166660401, 128.9810033163717 42.47383022389257, 128.98100080094153 42.473829121003966, 128.9809980445694 42.473828399717014, 128.98099515167 42.47382808735501, 128.9809922318301 42.47382819575061, 128.98098939565696 42.47382872079766, 128.98098675058833 42.47382964260674, 128.98095958736434 42.47384162709337, 128.98096249206293 42.473836332456685, 128.9809628916416 42.47383526305841, 128.98101386502705 42.47381250720407, 128.98101626415968 42.47381117772743, 128.9810182590283 42.473809522132015, 128.98101977022634 42.473807606319546, 128.9810207376001 42.473805506549745, 128.98102112264266 42.47380330640491, 128.98102091002738 42.47380109346273, 128.98102010821765 42.4737989558103, 128.9810187491299 42.47379697853777, 128.9810168868631 42.47379524035132, 128.98101459554576 42.473793810440164, 128.98101196638453 42.47379274572252, 128.98100910403443 42.47379208857991, 128.98100612243232 42.473791865170185, 128.98100314026232 42.47379208438622, 128.98100027623067 42.47379273750211, 128.9809415979909 42.47381103875917, 128.98093886116618 42.473812153243756, 128.98093649488013 42.47381366266375, 128.98093460145813 42.47381550174728, 128.9809332627777 42.47381759096678, 128.98093253672738 42.47381983997808, 128.9809324547038 42.473822151527045, 128.98093252811944 42.47382284778639, 128.98087748489834 42.473847420463265, 128.9808753534923 42.473848572375815, 128.9808735272977 42.47384998264935, 128.98082759789833 42.473892346983924, 128.98082380954946 42.47389401186729, 128.98080734330628 42.473900477823676, 128.98080787649394 42.47389930020633, 128.98080825125953 42.47389715618471, 128.98080805853277 42.47389499900066, 128.9808073055986 42.473892910193605, 128.98080602091736 42.47389096871827, 128.98080425304857 42.47388924796051, 128.98080206881608 42.47388781296318, 128.98079955078157 42.47388671796775, 128.9807967941242 42.473886004363955, 128.98079390304278 42.47388569912527, 128.98079098681728 42.47388581378941, 128.98078815567808 42.4738863440222, 128.98078551663932 42.47388726978139, 128.9807758557863 42.47389155565094, 128.98077348074867 42.47388608607527, 128.9807725284734 42.47388438915065, 128.98075076697444 42.47385317571986, 128.9807011805478 42.47376670988461, 128.98061601923703 42.47363007160602, 128.98061499483768 42.47362869353707, 128.9805065869599 42.47350454464163, 128.98050496926416 42.473503006735754, 128.98036439430487 42.473391158681096, 128.98035331848112 42.47337680452037, 128.98035252130015 42.473375880377056, 128.98013676337573 42.473151025124295, 128.97995341930002 42.47290279070974, 128.97983344818442 42.47261703263332, 128.97977067323532 42.47231749840507, 128.9797419411943 42.472015465729335, 128.97974136135954 42.472013092710476, 128.97970994452072 42.47193446735822, 128.97970107426642 42.47189782386503, 128.97970050551766 42.47189619546171, 128.97965642223093 42.47180051917707, 128.97962268272082 42.47171608019697, 128.97949614768004 42.471419114247716, 128.97935685485737 42.471128127618044, 128.97935575041961 42.47112634046893, 128.9792922776261 42.47104380509117, 128.97928374692978 42.47102856653667, 128.97928281896318 42.47102718762722, 128.97917818836305 42.470895451006946, 128.9791596929246 42.470871400678746, 128.97900323092318 42.47060154326796, 128.97894874967858 42.470490583229356, 128.97890662609083 42.47038523103714, 128.9789055953089 42.47038332238485, 128.97890410760172 42.47038158680695, 128.97888735415845 42.470365540495585, 128.97887157518755 42.470333403748526, 128.97887044631082 42.47033161679991, 128.97886890867773 42.470330005654375, 128.9786303593191 42.470121995649755, 128.97862949723242 42.47012130533145, 128.97834348356582 42.469910867723435, 128.97810168774163 42.4696930302564, 128.97788108049417 42.469464450483265, 128.97788040634236 42.46946380359677, 128.97767298255832 42.46927921276925, 128.97745017471078 42.46908893868474, 128.97725423971502 42.4688848122624, 128.9772536784972 42.468884264288235, 128.97704365651862 42.46869186622254, 128.976804897664 42.46848623560822, 128.97661795538292 42.468298012898, 128.97661719034733 42.46829730500481, 128.97642364226178 42.468132464420464, 128.97630075832228 42.46796133327126, 128.97617399722427 42.46776844401556, 128.9760496677979 42.46758886036419, 128.97604886625422 42.46758783997867, 128.97589640468516 42.46741550162636, 128.97589409585407 42.46741347022485, 128.97564929634223 42.467244080671165, 128.97564729807326 42.46724291613377, 128.9754171799593 42.4671307838751, 128.97531450418265 42.467079296655726, 128.97505022858914 42.46687621149603, 128.97504652424848 42.46687320607034, 128.9748120194927 42.4666609238073, 128.97455076683994 42.46644412495268, 128.97428088418687 42.4662316805151, 128.974048330484 42.46603319903348, 128.97404646346592 42.46603185974685, 128.9739966598257 42.466001861581326, 128.97398477302966 42.46599198055526, 128.97398286444556 42.46599064890151, 128.97381955833413 42.46589518780168, 128.9737489600784 42.46585266406114, 128.97347253378393 42.465640292240195, 128.97347016178864 42.46563881176066, 128.97341894844524 42.46561304014885, 128.97340012452273 42.46559825386886, 128.97339743639847 42.46559658466125, 128.97311649952545 42.46546006180136, 128.9728412572968 42.46530158880107, 128.97251762185908 42.46511106715487, 128.97220980077253 42.46490084247586, 128.97219165088558 42.46488868580069, 128.97208787166923 42.46481148171292, 128.97208548179745 42.46481003652058, 128.9720442097639 42.464789930388946, 128.9719001076471 42.46469341088429, 128.97189760016067 42.46469205227791, 128.97189476874522 42.46469110477943, 128.97178683030216 42.464664544420394, 128.97175975283199 42.4646513531865, 128.97175769362713 42.46465051311226, 128.97175548258048 42.46464992127209, 128.97159218201043 42.4646166470751, 128.9714938383309 42.46459244735975, 128.9710954801122 42.464503710489886, 128.97072152686573 42.46437346678241, 128.97033109094968 42.46424771340643, 128.96994164656283 42.46412634668472, 128.96959103062756 42.46395110824945, 128.96947288035926 42.46389659175902, 128.9694353407103 42.46387711831564, 128.96943388853725 42.46387645279651, 128.96939777373152 42.46386193619305, 128.96923078258394 42.46378488309048, 128.96922927263103 42.4637842723812, 128.96884601164956 42.463649756349845, 128.9684618310976 42.46352169607082, 128.96827916930033 42.46343242678964, 128.96812131000274 42.463334952631115, 128.96793515567015 42.46309987368896, 128.96784484749747 42.46298103085274, 128.96773215823177 42.46281400310159, 128.9676821106439 42.46272977242146, 128.96768131401845 42.46272861906749, 128.96759270581774 42.4626169051878, 128.9675796080487 42.4625971709787, 128.96738147524184 42.462322943048555, 128.9671881825481 42.46204819425142, 128.9671877927278 42.46204767454798, 128.96701625007606 42.461832720545864, 128.9669449373393 42.46173148247945, 128.96683979362652 42.46159318605703, 128.9667738673224 42.461498608154564, 128.9667234168753 42.461428076216286, 128.9665488581413 42.46117826790034, 128.96654749224115 42.46117666473671, 128.96654577845757 42.46117525663529, 128.96648457389318 42.46113286896331, 128.96645687688243 42.46109951081916, 128.96645487573034 42.461097601964106, 128.96645236492918 42.461096058265085, 128.96638094774093 42.4610611016773, 128.96625747593723 42.46097558971576, 128.96625539338686 42.460974383401464, 128.96625305739258 42.460973466217766, 128.96625054036429 42.46097286659502, 128.96596547846372 42.46092497188876, 128.9658259208083 42.46088351488879, 128.96570308893678 42.46084811831507, 128.96539910416593 42.460723096692945, 128.96529623805347 42.460626993695826, 128.9651841948387 42.46049756941876, 128.96505105722463 42.46032163425936, 128.96498120270635 42.46022168164272, 128.96490387065046 42.46009933600325, 128.9647585389682 42.45987240356861, 128.96470174890314 42.45977893307659, 128.9644953195342 42.45940684739289, 128.964290925057 42.45904036963205, 128.96411316844646 42.458715756576176, 128.96409794078946 42.45867495896996, 128.96409692082892 42.458672982166966, 128.96409541360362 42.45867118423188, 128.96409347369715 42.458669630276184, 128.96409117136244 42.4586683765757, 128.9640790946301 42.45866303089535, 128.96406352347034 42.45864086340183, 128.96396655407804 42.458302286043875, 128.96386577946026 42.45798035718534, 128.96386557689075 42.45797978072897, 128.96382779456775 42.45788297927562, 128.96382660516326 42.45788081564045, 128.96382483158138 42.45787888374047, 128.96382255209105 42.45787726883124, 128.9638198672871 42.457876042179464, 128.96381689565126 42.45787525791779, 128.9638137683231 42.45787495065605, 128.96357857683046 42.45787030217761, 128.963575640429 42.45787045788298, 128.96357280147225 42.4578710347912, 128.96357016905984 42.457872010732, 128.9635678443538 42.45787334820054, 128.96356591669124 42.457874995798704, 128.9635644601512 42.457876890210244, 128.96356353070772 42.457878958633984, 128.96356316407892 42.457881121581565, 128.96356337435412 42.45788329593212, 128.96356415345267 42.45788539812658, 128.96356547143424 42.45788734737877, 128.96356727764964 42.45788906877999, 128.96356950268688 42.45789049617776, 128.96357206103923 42.45789157471794, 128.9635748543904 42.45789226295282, 128.96357777539365 42.4578925344339, 128.96380198966853 42.457896965952635, 128.96383661129764 42.45798566953218, 128.9639372018698 42.45830700223037, 128.9640333728593 42.45864279245434, 128.96402946429046 42.458641062350445, 128.96402686085662 42.458640148393236, 128.96402406962358 42.45863961940501, 128.96402119333283 42.458639494857096, 128.96401833785677 42.45863977933393, 128.96381981915692 42.45867417949611, 128.96344856907436 42.458751071066644, 128.96304557330285 42.458827387403886, 128.9626454276084 42.45891042486828, 128.96224697357124 42.458990254608324, 128.96186966351743 42.459074639939004, 128.96170230293075 42.458897471771, 128.9615748514245 42.45864394248789, 128.96147628939383 42.45845952634783, 128.9613693691635 42.458262306213996, 128.9613686432917 42.45826116057624, 128.96134306327596 42.45822612345076, 128.961289030137 42.45814641755184, 128.9612707620919 42.458116675059124, 128.9612401923292 42.45804628706458, 128.96123963195572 42.45804519668438, 128.9611323524753 42.457865436630904, 128.96109953908098 42.45779545431827, 128.96106721265656 42.457724204981865, 128.9610668966418 42.45772357264893, 128.96105945299624 42.45770996099008, 128.9610135329602 42.45761202495545, 128.96101312591094 42.45761125132151, 128.96088669171004 42.457395167704014, 128.96080031285615 42.45724685320214, 128.96069545027862 42.4570496484834, 128.96059477060305 42.45685384731782, 128.96049606618706 42.45665852220957, 128.96038732549326 42.45645733437879, 128.96025712298314 42.45622682011049, 128.96012218711996 42.455967599248154, 128.95997262960998 42.45569910588704, 128.9598414884193 42.45545873211468, 128.95971218300414 42.45520293648154, 128.95956379885402 42.45492531939045, 128.9594186508814 42.454649247333734, 128.95926973545292 42.45437378512313, 128.95912712622848 42.45409046675708, 128.9589779617675 42.45380890791899, 128.9588251294368 42.45352876384004, 128.95868183876826 42.453246705120975, 128.958531995488 42.4529670205677, 128.95838278659593 42.45268914178076, 128.958335701187 42.45255414439752, 128.95832951440283 42.45239663288201, 128.9584336972666 42.45230415964447, 128.9586408768373 42.452208342876524, 128.95864944845502 42.45220497521403, 128.95877839049078 42.45215676340562, 128.95912222461354 42.452024886913534, 128.95912339620753 42.45202438676579, 128.9594517140571 42.4518692381081, 128.9595269451772 42.45183453798839, 128.95961399449592 42.45179700100468, 128.9596147473489 42.45179665392162, 128.959699904098 42.451754760912735, 128.959745346362 42.45173380065579, 128.95984957159396 42.451681131461214, 128.95987991328468 42.45166620471768, 128.96000963876753 42.451601011943666, 128.9601644519833 42.451527969190884, 128.96044943655573 42.451406600196044, 128.96066418053138 42.451323646424925, 128.9606650232325 42.451323294877255, 128.96091919670982 42.45120912373409, 128.96122042741726 42.45108289330268, 128.96150569169285 42.45095536227233, 128.96177145071078 42.450855173264216, 128.96200566324092 42.45078815287348, 128.96200773414145 42.45078742108819, 128.96224949911638 42.45068450621048, 128.9624634797477 42.4505934010153, 128.96268941212762 42.45048838946448, 128.96295892655513 42.45038573085265, 128.96309862818032 42.45033881693651, 128.96310034031654 42.45033813997459, 128.96325087060657 42.45026901149474, 128.96325281691045 42.450267947919244, 128.96325450736748 42.45026666670999, 128.9632990990999 42.45022691438025, 128.9633007013813 42.450225173707516, 128.96335076081874 42.45015786858276, 128.9633512898223 42.45015708594668, 128.9634174388205 42.45004877019065, 128.96344398956177 42.450017797389386, 128.96348484990907 42.44997568277871, 128.96348535197654 42.44997513120264, 128.96359162422 42.44985049154077, 128.9636384412645 42.44980020643034, 128.96363938503998 42.44979904769177, 128.96365050228468 42.44978330548051, 128.96368987360123 42.449738524979274, 128.96369057973033 42.449737633863975, 128.96378120161972 42.449610037925396, 128.9638525920857 42.449496708335516, 128.96392256326155 42.449374211820405, 128.96399393305757 42.449244848978715, 128.9640788363712 42.4491040862885, 128.9641686573049 42.448958980503186, 128.96426056860673 42.44883456008696, 128.96426139469702 42.448833244626954, 128.9643144418488 42.44873196922584, 128.96437392323747 42.44863653676527, 128.96444663293835 42.448504071576664, 128.9645199411872 42.44838444126669, 128.96461488806358 42.44822601017698, 128.9647370137347 42.44807558988669, 128.96473738509513 42.448075105405515, 128.96486277565748 42.44790151712803, 128.96499941338257 42.447696067226175, 128.9649997434822 42.44769553609467, 128.9651116205511 42.44750230535654, 128.96525728142393 42.44731528156583, 128.965431743946 42.44716978456672, 128.9654901095258 42.44713067989301, 128.96569060886455 42.447036531206216, 128.9658339159414 42.44697934805241, 128.9659819457715 42.4469235146846, 128.96598502791792 42.44692196863469, 128.96603851615254 42.44688725171318, 128.96604041267398 42.446885771879046, 128.96604146832544 42.44688456696863, 128.96606350903622 42.44687408005506, 128.96606368872207 42.446874311057925, 128.96606570817121 42.446875996944314, 128.96606814511696 42.446877346648144, 128.96607089946144 42.44687830473021, 128.96607385806985 42.4468788318372, 128.96607689941712 42.44687890631818, 128.9660798985795 42.446878525113846, 128.9661103011913 42.44687225774871, 128.96611296786506 42.44687149911354, 128.966115392271 42.446870380159666, 128.9661174866508 42.446868941390925, 128.96611917519198 42.44686723488784, 128.96612039677314 42.44686532242226, 128.96612110717535 42.446863273221545, 128.96612128068384 42.446861161462515, 128.96612091101767 42.44685906358652, 128.9661200115584 42.44685705553229, 128.9661186148644 42.446855209987255, 128.96610149173083 42.44683691514639, 128.9661032222927 42.44683703927737, 128.96610606853602 42.44683684022885, 128.9661088122416 42.446836245237925, 128.9661113539355 42.446835275876175, 128.9661136014679 42.44683396728815, 128.96611429668883 42.44683337290817, 128.96611572476417 42.44683283949694, 128.96611802037222 42.44683151694775, 128.96611992863268 42.44682989143156, 128.96612137794517 42.44682802393976, 128.96612231392984 42.44682598454289, 128.9661227014674 42.446823849761635, 128.96612252601713 42.4468216996956, 128.9661108444733 42.44676717735437, 128.96609108572426 42.446656384155965, 128.96606747844044 42.44654108085408, 128.96604387128954 42.44642577754175, 128.9660196461693 42.446322439217575, 128.9659586665993 42.446011577955026, 128.96593369327482 42.44589937666975, 128.96591184617355 42.44577793297336, 128.96588729827866 42.44565278994347, 128.96587094071933 42.445564379073275, 128.96584867777372 42.44546598929575, 128.96582874162468 42.445369388119666, 128.9658097857044 42.445272750515706, 128.96579257859983 42.44516489769456, 128.9657708318926 42.44505904339838, 128.9657511096093 42.44495849723537, 128.9657348476235 42.44485544818408, 128.9657160735823 42.444744616352516, 128.96569709453757 42.444632730373655, 128.96567594354926 42.4445148257013, 128.96564965711445 42.44439591731619, 128.96561153574967 42.444201563657835, 128.96560123025503 42.444133943086825, 128.96560107874302 42.44413318459923, 128.96558205162984 42.44405633677533, 128.9655812507755 42.444054262506924, 128.96557590316706 42.44404422055866, 128.96558225765594 42.44403237985767, 128.9655830596076 42.44403033215689, 128.96558331915858 42.44402820873626, 128.96558302676712 42.44402608765828, 128.96558219318226 42.444024046899344, 128.96558084904885 42.44402216148311, 128.96557904378085 42.44402050072236, 128.96557684374469 42.44401912567104, 128.96557432981928 42.444018086879645, 128.96557159442324 42.444017422536795, 128.96556873811684 42.44401715706552, 128.9655658659053 42.44401730022522, 128.9655630833786 42.444017846753006, 128.9655620549784 42.44401821586811, 128.96555308285207 42.44400136762993, 128.96555181678514 42.44399951742746, 128.96555010879723 42.443997873565586, 128.9655480183177 42.44399649324222, 128.96554561808432 42.443995424485514, 128.9655429916129 42.44399470448267, 128.9655402302911 42.44399435828609, 128.96553743019874 42.443994397941594, 128.96553468876445 42.443994822069435, 128.965532101376 42.44399561591214, 128.96551608395558 42.44400188480848, 128.9655198137722 42.44397847439353, 128.9655198663086 42.44397625623733, 128.96551932328413 42.44397407450072, 128.9655182063124 42.443972016021704, 128.9655165598515 42.44397016273229, 128.9655144494342 42.443968588397475, 128.96551195905977 42.44396735567927, 128.9655091878506 42.44396651364259, 128.965506246107 42.44396609580235, 128.96550325091687 42.44396611878951, 128.96550032149517 42.443966581689146, 128.96549757443952 42.44396746607686, 128.96549511908876 42.44396873675203, 128.96549305317131 42.44397034313903, 128.9654914589153 42.44397222130006, 128.96547845465332 42.443991596574584, 128.9654774323281 42.44399357173729, 128.965476933498 42.44399565454629, 128.965476976214 42.44399776963271, 128.9654775589302 42.44399984045965, 128.96548277966426 42.444012308310946, 128.96548091228846 42.44401258389086, 128.9654782031604 42.44401341398375, 128.96547576349303 42.44401461819364, 128.96547368631417 42.444016150602465, 128.96547205082933 42.44401795277739, 128.96547091940204 42.44401995599911, 128.96547033517496 42.44402208388209, 128.96547032042562 42.4440242552873, 128.96548616235955 42.44415038074829, 128.96548673655306 42.444152559693045, 128.96548788371757 42.44415461073353, 128.96548955812924 42.44415645211889, 128.9654916930489 42.44415801045472, 128.9654930630335 42.44415867252986, 128.96550124024367 42.44420215356765, 128.96553687778223 42.44440399851522, 128.96556231265956 42.44451350588985, 128.96558260546078 42.44460691362943, 128.9655973317634 42.444697087364595, 128.96561419726703 42.4447931507291, 128.96563200086428 42.44489398413939, 128.9656475294752 42.44499836558375, 128.96568453738323 42.445197114146985, 128.96570509644346 42.44529185698662, 128.9657223159098 42.44538970419629, 128.96574231476916 42.44548662729272, 128.9657603161662 42.44557839795249, 128.96577620856598 42.445674527074765, 128.9657944165461 42.44577742858103, 128.96581464218158 42.44587045655388, 128.96583577008744 42.44595802660386, 128.96585169749815 42.44604424087088, 128.96587104358792 42.44613281072774, 128.96588536977387 42.446220922092266, 128.9659001633288 42.4463013955704, 128.9659173173139 42.44637875396081, 128.96593344314948 42.44645088584539, 128.96594709327948 42.44651541866738, 128.96596798632999 42.446606840950864, 128.96597772646024 42.446661513655506, 128.96598576496294 42.44670249792227, 128.96598802580309 42.44671899016797, 128.96598818826948 42.44671984419511, 128.9660082881688 42.44680223057023, 128.96601702509594 42.44685655182226, 128.96601477336506 42.44687083428371, 128.9658871081074 42.44693157690802, 128.965702637318 42.44700017356699, 128.9657015888831 42.44700060304881, 128.96551444566038 42.44708465503817, 128.9655121583968 42.44708591695481, 128.96547186468163 42.44711291359626, 128.96544598139562 42.44712506759127, 128.96544279453153 42.44712707520996, 128.9654103805461 42.44715410767572, 128.96529373993147 42.44723225611617, 128.96529122657552 42.44723443905908, 128.96512558087852 42.44742303636897, 128.96512443022635 42.44742461072273, 128.96500191561378 42.4476302444943, 128.96490381341968 42.44777078830799, 128.9647975667662 42.44794251217534, 128.96465906350363 42.44811574599677, 128.96456087929258 42.44824638866768, 128.96456018930175 42.44824743151028, 128.96448359750573 42.44838033948321, 128.96440295881962 42.4485076946127, 128.96440264860436 42.448508219288165, 128.9643290497503 42.448641972377956, 128.96426422838175 42.448763371676556, 128.96417475826735 42.44888935497328, 128.96409967887945 42.44900151646013, 128.96403553840867 42.44910967549263, 128.96395537483008 42.44924143483894, 128.96387811599462 42.44938152597984, 128.96381065005977 42.449500463047514, 128.96374518311507 42.449607848755356, 128.96367021113835 42.44970741719386, 128.9636245578775 42.449772056136084, 128.96357246330055 42.449831308920444, 128.96356655452468 42.449838238942846, 128.9635475450005 42.44985865666162, 128.96341469452668 42.4500027810004, 128.96341367211073 42.45000406799476, 128.96332423409712 42.45013622314208, 128.96325153906147 42.45022785573555, 128.9631239869936 42.4502979041536, 128.9628645864693 42.45038941088347, 128.96286382031508 42.450389701389334, 128.96257634694075 42.450506522739005, 128.96232444524426 42.45062065221614, 128.9620898796897 42.450720538252334, 128.9618492939242 42.450801227780836, 128.96159361753166 42.45088866208225, 128.96159282838047 42.450888953057536, 128.961319500131 42.45099726201121, 128.96131865277812 42.45099762456559, 128.96103603838122 42.45112782160756, 128.96047952466506 42.45136340069473, 128.9601573581666 42.45149993762595, 128.9601563847509 42.45150038757503, 128.95999289201438 42.451582550237895, 128.95996996745927 42.4515933653945, 128.95983325215627 42.45166246003081, 128.95968365587996 42.451736054062515, 128.95951145347468 42.45181548263673, 128.95928698932056 42.451912275471614, 128.95896555269422 42.45205560532095, 128.95863562135372 42.4521852311853, 128.95845343070857 42.452253352043755, 128.95845085590938 42.45225457296789, 128.95844866841958 42.452256154799144, 128.95841371451903 42.4522871801221, 128.95830459144986 42.45233764727861, 128.958302129237 42.452339069468294, 128.9583001174536 42.45234083802448, 128.95829864309516 42.45234287646974, 128.95829776991712 42.45234509665583, 128.95829753567838 42.45234740257554, 128.9582991638495 42.45238885582722, 128.95826429216487 42.452419808017495, 128.95826268564156 42.45242154509135, 128.95826155003184 42.4524234752701, 128.95826092604426 42.45242552936217, 128.95826083604717 42.45242763373402, 128.95826128326672 42.452429712949716, 128.95830577948857 42.452557287865), (128.96547739340406 42.46078073587572, 128.9654529252976 42.46077337908164, 128.9654477503016 42.460768544347275, 128.96547739340406 42.46078073587572), (128.9583018431499 42.452457070375885, 128.95829228808415 42.45242967507168, 128.95830048148142 42.45242240259183, 128.9583018431499 42.452457070375885), (128.96553645587002 42.4440473474418, 128.96553878925812 42.4440481246278, 128.96553807588077 42.44404922562544, 128.96553708037197 42.4440512404378, 128.96553662580533 42.444053359343194, 128.96553672910233 42.4440555034643, 128.96553738641785 42.44405759298507, 128.96554566324593 42.44407575469821, 128.96557653204852 42.44421812937633, 128.96560045516426 42.44435519709935, 128.9656005755714 42.444355769334216, 128.96563432561655 42.44449263709932, 128.96565303981558 42.444603117653344, 128.96567428290209 42.44473660932579, 128.96569633994818 42.44486924186647, 128.96572126154848 42.44500637448829, 128.96574658641234 42.445140525693034, 128.96577211475156 42.44527571030897, 128.9658018426893 42.4454222274668, 128.96582733631388 42.44556226944708, 128.96585495357368 42.445708100111894, 128.96588335770704 42.44585290272993, 128.9659127449179 42.4459926345914, 128.96594402959872 42.446147078023856, 128.96597665741396 42.44630333097565, 128.96603614552913 42.44659650801333, 128.96606013927598 42.44671378081867, 128.96606849444984 42.44675277912602, 128.96605091572584 42.44672097514211, 128.96604956167914 42.44671907379158, 128.96604819680715 42.44671782110982, 128.96604452641154 42.44670123504947, 128.96599769220532 42.44648263936162, 128.96597369593786 42.446365354487504, 128.96594819007663 42.446245398871866, 128.96592747247652 42.446129713728666, 128.96590327789323 42.44601141698099, 128.96587679138946 42.44588646868518, 128.96585147119742 42.4457624259955, 128.96583921062333 42.44569992270812, 128.96581487363582 42.44556577987361, 128.9657897377104 42.44542755476914, 128.96571897232363 42.44506679024105, 128.96570384760105 42.44497457249553, 128.96568623227154 42.44487469773523, 128.96567204209975 42.44478218104494, 128.96563791249605 42.4445981029235, 128.96563748067422 42.444596577132344, 128.96560535024352 42.444512803868456, 128.96559814737722 42.444479683006776, 128.96560071882064 42.44447916553613, 128.9656033286109 42.444478208951836, 128.96560564000646 42.44447689724572, 128.9656075660652 42.44447527975713, 128.96560903433914 42.44447341732726, 128.9656099895997 42.44447138001074, 128.9656103959153 42.44446924444039, 128.96561023800257 42.444467090944904, 128.96558954424327 42.44436662036812, 128.96557367473122 42.444270619009956, 128.96555739549893 42.444172503411735, 128.9655422239525 42.444090098375234, 128.96553836901938 42.44407044165163, 128.96553785116413 42.44406874635418, 128.96553582677166 42.44406391183771, 128.96553645587002 42.4440473474418), (128.9655217143247 42.44414330244983, 128.96552760367157 42.44417528797151, 128.96553953204977 42.444247313133125, 128.9655309897424 42.44419913149043, 128.96552076473256 42.44414476171944, 128.9655217143247 42.44414330244983), (128.96604705336307 42.44685547554989, 128.9660470529675 42.44685522350179, 128.96604278093224 42.446828662513205, 128.9660438830119 42.44683221972778, 128.96604479084758 42.44683423916387, 128.9660462015634 42.44683609350684, 128.96604806347682 42.44683771482137, 128.9660503083751 42.44683904370929, 128.9660528540146 42.4468400314857, 128.96605560713374 42.44684064196263, 128.96605741180812 42.446840774998435, 128.96605458663936 42.446851891235596, 128.96604705336307 42.44685547554989), (128.9655314080383 42.444021280752686, 128.9655310777834 42.44402117075399, 128.965531302604 42.444021082763726, 128.9655314080383 42.444021280752686), (128.9583281967588 42.452363086119774, 128.95832780579445 42.452353132274716, 128.95835203598514 42.452341926323804, 128.9583281967588 42.452363086119774), (128.9802022194132 42.4732576592857, 128.98020222027372 42.47325764519904, 128.98023672731705 42.4732936072287, 128.98021413058382 42.47327644600073, 128.9802126032129 42.47327549774189, 128.9802022194132 42.4732576592857), (128.97994169569546 42.47341668133108, 128.97991773473245 42.47342867792318, 128.9799169830771 42.47342907983234, 128.97987262119256 42.47345437840766, 128.97981449199526 42.47347752248476, 128.97986882082373 42.473445297616784, 128.97994169569546 42.47341668133108), (128.98005753134444 42.473335655824535, 128.98003186804866 42.473347267735086, 128.9799300019355 42.47339609870139, 128.97985349404337 42.47342614158456, 128.97985114048612 42.47342728707246, 128.9797820369565 42.473468275459695, 128.97970043951278 42.47350392759829, 128.97961288341463 42.47354630996357, 128.97959980206682 42.47355306401165, 128.9795690392586 42.473567887147816, 128.9794254290145 42.47363018642456, 128.97928695102786 42.47369109349932, 128.97912250149864 42.47376472368487, 128.97899646571526 42.473823277161195, 128.97888032903947 42.47387569886903, 128.9787908594308 42.473920412131136, 128.97868945468963 42.47396724862997, 128.97857196399244 42.47402280835737, 128.9784496782646 42.47407886982238, 128.97833350312595 42.47413130896655, 128.9782220698889 42.47418327075198, 128.97810674687224 42.474234594073785, 128.97786772365066 42.47434122015089, 128.97777678540515 42.474382001591444, 128.97768167198714 42.47442513320775, 128.97757130595863 42.47447195771925, 128.97745579347142 42.474522303070245, 128.97735891069124 42.474562706571106, 128.97725963632408 42.474605323168056, 128.9771591610918 42.47464708421608, 128.97705332331327 42.47469140070129, 128.97695159123367 42.474732328413495, 128.97675627475812 42.47481318230881, 128.97672934072565 42.47482313650526, 128.9766525899507 42.474854326494885, 128.9765737598994 42.474884731028695, 128.9765731594716 42.47488495862003, 128.9765870666519 42.474874913026, 128.97683073123392 42.474773437276575, 128.9768903442066 42.47475214531368, 128.9768914651719 42.474751700689545, 128.9770697999267 42.47467359849961, 128.97708365979045 42.474667654932546, 128.9771903915389 42.47462368901762, 128.9773637788383 42.47454955937343, 128.97742766388404 42.47452324324454, 128.97761214374333 42.47444436816995, 128.97771625013522 42.47439762038936, 128.9777330738564 42.474390381528636, 128.97779690204578 42.474361404468276, 128.977811007604 42.47435507050114, 128.97801296713146 42.4742664377795, 128.9782140444268 42.47417787165554, 128.97840514202997 42.474087288953505, 128.97853423395455 42.47402866731097, 128.97854927374436 42.474021898432966, 128.97855387906156 42.47401974629474, 128.97860128945533 42.4739982167943, 128.97879750210865 42.473905192140876, 128.97899183809392 42.47381341664417, 128.97918960596954 42.47372428128955, 128.97938714116142 42.4736370475415, 128.97947100936804 42.473598573111616, 128.97958850171327 42.47354549254891, 128.97973628367282 42.47347658959333, 128.9797367027936 42.47347638645564, 128.9797842550376 42.47345447135097, 128.9799561921266 42.47337300142023, 128.98001819893102 42.47334401367416, 128.9800767051674 42.473324255221634, 128.98007662753773 42.473324408792145, 128.98006153336834 42.47333245138193, 128.98005938191943 42.47333384602592, 128.98005762649484 42.473335517243605, 128.98005753134444 42.473335655824535), (128.97651525915148 42.47489570907015, 128.976499262617 42.47490726384745, 128.97648118035312 42.47490888726139, 128.97651525915148 42.47489570907015), (128.97668712292693 42.47486566110776, 128.9766964785813 42.47486185952053, 128.97668752368247 42.474865513281266, 128.97668712292693 42.47486566110776), (128.97650395235266 42.474934949033965, 128.9765083957841 42.474931739411126, 128.97650760245966 42.47493349573762, 128.97650395235266 42.474934949033965), (128.97648791744732 42.4749644346624, 128.97649082038893 42.47496444094467, 128.97649370438424 42.47496402366426, 128.976493830401 42.47496398543142, 128.97649173229283 42.47496863039048, 128.97648791744732 42.4749644346624), (128.97914185388393 42.474671180771736, 128.97913298675834 42.47467679614622, 128.97913866049004 42.474672830679374, 128.97914185388393 42.474671180771736), (128.97891446805426 42.4747692865426, 128.97900318044793 42.474716527145894, 128.97904536120737 42.47470745363019, 128.9790303688093 42.474717932041166, 128.97892014171885 42.47476971302784, 128.97891446805426 42.4747692865426), (128.97915688706127 42.4746909274426, 128.9791909415951 42.4746693613651, 128.97936184273146 42.47458341657281, 128.9795330394628 42.47450407721875, 128.97970448823745 42.474421768978196, 128.97986425329188 42.47434965308021, 128.98016228311835 42.474211734909595, 128.98031644275952 42.47414228298447, 128.9804596388753 42.47408090738297, 128.98060510431398 42.47401631171735, 128.98072160727313 42.47396052229275, 128.9807365331514 42.47396794532774, 128.9807285628018 42.473971582948245, 128.9806945231955 42.47398584345274, 128.98069354893835 42.4739862887255, 128.980662147542 42.47400189444509, 128.98059188308932 42.474033962619444, 128.98044370262065 42.47409878826354, 128.9802900298947 42.47416442650125, 128.9801380300829 42.47423569721797, 128.97998490496153 42.47430607870868, 128.9798379710904 42.47437280105676, 128.9797053379712 42.474432004080185, 128.97960301602419 42.4744821213728, 128.97949380231907 42.47453374271267, 128.9794187134471 42.474567702834136, 128.97933865919444 42.47460224353398, 128.97933761413637 42.47460273833209, 128.97925237860778 42.47464686849108, 128.9792511590521 42.474647571770525, 128.979176273373 42.47469553766535, 128.97915688706127 42.4746909274426), (128.98075068649186 42.47394819211913, 128.9807576834773 42.47394525234893, 128.98076406389947 42.4739519551795, 128.980764409773 42.473955017067524, 128.98075068649186 42.47394819211913), (128.9808823740925 42.47402874587134, 128.98089210215454 42.47401805427359, 128.9809157034469 42.474008106186226, 128.9808823740925 42.47402874587134), (128.98084728350466 42.47402750342299, 128.98083910477058 42.47403649222526, 128.98083036135762 42.47404085706239, 128.98083775029048 42.4740237795083, 128.98083834710664 42.47402178487219, 128.98083844091246 42.47401974307092, 128.9808380285417 42.474017723025696, 128.9808371239139 42.47401579292333, 128.98083560714403 42.47401331830478, 128.98083570839793 42.47401331087931, 128.98083853748088 42.47401267227095, 128.98084114268482 42.47401163565933, 128.98084342300157 42.47401024123572, 128.98084529001912 42.474008543064365, 128.98084576366998 42.47400787919378, 128.98084317109132 42.47401749835557, 128.98084288105954 42.474019601922514, 128.98084313416368 42.474021708100416, 128.98084392125145 42.47402374073063, 128.98084521386224 42.47402562631399, 128.98084696525567 42.47402729666846, 128.98084728350466 42.47402750342299), (128.98074249320427 42.474047443621664, 128.98074131638523 42.47404845211037, 128.98070256975248 42.47407746456448, 128.98054391192008 42.4741459198858, 128.98039109144477 42.47421436550006, 128.98024566692845 42.47427894308225, 128.9801110654117 42.47433836906285, 128.9799796887207 42.474401599253426, 128.9798396797627 42.4744675206454, 128.97968528195608 42.474536016643526, 128.97955912123373 42.47459569624764, 128.97936941730717 42.47468668995913, 128.97935873345625 42.47469033569566, 128.97935308849281 42.47468414793124, 128.97945576026316 42.47463318224651, 128.97959987957074 42.47456281282336, 128.97974824204013 42.47449398391987, 128.9798978844686 42.47442597241043, 128.98004952166033 42.474357725666316, 128.98019007725313 42.4742926174083, 128.98033600919942 42.47422601495825, 128.9804722717229 42.474165439482334, 128.98060407097753 42.47410734402256, 128.98073802186607 42.47405000672002, 128.98074017581217 42.4740488876146, 128.98074249320427 42.474047443621664), (128.97933627484315 42.474665717526435, 128.97933241631844 42.47466148797426, 128.97938232662088 42.47463711813895, 128.97949590893887 42.47458199364814, 128.979623451134 42.474522362168834, 128.97975004640756 42.47446282535361, 128.9798634931717 42.474411683845226, 128.9799868795449 42.47435545707275, 128.98010367944704 42.47430093978514, 128.98021626864394 42.47425091658596, 128.980312464272 42.47420656461988, 128.98042137380656 42.47415793651345, 128.98052690707033 42.4741116312384, 128.98067702031076 42.47404553651846, 128.98067781623348 42.474045160514, 128.98072479464648 42.47402139686108, 128.98075996956442 42.47400748489738, 128.98072184068758 42.474031243434354, 128.9805889500119 42.47408812690168, 128.98045682982087 42.47414636284296, 128.98032031816194 42.47420704994214, 128.98017426896942 42.474273705887036, 128.9800338325511 42.47433875972138, 128.9798822500562 42.474406981832274, 128.97973246501775 42.474475058017205, 128.979583778463 42.47454403669987, 128.97943907642045 42.47461468741883, 128.97933627484315 42.474665717526435), (128.97926730617613 42.4746666379459, 128.97927023070713 42.47466476471799, 128.9793543232719 42.47462122631025, 128.97940799015402 42.474598070871586, 128.9793658030216 42.474618544679025, 128.97926730617613 42.4746666379459), (128.98029543026826 42.4741882195177, 128.98030584229366 42.47418333747992, 128.98031676492124 42.474178672887426, 128.98029685642945 42.474187561964335, 128.98029543026826 42.4741882195177), (128.9791502224587 42.474712701456966, 128.9791333953869 42.474726337416925, 128.9790397067422 42.474773971923184, 128.97901000447584 42.4747734064608, 128.9790720108783 42.474744522107464, 128.97907377530427 42.47474356041428, 128.97913007128292 42.474707909340154, 128.9791502224587 42.474712701456966), (128.9793757702518 42.47470901068233, 128.97938297063718 42.47470655363604, 128.9793848499186 42.474705787461616, 128.97942001726685 42.47468892088645, 128.97938462786036 42.474708723433174, 128.97938240963893 42.47471024759243, 128.97938064916252 42.47471206998741, 128.979379819425 42.47471344920571, 128.9793757702518 42.47470901068233), (128.97946295346088 42.474668328278085, 128.97948150927226 42.474659428725296, 128.97957541807062 42.4746143791957, 128.97961130066489 42.474597403682566, 128.9795465541369 42.47463793797442, 128.97946295346088 42.474668328278085), (128.9807301647593 42.47408843431544, 128.98076303481884 42.474063822072786, 128.98076372002876 42.474063273287825, 128.98080408353948 42.47402868327329, 128.98079012558534 42.47406094332144, 128.98078060619588 42.47406569552981, 128.9807301647593 42.47408843431544), (128.98077905092342 42.47409243439549, 128.98077907500732 42.47409253404385, 128.9807801365422 42.474094549027946, 128.98078170489902 42.474096373775495, 128.98078372074582 42.4740979392552, 128.980786107822 42.47409918624395, 128.98078877582287 42.47410006756739, 128.9807890898273 42.474100120745085, 128.98066236086123 42.4741551391129, 128.98052530177142 42.47421394168848, 128.9803820292857 42.4742792774561, 128.98024030890556 42.4743424493391, 128.98011327059154 42.47440112316285, 128.97999006067525 42.474457269554776, 128.97991311016736 42.474490678427145, 128.97983552601642 42.474527958409055, 128.97957548982782 42.47464894895171, 128.97966580669282 42.47459240640183, 128.97989409450827 42.4744873078094, 128.98002618176824 42.47442908160226, 128.9801574409613 42.47436803777254, 128.98030163632515 42.474302618078035, 128.9804396450921 42.47424085537879, 128.98056327093715 42.474186648111655, 128.98068269063455 42.47413586954957, 128.98077905092342 42.47409243439549), (128.97952708609915 42.47466979118444, 128.97945126762752 42.47470194082954, 128.9794488246971 42.47470323266754, 128.97944745557584 42.47470431993324, 128.9794435226243 42.474703646255584, 128.97946126503223 42.47469371827601, 128.97952708609915 42.47466979118444), (128.98042964681582 42.47347572512238, 128.98048207531542 42.473517439638854, 128.98058918752133 42.473640104777495, 128.98067380546738 42.47377587133336, 128.98071013530816 42.473839231136026, 128.98042964681582 42.47347572512238)), ((128.95990697174946 42.45860032668157, 128.95990565410054 42.45859995033029, 128.95990275346063 42.45859957766595, 128.9598998103709 42.458599631185834, 128.95989693793226 42.458600108833224, 128.95989424653118 42.45860099225242, 128.95989183959648 42.458602247494134, 128.9598898096253 42.45860382632016, 128.95988823462838 42.45860566805711, 128.95988717513194 42.4586077019281, 128.95988375064547 42.45861686525214, 128.95982840818763 42.458691744222925, 128.95978670377278 42.45869373108275, 128.95978382806337 42.458694077798626, 128.95978109688843 42.45869482916184, 128.95977861304908 42.45869595689124, 128.9597764700364 42.45869741853933, 128.95977474851307 42.45869915908991, 128.95977351327696 42.45870111302903, 128.9597728108222 42.45870320681073, 128.95977266758914 42.45870536162546, 128.95977308896906 42.45870749636636, 128.95977405910133 42.45870953068214, 128.95982882142147 42.45879642750028, 128.9598300574765 42.45881346150443, 128.95982786331632 42.45880783063529, 128.9598267326369 42.45880574688973, 128.9598250596296 42.458803873843685, 128.959822912522 42.45880228788254, 128.9598203788763 42.45880105368405, 128.95981756201792 42.45880022158053, 128.95981457682234 42.458799825506375, 128.95981154503 42.45879988161398, 128.95980859028168 42.45880038761523, 128.95980583307602 42.45880132287473, 128.95980338585585 42.458802649251226, 128.95980134842205 42.45880431265332, 128.95979980386429 42.45880624524512, 128.95979881517175 42.45880836821279, 128.9597984226647 42.45881059497877, 128.95979864235034 42.458812834732356, 128.9598214628449 42.45890916680732, 128.95981838083924 42.459033267997256, 128.9598186103195 42.45903541961163, 128.95981939679262 42.45903749787468, 128.95982071063145 42.459039424496396, 128.95982250234255 42.45904112689911, 128.95982372096495 42.459041909427505, 128.95981876324404 42.459054309652714, 128.95981846584743 42.45905518161022, 128.95979977410866 42.45912111012362, 128.95978926002206 42.45915819492087, 128.959789050265 42.45915913237222, 128.95978318462264 42.45919471817042, 128.95978311610352 42.459196897515284, 128.95978362309256 42.45919904488272, 128.95978468610656 42.45920107775058, 128.95978626429445 42.459202917996876, 128.95978829700755 42.459204494901954, 128.95979070612967 42.459205747866186, 128.95979339907967 42.45920662873889, 128.95979627236895 42.45920710366856, 128.95979921557839 42.45920715440395, 128.95980211560226 42.459206778995295, 128.95980486099398 42.45920599186941, 128.95980734624982 42.45920482327508, 128.9598094758628 42.45920331812076, 128.95981116799305 42.459201534248706, 128.95981235761286 42.45919954021215, 128.95981299900606 42.459197412640805, 128.95981878682278 42.45916229889126, 128.95984773577607 42.45906019142805, 128.95985278021942 42.459047574277356, 128.95985354164964 42.459047526516585, 128.95985637029688 42.459046922282056, 128.95985898539524 42.45904592103695, 128.9598612864479 42.45904456125857, 128.95986318502685 42.459042895202444, 128.9598646081706 42.45904098689422, 128.95986550118863 42.45903890966914, 128.9598658297628 42.45903674335377, 128.95986625178037 42.45901387922002, 128.95989596331194 42.45893956466479, 128.9598965013972 42.458937552066885, 128.95989653099397 42.45893550052586, 128.9598960510946 42.458933479875775, 128.959895078035 42.458931558899145, 128.95989364493795 42.458929802985615, 128.9598918005857 42.45892827190609, 128.9598856711545 42.45892404327471, 128.95991975011594 42.458822701712805, 128.95992017097564 42.458820644817706, 128.95993678051263 42.45860391358298, 128.96065474516269 42.45844786174731, 128.96065747506955 42.45844704569799, 128.96065993752015 42.45844585096811, 128.96066203788394 42.45844432347047, 128.96066369544516 42.458442521905994, 128.96066484650456 42.4584405155078, 128.9606654468278 42.45843838138065, 128.9606654733448 42.458436201537864, 128.96066492503644 42.45843405974959, 128.96066382297414 42.45843203832351, 128.96066220950948 42.45843021494187, 128.96066014664706 42.458428659676194, 128.96065771366142 42.45842743229445, 128.96065500405098 42.458426579964204, 128.96065212194432 42.45842613544001, 128.96064917809935 42.458426115804684, 128.96064628564605 42.45842652181284, 128.9599181574517 42.458584782650426, 128.95991531575825 42.458585642409844, 128.95991276952788 42.458586912072526, 128.95991062515017 42.45858853858792, 128.959908972224 42.458590453995136, 128.9599078798139 42.458592578262405, 128.95990739356435 42.45859482263112, 128.95990697174946 42.45860032668157), (128.95986577477947 42.45889116504895, 128.95985865739848 42.45879308178999, 128.95985823003372 42.45879097960549, 128.95985727022796 42.458788976054805, 128.95981057499156 42.45871488015454, 128.9598385804112 42.45871354593002, 128.95984155538812 42.45871317950229, 128.95984437150153 42.458712380315696, 128.95984691518137 42.458711180600375, 128.9598490838444 42.45870962873927, 128.95985079003128 42.45870778731689, 128.95990428301147 42.45863541067797, 128.95989026372087 42.45881834168417, 128.95986577477947 42.45889116504895)))</textarea>
            <div class="coord-settings" style="margin-bottom:8px;font-size:12px;color:#333;">
                <label>WKT坐标系：
                    <select id="coordSysSelect" style="margin-left:6px;">
                        <option value="wgs84" selected>WGS84</option>
                        <option value="gcj02">GCJ-02（国测局）</option>
                        <option value="bd09">BD-09（百度）</option>
                        <option value="cgcs2000">CGCS2000</option>
                    </select>
                </label>
                <!-- 已移除“不进行绘制坐标转换”选项，统一使用WGS84绘制 -->
            </div>

            <div class="button-group">
                <button id="drawButton" disabled>绘制轮廓</button>
                <button id="clearButton" disabled>清空轮廓</button>
            </div>
            <!-- 显示开关：仅保留显示亩数 -->
            <div class="display-toggles" style="margin-top:8px;font-size:12px;color:#333;">
                <label><input type="checkbox" id="toggleLabelsCheckbox"> 显示亩数</label>
            </div>
        </div>

        <div class="tab-pane" id="tabSplit">
            <!-- MultiPolygon → 多个 Polygon 分割器 -->
            <div class="split-section">
                <div class="title">MultiPolygon → 多个 Polygon 分割器</div>
                <div class="desc">输入一个 MULTIPOLYGON WKT，分割为多行 POLYGON WKT。</div>
                <textarea id="multiInput"></textarea>
                <div class="split-actions">
                    <button id="splitMultiBtn">分割为多个 POLYGON</button>
                    <button id="copyPolysBtn">复制结果</button>
                </div>
                <textarea id="polyOutput" readonly></textarea>
            </div>
        </div>

        <div class="tab-pane" id="tabBatch">
            <!-- 批量POLYGON → MULTIPOLYGON 生成器 -->
            <div class="batch-section">
                <div class="title">批量POLYGON → MULTIPOLYGON 合并器</div>
                <div class="desc">每行一个 POLYGON WKT（或用分号分隔）。生成后可一键填充到上方并绘制。</div>
                <textarea id="batchInput"></textarea>
                <div class="batch-actions">
                    <button id="generateMultiBtn">生成 MULTIPOLYGON</button>
                    <button id="copyMultiBtn">复制结果</button>
                </div>
                <textarea id="multiOutput" readonly></textarea>
            </div>
        </div>
        <div class="tab-pane" id="tabTrack">
            <div class="tip">请粘贴轨迹文本（支持两种格式：1）每行一条：定位时间yyyyMMddHHmmss, 经度, 纬度；2）单行#分隔：经度,纬度,定位时间yyyyMMddHHmmss#经度,纬度,定位时间yyyyMMddHHmmss#…）。</div>
            <div class="coord-settings" style="margin-bottom:8px;font-size:12px;color:#333;">
                <label>轨迹坐标系：
                    <select id="trackCoordSysSelect" style="margin-left:6px;">
                        <option value="wgs84" selected>WGS84</option>
                        <option value="gcj02">GCJ-02（国测局）</option>
                        <option value="bd09">BD-09（百度）</option>
                        <option value="cgcs2000">CGCS2000</option>
                    </select>
                </label>
            </div>
            <textarea id="trackTextarea" style="width:100%;height:120px;margin-bottom:10px;padding:8px;border:1px solid #ddd;border-radius:4px;font-family:monospace;resize:vertical;box-sizing:border-box;">20250915075504,122.807561,43.088081,0.0,0
20250915075514,122.807579,43.087975,6.1,0
20250915075524,122.807604,43.087860,5.5,0
20250915075534,122.807620,43.087731,5.5,0
20250915075544,122.807581,43.087636,2.0,0
20250915075554,122.807574,43.087630,0.0,0
20250915075604,122.807574,43.087630,0.0,0
20250915075614,122.807574,43.087630,0.0,0
20250915075624,122.807574,43.087630,0.0,0
20250915075634,122.807574,43.087630,0.0,0
20250915075644,122.807632,43.087639,2.4,0
20250915075654,122.807657,43.087618,0.0,0
20250915075704,122.807709,43.087564,0.6,0
20250915075714,122.807715,43.087555,0.0,0
20250915075724,122.807715,43.087554,0.1,0
20250915075734,122.807960,43.087458,22.0,0
20250915075744,122.808843,43.087395,24.1,0
20250915075754,122.809200,43.087283,6.4,0
20250915075804,122.809166,43.087135,8.6,0
20250915075814,122.809093,43.086943,9.2,0
20250915075824,122.809023,43.086676,9.9,0
20250915075834,122.808938,43.086446,6.2,0
20250915075844,122.808880,43.086288,10.4,0
20250915075854,122.808813,43.086079,8.1,0
20250915075904,122.808750,43.085872,9.9,0
20250915075914,122.808689,43.085666,9.4,0
20250915075924,122.808619,43.085453,10.5,0
20250915075934,122.808533,43.085208,11.6,0
20250915075944,122.808448,43.084934,13.4,0
20250915075954,122.808350,43.084649,10.7,0
20250915080004,122.808265,43.084394,11.1,0
20250915080014,122.808185,43.084124,11.5,0
20250915080024,122.808090,43.083830,13.2,0
20250915080034,122.807998,43.083538,11.6,0
20250915080044,122.807902,43.083246,12.0,0
20250915080054,122.807814,43.082947,12.2,0
20250915080104,122.807719,43.082649,12.1,0
20250915080114,122.807620,43.082352,11.9,0
20250915080124,122.807531,43.082054,12.4,0
20250915080134,122.807435,43.081758,11.9,0
20250915080144,122.807339,43.081463,11.8,0
20250915080154,122.807298,43.081187,9.4,0
20250915080204,122.807517,43.081043,9.6,0
20250915080214,122.807855,43.080960,10.0,0
20250915080224,122.808229,43.080865,11.6,0
20250915080234,122.808592,43.080745,10.2,0
20250915080244,122.808916,43.080641,9.1,0
20250915080254,122.809184,43.080545,6.6,0
20250915080304,122.809381,43.080480,9.0,0
20250915080314,122.809694,43.080389,6.8,0
20250915080324,122.809928,43.080329,6.9,0
20250915080334,122.810208,43.080242,8.2,0
20250915080344,122.810538,43.080148,12.3,0
20250915080354,122.810852,43.080051,7.7,0
20250915080404,122.811142,43.079979,9.1,0
20250915080414,122.811393,43.079937,6.0,0
20250915080424,122.811658,43.079860,7.6,0
20250915080434,122.811892,43.079792,6.6,0
20250915080444,122.812142,43.079711,11.6,0
20250915080454,122.812436,43.079637,8.1,0
20250915080504,122.812587,43.079605,6.9,0
20250915080514,122.812753,43.079552,2.6,0
20250915080524,122.812806,43.079517,2.2,0
20250915080534,122.812870,43.079455,3.8,0
20250915080544,122.812959,43.079353,4.8,0
20250915080554,122.812993,43.079324,2.1,0
20250915080604,122.812994,43.079324,0.0,0
20250915080614,122.812994,43.079324,0.0,0
20250915080624,122.812994,43.079324,0.0,0
20250915080634,122.813043,43.079286,5.3,0
20250915080644,122.813183,43.079166,4.5,0
20250915080654,122.813297,43.079071,5.3,0
20250915080704,122.813414,43.078953,5.3,0
20250915080714,122.813508,43.078848,4.1,0
20250915080724,122.813603,43.078733,5.5,0
20250915080734,122.813701,43.078611,6.7,0
20250915080744,122.813815,43.078479,4.8,0
20250915080754,122.813935,43.078343,4.7,0
20250915080804,122.814053,43.078228,3.4,0
20250915080814,122.814127,43.078132,3.7,0
20250915080824,122.814206,43.078043,5.8,0
20250915080834,122.814306,43.077918,4.4,0
20250915080844,122.814404,43.077806,7.7,0
20250915080854,122.814532,43.077657,6.0,0
20250915080904,122.814686,43.077519,6.3,0
20250915080914,122.814847,43.077359,10.8,0
20250915080924,122.815026,43.077168,8.1,0
20250915080934,122.815178,43.076986,8.7,0
20250915080944,122.815364,43.076813,8.5,0
20250915080954,122.815610,43.076661,9.9,0
20250915081004,122.815863,43.076578,8.0,0
20250915081014,122.815976,43.076546,0.0,0
20250915081024,122.815978,43.076545,0.0,0
20250915081034,122.816020,43.076536,5.8,0
20250915081044,122.816082,43.076522,0.0,0
20250915081054,122.816082,43.076522,0.0,0
20250915081104,122.816082,43.076522,0.0,0
20250915081114,122.816082,43.076522,0.0,0
20250915081124,122.816082,43.076522,0.0,0
20250915081134,122.816178,43.076497,0.0,0
20250915081144,122.816178,43.076497,0.0,0
20250915081154,122.816178,43.076497,0.0,0
20250915081204,122.816178,43.076497,0.0,0
20250915081214,122.816178,43.076497,0.0,0
20250915081224,122.816178,43.076497,0.0,0
20250915081234,122.816178,43.076497,0.0,0
20250915081244,122.816178,43.076497,0.0,0
20250915081254,122.816178,43.076497,0.0,0
20250915081304,122.816181,43.076496,0.8,0
20250915081314,122.816242,43.076467,3.5,0
20250915081324,122.816250,43.076445,1.1,0
20250915081334,122.816252,43.076388,2.5,0
20250915081344,122.816248,43.076303,2.0,0
20250915081354,122.816248,43.076303,0.0,0
20250915081404,122.816248,43.076303,0.0,0
20250915081414,122.816248,43.076303,0.0,0
20250915081424,122.816248,43.076303,0.0,0
20250915081434,122.816248,43.076303,0.0,0
20250915081444,122.816248,43.076303,0.0,0
20250915081454,122.816249,43.076286,1.4,0
20250915081504,122.816249,43.076244,2.3,0
20250915081514,122.816250,43.076188,2.2,0
20250915081524,122.816247,43.076141,0.0,0
20250915081534,122.816247,43.076094,2.2,0
20250915081544,122.816246,43.076028,3.0,0
20250915081554,122.816244,43.075954,3.1,0
20250915081604,122.816242,43.075875,3.2,0
20250915081614,122.816243,43.075793,3.4,0
20250915081624,122.816246,43.075703,3.6,0
20250915081634,122.816244,43.075612,3.4,0
20250915081644,122.816245,43.075524,3.6,0
20250915081654,122.816241,43.075434,3.2,0
20250915081704,122.816239,43.075339,4.0,0
20250915081714,122.816241,43.075234,3.9,0
20250915081724,122.816244,43.075136,3.9,0
20250915081734,122.816244,43.075042,3.7,0
20250915081744,122.816243,43.074943,4.0,0
20250915081754,122.816245,43.074843,3.8,0
20250915081804,122.816243,43.074746,3.9,0
20250915081814,122.816244,43.074647,3.8,0
20250915081824,122.816245,43.074543,4.3,0
20250915081834,122.816250,43.074437,4.0,0
20250915081844,122.816252,43.074334,3.9,0
20250915081854,122.816254,43.074236,3.8,0
20250915081904,122.816257,43.074144,3.7,0
20250915081914,122.816255,43.074048,4.2,0
20250915081924,122.816251,43.073936,4.0,0
20250915081934,122.816253,43.073837,3.8,0
20250915081944,122.816255,43.073730,4.1,0
20250915081954,122.816256,43.073605,5.7,0
20250915082004,122.816259,43.073549,3.4,0
20250915082014,122.816250,43.073677,5.8,0
20250915082024,122.816273,43.073652,2.4,0
20250915082034,122.816292,43.073572,3.8,0
20250915082044,122.816294,43.073506,0.0,0
20250915082054,122.816269,43.073557,5.4,0
20250915082104,122.816288,43.073505,3.8,0
20250915082114,122.816271,43.073523,3.4,0
20250915082124,122.816288,43.073602,5.2,0
20250915082134,122.816288,43.073620,0.0,0
20250915082144,122.816289,43.073620,0.0,0
20250915082154,122.816288,43.073622,1.9,0
20250915082204,122.816287,43.073706,3.9,0
20250915082214,122.816284,43.073806,3.8,0
20250915082224,122.816281,43.073904,3.6,0
20250915082234,122.816282,43.074007,4.0,0
20250915082244,122.816266,43.073958,2.8,0
20250915082254,122.816268,43.074053,4.2,0
20250915082304,122.816284,43.074141,3.1,0
20250915082314,122.816283,43.074224,4.4,0
20250915082324,122.816282,43.074329,3.7,0
20250915082334,122.816278,43.074423,3.7,0
20250915082344,122.816276,43.074525,4.2,0
20250915082354,122.816273,43.074619,3.4,0
20250915082404,122.816273,43.074712,4.0,0
20250915082414,122.816273,43.074841,5.2,0
20250915082424,122.816273,43.074988,6.3,0
20250915082434,122.816271,43.075129,5.5,0
20250915082444,122.816269,43.075266,5.6,0
20250915082454,122.816269,43.075330,3.5,0
20250915082504,122.816270,43.075457,4.8,0
20250915082514,122.816272,43.075585,4.8,0
20250915082524,122.816273,43.075706,4.8,0
20250915082534,122.816271,43.075824,4.6,0
20250915082544,122.816273,43.075947,4.9,0
20250915082554,122.816274,43.076067,4.8,0
20250915082604,122.816276,43.076185,4.7,0
20250915082614,122.816278,43.076291,5.1,0
20250915082624,122.816281,43.076412,4.6,0
20250915082634,122.816283,43.076433,0.0,0
20250915082644,122.816283,43.076433,0.0,0
20250915082654,122.816283,43.076433,0.0,0
20250915082704,122.816283,43.076433,0.0,0
20250915082714,122.816283,43.076433,0.0,0
20250915082724,122.816283,43.076433,0.0,0
20250915082734,122.816283,43.076433,0.0,0
20250915082744,122.816283,43.076433,0.0,0
20250915082754,122.816283,43.076433,0.0,0
20250915082804,122.816283,43.076433,0.0,0
20250915082814,122.816283,43.076433,0.0,0
20250915082824,122.816283,43.076433,0.0,0
20250915082834,122.816283,43.076433,0.0,0
20250915082844,122.816283,43.076433,0.0,0
20250915082854,122.816283,43.076433,0.0,0
20250915082904,122.816283,43.076433,0.0,0
20250915082914,122.816283,43.076433,0.0,0
20250915082924,122.816283,43.076433,0.0,0
20250915082934,122.816283,43.076433,0.0,0
20250915082944,122.816283,43.076433,0.0,0
20250915082954,122.816283,43.076433,0.0,0
20250915083004,122.816283,43.076433,0.0,0
20250915083014,122.816283,43.076433,0.0,0
20250915083024,122.816283,43.076433,0.0,0
20250915083034,122.816283,43.076433,0.0,0
20250915083044,122.816283,43.076433,0.0,0
20250915083054,122.816283,43.076433,0.0,0
20250915083104,122.816283,43.076433,0.0,0
20250915083114,122.816283,43.076433,0.0,0
20250915083124,122.816283,43.076433,0.0,0
20250915083134,122.816283,43.076433,0.0,0
20250915083144,122.816283,43.076433,0.0,0
20250915083154,122.816283,43.076433,0.0,0
20250915083204,122.816282,43.076421,5.2,0
20250915083214,122.816281,43.076314,3.2,0
20250915083224,122.816315,43.076414,6.5,0
20250915083234,122.816269,43.076377,6.4,0
20250915083244,122.816324,43.076458,0.4,0
20250915083254,122.816292,43.076461,1.2,0
20250915083304,122.816324,43.076393,0.2,0
20250915083314,122.816323,43.076361,0.6,0
20250915083324,122.816323,43.076361,0.0,0
20250915083334,122.816323,43.076361,0.0,0
20250915083344,122.816322,43.076323,0.0,0
20250915083354,122.816322,43.076305,3.9,0
20250915083404,122.816321,43.076185,5.3,0
20250915083414,122.816320,43.076035,6.4,0
20250915083424,122.816319,43.075885,5.7,0
20250915083434,122.816317,43.075725,6.2,0
20250915083444,122.816316,43.075567,5.9,0
20250915083454,122.816314,43.075424,5.1,0
20250915083504,122.816314,43.075276,6.0,0
20250915083514,122.816315,43.075127,5.3,0
20250915083524,122.816317,43.074984,6.4,0
20250915083534,122.816316,43.074834,5.7,0
20250915083544,122.816317,43.074696,5.2,0
20250915083554,122.816318,43.074559,5.1,0
20250915083604,122.816320,43.074419,5.6,0
20250915083614,122.816324,43.074284,5.7,0
20250915083624,122.816329,43.074148,5.0,0
20250915083634,122.816332,43.074035,5.3,0
20250915083644,122.816325,43.073894,5.3,0
20250915083654,122.816328,43.073754,5.9,0
20250915083704,122.816325,43.073607,6.7,0
20250915083714,122.816320,43.073587,10.3,0
20250915083724,122.816342,43.073563,3.4,0
20250915083734,122.816331,43.073577,7.6,0
20250915083744,122.816271,43.073549,9.0,0
20250915083754,122.816277,43.073523,0.0,0
20250915083804,122.816317,43.073537,0.8,0
20250915083814,122.816335,43.073593,2.7,0
20250915083824,122.816339,43.073672,3.8,0
20250915083834,122.816340,43.073688,0.0,0
20250915083844,122.816340,43.073688,0.0,0
20250915083854,122.816340,43.073688,0.0,0
20250915083904,122.816340,43.073688,0.0,0
20250915083914,122.816336,43.073741,3.3,0
20250915083924,122.816336,43.073832,4.0,0
20250915083934,122.816336,43.073940,4.5,0
20250915083944,122.816339,43.074062,4.7,0
20250915083954,122.816337,43.074182,4.4,0
20250915084004,122.816334,43.074296,4.6,0
20250915084014,122.816331,43.074409,4.2,0
20250915084024,122.816327,43.074514,4.2,0
20250915084034,122.816327,43.074617,4.0,0
20250915084044,122.816328,43.074725,4.5,0
20250915084054,122.816324,43.074835,4.2,0
20250915084103,122.816324,43.074934,3.7,0
20250915084113,122.816325,43.075033,4.1,0
20250915084123,122.816328,43.075134,3.6,0
20250915084133,122.816327,43.075224,3.8,0
20250915084143,122.816327,43.075352,5.6,0
20250915084153,122.816325,43.075476,4.8,0
20250915084203,122.816328,43.075591,4.4,0
20250915084213,122.816328,43.075697,4.6,0
20250915084223,122.816328,43.075803,4.7,0
20250915084233,122.816328,43.075909,4.3,0
20250915084243,122.816332,43.076015,4.3,0
20250915084253,122.816333,43.076133,4.5,0
20250915084303,122.816334,43.076251,4.7,0
20250915084313,122.816332,43.076364,4.7,0
20250915084323,122.816333,43.076420,1.0,0
20250915084333,122.816327,43.076378,0.0,0
20250915084343,122.816328,43.076415,3.4,0
20250915084353,122.816328,43.076418,0.0,0
20250915084403,122.816328,43.076418,0.0,0
20250915084413,122.816328,43.076418,0.0,0
20250915084423,122.816328,43.076418,0.0,0
20250915084433,122.816328,43.076418,0.0,0
20250915084443,122.816328,43.076418,0.0,0
20250915084453,122.816328,43.076418,0.0,0
20250915084503,122.816328,43.076418,0.0,0
20250915084513,122.816328,43.076418,0.0,0
20250915084523,122.816328,43.076418,0.0,0
20250915084533,122.816328,43.076418,0.0,0
20250915084543,122.816328,43.076418,0.0,0
20250915084553,122.816328,43.076418,0.0,0
20250915084603,122.816328,43.076418,0.0,0
20250915084613,122.816328,43.076418,0.0,0
20250915084623,122.816328,43.076418,0.0,0
20250915084633,122.816328,43.076418,0.0,0
20250915084643,122.816328,43.076418,0.0,0
20250915084653,122.816328,43.076418,0.0,0
20250915084703,122.816328,43.076418,0.0,0
20250915084713,122.816328,43.076418,0.0,0
20250915084723,122.816328,43.076418,0.0,0
20250915084733,122.816328,43.076418,0.0,0
20250915084743,122.816328,43.076422,1.2,0
20250915085101,122.816315,43.076389,6.9,0
20250915085111,122.816286,43.076451,6.0,0
20250915085121,122.816094,43.076515,6.3,0
20250915085131,122.815893,43.076564,6.2,0
20250915085141,122.815774,43.076601,0.1,0
20250915085151,122.815771,43.076602,0.0,0
20250915085201,122.815771,43.076602,0.0,0
20250915085211,122.815771,43.076602,0.0,0
20250915085221,122.815771,43.076602,0.0,0
20250915085231,122.815771,43.076602,0.0,0
20250915085241,122.815771,43.076602,0.0,0
20250915085251,122.815771,43.076602,0.0,0
20250915085301,122.815771,43.076602,0.0,0
20250915085311,122.815771,43.076602,0.0,0
20250915085321,122.815771,43.076602,0.0,0
20250915085331,122.815771,43.076602,0.0,0
20250915085341,122.815771,43.076602,0.0,0
20250915085351,122.815771,43.076602,0.0,0
20250915085401,122.815771,43.076602,0.0,0
20250915085411,122.815771,43.076602,0.0,0
20250915085421,122.815771,43.076602,0.0,0
20250915085431,122.815771,43.076602,0.0,0
20250915085441,122.815771,43.076602,0.0,0
20250915085451,122.815771,43.076602,0.0,0
20250915085501,122.815771,43.076602,0.0,0
20250915085511,122.815687,43.076628,2.9,0
20250915085521,122.815437,43.076751,9.2,0
20250915085531,122.815232,43.076922,9.5,0
20250915085541,122.815067,43.077115,8.7,0
20250915085551,122.814940,43.077245,6.1,0
20250915085601,122.814798,43.077406,10.2,0
20250915085611,122.814623,43.077565,6.6,0
20250915085621,122.814498,43.077685,7.2,0
20250915085631,122.814394,43.077810,6.7,0
20250915085641,122.814287,43.077929,4.2,0
20250915085651,122.814186,43.078055,4.7,0
20250915085701,122.814096,43.078170,7.3,0
20250915085711,122.813980,43.078287,5.4,0
20250915085721,122.813882,43.078391,5.9,0
20250915085731,122.813796,43.078492,5.0,0
20250915085741,122.813689,43.078615,6.5,0
20250915085751,122.813583,43.078747,5.2,0
20250915085801,122.813491,43.078859,4.9,0
20250915085811,122.813403,43.078960,5.2,0
20250915085821,122.813307,43.079052,3.7,0
20250915085831,122.813233,43.079127,2.3,0
20250915085841,122.813231,43.079130,0.0,0
20250915085851,122.813152,43.079191,6.4,0
20250915085901,122.812989,43.079321,5.8,0
20250915085911,122.812872,43.079444,3.4,0
20250915085921,122.812778,43.079530,4.2,0
20250915085931,122.812631,43.079588,10.3,0
20250915085941,122.812349,43.079652,8.3,0
20250915085951,122.812035,43.079738,9.2,0
20250915090001,122.811758,43.079825,7.6,0
20250915090011,122.811500,43.079900,10.3,0
20250915090021,122.811240,43.079955,7.6,0
20250915090031,122.810964,43.080015,10.9,0
20250915090041,122.810666,43.080094,10.9,0
20250915090051,122.810354,43.080194,8.5,0
20250915090101,122.810032,43.080287,9.6,0
20250915090111,122.809744,43.080370,8.1,0
20250915090121,122.809391,43.080472,11.4,0
20250915090131,122.809065,43.080588,8.1,0
20250915090141,122.808771,43.080690,10.8,0
20250915090151,122.808429,43.080791,10.5,0
20250915090201,122.808075,43.080900,10.8,0
20250915090211,122.807705,43.080997,12.6,0
20250915090221,122.807351,43.081111,11.3,0
20250915090231,122.807306,43.081396,12.2,0
20250915090241,122.807404,43.081690,12.9,0
20250915090251,122.807503,43.081990,12.8,0
20250915090301,122.807599,43.082291,11.6,0
20250915090311,122.807692,43.082591,11.9,0
20250915090321,122.807791,43.082890,13.2,0
20250915090331,122.807880,43.083186,10.7,0
20250915090341,122.807972,43.083475,12.2,0
20250915090351,122.808069,43.083776,13.1,0
20250915090401,122.808165,43.084075,12.4,0
20250915090411,122.808253,43.084378,12.6,0
20250915090421,122.808344,43.084655,13.4,0
20250915090431,122.808432,43.084901,12.0,0
20250915090441,122.808525,43.085201,12.1,0
20250915090451,122.808628,43.085498,12.8,0
20250915090501,122.808717,43.085779,12.9,0
20250915090511,122.808787,43.086016,9.4,0
20250915090521,122.808873,43.086285,11.4,0
20250915090531,122.808959,43.086507,12.1,0
20250915090541,122.809055,43.086794,11.2,0
20250915090551,122.809116,43.087040,7.8,0
20250915090601,122.809196,43.087242,7.8,0
20250915090611,122.809235,43.087328,0.1,0
20250915090621,122.809235,43.087327,0.0,0
20250915090631,122.809254,43.087366,10.2,0
20250915090641,122.809323,43.087575,5.8,0
20250915090651,122.809386,43.087770,10.2,0
20250915090701,122.809465,43.088039,9.9,0
20250915090711,122.809605,43.088243,10.1,0
20250915090721,122.810014,43.088198,12.8,0
20250915090731,122.810433,43.088161,11.7,0
20250915090741,122.810854,43.088121,12.4,0
20250915090751,122.811277,43.088088,13.0,0
20250915090801,122.811668,43.088051,9.6,0
20250915090811,122.811875,43.088038,3.4,0
20250915090821,122.811930,43.088066,0.0,0
20250915090831,122.811930,43.088065,0.0,0
20250915090841,122.811932,43.088072,2.8,0
20250915090852,122.811910,43.088005,0.0,0
20250915090901,122.811954,43.088200,10.6,0
20250915090911,122.812052,43.088466,11.5,0
20250915090921,122.812157,43.088762,12.9,0
20250915090931,122.812254,43.089063,12.8,0
20250915090941,122.812367,43.089361,12.3,0
20250915090952,122.812459,43.089591,6.6,0
20250915091001,122.812494,43.089681,2.6,0
20250915091011,122.812532,43.089755,5.7,0
20250915091021,122.812599,43.089888,3.6,0
20250915091031,122.812696,43.090081,12.2,0
20250915091041,122.812890,43.090326,12.3,0
20250915091051,122.813202,43.090460,5.9,0
20250915091101,122.813366,43.090530,5.3,0
20250915091111,122.813604,43.090604,9.0,0
20250915091121,122.813838,43.090757,10.1,0
20250915091131,122.813965,43.090973,3.7,0
20250915091141,122.813995,43.091037,2.8,0
20250915091151,122.814043,43.091130,3.1,0
20250915091202,122.814067,43.091178,1.5,0
20250915091212,122.814091,43.091232,2.5,0
20250915091222,122.814143,43.091341,5.4,0
20250915091232,122.814242,43.091525,3.8,0
20250915091242,122.814258,43.091558,0.0,0
20250915091251,122.814313,43.091660,11.0,0
20250915091301,122.814459,43.091948,12.0,0
20250915091311,122.814598,43.092241,12.5,0
20250915091321,122.814753,43.092520,10.0,0
20250915091331,122.814787,43.092610,8.7,0
20250915091341,122.814910,43.092883,12.2,0
20250915091351,122.815066,43.093166,11.2,0
20250915091401,122.815317,43.093371,12.2,0
20250915091411,122.815402,43.093408,0.0,0
20250915091421,122.815611,43.093512,11.7,0
20250915091431,122.815967,43.093679,12.9,0
20250915091441,122.816303,43.093863,12.9,0
20250915091451,122.816571,43.094048,0.1,0
20250915091501,122.816753,43.094171,17.7,0
20250915091511,122.817370,43.094448,20.3,0
20250915091521,122.817903,43.094697,20.5,0
20250915091531,122.818501,43.094889,14.8,0
20250915091541,122.818799,43.095083,10.9,0
20250915091551,122.819108,43.095388,16.2,0
20250915091601,122.819461,43.095658,14.5,0
20250915091611,122.819659,43.095810,11.7,0
20250915091621,122.819970,43.096012,10.5,0
20250915091631,122.820191,43.096243,12.2,0
20250915091641,122.820483,43.096469,13.3,0
20250915091651,122.820700,43.096710,10.3,0
20250915091701,122.820903,43.096924,10.7,0
20250915091711,122.821120,43.097157,13.7,0
20250915091721,122.821336,43.097416,11.0,0
20250915091731,122.821580,43.097680,13.2,0
20250915091741,122.821903,43.097896,13.6,0
20250915091751,122.822167,43.098161,14.3,0
20250915091801,122.822312,43.098427,10.4,0
20250915091811,122.822422,43.098677,10.5,0
20250915091821,122.822548,43.098924,14.2,0
20250915091831,122.822811,43.099246,12.6,0
20250915091841,122.823070,43.099543,12.6,0
20250915091851,122.823231,43.099757,10.5,0
20250915091901,122.823392,43.099977,9.1,0
20250915091911,122.823581,43.100192,10.4,0
20250915091921,122.823781,43.100442,11.5,0
20250915091931,122.823979,43.100711,12.0,0
20250915091941,122.824186,43.100945,10.1,0
20250915091951,122.824403,43.101155,10.3,0
20250915092001,122.824587,43.101394,10.2,0
20250915092011,122.824627,43.101597,8.2,0
20250915092021,122.824698,43.101823,12.1,0
20250915092031,122.824841,43.102080,11.9,0
20250915092041,122.824948,43.102389,13.4,0
20250915092051,122.825012,43.102662,11.5,0
20250915092101,122.825047,43.102824,5.6,0
20250915092111,122.825090,43.102993,7.5,0
20250915092121,122.825098,43.103171,7.3,0
20250915092131,122.825073,43.103360,8.0,0
20250915092141,122.825070,43.103551,6.9,0
20250915092151,122.825072,43.103723,9.2,0
20250915092201,122.825096,43.103910,7.1,0
20250915092211,122.825148,43.104048,4.2,0
20250915092221,122.825198,43.104152,4.7,0
20250915092231,122.825252,43.104257,4.3,0
20250915092241,122.825304,43.104349,2.8,0
20250915092251,122.825305,43.104352,0.0,0
20250915092301,122.825305,43.104352,0.0,0
20250915092311,122.825305,43.104352,0.0,0
20250915092321,122.825305,43.104352,0.0,0
20250915092331,122.825305,43.104352,0.0,0
20250915092341,122.825305,43.104352,0.0,0
20250915092351,122.825305,43.104352,0.0,0
20250915092401,122.825305,43.104352,0.0,0
20250915092411,122.825305,43.104352,0.0,0
20250915092421,122.825316,43.104385,3.1,0
20250915092431,122.825336,43.104438,2.8,0
20250915092441,122.825336,43.104435,2.7,0
20250915092451,122.825314,43.104375,2.2,0
20250915092501,122.825313,43.104418,2.2,0
20250915092511,122.825316,43.104469,2.5,0
20250915092521,122.825314,43.104408,2.5,0
20250915092531,122.825318,43.104462,0.1,0
20250915092541,122.825292,43.104468,2.0,0
20250915092551,122.825216,43.104494,2.7,0
20250915092601,122.825210,43.104496,0.0,0
20250915092611,122.825210,43.104496,0.0,0
20250915092621,122.825210,43.104496,0.0,0
20250915092631,122.825210,43.104496,0.0,0
20250915092641,122.825210,43.104496,0.0,0
20250915092651,122.825210,43.104496,0.0,0
20250915092701,122.825210,43.104496,0.0,0
20250915092711,122.825210,43.104496,0.0,0
20250915092721,122.825210,43.104496,0.0,0
20250915092731,122.825210,43.104496,0.0,0
20250915092741,122.825210,43.104496,0.0,0
20250915092751,122.825210,43.104496,0.0,0
20250915092801,122.825210,43.104496,0.0,0
20250915092811,122.825210,43.104496,0.0,0
20250915092821,122.825210,43.104496,0.0,0
20250915092831,122.825191,43.104502,2.0,0
20250915092841,122.825123,43.104525,2.9,0
20250915092851,122.825027,43.104559,2.0,0
20250915092901,122.824976,43.104580,2.5,0
20250915092911,122.824901,43.104600,2.2,0
20250915092921,122.824809,43.104629,3.1,0
20250915092931,122.824709,43.104661,3.1,0
20250915092941,122.824614,43.104692,3.3,0
20250915092951,122.824508,43.104726,3.3,0
20250915093001,122.824382,43.104763,3.6,0
20250915093011,122.824266,43.104798,3.5,0
20250915093021,122.824154,43.104832,3.7,0
20250915093031,122.824040,43.104868,3.7,0
20250915093041,122.823925,43.104906,3.8,0
20250915093051,122.823842,43.104927,3.8,0
20250915093101,122.823771,43.104956,3.0,0
20250915093111,122.823751,43.104964,0.0,0
20250915093121,122.823751,43.104964,0.0,0
20250915093131,122.823716,43.104975,3.2,0
20250915093141,122.823609,43.105011,3.5,0
20250915093151,122.823487,43.105050,3.7,0
20250915093201,122.823361,43.105090,4.0,0
20250915093211,122.823241,43.105129,3.0,0
20250915093221,122.823138,43.105162,3.5,0
20250915093231,122.823030,43.105195,3.3,0
20250915093241,122.822915,43.105231,3.7,0
20250915093251,122.822784,43.105272,3.9,0
20250915093301,122.822728,43.105288,2.4,0
20250915093311,122.822615,43.105325,4.3,0
20250915093321,122.822482,43.105364,3.8,0
20250915093331,122.822357,43.105400,4.0,0
20250915093341,122.822234,43.105435,3.8,0
20250915093351,122.822108,43.105472,4.5,0
20250915093401,122.822018,43.105487,1.7,0
20250915093411,122.821941,43.105510,3.4,0
20250915093421,122.821822,43.105550,3.4,0
20250915093431,122.821674,43.105593,4.2,0
20250915093441,122.821581,43.105620,3.1,0
20250915093451,122.821472,43.105650,3.2,0
20250915093501,122.821360,43.105677,3.7,0
20250915093511,122.821249,43.105706,0.3,0
20250915093521,122.821369,43.105674,3.3,0
20250915093531,122.821317,43.105673,3.2,0
20250915093541,122.821202,43.105671,3.7,0
20250915093551,122.821187,43.105654,3.5,0
20250915093601,122.821248,43.105747,1.6,0
20250915093611,122.821301,43.105670,2.4,0
20250915093621,122.821347,43.105658,0.0,0
20250915093631,122.821348,43.105658,0.0,0
20250915093641,122.821349,43.105658,0.0,0
20250915093651,122.821353,43.105657,0.8,0
20250915093701,122.821439,43.105635,3.1,0
20250915093711,122.821523,43.105612,0.8,0
20250915093721,122.821507,43.105617,0.0,0
20250915093731,122.821507,43.105617,0.0,0
20250915093741,122.821507,43.105617,0.0,0
20250915093751,122.821507,43.105617,0.0,0
20250915093801,122.821507,43.105617,0.0,0
20250915093811,122.821507,43.105617,0.0,0
20250915093821,122.821507,43.105617,0.0,0
20250915093831,122.821552,43.105605,3.5,0
20250915093841,122.821652,43.105577,3.6,0
20250915093851,122.821766,43.105545,3.4,0
20250915093901,122.821877,43.105515,3.8,0
20250915093911,122.821993,43.105482,3.7,0
20250915093921,122.822103,43.105451,3.4,0
20250915093931,122.822212,43.105419,3.5,0
20250915093941,122.822318,43.105389,3.5,0
20250915093951,122.822445,43.105351,3.5,0
20250915094001,122.822566,43.105316,3.6,0
20250915094011,122.822671,43.105283,1.6,0
20250915094021,122.822771,43.105252,4.1,0
20250915094031,122.822901,43.105212,4.4,0
20250915094041,122.823034,43.105171,4.2,0
20250915094051,122.823161,43.105132,3.9,0
20250915094101,122.823284,43.105092,3.8,0
20250915094111,122.823412,43.105052,4.4,0
20250915094121,122.823547,43.105009,4.2,0
20250915094131,122.823677,43.104966,4.2,0
20250915094141,122.823789,43.104930,3.3,0
20250915094151,122.823888,43.104895,3.6,0
20250915094201,122.824016,43.104855,3.9,0
20250915094211,122.824155,43.104810,5.3,0
20250915094221,122.824336,43.104754,5.5,0
20250915094231,122.824488,43.104708,4.4,0
20250915094241,122.824646,43.104661,4.7,0
20250915094251,122.824779,43.104616,4.0,0
20250915094301,122.824761,43.104622,0.7,0
20250915094311,122.824626,43.104675,5.1,0
20250915094321,122.824569,43.104687,0.0,0
20250915094331,122.824569,43.104687,0.0,0
20250915094341,122.824569,43.104687,0.0,0
20250915094351,122.824569,43.104687,0.0,0
20250915094401,122.824569,43.104687,0.0,0
20250915094411,122.824569,43.104687,0.0,0
20250915094421,122.824569,43.104687,0.0,0
20250915094431,122.824569,43.104687,0.0,0
20250915094441,122.824569,43.104687,0.0,0
20250915094451,122.824569,43.104687,0.0,0
20250915094501,122.824569,43.104687,0.0,0
20250915094511,122.824569,43.104687,0.0,0
20250915094521,122.824569,43.104687,0.0,0
20250915094531,122.824570,43.104687,0.0,0
20250915094541,122.824585,43.104683,1.8,0
20250915094551,122.824646,43.104662,1.8,0
20250915094601,122.824695,43.104644,4.3,0
20250915094611,122.824792,43.104611,2.5,0
20250915094621,122.824882,43.104584,2.9,0
20250915094631,122.824961,43.104550,3.2,0
20250915094641,122.825045,43.104528,2.4,0
20250915094651,122.825158,43.104490,4.1,0
20250915094701,122.825292,43.104448,2.8,0
20250915094711,122.825192,43.104478,2.1,0
20250915094721,122.825213,43.104470,0.1,0
20250915094731,122.825225,43.104454,5.4,0
20250915094741,122.825331,43.104391,0.4,0
20250915094751,122.825320,43.104433,2.8,0
20250915094801,122.825313,43.104426,2.0,0
20250915094811,122.825268,43.104427,0.0,0
20250915094821,122.825226,43.104436,0.0,0
20250915094831,122.825227,43.104436,0.0,0
20250915094841,122.825226,43.104436,0.0,0
20250915094851,122.825227,43.104436,0.0,0
20250915094901,122.825213,43.104440,0.0,0
20250915094911,122.825214,43.104439,0.0,0
20250915094921,122.825121,43.104467,5.1,0
20250915094931,122.824956,43.104521,4.8,0
20250915094941,122.824821,43.104567,4.3,0
20250915094951,122.824658,43.104620,5.3,0
20250915095001,122.824479,43.104676,6.2,0
20250915095011,122.824292,43.104732,5.6,0
20250915095021,122.824117,43.104786,5.6,0
20250915095031,122.823922,43.104849,6.1,0
20250915095041,122.823737,43.104911,5.4,0
20250915095051,122.823558,43.104970,5.1,0
20250915095101,122.823515,43.104984,0.0,0
20250915095111,122.823515,43.104984,0.1,0
20250915095121,122.823512,43.104985,1.1,0
20250915095131,122.823345,43.105037,5.9,0
20250915095141,122.823173,43.105094,5.4,0
20250915095151,122.822997,43.105147,5.9,0
20250915095201,122.822810,43.105204,5.9,0
20250915095211,122.822613,43.105266,5.7,0
20250915095220,122.822416,43.105324,6.4,0
20250915095230,122.822220,43.105382,5.7,0
20250915095240,122.822018,43.105441,6.2,0
20250915095250,122.821817,43.105497,6.4,0
20250915095300,122.821600,43.105557,5.9,0
20250915095310,122.821404,43.105609,6.5,0
20250915095320,122.821217,43.105657,2.7,0
20250915095330,122.821213,43.105655,5.2,0
20250915095340,122.821234,43.105693,1.9,0
20250915095350,122.821356,43.105628,6.4,0
20250915095400,122.821625,43.105552,8.7,0
20250915095410,122.821651,43.105546,0.0,0
20250915095420,122.821651,43.105545,0.0,0
20250915095430,122.821690,43.105537,5.5,0
20250915095440,122.821886,43.105478,5.7,0
20250915095450,122.822077,43.105422,6.1,0
20250915095500,122.822278,43.105366,7.1,0
20250915095510,122.822480,43.105307,6.9,0
20250915095520,122.822699,43.105239,6.8,0
20250915095530,122.822921,43.105172,7.4,0
20250915095540,122.823142,43.105105,6.6,0
20250915095550,122.823353,43.105035,7.1,0
20250915095600,122.823569,43.104967,7.0,0
20250915095610,122.823786,43.104895,7.7,0
20250915095620,122.824001,43.104824,7.3,0
20250915095630,122.824219,43.104756,6.9,0
20250915095640,122.824436,43.104690,7.2,0
20250915095650,122.824665,43.104617,6.8,0
20250915095700,122.824874,43.104550,6.7,0
20250915095710,122.825064,43.104487,5.5,0
20250915095720,122.825251,43.104426,6.5,0
20250915095730,122.825201,43.104443,0.0,0
20250915095740,122.825201,43.104443,0.0,0
20250915095750,122.825201,43.104443,0.0,0
20250915095800,122.825201,43.104443,0.0,0
20250915095810,122.825201,43.104443,0.0,0
20250915095820,122.825201,43.104443,0.0,0
20250915095830,122.825201,43.104443,0.0,0
20250915095840,122.825202,43.104443,0.0,0
20250915095850,122.825202,43.104443,0.0,0
20250915095900,122.825202,43.104443,0.0,0
20250915095910,122.825202,43.104442,0.0,0
20250915095920,122.825202,43.104442,0.0,0
20250915095930,122.825338,43.104435,6.3,0
20250915095940,122.825453,43.104551,7.6,0
20250915095950,122.825587,43.104693,6.0,0
20250915100000,122.825672,43.104829,7.4,0
20250915100010,122.825731,43.104975,3.2,0
20250915100020,122.825764,43.105067,2.8,0
20250915100030,122.825775,43.105090,0.0,0
20250915100040,122.825775,43.105090,0.0,0
20250915100050,122.825775,43.105090,0.0,0
20250915100100,122.825775,43.105090,0.0,0
20250915100110,122.825775,43.105090,0.0,0
20250915100120,122.825775,43.105090,0.0,0
20250915100130,122.825775,43.105090,0.0,0
20250915100140,122.825780,43.105101,2.0,0
20250915100150,122.825794,43.105162,2.2,0
20250915100200,122.825811,43.105202,0.7,0
20250915100210,122.825788,43.105163,2.6,0
20250915100220,122.825785,43.105199,3.5,0
20250915100230,122.825790,43.105145,4.8,0
20250915100240,122.825800,43.105196,2.0,0
20250915100250,122.825796,43.105193,0.0,0
20250915100300,122.825713,43.105219,3.4,0
20250915100310,122.825683,43.105230,0.0,0
20250915100320,122.825683,43.105230,0.0,0
20250915100330,122.825683,43.105230,0.0,0
20250915100340,122.825683,43.105230,0.0,0
20250915100350,122.825683,43.105230,0.0,0
20250915100400,122.825683,43.105230,0.0,0
20250915100410,122.825660,43.105238,0.2,0
20250915100420,122.825597,43.105257,2.8,0
20250915100430,122.825495,43.105288,3.6,0
20250915100440,122.825379,43.105323,3.7,0
20250915100450,122.825259,43.105360,3.1,0
20250915100500,122.825153,43.105394,3.8,0
20250915100510,122.825029,43.105432,3.5,0
20250915100520,122.824900,43.105474,4.0,0
20250915100530,122.824764,43.105517,3.9,0
20250915100540,122.824639,43.105556,4.0,0
20250915100550,122.824499,43.105602,5.2,0
20250915100600,122.824358,43.105648,4.0,0
20250915100610,122.824232,43.105691,3.7,0
20250915100620,122.824104,43.105735,4.0,0
20250915100630,122.824007,43.105756,0.0,0
20250915100640,122.824008,43.105756,0.0,0
20250915100650,122.824008,43.105756,0.0,0
20250915100700,122.824008,43.105756,0.0,0
20250915100710,122.824008,43.105756,0.0,0
20250915100720,122.824008,43.105756,0.0,0
20250915100730,122.824009,43.105756,0.0,0
20250915100740,122.824024,43.105752,4.0,0
20250915100750,122.823932,43.105719,2.7,0
20250915100800,122.823834,43.105729,3.1,0
20250915100810,122.823695,43.105789,5.2,0
20250915100820,122.823721,43.105798,3.9,0
20250915100830,122.823742,43.105824,3.4,0
20250915100840,122.823724,43.105795,5.9,0
20250915100850,122.823867,43.105813,4.4,0
20250915100900,122.823989,43.105769,1.0,0
20250915100910,122.823976,43.105774,2.0,0
20250915100920,122.824001,43.105759,3.2,0
20250915100930,122.824112,43.105707,3.7,0
20250915100940,122.824207,43.105672,3.0,0
20250915100950,122.824295,43.105646,3.4,0
20250915101000,122.824378,43.105620,2.9,0
20250915101010,122.824499,43.105580,3.9,0
20250915101020,122.824612,43.105541,4.4,0
20250915101030,122.824758,43.105496,4.9,0
20250915101040,122.824920,43.105445,5.2,0
20250915101050,122.825089,43.105391,6.1,0
20250915101100,122.825257,43.105336,4.6,0
20250915101110,122.825425,43.105287,5.5,0
20250915101120,122.825588,43.105238,5.2,0
20250915101130,122.825749,43.105187,4.8,0
20250915101140,122.825712,43.105200,2.2,0
20250915101150,122.825607,43.105234,3.8,0
20250915101200,122.825701,43.105201,3.6,0
20250915101210,122.825838,43.105162,2.4,0
20250915101220,122.826000,43.105112,6.1,0
20250915101230,122.826022,43.105105,0.0,0
20250915101240,122.825923,43.105138,3.2,0
20250915101250,122.825808,43.105172,4.2,0
20250915101300,122.825861,43.105130,3.4,0
20250915101310,122.826028,43.105076,5.9,0
20250915101320,122.825949,43.105100,2.0,0
20250915101330,122.825856,43.105129,2.7,0
20250915101340,122.825810,43.105153,0.5,0
20250915101350,122.825914,43.105082,7.9,0
20250915101400,122.826047,43.105041,2.3,0
20250915101410,122.825984,43.105053,3.9,0
20250915101420,122.825983,43.105064,1.8,0
20250915101430,122.825975,43.105074,1.3,0
20250915101440,122.825979,43.105084,2.6,0
20250915101450,122.825850,43.105123,2.7,0
20250915101500,122.825766,43.105145,2.5,0
20250915101510,122.825762,43.105147,0.0,0
20250915101520,122.825761,43.105147,0.0,0
20250915101530,122.825762,43.105147,0.0,0
20250915101540,122.825762,43.105147,0.0,0
20250915101550,122.825762,43.105147,0.0,0
20250915101600,122.825761,43.105147,0.0,0
20250915101610,122.825761,43.105147,0.0,0
20250915101620,122.825761,43.105147,0.0,0
20250915101630,122.825761,43.105147,0.0,0
20250915101640,122.825761,43.105147,0.0,0
20250915101650,122.825761,43.105147,0.0,0
20250915101700,122.825761,43.105147,0.0,0
20250915101710,122.825761,43.105147,0.0,0
20250915101720,122.825761,43.105147,0.0,0
20250915101730,122.825760,43.105148,0.0,0
20250915101740,122.825760,43.105148,0.0,0
20250915101750,122.825724,43.105157,3.0,0
20250915101800,122.825593,43.105201,5.1,0
20250915101810,122.825433,43.105250,4.6,0
20250915101820,122.825276,43.105296,5.0,0
20250915101830,122.825106,43.105349,5.5,0
20250915101840,122.824932,43.105405,5.8,0
20250915101850,122.824777,43.105455,5.1,0
20250915101900,122.824601,43.105510,5.1,0
20250915101910,122.824411,43.105574,5.8,0
20250915101920,122.824222,43.105635,5.6,0
20250915101930,122.824031,43.105703,6.9,0
20250915101940,122.823897,43.105765,5.1,0
20250915101950,122.823780,43.105803,1.8,0
20250915102000,122.823901,43.105773,0.0,0
20250915102010,122.823795,43.105822,4.6,0
20250915102020,122.823697,43.105787,2.1,0
20250915102030,122.823746,43.105796,3.5,0
20250915102040,122.823874,43.105754,4.1,0
20250915102050,122.823875,43.105754,0.0,0
20250915102100,122.823977,43.105701,3.1,0
20250915102110,122.824094,43.105658,3.8,0
20250915102120,122.824219,43.105613,4.2,0
20250915102130,122.824375,43.105564,5.8,0
20250915102140,122.824555,43.105501,6.1,0
20250915102150,122.824743,43.105442,6.0,0
20250915102200,122.824923,43.105385,5.9,0
20250915102210,122.825111,43.105326,6.1,0
20250915102220,122.825298,43.105266,5.6,0
20250915102230,122.825475,43.105214,5.9,0
20250915102240,122.825643,43.105164,5.6,0
20250915102250,122.825813,43.105112,4.6,0
20250915102300,122.825719,43.105141,0.0,0
20250915102310,122.825719,43.105141,0.0,0
20250915102320,122.825719,43.105141,0.0,0
20250915102330,122.825719,43.105141,0.0,0
20250915102340,122.825719,43.105141,0.0,0
20250915102350,122.825719,43.105141,0.0,0
20250915102400,122.825719,43.105141,0.0,0
20250915102410,122.825719,43.105141,0.0,0
20250915102420,122.825719,43.105141,0.0,0
20250915102430,122.825719,43.105141,0.0,0
20250915102440,122.825719,43.105141,0.0,0
20250915102450,122.825719,43.105141,0.0,0
20250915102500,122.825719,43.105142,0.0,0
20250915102510,122.825676,43.105157,3.4,0
20250915102520,122.825722,43.105149,4.2,0
20250915102530,122.825832,43.105222,3.6,0
20250915102540,122.825820,43.105204,3.9,0
20250915102550,122.825721,43.105249,3.9,0
20250915102600,122.825574,43.105292,5.9,0
20250915102610,122.825429,43.105336,4.9,0
20250915102620,122.825279,43.105382,5.7,0
20250915102630,122.825118,43.105433,4.7,0
20250915102640,122.824963,43.105483,4.9,0
20250915102650,122.824796,43.105535,5.3,0
20250915102700,122.824631,43.105587,5.4,0
20250915102710,122.824467,43.105640,5.0,0
20250915102720,122.824307,43.105695,5.1,0
20250915102730,122.824133,43.105756,5.9,0
20250915102740,122.824164,43.105717,1.3,0
20250915102750,122.824218,43.105799,3.0,0
20250915102800,122.824161,43.105773,1.6,0
20250915102810,122.824186,43.105770,0.0,0
20250915102820,122.824221,43.105760,3.5,0
20250915102830,122.824328,43.105724,3.0,0
20250915102840,122.824432,43.105689,4.4,0
20250915102850,122.824571,43.105643,5.1,0
20250915102900,122.824741,43.105591,5.8,0
20250915102910,122.824896,43.105540,4.5,0
20250915102920,122.825041,43.105491,4.9,0
20250915102930,122.825189,43.105446,5.1,0
20250915102940,122.825349,43.105397,4.6,0
20250915102950,122.825517,43.105345,5.0,0
20250915103000,122.825693,43.105293,5.8,0
20250915103010,122.825845,43.105247,0.0,0
20250915103020,122.825740,43.105267,1.0,0
20250915103030,122.825855,43.105194,2.2,0
20250915103040,122.825952,43.105156,5.5,0
20250915103050,122.825974,43.105150,8.1,0
20250915103100,122.825796,43.105222,1.1,0
20250915103110,122.825905,43.105200,2.1,0
20250915103120,122.826046,43.105156,3.3,0
20250915103130,122.825870,43.105209,5.7,0
20250915103140,122.825854,43.105242,3.2,0
20250915103150,122.825976,43.105207,3.9,0
20250915103200,122.826075,43.105178,3.1,0
20250915103210,122.825946,43.105196,3.4,0
20250915103220,122.825898,43.105220,4.0,0
20250915103230,122.825841,43.105266,3.5,0
20250915103240,122.825780,43.105287,0.0,0
20250915103250,122.825780,43.105287,0.0,0
20250915103300,122.825780,43.105287,0.0,0
20250915103310,122.825780,43.105287,0.0,0
20250915103320,122.825780,43.105287,0.0,0
20250915103330,122.825780,43.105287,0.0,0
20250915103340,122.825780,43.105287,0.0,0
20250915103350,122.825780,43.105287,0.0,0
20250915103400,122.825780,43.105287,0.0,0
20250915103410,122.825780,43.105287,0.0,0
20250915103420,122.825781,43.105287,0.0,0
20250915103430,122.825781,43.105287,0.0,0
20250915103440,122.825780,43.105287,0.0,0
20250915103450,122.825793,43.105284,0.0,0
20250915103500,122.825793,43.105284,0.0,0
20250915103510,122.825792,43.105284,0.0,0
20250915103520,122.825792,43.105284,0.0,0
20250915103530,122.825792,43.105284,0.0,0
20250915103540,122.825773,43.105290,3.1,0
20250915103550,122.825648,43.105329,4.0,0
20250915103600,122.825517,43.105367,4.3,0
20250915103610,122.825381,43.105408,5.1,0
20250915103620,122.825229,43.105455,5.1,0
20250915103630,122.825070,43.105505,4.6,0
20250915103640,122.824925,43.105552,4.6,0
20250915103650,122.824780,43.105596,4.2,0
20250915103700,122.824661,43.105634,3.4,0
20250915103710,122.824527,43.105677,4.0,0
20250915103720,122.824411,43.105730,4.0,0
20250915103730,122.824301,43.105756,4.1,0
20250915103740,122.824234,43.105783,6.2,0
20250915103750,122.824254,43.105777,2.0,0
20250915103800,122.824303,43.105791,0.3,0
20250915103810,122.824301,43.105784,3.0,0
20250915103820,122.824326,43.105781,0.0,0
20250915103830,122.824326,43.105781,0.0,0
20250915103840,122.824429,43.105747,4.4,0
20250915103850,122.824568,43.105702,4.6,0
20250915103900,122.824725,43.105651,4.9,0
20250915103910,122.824811,43.105622,1.0,0
20250915103920,122.824895,43.105597,4.3,0
20250915103930,122.825031,43.105554,4.6,0
20250915103940,122.825171,43.105509,4.1,0
20250915103950,122.825327,43.105461,5.0,0
20250915104000,122.825485,43.105411,4.1,0
20250915104010,122.825635,43.105367,6.1,0
20250915104020,122.825813,43.105314,5.6,0
20250915104030,122.825810,43.105309,2.0,0
20250915104040,122.825933,43.105251,4.0,0
20250915104049,122.826091,43.105202,5.4,0
20250915104059,122.826121,43.105193,3.8,0
20250915104109,122.826123,43.105184,3.3,0
20250915104119,122.825992,43.105215,8.5,0
20250915104129,122.825786,43.105308,7.7,0
20250915104139,122.825924,43.105280,3.1,0
20250915104149,122.826052,43.105242,4.3,0
20250915104159,122.826058,43.105238,10.3,0
20250915104209,122.825775,43.105305,6.0,0
20250915104219,122.825819,43.105239,4.4,0
20250915104229,122.825789,43.105163,1.8,0
20250915104239,122.825780,43.105150,0.5,0
20250915104249,122.825780,43.105151,0.0,0
20250915104259,122.825780,43.105151,0.0,0
20250915104309,122.825780,43.105151,0.0,0
20250915104319,122.825780,43.105151,0.0,0
20250915104329,122.825780,43.105151,0.0,0
20250915104339,122.825780,43.105151,0.0,0
20250915104521,122.825457,43.104548,9.5,0
20250915104531,122.825283,43.104299,9.8,0
20250915104541,122.825146,43.104029,11.0,0
20250915104551,122.825081,43.103728,12.0,0
20250915104601,122.825077,43.103420,11.0,0
20250915104611,122.825108,43.103114,12.8,0
20250915104621,122.825047,43.102804,12.8,0
20250915104631,122.824978,43.102493,13.0,0
20250915104641,122.824895,43.102187,12.7,0
20250915104651,122.824747,43.101910,11.1,0
20250915104701,122.824642,43.101622,12.3,0
20250915104711,122.824562,43.101339,10.8,0
20250915104721,122.824362,43.101105,11.7,0
20250915104731,122.824114,43.100863,11.5,0
20250915104741,122.823912,43.100618,10.9,0
20250915104751,122.823734,43.100365,11.1,0
20250915104801,122.823561,43.100158,7.8,0
20250915104811,122.823373,43.099943,10.4,0
20250915104821,122.823215,43.099717,10.4,0
20250915104831,122.823041,43.099502,10.9,0
20250915104841,122.822840,43.099270,11.4,0
20250915104851,122.822688,43.099061,10.8,0
20250915104901,122.822524,43.098874,7.9,0
20250915104911,122.822433,43.098688,7.1,0
20250915104921,122.822343,43.098481,9.1,0
20250915104931,122.822253,43.098288,7.7,0
20250915104941,122.822133,43.098099,9.4,0
20250915104951,122.821919,43.097903,10.0,0
20250915105001,122.821618,43.097707,12.7,0
20250915105011,122.821383,43.097467,11.8,0
20250915105021,122.821187,43.097228,12.7,0
20250915105031,122.820966,43.096983,10.0,0
20250915105041,122.820735,43.096741,12.3,0
20250915105051,122.820539,43.096517,11.4,0
20250915105101,122.820273,43.096305,11.8,0
20250915105111,122.820035,43.096062,12.0,0
20250915105121,122.819722,43.095852,13.1,0
20250915105131,122.819465,43.095656,12.9,0
20250915105141,122.819175,43.095430,12.8,0
20250915105151,122.818905,43.095186,12.0,0
20250915105201,122.818633,43.094945,11.5,0
20250915105211,122.818247,43.094803,13.5,0
20250915105221,122.817861,43.094671,12.8,0
20250915105231,122.817508,43.094500,12.0,0
20250915105241,122.817138,43.094332,12.6,0
20250915105251,122.816767,43.094168,12.7,0
20250915105301,122.816446,43.093954,13.2,0
20250915105311,122.816115,43.093749,12.3,0
20250915105321,122.815754,43.093573,12.4,0
20250915105331,122.815390,43.093403,12.7,0
20250915105341,122.815099,43.093213,12.6,0
20250915105351,122.814936,43.092919,13.1,0
20250915105401,122.814806,43.092672,9.7,0
20250915105411,122.814676,43.092377,12.6,0
20250915105421,122.814530,43.092081,12.3,0
20250915105431,122.814389,43.091785,11.7,0
20250915105441,122.814258,43.091551,4.6,0
20250915105451,122.814206,43.091442,7.9,0
20250915105501,122.814127,43.091292,5.3,0
20250915105511,122.814079,43.091190,2.9,0
20250915105521,122.814042,43.091114,3.6,0
20250915105531,122.813989,43.091002,3.3,0
20250915105541,122.813948,43.090909,0.0,0
20250915105551,122.813915,43.090845,12.4,0
20250915105601,122.813663,43.090614,10.2,0
20250915105611,122.813383,43.090535,4.5,0
20250915105621,122.813249,43.090478,7.1,0
20250915105631,122.813131,43.090429,3.5,0
20250915105641,122.812816,43.090253,12.3,0
20250915105651,122.812670,43.090017,9.3,0
20250915105701,122.812570,43.089826,4.2,0
20250915105711,122.812519,43.089718,4.5,0
20250915105721,122.812465,43.089587,6.7,0
20250915105731,122.812363,43.089344,6.3,0
20250915105741,122.812324,43.089244,13.4,0
20250915105751,122.812189,43.088849,16.8,0
20250915105801,122.812055,43.088460,18.4,0
20250915105811,122.811933,43.088096,7.0,0
20250915105821,122.811904,43.088035,2.7,0
20250915105831,122.811873,43.087684,15.9,0
20250915105841,122.811835,43.087351,8.8,0
20250915105851,122.811816,43.087250,2.9,0
20250915105901,122.811579,43.087220,16.6,0
20250915105911,122.810664,43.087293,32.0,0
20250915105921,122.809541,43.087376,27.2,0
20250915105931,122.808507,43.087461,32.8,0
20250915105941,122.807739,43.087541,10.2,0
20250915105951,122.807677,43.087764,9.9,0
20250915141120,122.807562,43.087970,1.1,0
20250915141130,122.807590,43.087845,4.2,0
20250915141140,122.807586,43.087745,4.3,0
20250915141150,122.807607,43.087857,7.8,0
20250915141200,122.807630,43.087878,3.5,0
20250915141210,122.807588,43.087933,0.0,0
20250915141220,122.807557,43.087994,4.4,0
20250915141230,122.807525,43.088058,1.5,0
20250915141240,122.807507,43.088094,1.3,0
20250915141250,122.807494,43.088129,0.4,0</textarea>
            <div class="button-group">
                <button id="drawTrackButton" disabled style="flex: 1;">绘制轨迹</button>
                <button id="showTrackPointsButton" disabled style="flex: 1;" class="btn-warning">打点</button>
                <button id="clearTrackButton" disabled style="flex: 1;">清空轨迹</button>
            </div>
            <!-- 回放控制 -->
            <div class="split-section" style="margin-top:8px;">
                <div class="title">轨迹回放</div>
                <div class="playback-actions" style="display:flex;gap:8px;margin-bottom:8px;">
                    <button id="playbackStartBtn" disabled>开始</button>
                    <button id="playbackPauseBtn" disabled>继续</button>
                    <button id="playbackStopBtn" disabled>结束</button>
                </div>
                <div class="playback-speed" style="display:flex;align-items:center;gap:8px;margin-bottom:8px;">
                    <label>速度：
                        <select id="playbackSpeedSelect" disabled>
                            <option value="1" selected>1×</option>
                            <option value="2">2×</option>
                            <option value="4">4×</option>
                            <option value="8">8×</option>
                            <option value="16">16×</option>
                            <option value="32">32×</option>
                            <option value="64">64×</option>
                            <option value="128">128×</option>
                            <option value="256">256×</option>
                            <option value="512">512×</option>
                            <option value="1024">1024×</option>
                        </select>
                    </label>
                    <span id="playbackTimeLabel" style="font-size:12px;color:#666;">时间：—</span>
                </div>
                <div class="playback-time" style="display:flex;flex-direction:column;gap:4px;margin-bottom:8px;">
                    <label class="playback-time-label" style="display:flex;align-items:center;gap:8px;flex:1 1 auto;min-width:0;">
                        <span class="playback-time-text" style="white-space:nowrap;">起始时间：</span>
                        <input type="range" id="playbackTimeSlider" disabled min="0" max="0" step="1000" value="0" style="flex:1 1 auto;min-width:0;max-width:100%;vertical-align:middle;">
                    </label>
                    <span id="playbackTimeCursor" style="font-size:12px;color:#666;align-self:flex-end;">—</span>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    let map;
    let currentPolygons = []; // 存储多边形和其标签
    let currentTracks = []; // 存储轨迹折线及相关覆盖物
    let mapLoaded = false;
    let mapLabelHandlers = []; // 存储地图事件处理器
    let labelsEnabled = false; // 标签显示开关（默认关闭）
    let isDrawing = false; // 绘制进行中防止重复点击

    window.onload = function () {
        if (typeof T === 'undefined') {
            alert("天地图API加载失败，请检查网络或密钥！");
            return;
        }
        initMap();
        bindDrawEvent();
        bindMinimizeEvent();
        bindTabs();
        bindBatchGenerator();
        bindMultiSplitter();
        bindLabelsToggle(); // 绑定标签显示开关
        bindTrackEvents();  // 绑定轨迹绘制与清空
        bindPlaybackControls(); // 绑定轨迹回放
    };

    function initMap() {
        showLoading();
        disableButtons(true);

        try {
            map = new T.Map("mapContainer", {
                zoom: 12,
                center: new T.LngLat(116.40769, 39.90403)
            });

            // 已移除测试标签
            map.enableScrollWheelZoom();

            // 添加地图类型控件
            const mapTypeCtrl = new T.Control.MapType({
                mapTypes: [TMAP_NORMAL_MAP, TMAP_SATELLITE_MAP, TMAP_TERRAIN_MAP],
                position: T_ANCHOR_TOP_LEFT
            });
            map.addControl(mapTypeCtrl);

            // 加载影像底图（卫星）
            const tk = "648f621977051d0199ff0f965d3fd322";

            // 方案1：使用默认地图类型（作为备选）
            map.setMapType(TMAP_SATELLITE_MAP);

            // 方案2：手动添加影像图层（底图 + 标注）
            const vecLayer = new T.TileLayer(`https://t0.tianditu.gov.cn/img_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=img&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk=${tk}`);
            const cvaLayer = new T.TileLayer(`https://t0.tianditu.gov.cn/cia_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=cia&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk=${tk}`);

            // 添加图层并监听加载状态
            vecLayer.addEventListener("load", function () {
                console.log("影像底图加载完成");
            });

            vecLayer.addEventListener("error", function (e) {
                console.error("影像底图加载错误:", e);
                alert("影像底图加载错误，将使用默认地图类型");
            });

            map.addLayer(vecLayer);
            map.addLayer(cvaLayer);

            // 监听地图加载事件
            map.addEventListener("loaded", function () {
                console.log("地图加载完成");
                markMapLoaded();
            });
            map.addEventListener("load", function () {
                console.log("地图load事件触发");
                markMapLoaded();
            });
            map.addEventListener("tilesloaded", function () {
                console.log("地图瓦片加载完成");
                markMapLoaded();
            });
            // 监听地图加载失败事件
            map.addEventListener("error", function (e) {
                console.error("地图加载错误:", e);
                alert("地图加载错误: " + e.message);
                hideLoading();
            });

            // 监听地图移动事件，用于更新标签位置
            const moveHandler = function () {
                updateAllLabelsPosition();
            };
            map.addEventListener("move", moveHandler);
            map.addEventListener("zoom", moveHandler);

            // 存储事件处理器，用于清理
            mapLabelHandlers.push({ event: "move", handler: moveHandler });
            mapLabelHandlers.push({ event: "zoom", handler: moveHandler });

            // 超时容错
            setTimeout(() => {
                if (!mapLoaded) markMapLoaded();
            }, 8000);

        } catch (error) {
            alert("地图初始化失败：" + error.message);
            console.error(error);
            hideLoading();
        }
    }

    function markMapLoaded() {
        if (!mapLoaded) {
            mapLoaded = true;
            hideLoading();
            disableButtons(false);
            disableTrackButtons(false);
            // 仅开启速度选择，回放按钮按状态控制
            const speedSel = document.getElementById('playbackSpeedSelect');
            if (speedSel) speedSel.disabled = false;
            updatePlaybackButtonsState('idle');
        }
    }

    function showLoading() {
        const loading = document.getElementById("mapLoading");
        loading.style.display = "flex";
        loading.style.opacity = "1";
    }

    function hideLoading() {
        const loading = document.getElementById("mapLoading");
        loading.style.opacity = "0";
        setTimeout(() => loading.style.display = "none", 300);
    }

    function disableButtons(disabled) {
        document.getElementById("drawButton").disabled = disabled;
        document.getElementById("clearButton").disabled = disabled;
    }

    function disableTrackButtons(disabled) {
        const drawTrackBtn = document.getElementById("drawTrackButton");
        const showTrackPointsBtn = document.getElementById("showTrackPointsButton");
        const clearTrackBtn = document.getElementById("clearTrackButton");
        if (drawTrackBtn) drawTrackBtn.disabled = disabled;
        if (showTrackPointsBtn) showTrackPointsBtn.disabled = disabled;
        if (clearTrackBtn) clearTrackBtn.disabled = disabled;
    }
    // 回放控件的禁用/启用
    function disablePlaybackButtons(disabled) {
        ["playbackStartBtn","playbackPauseBtn","playbackStopBtn","playbackSpeedSelect","playbackTimeSlider"].forEach(id=>{
            const el = document.getElementById(id);
            if (el) el.disabled = disabled;
        });
    }

    // 回放按钮状态管理：空闲/播放/暂停
    function updatePlaybackButtonsState(state){
        try {
            const startBtn = document.getElementById('playbackStartBtn');
            const pauseBtn = document.getElementById('playbackPauseBtn');
            const stopBtn = document.getElementById('playbackStopBtn');
            if (!startBtn || !pauseBtn || !stopBtn) return;
            if (state === 'idle') {
                startBtn.disabled = false;
                pauseBtn.disabled = true;
                stopBtn.disabled = true;
                pauseBtn.textContent = '继续';
            } else if (state === 'playing') {
                startBtn.disabled = true;
                pauseBtn.disabled = false;
                stopBtn.disabled = false;
                pauseBtn.textContent = '暂停';
            } else if (state === 'paused') {
                startBtn.disabled = true;
                pauseBtn.disabled = false;
                stopBtn.disabled = false;
                pauseBtn.textContent = '继续';
            }
        } catch(e) { console.warn('更新按钮状态失败:', e); }
    }

    function bindDrawEvent() {
        document.getElementById("drawButton").addEventListener("click", function () {
            if (isDrawing) { console.log('绘制进行中，忽略重复点击'); return; }
            isDrawing = true;
            disableButtons(true);
            showLoading();
            try {
                const wktStr = document.getElementById("wktTextarea").value.trim();
                if (!wktStr) { alert("请输入WKT字符串！"); return; }
                clearOverlays();
                const geojson = parseWkt(wktStr);
    
                const polygonData = [];
                if (geojson.type === "Polygon") {
                    polygonData.push({ index: 1, coordinates: geojson.coordinates });
                } else if (geojson.type === "MultiPolygon") {
                    geojson.coordinates.forEach((polygon, index) => {
                        polygonData.push({ index: index + 1, coordinates: polygon });
                    });
                }
    
                // 重置并绘制
                polygonInfoList = [];
                polygonData.forEach(pd => processPolygon(pd.index, pd.coordinates));
    
                // 视图居中到所有已绘制轮廓
                try { fitViewportToPolygons(); } catch (e) { console.warn('视图居中失败', e); }
    
                // 在视图稳定后再创建/更新标签
                setTimeout(() => {
                    if (labelsEnabled) {
                        try {
                            createAllLabels();
                            updateAllLabelsPosition();
                        } catch (e) {
                            console.warn('创建或更新标签失败:', e);
                        }
                    }
                }, 150);
            } catch (e) {
                alert('绘制失败：' + (e && e.message ? e.message : e));
                console.error('绘制异常:', e);
            } finally {
                hideLoading();
                isDrawing = false;
                disableButtons(false);
            }
        });

        document.getElementById("clearButton").addEventListener("click", function () {
            if (isDrawing) { console.log('绘制进行中，暂不清空'); return; }
            clearOverlays();
            console.log("已清空所有轮廓");
        });
    }

    // 存储多边形数据，用于后续标签创建
    let polygonInfoList = [];

    // 处理单个多边形的绘制和面积计算
    function processPolygon(actualPolygonIndex, polygonCoords) {
        console.log('开始处理多边形', actualPolygonIndex);

        // 坐标系选择（绘制始终使用WGS84坐标）
        const coordSys = (document.getElementById('coordSysSelect') && document.getElementById('coordSysSelect').value) || 'wgs84';

        // 统一转换为WGS84用于绘制与面积计算
        function toWgs(point){
            const lng = point[0], lat = point[1];
            if (coordSys === 'wgs84' || coordSys === 'cgcs2000') {
                return [lng, lat];
            } else if (coordSys === 'gcj02') {
                const w = gcj02ToWgs84(lng, lat);
                return [w.lng, w.lat];
            } else if (coordSys === 'bd09') {
                const gcj = bd09ToGcj02(lng, lat);
                const w = gcj02ToWgs84(gcj.lng, gcj.lat);
                return [w.lng, w.lat];
            }
            return [lng, lat];
        }
        const coordsWGS84 = polygonCoords.map(ring => ring.map(toWgs));
        let outerRingWGS = coordsWGS84[0] || [];

        // 生成用于绘制的坐标（直接使用WGS84坐标）
        const rings = coordsWGS84.map(ring => ring.map(([lng, lat]) => new T.LngLat(lng, lat)));


         // 创建半透明填充的多边形（无边框）
          const polygon = new T.Polygon(rings, {
              color: "#FFD700",
              weight: 1,
              opacity: 1,
              fillColor: "#FFFF00",
              fillOpacity: 0.35
          });
 
          // 使用WGS84坐标计算面积（更准确的面积计算）
         let areaSqm;
         let areaMu;



         try {
             // 检查Turf.js是否可用
             if (typeof turf !== 'undefined' && turf.area) {
                 // 使用Turf.js计算多边形面积
                // 构造GeoJSON格式的多边形
                const geoJsonPolygon = {
                    type: "Polygon",
                    coordinates: coordsWGS84
                };


                 // 使用Turf.js计算面积（平方米）
                 areaSqm = turf.area(geoJsonPolygon);
                 areaMu = (areaSqm / 666.6667).toFixed(4); // 转换为亩
                 console.log(`多边形${actualPolygonIndex}面积计算结果(Turf.js): ${areaSqm}平方米 = ${areaMu}亩`);
             } else {
                 // 如果Turf.js不可用，回退到之前的计算方法
                 console.warn('Turf.js不可用，使用备用计算方法');
                 // 计算带孔洞的多边形面积
                 areaSqm = 0;
                 // 计算外环面积
                 outerRingWGS = coordsWGS84[0] || [];
                 areaSqm += calculatePolygonArea(outerRingWGS);

                 // 减去内环（孔洞）面积
                 for (let i = 1; i < coordsWGS84.length; i++) {
                     const innerRingArea = calculatePolygonArea(coordsWGS84[i]);
                     areaSqm -= innerRingArea;
                 }

                  areaMu = (areaSqm / 666.6667).toFixed(4); // 使用更精确的转换系数
                  console.log(`多边形${actualPolygonIndex}面积计算结果(备用): ${areaSqm}平方米 = ${areaMu}亩`);
              }
          } catch (error) {
              console.error(`面积计算失败:`, error);
              areaSqm = 0;
              areaMu = '0.0000';
          }

          // 计算多边形的中心点和底部中心点（WGS84）
          const centerPoint = calculatePolygonCenter(outerRingWGS);
          const bottomCenterPoint = calculatePolygonBottomCenter(outerRingWGS);

          // 添加多边形到地图
          if (map) {
              map.addOverLay(polygon);
              console.log(`多边形${actualPolygonIndex}已添加到地图`);
          } else {
              console.error('地图对象不存在');
          }

          // 存储多边形信息，用于后续标签创建
          polygonInfoList.push({
              index: actualPolygonIndex,
              polygon: polygon,
              area: areaMu,
              bottomCenter: { lng: bottomCenterPoint.lng, lat: bottomCenterPoint.lat },
              ringPoints: rings
          });
      }

    // 视图居中：根据已绘制的GCJ-02点
    function fitViewportToPolygons() {
        const points = [];
        try {
            if (!map || !map.setViewport) return;
            polygonInfoList.forEach(info => {
                if (!info || !info.ringPoints) return;
                info.ringPoints.forEach(ring => {
                    ring.forEach(ll => points.push(ll));
                });
            });
            if (!points.length) return;
            map.setViewport(points);
        } catch (e) {
            try {
                const lngs = points.map(p => p.lng);
                const lats = points.map(p => p.lat);
                const center = new T.LngLat(
                    (Math.min(...lngs) + Math.max(...lngs)) / 2,
                    (Math.min(...lats) + Math.max(...lats)) / 2
                );
                if (map && map.panTo) map.panTo(center);
            } catch (e2) {
                console.warn('视图居中失败:', e2);
            }
        }
    }

    // 统一创建所有多边形的标签
    function createAllLabels() {
        const mapContainer = document.getElementById('mapContainer');
        if (!mapContainer || !map) return;

        polygonInfoList.forEach(info => {
            if (!info) return;
            // 防止重复创建
            if (info.labelRef) return;
            // 创建标签元素
            const labelDiv = document.createElement('div');
            labelDiv.className = 'area-label';
            labelDiv.innerHTML = `多边形${info.index}：${info.area}亩`;

            // 添加到地图容器并根据屏幕边界定位到轮廓下方
            mapContainer.appendChild(labelDiv);
            positionLabelForPolygon(labelDiv, info);

            // 记录引用，避免重复创建
            info.labelRef = labelDiv;

            // 存储到 currentPolygons 以复用现有定位/清理逻辑
            const labelObj = {
                domElement: labelDiv,
                isDomLabel: true,
                polygonInfo: info
            };
            currentPolygons.push({ polygon: info.polygon, label: labelObj });
        });

        // 不清空 polygonInfoList，便于开关随时创建/隐藏标签
    }

    // 根据多边形屏幕边界定位标签，保证始终在轮廓下方
    function positionLabelForPolygon(labelDiv, info) {
        if (!map || !info || !info.ringPoints) return;
        const points = [];
        info.ringPoints.forEach(ring => {
            ring.forEach(ll => {
                const p = map.lngLatToContainerPoint(ll);
                points.push(p);
            });
        });
        if (!points.length) return;
        const minX = Math.min(...points.map(p => p.x));
        const maxX = Math.max(...points.map(p => p.x));
        const maxY = Math.max(...points.map(p => p.y));
        const container = document.getElementById('mapContainer');
        const labelWidth = labelDiv.offsetWidth;
        const labelHeight = labelDiv.offsetHeight;
        const targetLeft = Math.round((minX + maxX) / 2 - labelWidth / 2);
        const targetTop = Math.round(maxY + 6);
        const clampedLeft = Math.max(0, Math.min(targetLeft, container.clientWidth - labelWidth));
        const clampedTop = Math.max(0, Math.min(targetTop, container.clientHeight - labelHeight));
        labelDiv.style.left = clampedLeft + 'px';
        labelDiv.style.top = clampedTop + 'px';
    }

    // 更新所有标签位置（地图move/zoom时调用）
    function updateAllLabelsPosition() {
        try {
            if (!map) return;
            const container = document.getElementById('mapContainer');
            if (!container) return;
            currentPolygons.forEach(item => {
                if (!item || !item.label) return;
                const labelObj = item.label;
                if (labelObj.isDomLabel && labelObj.domElement && labelObj.polygonInfo) {
                    // 确保标签在容器中
                    if (!labelObj.domElement.parentNode) {
                        container.appendChild(labelObj.domElement);
                    }
                    positionLabelForPolygon(labelObj.domElement, labelObj.polygonInfo);
                }
            });
        } catch (e) {
            console.warn('更新标签位置时出错:', e);
        }
    }
    // 确保在全局可用（处理第三方库事件回调作用域差异）
    window.updateAllLabelsPosition = updateAllLabelsPosition;

    // 绑定“显示亩数标签”开关（默认隐藏）
    function bindLabelsToggle() {
        const cb = document.getElementById('toggleLabelsCheckbox');
        const container = document.getElementById('mapContainer');
        if (!cb || !container) return;
        // 默认隐藏标签
        container.classList.add('labels-hidden');
        cb.addEventListener('change', () => {
            labelsEnabled = cb.checked;
            if (labelsEnabled) {
                container.classList.remove('labels-hidden');
                const hasAnyLabel = currentPolygons.some(item => item && item.label && item.label.domElement);
                if (!hasAnyLabel) {
                    try { createAllLabels(); } catch (e) { console.warn('创建标签失败:', e); }
                }
                updateAllLabelsPosition();
            } else {
                container.classList.add('labels-hidden');
            }
        });
    }

    /**
     * 计算多边形中心点（比底部中心更适合显示标签）
     */
    function calculatePolygonCenter(outerRing) {
        let sumLng = 0, sumLat = 0;
        const len = outerRing.length;

        for (let i = 0; i < len; i++) {
            sumLng += outerRing[i][0];
            sumLat += outerRing[i][1];
        }

        return {
            lng: sumLng / len,
            lat: sumLat / len
        };
    }

    /**
     * 计算多边形面积（球面多边形面积计算）
     * 使用更准确的球面坐标面积计算方法，确保面积与视觉大小一致
     */
    function calculatePolygonArea(coordinates) {
        // 地球半径（米）- 使用更精确的值
        const R = 6371000.8;
        const n = coordinates.length;

        // 将所有坐标转换为弧度
        const coordsRad = coordinates.map(point => [
            point[0] * Math.PI / 180,
            point[1] * Math.PI / 180
        ]);

        let areaRad = 0;

        // 使用更准确的球面多边形面积公式（Girard定理）
        for (let i = 0; i < n; i++) {
            const j = (i + 1) % n;
            const lon1 = coordsRad[i][0];
            const lat1 = coordsRad[i][1];
            const lon2 = coordsRad[j][0];
            const lat2 = coordsRad[j][1];

            // 计算球面多边形面积增量
            const dlon = lon2 - lon1;
            const sinLat1 = Math.sin(lat1);
            const sinLat2 = Math.sin(lat2);
            const cosLat1 = Math.cos(lat1);
            const cosLat2 = Math.cos(lat2);

            // 使用更精确的公式
            areaRad += dlon * (sinLat1 * cosLat2 * Math.cos(dlon / 2) + sinLat2 * cosLat1);
        }

        // 计算总面积（平方米）
        const areaSqm = Math.abs(areaRad) * R * R * 0.5;

        return areaSqm;
    }

    /**
     * 清空所有多边形和标签（同时处理 polygonInfoList 与 currentPolygons）
     */
    function clearOverlays() {
        try {
            // 先移除 polygonInfoList 中记录的多边形与其DOM标签
            polygonInfoList.forEach(info => {
                if (info && info.polygon && map && map.removeOverLay) {
                    try { map.removeOverLay(info.polygon); } catch (e) { console.warn('移除多边形失败:', e); }
                }
                if (info && info.labelRef && info.labelRef.parentNode) {
                    try { info.labelRef.parentNode.removeChild(info.labelRef); } catch (e) { console.warn('移除DOM标签失败:', e); }
                    info.labelRef = null;
                }
            });

            // 再处理 currentPolygons（兼容旧路径与标签对象）
            currentPolygons.forEach(item => {
                if (item.polygon && map && map.removeOverLay) {
                    try { map.removeOverLay(item.polygon); } catch (e) { console.warn('移除多边形失败:', e); }
                }
                if (item.label) {
                    if (item.label.domElement && item.label.domElement.parentNode) {
                        try { item.label.domElement.parentNode.removeChild(item.label.domElement); } catch (e) { console.warn('移除DOM标签失败:', e); }
                    } else if (map && map.removeOverLay && !item.label.isDomLabel) {
                        try { map.removeOverLay(item.label); } catch (e) { console.warn('移除地图覆盖物标签失败:', e); }
                    }
                }
            });

            // 清空记录数组
            currentPolygons = [];
            polygonInfoList = [];

            console.log('已清空所有多边形和标签（保留事件监听器）');
        } catch (error) {
            console.error('清空覆盖物时出错:', error);
        }
    }

    // 其他辅助函数（保持不变）
    function bindMinimizeEvent() {
        const container = document.querySelector(".wkt-input-container");
        const btn = document.getElementById("minimizeBtn");
        const minIcon = btn?.querySelector(".min-icon");
        const restoreIcon = btn?.querySelector(".restore-icon");

        btn?.addEventListener("click", () => {
            const minimized = container.classList.toggle("minimized");
            if (minIcon && restoreIcon) {
                if (minimized) {
                    minIcon.style.display = "none";
                    restoreIcon.style.display = "";
                } else {
                    minIcon.style.display = "";
                    restoreIcon.style.display = "none";
                }
            }
        });
    }

    // 在脚本内部补充：页签切换（3个页签）
     function bindTabs() {
         const tabs = [
             { btn: document.getElementById('tabDrawBtn'), pane: document.getElementById('tabDraw'), key: 'draw' },
             { btn: document.getElementById('tabTrackBtn'), pane: document.getElementById('tabTrack'), key: 'track' },
             { btn: document.getElementById('tabSplitBtn'), pane: document.getElementById('tabSplit'), key: 'split' },
             { btn: document.getElementById('tabBatchBtn'), pane: document.getElementById('tabBatch'), key: 'batch' },
         ];
         if (tabs.some(t => !t.btn || !t.pane)) return;
         function activate(key) {
             tabs.forEach(t => {
                 const active = t.key === key;
                 t.btn.classList.toggle('active', active);
                 t.pane.classList.toggle('active', active);
             });
         }
         tabs.forEach(t => t.btn.addEventListener('click', () => activate(t.key)));
         activate('draw');
     }
    function updateParserStatus() {
        const el = document.getElementById('parserStatus');
        if (!el) return;
        const ok = (typeof Terraformer !== 'undefined' && Terraformer.WKT && typeof Terraformer.WKT.parse === 'function');
        if (ok) {
            el.textContent = 'Terraformer WKT Parser';
            el.style.color = '#2f8f2f';
        } else {
            el.textContent = '本地回退解析（仅支持POLYGON/MULTIPOLYGON）';
            el.style.color = '#c77d1e';
        }
    }
     function parseWkt(wkt) {
         wkt = wkt.trim();
         // 优先使用成熟库（Terraformer WKT Parser）
         if (typeof Terraformer !== 'undefined' && Terraformer.WKT && Terraformer.WKT.parse) {
             try {
                 return Terraformer.WKT.parse(wkt);
             } catch (e) {
                 console.warn('Terraformer解析失败，尝试本地回退解析:', e);
             }
         } else {
             // 不再提示“未加载”，由状态栏展示回退信息
         }
         // 回退解析：仅支持 POLYGON / MULTIPOLYGON
         const typeMatch = wkt.match(/^\s*(POLYGON|MULTIPOLYGON)\s*\(/i);
         if (!typeMatch) throw new Error('仅支持POLYGON/MULTIPOLYGON');
         const type = typeMatch[1].toUpperCase();
         const inner = wkt.substring(wkt.indexOf('('));
         if (type === 'POLYGON') {
             const coords = parsePolygonCoords(inner.replace(/^\(/, '').replace(/\)$/, ''));
             return { type: 'Polygon', coordinates: coords };
         } else {
             const trimmed = inner.replace(/^\(\(/, '').replace(/\)\)$/, '');
             const coords = parseMultiPolygonCoords(trimmed);
             return { type: 'MultiPolygon', coordinates: coords };
         }
     }

     function bindMultiSplitter() {
         const input = document.getElementById('multiInput');
         const output = document.getElementById('polyOutput');
         const splitBtn = document.getElementById('splitMultiBtn');
         const copyBtn = document.getElementById('copyPolysBtn');
         if (!input || !output || !splitBtn || !copyBtn) return;

         // 本地WKT序列化辅助
         function ringToText(ring) {
             if (!ring || !ring.length) return '()';
             const first = ring[0];
             const last = ring[ring.length - 1];
             const closed = (first[0] === last[0] && first[1] === last[1]) ? ring : ring.concat([[first[0], first[1]]]);
             return '(' + closed.map(pt => pt[0] + ' ' + pt[1]).join(', ') + ')';
         }
         function toWktPolygonCoords(coords) {
             return 'POLYGON(' + coords.map(ringToText).join(', ') + ')';
         }
         function toWktMulti(coords) {
             return 'MULTIPOLYGON(' + coords.map(poly => '(' + poly.map(ringToText).join(', ') + ')').join(', ') + ')';
         }

         function polygonsFromMulti(text) {
             const geo = parseWkt(text.trim());
             if (geo.type !== 'MultiPolygon') throw new Error('请输入有效的 MULTIPOLYGON WKT');
             const polys = geo.coordinates.map(rings => toWktPolygonCoords(rings));
             return polys;
         }
         splitBtn.addEventListener('click', () => {
             try {
                 const list = polygonsFromMulti(input.value.trim());
                 output.value = list.join('\n');
             } catch (e) {
                 alert('分割失败：' + e.message);
             }
         });
         copyBtn.addEventListener('click', async () => {
             const val = output.value.trim();
             if (!val) { alert('没有可复制的结果'); return; }
             try { await navigator.clipboard.writeText(val); alert('已复制到剪贴板'); } catch (e) { console.warn('复制失败', e); }
         });
     }

     function bindBatchGenerator() {
         const batchInput = document.getElementById('batchInput');
         const output = document.getElementById('multiOutput');
         const genBtn = document.getElementById('generateMultiBtn');
         const copyBtn = document.getElementById('copyMultiBtn');

         // 本地WKT序列化辅助（与分割器保持一致）
         function ringToText(ring) {
             if (!ring || !ring.length) return '()';
             const first = ring[0];
             const last = ring[ring.length - 1];
             const closed = (first[0] === last[0] && first[1] === last[1]) ? ring : ring.concat([[first[0], first[1]]]);
             return '(' + closed.map(pt => pt[0] + ' ' + pt[1]).join(', ') + ')';
         }
         function toWktMulti(coords) {
             return 'MULTIPOLYGON(' + coords.map(poly => '(' + poly.map(ringToText).join(', ') + ')').join(', ') + ')';
         }

         genBtn.addEventListener('click', () => {
             try {
                 const lines = batchInput.value.trim().split(/\n|;/).map(s => s.trim()).filter(Boolean);
                 if (lines.length === 0) throw new Error('请按每行或分号输入至少一个POLYGON');
                 const polygons = lines.map((line, idx) => {
                     const g = parseWkt(line);
                     if (g.type !== 'Polygon') throw new Error(`第${idx + 1}行不是有效的POLYGON WKT`);
                     return g;
                 });
                 const multiGeo = { type: 'MultiPolygon', coordinates: polygons.map(p => p.coordinates) };
                 output.value = toWktMulti(multiGeo.coordinates);
             } catch (e) {
                 alert('生成失败：' + e.message);
             }
         });

         copyBtn.addEventListener('click', async () => {
             const val = output.value.trim();
             if (!val) { alert('没有可复制的结果'); return; }
             try { await navigator.clipboard.writeText(val); alert('已复制到剪贴板'); } catch (e) { console.warn('复制失败', e); }
         });

     }

     function setExampleWkt() {
         const exampleWkt = "MULTIPOLYGON(" +
             "(" +
             "(116.35 39.93, 116.39 39.93, 116.39 39.90, 116.35 39.90, 116.35 39.93)," + // 外环
             "(116.36 39.92, 116.38 39.92, 116.38 39.91, 116.36 39.91, 116.36 39.92)" +  // 内环
             ")," +
             "(" +
             "(116.40 39.95, 116.43 39.97, 116.46 39.96, 116.49 39.98, 116.52 39.95, 116.55 39.93, 116.58 39.94, 116.61 39.92, 116.64 39.95, 116.40 39.95)" +
             ")" +
             ")";
         document.getElementById("wktTextarea").value = exampleWkt;
     }

     function parsePolygonCoords(coordStr) {
         const ringStrs = coordStr.split(/\)\s*,\s*\(/).map(s => s.replace(/[()]/g, '').trim());
         const rings = [];
         ringStrs.forEach(ringStr => {
             const pts = ringStr.split(/,\s*/).map(pointStr => {
                 const [lng, lat] = pointStr.split(/\s+/).map(Number);
                 if (isNaN(lng) || isNaN(lat)) throw new Error("坐标格式错误：" + pointStr);
                 return [lng, lat];
             });
             // 自动拆分：如果一个ring中包含多次回到起点（闭合），则拆分为多个环
             // 兼容用户将外环与内环错误地写在同一对括号中的情况
             let start = 0;
             while (start < pts.length) {
                 const startPt = pts[start];
                 let closeIdx = -1;
                 for (let i = start + 1; i < pts.length; i++) {
                     if (pts[i][0] === startPt[0] && pts[i][1] === startPt[1]) {
                         closeIdx = i;
                         break;
                     }
                 }
                 if (closeIdx === -1) {
                     // 未找到闭合：将剩余点视为一个环，并强制闭合
                     const ring = pts.slice(start);
                     if (ring.length && (ring[0][0] !== ring[ring.length - 1][0] || ring[0][1] !== ring[ring.length - 1][1])) {
                         ring.push([ring[0][0], ring[0][1]]);
                     }
                     rings.push(ring);
                     break;
                 } else {
                     const ring = pts.slice(start, closeIdx + 1);
                     rings.push(ring);
                     start = closeIdx + 1;
                 }
             }
         });
         return rings;
     }

     function parseMultiPolygonCoords(coordStr) {
         const polygonStrs = coordStr.split(/\)\s*\)\s*,\s*\(\s*\(/).map(s => s.replace(/[()]/g, '').trim());
         return polygonStrs.map(polygonStr => parsePolygonCoords(polygonStr));
     }

     function wgs84ToGcj02(lng, lat) {
         const x_PI = 3.14159265358979324 * 3000.0 / 180.0;
         const PI = 3.1415926535897932384626;
         const a = 6378245.0;
         const ee = 0.00669342162296594323;

         if (outOfChina(lng, lat)) return { lng, lat };

         let dlat = transformLat(lng - 105.0, lat - 35.0);
         let dlng = transformLng(lng - 105.0, lat - 35.0);
         const radlat = lat / 180.0 * PI;
         let magic = Math.sin(radlat);
         magic = 1 - ee * magic * magic;
         const sqrtmagic = Math.sqrt(magic);
         dlat = (dlat * 180.0) / ((a * (1 - ee)) / (magic * sqrtmagic) * PI);
         dlng = (dlng * 180.0) / (a / sqrtmagic * Math.cos(radlat) * PI);

         return { lng: lng + dlng, lat: lat + dlat };

         function outOfChina(lng, lat) {
             return (lng < 72.004 || lng > 137.8347) || (lat < 0.8293 || lat > 55.8271);
         }

         function transformLat(x, y) {
             let ret = -100.0 + 2.0 * x + 3.0 * y + 0.2 * y * y + 0.1 * x * y + 0.2 * Math.sqrt(Math.abs(x));
             ret += (20.0 * Math.sin(6.0 * x * PI) + 20.0 * Math.sin(2.0 * x * PI)) * 2.0 / 3.0;
             ret += (20.0 * Math.sin(y * PI) + 40.0 * Math.sin(y / 3.0 * PI)) * 2.0 / 3.0;
             ret += (160.0 * Math.sin(y / 12.0 * PI) + 320 * Math.sin(y * PI / 30.0)) * 2.0 / 3.0;
             return ret;
         }

         function transformLng(x, y) {
             let ret = 300.0 + x + 2.0 * y + 0.1 * x * x + 0.1 * x * y + 0.1 * Math.sqrt(Math.abs(x));
             ret += (20.0 * Math.sin(6.0 * x * PI) + 20.0 * Math.sin(2.0 * x * PI)) * 2.0 / 3.0;
             ret += (20.0 * Math.sin(x * PI) + 40.0 * Math.sin(x / 3.0 * PI)) * 2.0 / 3.0;
             ret += (150.0 * Math.sin(x / 12.0 * PI) + 300.0 * Math.sin(x / 30.0 * PI)) * 2.0 / 3.0;
             return ret;
         }
     }

     function gcj02ToWgs84(lng, lat) {
         const g = wgs84ToGcj02(lng, lat);
         return { lng: lng * 2 - g.lng, lat: lat * 2 - g.lat };
     }

     function bd09ToGcj02(bdLng, bdLat) {
         const x_PI = 3.14159265358979324 * 3000.0 / 180.0;
         const x = bdLng - 0.0065;
         const y = bdLat - 0.006;
         const z = Math.sqrt(x * x + y * y) - 0.00002 * Math.sin(y * x_PI);
         const theta = Math.atan2(y, x) - 0.000003 * Math.cos(x * x_PI);
         const ggLng = z * Math.cos(theta);
         const ggLat = z * Math.sin(theta);
         return { lng: ggLng, lat: ggLat };
     }

     function calculatePolygonBottomCenter(outerRing) {
         let minLat = Infinity;
         let bottomPoints = [];
         outerRing.forEach(point => {
             const lat = point[1];
             if (lat < minLat) {
                 minLat = lat;
                 bottomPoints = [point];
             } else if (lat === minLat) {
                 bottomPoints.push(point);
             }
         });

         const sumLng = bottomPoints.reduce((sum, point) => sum + point[0], 0);
         const centerLng = sumLng / bottomPoints.length;

         return { lng: centerLng, lat: minLat };
     }

     function fitBounds(geojson) {
         try {
             const allPoints = [];
             function collectPoints(coords) {
                 if (typeof coords[0] === 'number') {
                     allPoints.push(coords);
                 } else {
                     coords.forEach(coord => collectPoints(coord));
                 }
             }
             collectPoints(geojson.coordinates);

             if (allPoints.length === 0) return;

             const lats = allPoints.map(p => p[1]);
             const lngs = allPoints.map(p => p[0]);
             const minLng = Math.min(...lngs);
             const maxLng = Math.max(...lngs);
             const minLat = Math.min(...lats);
             const maxLat = Math.max(...lats);

             const sw = wgs84ToGcj02(minLng, minLat);
             const ne = wgs84ToGcj02(maxLng, maxLat);

             // 修复setViewport方法的使用，确保参数格式正确
             if (map && map.setViewport) {
                 map.setViewport([
                     new T.LngLat(sw.lng, sw.lat),
                     new T.LngLat(ne.lng, ne.lat)
                 ], { padding: [50, 50] });
             } else {
                 console.warn('地图对象或setViewport方法不可用');
             }
         } catch (error) {
             console.error('调整视图范围时出错:', error);
         }
     }
// 轨迹绘制与解析
    function bindTrackEvents() {
        const drawBtn = document.getElementById('drawTrackButton');
        const showPointsBtn = document.getElementById('showTrackPointsButton');
        const clearBtn = document.getElementById('clearTrackButton');
        const ta = document.getElementById('trackTextarea');
        if (!drawBtn || !showPointsBtn || !clearBtn || !ta) return;

        drawBtn.addEventListener('click', function(){
            try {
                const text = ta.value.trim();
                if (!text) { alert('请粘贴轨迹文本（时间戳,经度,纬度）'); return; }
                const points = parseTrackText(text);
                if (points.length < 2) { alert('有效轨迹点不足，至少需要两点'); return; }
                drawTrackFromPoints(points);
                fitViewportToTrack(points);
            } catch (e) {
                alert('绘制轨迹失败：' + (e && e.message ? e.message : e));
                console.error('绘制轨迹异常:', e);
            }
        });

        showPointsBtn.addEventListener('click', function(){
            try {
                const text = ta.value.trim();
                if (!text) { alert('请粘贴轨迹文本（时间戳,经度,纬度）'); return; }
                const points = parseTrackText(text);
                if (points.length === 0) { alert('未找到有效轨迹点'); return; }
                showTrackPoints(points);
                fitViewportToTrack(points);
            } catch (e) {
                alert('显示轨迹点失败：' + (e && e.message ? e.message : e));
                console.error('显示轨迹点异常:', e);
            }
        });

        clearBtn.addEventListener('click', function(){
            clearTrackOverlays();
            console.log('已清空轨迹');
        });
    }

    function showTrackPoints(points) {
        // 先移除旧轨迹（不影响轮廓）
        clearTrackOverlays(false);
        
        if (!map || !points || points.length === 0) {
            console.log('无轨迹点可显示');
            return;
        }
        
        console.log(`准备显示${points.length}个轨迹点`);
        
        // 使用批量处理和更小的图标来提高性能
        // 创建一个更小的红点SVG图标
        const smallRedDotIcon = new T.Icon({
            iconUrl: 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="1" height="1"><circle cx="0.5" cy="0.5" r="0.3" fill="%23FF0000"/></svg>',
            iconSize: new T.Point(1, 1),
            iconAnchor: new T.Point(0.5, 0.5)
        });
        
        // 优化批量添加点的速度
        const batchSize = 2000; // 增加每批处理的点数
        const concurrentBatches = 4; // 并发批次数量
        
        // 预创建点击事件处理函数，避免重复创建
        function createClickHandler(point, index) {
            return function() {
                const infoWindow = new T.InfoWindow({
                    content: `点${index + 1}<br/>经度: ${point.lng.toFixed(6)}<br/>纬度: ${point.lat.toFixed(6)}`,
                    offset: new T.Point(0, -20)
                });
                infoWindow.open(map, point);
            };
        }
        
        // 使用setTimeout实现更高效的批量添加，避免阻塞UI
        let currentIndex = 0;
        
        function addBatch() {
            if (currentIndex >= points.length) {
                console.log(`已显示${points.length}个轨迹点`);
                return;
            }
            
            // 添加当前批次的点
            const endIndex = Math.min(currentIndex + batchSize, points.length);
            const markersToAdd = [];
            
            // 先创建所有标记
            for (let i = currentIndex; i < endIndex; i++) {
                const point = points[i];
                const index = i;
                
                const marker = new T.Marker(point, {
                    icon: smallRedDotIcon
                });
                
                // 添加点击事件
                marker.addEventListener('click', createClickHandler(point, index));
                
                markersToAdd.push(marker);
            }
            
            // 批量添加到地图和数组
            markersToAdd.forEach(marker => {
                map.addOverLay(marker);
                currentTracks.push(marker);
            });
            
            currentIndex = endIndex;
            
            // 使用setTimeout而不是requestAnimationFrame，减少对渲染周期的依赖
            // 设置为0，将任务放入微任务队列，但允许UI有短暂的呼吸空间
            setTimeout(addBatch, 0);
        }
        
        // 启动批量添加
        addBatch();
    }
    
    // 恢复原始的clearTrackOverlays函数
    function clearTrackOverlays(resetArray = true){        
        try {
            currentTracks.forEach(pl => {
                if (pl && map && map.removeOverLay) {
                    try { map.removeOverLay(pl); } catch (e) { console.warn('移除轨迹失败:', e); }
                }
            });
            if (resetArray) currentTracks = [];
        } catch (e) {
            console.warn('清空轨迹时出错:', e);
        }
    }

    function parseTrackText(text){
        // 选择输入坐标系（优先使用轨迹页签专属选择器，若未设置则回退到绘制页签选择器）
        const coordSysEl = document.getElementById('trackCoordSysSelect') || document.getElementById('coordSysSelect');
        const coordSys = (coordSysEl && coordSysEl.value) || 'wgs84';
        const isHash = text.indexOf('#') !== -1;
        const items = isHash ? text.split('#') : text.split(/\r?\n/);
        const pts = [];
        for (let i=0;i<items.length;i++){
            const raw = items[i];
            if (!raw) continue;
            const line = raw.trim();
            if (!line) continue;
            const parts = line.split(',');
            if (parts.length < 3) continue;
            let lng = parseFloat((parts[isHash ? 0 : 1] || '').trim());
            let lat = parseFloat((parts[isHash ? 1 : 2] || '').trim());
            // 初步过滤：数值合法性与正常范围
            if (!isFinite(lng) || !isFinite(lat)) continue;
            if (lng === 0 || lat === 0) continue; // 丢弃0.0异常点
            if (lng < -180 || lng > 180 || lat < -90 || lat > 90) continue; // 超出经纬度范围丢弃

            // 将输入坐标转换为WGS84
            let w;
            if (coordSys === 'wgs84' || coordSys === 'cgcs2000') {
                w = { lng, lat };
            } else if (coordSys === 'gcj02') {
                w = gcj02ToWgs84(lng, lat);
            } else if (coordSys === 'bd09') {
                const g = bd09ToGcj02(lng, lat);
                w = gcj02ToWgs84(g.lng, g.lat);
            } else {
                w = { lng, lat };
            }
            // 转换结果兜底检查
            if (!isFinite(w.lng) || !isFinite(w.lat)) continue;
            if (w.lng < -180 || w.lng > 180 || w.lat < -90 || w.lat > 90) continue;

            // 使用WGS84坐标绘制到地图
            pts.push(new T.LngLat(w.lng, w.lat));
        }
        return pts;
    }

    function drawTrackFromPoints(points){
        // 先移除旧轨迹（不影响轮廓）
        clearTrackOverlays(false);
        const polyline = new T.Polyline(points, {
            color: '#FF3B30',
            weight: 2.5,
            opacity: 0.9
        });
        if (map) {
            map.addOverLay(polyline);
        }
        currentTracks.push(polyline);
    }

    function clearTrackOverlays(resetArray = true){
        try {
            currentTracks.forEach(pl => {
                if (pl && map && map.removeOverLay) {
                    try { map.removeOverLay(pl); } catch (e) { console.warn('移除轨迹失败:', e); }
                }
            });
            if (resetArray) currentTracks = [];
        } catch (e) {
            console.warn('清空轨迹时出错:', e);
        }
    }


    function fitViewportToTrack(points){
        try {
            if (!map || !map.setViewport || !points || !points.length) return;
            map.setViewport(points);
        } catch (e) {
            console.warn('轨迹视图居中失败:', e);
        }
    }

    // ========= 轨迹回放功能 =========
    let playbackState = { points: [], idx: 0, speed: 1, timer: null, running: false, marker: null, line: null, path: [] };

    function bindPlaybackControls(){
        const startBtn = document.getElementById('playbackStartBtn');
        const pauseBtn = document.getElementById('playbackPauseBtn');
        const stopBtn = document.getElementById('playbackStopBtn');
        const speedSel = document.getElementById('playbackSpeedSelect');
        const timeSlider = document.getElementById('playbackTimeSlider');
        const timeCursor = document.getElementById('playbackTimeCursor');
        const ta = document.getElementById('trackTextarea');
        if (!startBtn || !pauseBtn || !stopBtn || !speedSel) return;

        // 初始按钮状态
        updatePlaybackButtonsState('idle');

        startBtn.addEventListener('click', function(){
            try {
                const text = (ta && ta.value || '').trim();
                if (!text) { alert('请粘贴轨迹文本（时间戳,经度,纬度）'); return; }
                const pts = parseTrackTextWithTime(text);
                if (pts.length < 2) { alert('有效轨迹点不足，至少需要两点'); return; }
                startPlayback(pts);
                // 状态在startPlayback中已设置为playing
            } catch (e) {
                alert('开始回放失败：' + (e && e.message ? e.message : e));
                console.error('开始回放异常:', e);
            }
        });

        pauseBtn.addEventListener('click', function(){
            if (!playbackState.running) {
                // 继续
                playbackState.running = true;
                scheduleNext();
                updatePlaybackButtonsState('playing');
            } else {
                // 暂停
                if (playbackState.timer) { clearTimeout(playbackState.timer); playbackState.timer = null; }
                playbackState.running = false;
                updatePlaybackButtonsState('paused');
            }
        });

        stopBtn.addEventListener('click', function(){ 
            stopPlayback(); 
            updatePlaybackButtonsState('idle');
        });

        speedSel.addEventListener('change', function(){
            const v = parseFloat(speedSel.value);
            playbackState.speed = (isFinite(v) && v > 0) ? v : 1;
        });

        if (timeSlider) {
            timeSlider.addEventListener('input', function(){
                const ms = parseInt(timeSlider.value, 10);
                const txt = formatTimeForLabel(ms);
                if (timeCursor) timeCursor.textContent = txt;
            });
            timeSlider.addEventListener('change', function(){
                jumpToSliderTime();
            });
        }
    }

    function parseTrackTextWithTime(text){
        const coordSysEl = document.getElementById('trackCoordSysSelect') || document.getElementById('coordSysSelect');
        const coordSys = (coordSysEl && coordSysEl.value) || 'wgs84';
        const isHash = text.indexOf('#') !== -1;
        const items = isHash ? text.split('#') : text.split(/\r?\n/);
        const out = [];
        for (let i=0;i<items.length;i++){
            const raw = items[i];
            if (!raw) continue;
            const line = raw.trim();
            if (!line) continue;
            const parts = line.split(',');
            if (parts.length < 3) continue;
            const tsRaw = (parts[isHash ? 2 : 0] || '').trim();
            const ts = (tsRaw || '').replace(/\D/g,'');
            let lng = parseFloat((parts[isHash ? 0 : 1] || '').trim());
            let lat = parseFloat((parts[isHash ? 1 : 2] || '').trim());
            if (!isFinite(lng) || !isFinite(lat)) continue;
            if (lng === 0 || lat === 0) continue;
            if (lng < -180 || lng > 180 || lat < -90 || lat > 90) continue;
            const t = parseTimestamp(ts);
            if (!t) continue;
            let w;
            if (coordSys === 'wgs84' || coordSys === 'cgcs2000') {
                w = { lng, lat };
            } else if (coordSys === 'gcj02') {
                w = gcj02ToWgs84(lng, lat);
            } else if (coordSys === 'bd09') {
                const g = bd09ToGcj02(lng, lat);
                w = gcj02ToWgs84(g.lng, g.lat);
            } else { w = { lng, lat }; }
            if (!isFinite(w.lng) || !isFinite(w.lat)) continue;
            if (w.lng < -180 || w.lng > 180 || w.lat < -90 || w.lat > 90) continue;
            out.push({ ll: new T.LngLat(w.lng, w.lat), time: t, ts });
        }
        out.sort((a,b)=>a.time - b.time);
        return out;
    }

    function parseTimestamp(ts){
        const tstr = (ts || '').replace(/\D/g,'');
        const m = tstr && tstr.match(/^\d{14}$/);
        if (!m) return null;
        const y = parseInt(tstr.slice(0,4),10);
        const M = parseInt(tstr.slice(4,6),10) - 1;
        const d = parseInt(tstr.slice(6,8),10);
        const h = parseInt(tstr.slice(8,10),10);
        const m2 = parseInt(tstr.slice(10,12),10);
        const s = parseInt(tstr.slice(12,14),10);
        const dt = new Date(y,M,d,h,m2,s);
        return isNaN(dt.getTime()) ? null : dt;
    }

    function startPlayback(points){
        console.log('[Playback] startPlayback: 点数=', points && points.length);
        stopPlayback();
        playbackState.points = points;
        playbackState.idx = 0;
        playbackState.speed = playbackState.speed || 1;
        playbackState.running = true;
        // 配置时间滑动条，并尊重现有滑块位置作为起始
        configureTimeSlider(points);
        // 启用滑块
        const slider = document.getElementById('playbackTimeSlider');
        if (slider) slider.disabled = false;
        let initIdx = 0;
        if (slider && slider.min && slider.max) {
            const ms = parseInt(slider.value, 10);
            if (isFinite(ms)) initIdx = findIndexByTime(points, ms);
        }
        playbackState.idx = initIdx;
        const first = points[initIdx];
        console.log('[Playback] 首点:', first && first.ts, first && first.ll, 'initIdx=', initIdx);
        playbackState.path = points.slice(0, initIdx+1).map(p=>p.ll);
        playbackState.line = new T.Polyline(playbackState.path, { color: '#00FFFF', weight: 3, opacity: 0.9 });
        if (map) {
            map.addOverLay(playbackState.line);
        }
        currentTracks.push(playbackState.line);
        // 创建并定位DOM标记以保证可见移动
        ensurePlaybackDom(first.ll);
        updatePlaybackDom(first.ll);
        updatePlaybackTimeLabel(first.ts);
        try { fitViewportToTrack(points.map(p=>p.ll)); } catch(e){}
        // 更新按钮状态
        updatePlaybackButtonsState('playing');
        scheduleNext();
    }

    function scheduleNext(){
        if (!playbackState.running) return;
        if (!playbackState.points || playbackState.idx >= playbackState.points.length - 1) {
            playbackState.running = false;
            console.log('[Playback] 回放结束：idx=', playbackState.idx, '点数=', playbackState.points ? playbackState.points.length : 0);
            updatePlaybackButtonsState('idle'); // 播放结束后按钮回到初始状态：开始可点，继续/结束灰化
            return;
        }
        const next = playbackState.points[playbackState.idx+1];
        const speed = playbackState.speed || 1;
        const delay = Math.max(4, Math.round(1000 / speed)); // 1x=1000ms/点，2x=500ms/点...
        console.log('[Playback] scheduleNext: idx=', playbackState.idx, '->', playbackState.idx+1, 'delay=', delay, 'speed=', speed);
        playbackState.timer = setTimeout(()=>{
            playbackState.idx++;
            const nextLL = next.ll;
            console.log('[Playback] 下一点:', next && next.ts, nextLL);
            try {
                // 维护路径数组
                playbackState.path = playbackState.path || [];
                playbackState.path.push(nextLL);
                console.log('[Playback] 路径长度=', playbackState.path.length);
                // 使用DOM标记进行移动（容器/图层坐标）
                if (!playbackDom.el) console.log('[Playback] DOM标记不存在，将尝试创建');
                updatePlaybackDom(nextLL);
                // 折线更新：优先setLngLats，兜底重建
                if (playbackState.line && typeof playbackState.line.setLngLats === 'function') {
                    try { playbackState.line.setLngLats(playbackState.path); }
                    catch(e){
                        console.warn('[Playback] setLngLats失败，重建折线', e);
                        if (map) { try { map.removeOverLay(playbackState.line); } catch(e){} }
                        playbackState.line = new T.Polyline(playbackState.path, { color: '#00FFFF', weight: 3, opacity: 0.9 });
                        if (map) map.addOverLay(playbackState.line);
                    }
                } else {
                    console.log('[Playback] 折线不支持setLngLats，重建');
                    if (playbackState.line && map) { try { map.removeOverLay(playbackState.line); } catch(e){} }
                    playbackState.line = new T.Polyline(playbackState.path, { color: '#00FFFF', weight: 3, opacity: 0.9 });
                    if (map) map.addOverLay(playbackState.line);
                }
            } catch(e) { console.warn('更新回放覆盖物失败:', e); }
            updatePlaybackTimeLabel(next.ts);
            scheduleNext();
        }, delay);
    }

    function stopPlayback(){
        if (playbackState.timer) { clearTimeout(playbackState.timer); playbackState.timer = null; }
        playbackState.running = false;
        playbackState.idx = 0;
        try {
            // 移除DOM标记
            removePlaybackDom();
            if (playbackState.marker && map) map.removeOverLay(playbackState.marker);
            if (playbackState.line && map) map.removeOverLay(playbackState.line);
        } catch(e){}
        playbackState.marker = null;
        playbackState.line = null;
        updatePlaybackTimeLabel('—');
        // 按钮回到初始状态
        updatePlaybackButtonsState('idle');
    }

    function updatePlaybackTimeLabel(text){
        const el = document.getElementById('playbackTimeLabel');
        if (el) el.textContent = '时间：' + (text || '—');
    }

    // 时间滑动条：配置与跳转
    function configureTimeSlider(points){
        try {
            const slider = document.getElementById('playbackTimeSlider');
            const cursor = document.getElementById('playbackTimeCursor');
            if (!slider || !points || !points.length) return;
            const minMs = points[0].time.getTime();
            const maxMs = points[points.length - 1].time.getTime();
            const prev = parseInt(slider.value, 10);
            slider.min = String(minMs);
            slider.max = String(maxMs);
            slider.step = '1000'; // 以秒为步进
            let val = (isFinite(prev) && prev >= minMs && prev <= maxMs) ? prev : minMs;
            slider.value = String(val);
            if (cursor) cursor.textContent = formatTimeForLabel(val);
        } catch(e) { console.warn('配置时间滑动条失败:', e); }
    }
    function formatTimeForLabel(ms){
        if (!isFinite(ms)) return '—';
        const d = new Date(ms);
        const pad = n => String(n).padStart(2,'0');
        const y = d.getFullYear();
        const M = pad(d.getMonth()+1);
        const da = pad(d.getDate());
        const h = pad(d.getHours());
        const m = pad(d.getMinutes());
        const s = pad(d.getSeconds());
        return `${y}-${M}-${da} ${h}:${m}:${s}`;
    }
    function findIndexByTime(points, ms){
        try {
            if (!points || !points.length) return 0;
            const n = points.length;
            const minMs = points[0].time.getTime();
            const maxMs = points[n-1].time.getTime();
            if (!isFinite(ms)) return 0;
            if (ms <= minMs) return 0;
            if (ms >= maxMs) return n-1;
            let lo = 0, hi = n - 1, ans = 0;
            while (lo <= hi) {
                const mid = (lo + hi) >> 1;
                const t = points[mid].time.getTime();
                if (t < ms) { lo = mid + 1; ans = lo; }
                else { hi = mid - 1; ans = mid; }
            }
            return Math.max(0, Math.min(n-1, ans));
        } catch(e){ console.warn('findIndexByTime失败:', e); return 0; }
    }
    function jumpToSliderTime(){
        try {
            const slider = document.getElementById('playbackTimeSlider');
            if (!slider || !playbackState.points || !playbackState.points.length) return;
            const ms = parseInt(slider.value, 10);
            if (!isFinite(ms)) return;
            const idx = findIndexByTime(playbackState.points, ms);
            playbackState.idx = idx;
            const pts = playbackState.points;
            const ll = pts[idx].ll;
            playbackState.path = pts.slice(0, idx+1).map(p=>p.ll);
            // 更新折线
            try {
                if (playbackState.line && typeof playbackState.line.setLngLats === 'function') {
                    playbackState.line.setLngLats(playbackState.path);
                } else {
                    if (playbackState.line && map) { try { map.removeOverLay(playbackState.line); } catch(e){} }
                    playbackState.line = new T.Polyline(playbackState.path, { color: '#00FFFF', weight: 3, opacity: 0.9 });
                    if (map) map.addOverLay(playbackState.line);
                }
            } catch(e){ console.warn('滑块更新折线失败:', e); }
            // 更新标记与时间
            ensurePlaybackDom(ll);
            updatePlaybackDom(ll);
            updatePlaybackTimeLabel(pts[idx].ts);
            // 若正在播放，立即按新位置继续
            if (playbackState.running) {
                if (playbackState.timer) { clearTimeout(playbackState.timer); playbackState.timer = null; }
                scheduleNext();
            }
        } catch(e) { console.warn('滑块跳转失败:', e); }
    }

    // DOM标记：使用容器坐标实现可见移动
    let playbackDom = { el: null, lastLL: null, bound: false };

    function ensurePlaybackDom(ll){
        try {
            playbackDom.lastLL = ll;
            const pane = (map && map.getPanes && map.getPanes().overlayPane) || document.getElementById('mapContainer');
            if (!pane) { console.warn('未找到overlayPane或mapContainer'); return; }
            if (!playbackDom.el) {
                const el = document.createElement('div');
                el.id = 'playbackDomMarker';
                el.style.position = 'absolute';
                el.style.width = '16px';
                el.style.height = '16px';
                el.style.borderRadius = '50%';
                el.style.background = '#2C64A7';
                el.style.border = '2px solid #fff';
                el.style.boxShadow = '0 0 0 1px rgba(0,0,0,.25)';
                el.style.zIndex = '9999';
                pane.appendChild(el);
                playbackDom.el = el;
                console.log('[Playback] 创建DOM标记，父节点=', pane === document.getElementById('mapContainer') ? '#mapContainer' : 'overlayPane');
                bindPlaybackDomEvents();
            }
            updatePlaybackDom(ll);
        } catch(e) { console.warn('创建DOM标记失败:', e); }
    }

    function updatePlaybackDom(ll){
        try {
            playbackDom.lastLL = ll;
            if (!map || !playbackDom.el || !ll) { console.log('[Playback] update取消：map/el/ll缺失'); return; }
            let p;
            if (typeof map.lngLatToLayerPoint === 'function') {
                p = map.lngLatToLayerPoint(ll);
                console.log('[Playback] 使用layerPoint定位:', ll && ll.lng, ll && ll.lat, '=>', p && p.x, p && p.y);
            } else if (typeof map.lngLatToContainerPoint === 'function') {
                p = map.lngLatToContainerPoint(ll);
                console.log('[Playback] 使用containerPoint定位:', ll && ll.lng, ll && ll.lat, '=>', p && p.x, p && p.y);
            } else {
                console.warn('地图对象不支持lngLat到像素坐标转换');
                return;
            }
            playbackDom.el.style.left = p.x + 'px';
            playbackDom.el.style.top = p.y + 'px';
        } catch(e) { console.warn('更新DOM标记位置失败:', e); }
    }

    function bindPlaybackDomEvents(){
        if (playbackDom.bound) return;
        const updater = function(){
            try {
                if (!map || !playbackDom.el || !playbackDom.lastLL) return;
                let p;
                if (typeof map.lngLatToLayerPoint === 'function') {
                    p = map.lngLatToLayerPoint(playbackDom.lastLL);
                } else if (typeof map.lngLatToContainerPoint === 'function') {
                    p = map.lngLatToContainerPoint(playbackDom.lastLL);
                }
                if (!p) return;
                playbackDom.el.style.left = p.x + 'px';
                playbackDom.el.style.top = p.y + 'px';
            } catch(e){}
        };
        try {
            map.addEventListener('move', updater);
            map.addEventListener('zoom', updater);
            playbackDom.bound = true;
        } catch(e){}
    }

    function removePlaybackDom(){
        try {
            const el = playbackDom.el;
            playbackDom.lastLL = null;
            if (el && el.parentNode) el.parentNode.removeChild(el);
        } catch(e){}
        playbackDom.el = null;
        playbackDom.bound = false;
    }

</script>
</body>

</html>
