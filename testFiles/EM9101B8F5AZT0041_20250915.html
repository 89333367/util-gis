<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>展示轮廓</title>
    <style>
        body {
            margin: 0;
            padding: 0;
        }

        #mapContainer {
            width: 100vw;
            height: 100vh;
            position: relative;
        }

        #mapLoading {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 999;
            transition: opacity 0.3s;
        }

        .loading-text {
            font-size: 16px;
            color: #333;
            padding: 10px 20px;
            background: white;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .wkt-input-container {
            position: absolute;
            top: 20px;
            right: 10px;
            z-index: 1000;
            background: white;
            padding: 12px;
            border-radius: 6px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            width: min(320px, 90vw);
            box-sizing: border-box;
            transition: all 0.3s;
        }

        .minimize-btn {
            position: absolute;
            top: -5px;
            right: -4px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #f0f0f0;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: #666;
            z-index: 1001;
            transition: background 0.2s;
        }

        .minimize-btn:hover {
            background: #e0e0e0;
        }

        .content-wrapper {
            transition: all 0.3s;
        }

        .wkt-input-container.minimized {
            width: 40px;
            height: 40px;
            padding: 0;
        }

        .wkt-input-container.minimized .content-wrapper {
            display: none;
        }

        .wkt-input-container.minimized .min-icon {
            display: none;
        }

        .wkt-input-container.minimized .restore-icon {
            display: inline;
        }

        #wktTextarea {
            width: 100%;
            height: 120px;
            margin-bottom: 10px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: monospace;
            resize: vertical;
            box-sizing: border-box;
        }

        .button-group {
            display: flex;
            gap: 10px;
        }

        /* 页签样式 */
        .tabs-header {
            display: flex;
            gap: 8px;
            margin-bottom: 8px;
        }
        .tab-btn {
            flex: 1;
            padding: 6px 0;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            background: #f5f5f5;
            color: #333;
            transition: background 0.2s;
        }
        .tab-btn.active { background: #337AFF; color: #fff; }
        .tab-pane { display: none; }
        .tab-pane.active { display: block; }

        /* Multi → Polygons 分割器样式 */
        .split-section {
            margin-top: 10px;
            padding: 10px;
            background: #fafafa;
            border: 1px solid #eee;
            border-radius: 6px;
        }
        .split-section .title {
            font-size: 13px;
            font-weight: 600;
            color: #333;
            margin-bottom: 6px;
        }
        .split-section .desc {
            font-size: 12px;
            color: #666;
            margin-bottom: 8px;
        }
        #multiInput, #polyOutput {
            width: 100%;
            height: 90px;
            margin-bottom: 8px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: monospace;
            resize: vertical;
            box-sizing: border-box;
        }
        .split-actions {
            display: flex;
            gap: 8px;
            margin-bottom: 8px;
        }
        .split-actions button {
            flex: 1;
            padding: 6px 0;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            transition: background 0.2s;
        }
        #splitMultiBtn { background: #337AFF; color: #fff; }
        #splitMultiBtn:hover { background: #2860E0; }
        #copyPolysBtn { background: #f5f5f5; color: #333; }
        #copyPolysBtn:hover { background: #e0e0e0; }
        #drawButton,
        #clearButton,
        #drawTrackButton,
        #clearTrackButton {
            width: 50%;
            padding: 8px 0;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.2s;
        }

        #drawButton,
        #drawTrackButton {
            background: #337AFF;
            color: white;
        }

        #drawButton:hover,
        #drawTrackButton:hover {
            background: #2860E0;
        }

        #clearButton,
        #clearTrackButton {
            background: #f5f5f5;
            color: #333;
        }

        #clearButton:hover,
        #clearTrackButton:hover {
            background: #e0e0e0;
        }

        #drawButton:disabled,
        #clearButton:disabled,
        #drawTrackButton:disabled,
        #clearTrackButton:disabled {
            background: #e0e0e0;
            color: #999;
            cursor: not-allowed;
        }

        .tip {
            font-size: 12px;
            color: #666;
            margin-bottom: 8px;
            line-height: 1.4;
        }

        .area-label {
             position: absolute;
             background: rgba(255, 0, 0, 0.85);
             border: 1px solid #000;
             border-radius: 3px;
             padding: 4px 6px;
             font-size: 12px;
             color: #fff;
             font-weight: 600;
             box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
             white-space: nowrap;
             z-index: 9999;
             pointer-events: none;
         }
         /* 默认隐藏标签容器下的标签 */
          .labels-hidden .area-label { display: none; }

          /* Batch → Generator 样式 */
          .batch-section { margin-top: 10px; padding: 10px; background: #fafafa; border: 1px solid #eee; border-radius: 6px; }
          .batch-section .title { font-size: 13px; font-weight: 600; color: #333; margin-bottom: 6px; }
          .batch-section .desc { font-size: 12px; color: #666; margin-bottom: 8px; }
          #batchInput, #multiOutput { width: 100%; height: 90px; margin-bottom: 8px; padding: 8px; border: 1px solid #ddd; border-radius: 4px; font-family: monospace; resize: vertical; box-sizing: border-box; }
          .batch-actions { display: flex; gap: 8px; margin-bottom: 8px; }
          .batch-actions button { flex: 1; padding: 6px 0; border: none; border-radius: 4px; cursor: pointer; font-size: 13px; transition: background 0.2s; }
          #generateMultiBtn { background: #337AFF; color: #fff; }
          #generateMultiBtn:hover { background: #2860E0; }
          #copyMultiBtn { background: #f5f5f5; color: #333; }
          #copyMultiBtn:hover { background: #e0e0e0; }
          
          /* 左侧工具条样式 */
          #leftToolbar {
              position: absolute;
              bottom: 20px;
              left: 20px;
              z-index: 1000;
              background: white;
              border-radius: 4px;
              box-shadow: 0 1px 4px rgba(0, 0, 0, 0.15);
              padding: 6px 0;
              display: flex;
              flex-direction: column;
              gap: 2px;
              width: 40px;
          }
          
          .toolbar-btn {
              width: 100%;
              padding: 6px 0;
              border: none;
              background: transparent;
              cursor: pointer;
              font-size: 12px;
              color: #333;
              transition: background 0.2s;
              display: flex;
              flex-direction: column;
              align-items: center;
              justify-content: center;
          }
          
          .toolbar-btn:hover {
              background: #f5f5f5;
          }
          
          .toolbar-btn span {
              font-size: 12px;
              margin-top: 4px;
          }
          
          .toolbar-divider {
            height: 1px;
            background-color: #e0e0e0;
            margin: 2px 4px;
        }
        
        /* 颜色选择器样式 */
        .color-picker-container {
            margin-top: 10px;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 4px;
            border: 1px solid #e0e0e0;
        }
        
        .color-picker-title {
            font-size: 13px;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }
        
        .color-picker-row {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .color-picker-label {
            font-size: 12px;
            color: #555;
            width: 60px;
            flex-shrink: 0;
        }
        
        .color-picker {
            width: 30px;
            height: 30px;
            border: 1px solid #ccc;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 8px;
            flex-shrink: 0;
        }
        
        .color-input {
            flex: 1;
            padding: 4px 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 12px;
            font-family: monospace;
        }
        
        .opacity-slider-container {
            display: flex;
            align-items: center;
            margin-top: 8px;
        }
        
        .opacity-slider {
            flex: 1;
            margin-right: 8px;
        }
        
        .opacity-value {
            font-size: 12px;
            color: #555;
            width: 40px;
            text-align: right;
        }
      </style>
    <script src="https://api.tianditu.gov.cn/api?v=4.0&tk=648f621977051d0199ff0f965d3fd322"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/Turf.js/6.5.0/turf.min.js"></script>
    <script src="https://lib.baomitu.com/terraformer/1.0.12/terraformer.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://unpkg.com/terraformer-wkt-parser@1.2.1/terraformer-wkt-parser.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- 已移除动态备用加载器 ensureTerraformer：改为仅使用静态脚本标签加载 Terraformer 核心库与 WKT 解析器 -->
    <script>
        // 检查Turf.js是否加载成功
        window.addEventListener('load', function () {
            if (typeof turf === 'undefined') {
                console.warn('Turf.js加载失败，已启用备用面积算法');
            } else {
                console.log('Turf.js加载成功');
            }
        });
    </script>
</head>

<body>
<!-- 左侧工具条 -->
<div id="leftToolbar">
    <button class="toolbar-btn" id="measureDistanceBtn" title="测距">
        <span>测距</span>
    </button>
    <div class="toolbar-divider"></div>
    <button class="toolbar-btn" id="measureAreaBtn" title="测面">
        <span>测面</span>
    </button>
    <div class="toolbar-divider"></div>
    <button class="toolbar-btn" id="mapTypeBtn" title="切换地图类型">
        <span>地图</span>
    </button>
</div>

<div id="mapContainer">
    <div id="mapLoading">
        <div class="loading-text">地图正在加载中...</div>
    </div>
</div>

<div class="wkt-input-container">
    <div class="minimize-btn" id="minimizeBtn">
        <span class="min-icon">−</span>
        <span class="restore-icon" style="display:none;">+</span>
    </div>

    <div class="content-wrapper">
        <div class="tabs-header">
            <button class="tab-btn active" id="tabDrawBtn">轮廓</button>
            <button class="tab-btn" id="tabTrackBtn">轨迹</button>
            <button class="tab-btn" id="tabSplitBtn">分割器</button>
            <button class="tab-btn" id="tabBatchBtn">合并器</button>
        </div>
        <div class="tab-pane active" id="tabDraw">
            <div class="tip">请输入WKT字符串（支持POLYGON/MULTIPOLYGON）：</div>
            <textarea id="wktTextarea">MULTIPOLYGON (((122.82423198807986 43.10579442678561, 122.82423197271304 43.10579438242819, 122.82423196991179 43.10579433671011, 122.82423197979169 43.10579429152217, 122.82423200194442 43.105794248733254, 122.82423203545362 43.10579421011304, 122.82423207893336 43.10579417725878, 122.82423213058554 43.105794151529274, 122.82423218827388 43.10579413398862, 122.82423224961246 43.10579412536229, 122.82423231206451 43.10579412600703, 122.8242337537105 43.105794249037125, 122.82423378456785 43.10579424937711, 122.82423683623722 43.10579405688327, 122.82423686648595 43.105794052694506, 122.8242398327798 43.10579340836406, 122.82425402540953 43.10578915057551, 122.82425408121027 43.105789138215634, 122.82425413919331 43.105789133803974, 122.82425419726938 43.10578913749949, 122.82425425334635 43.10578914916903, 122.82429743566392 43.10580148582195, 122.8243002901333 43.10580207395855, 122.82430031954974 43.10580207780155, 122.82430327553227 43.10580224874475, 122.82430330540738 43.10580224833056, 122.82430625044891 43.1058019955779, 122.82430627964585 43.10580199092233, 122.82430910170382 43.10580132408954, 122.82430912911163 43.10580131536982, 122.82431172082212 43.10580025982622, 122.82431174539853 43.10580024737398, 122.82431400816061 43.105798843277476, 122.82431402897073 43.1057988275663, 122.82431587669939 43.10579712833477, 122.8243158929511 43.105797109962715, 122.82431725534998 43.105795180242886, 122.82431726642533 43.10579515990851, 122.82431792252322 43.10579350082182, 122.8243179436537 43.10579346159032, 122.82431797440381 43.105793425936874, 122.82431801369364 43.10579339511388, 122.82431806014289 43.105793370204054, 122.82431811212 43.10579335208243, 122.82431816779915 43.10579334138553, 122.82432850075719 43.10579209953329, 122.82433228953913 43.105791264573476, 122.82481702215566 43.10563235222699, 122.8249011305907 43.10560731605687, 122.82517707362145 43.105519334225946, 122.82549088575708 43.10542139290062, 122.82581876095195 43.1053244285924, 122.82582145038444 43.10532339338668, 122.82582147592477 43.10532338102436, 122.82582383073105 43.10532197465728, 122.82582385240677 43.10532195882065, 122.82582577854717 43.105320237455885, 122.82582579549248 43.10532021877744, 122.82582721604574 43.105318251158614, 122.8258272275837 43.10531823038477, 122.8258280858192 43.1053160950896, 122.82582809147104 43.105316073120825, 122.82582835416238 43.10531382953724, 122.82582836402284 43.105313789126825, 122.82582838373803 43.10531375070135, 122.82582841265214 43.105313715539495, 122.8258284498027 43.10531368481139, 122.82582849395345 43.10531365953964, 122.82583815684099 43.10530910306305, 122.82583819753677 43.10530908691182, 122.82583824108289 43.10530907542482, 122.825928106323 43.10529084149122, 122.82592977450646 43.10529042577725, 122.8260577784722 43.10525242365275, 122.82606016546893 43.10525152800432, 122.82606018829603 43.10525151748089, 122.82606234418357 43.10525031574246, 122.82606834420156 43.10524631430495, 122.8260703199693 43.105244714647434, 122.82607033765555 43.10524469719015, 122.82607185548314 43.1052428484734, 122.82607186824501 43.10524282884486, 122.82607287120932 43.105240800409085, 122.82607287856744 43.10524077934643, 122.82607332904276 43.105238647287635, 122.82607333072134 43.10523862558035, 122.82607321180801 43.10523646988355, 122.82607320774389 43.10523644834599, 122.82607252390326 43.10523434988142, 122.826072514249 43.10523432932206, 122.82607129113468 43.105232366812594, 122.82607127625332 43.105232348003724, 122.82606955975065 43.10523059507351, 122.8260695401994 43.10523057871912, 122.82606739470326 43.10522910112975, 122.82606737121537 43.10522908784343, 122.82606487721398 43.10522794102631, 122.82606485067141 43.10522793130703, 122.82606210172673 43.10522715828474, 122.82606207312487 43.105227152496994, 122.82605917236336 43.105226782269426, 122.82605914277543 43.10522678063035, 122.82605619901881 43.10522682708662, 122.82605616962825 43.10522682965123, 122.82605326456289 43.105227296732274, 122.82604345623015 43.10522961886052, 122.82604339904157 43.10522962810057, 122.82604334049904 43.10522962921874, 122.82604328273115 43.105229622174384, 122.8260432278384 43.10522960722362, 122.82604317781662 43.10522958491009, 122.8260431344846 43.1052295560451, 122.82604309941802 43.105229521678204, 122.82604307389187 43.10522948305896, 122.8260430588343 43.10522944159162, 122.8260430547927 43.10522939878389, 122.82604306191415 43.105229356192325, 122.82604307993968 43.10522931536552, 122.82604310821381 43.105229277788, 122.82604314570855 43.10522924482604, 122.82604319106058 43.10522921767817, 122.82604324262086 43.1052291973315, 122.82612697254713 43.10520336445975, 122.82612966572687 43.10520228742182, 122.82612969122845 43.10520227461938, 122.82613203439642 43.105200823271545, 122.82613205587018 43.10520080697773, 122.82613395357889 43.10519904044025, 122.82613397015061 43.10519902131825, 122.82613534509711 43.105197011551304, 122.82613535606357 43.10519699043337, 122.82613615877808 43.10519479709192, 122.82613815722468 43.10518579677952, 122.82613834074337 43.10518352727397, 122.82613833939806 43.10518350438985, 122.8261378902163 43.105181254868725, 122.8261378825577 43.10518123266097, 122.82613681938884 43.10517909682038, 122.82613680573627 43.105179076215116, 122.82613517286968 43.10517714303004, 122.82613515379214 43.10517712488535, 122.82613301925011 43.10517547488911, 122.82613299554247 43.10517545996084, 122.82613044824663 43.10517416188962, 122.82613042089581 43.105174150799186, 122.8261275669625 43.10517325872865, 122.82612753710772 43.10517325193807, 122.82612449542626 43.10517280303001, 122.82612446431199 43.105172800822395, 122.82612136159365 43.10517281377755, 122.82612133059321 43.10517281623867, 122.82611826577016 43.1051732964458, 122.82609052893841 43.1051798601386, 122.82609046915726 43.105179869596455, 122.82609040800367 43.105179870187264, 122.82609034790302 43.10517986188763, 122.82609029123833 43.10517984502665, 122.82609024025702 43.105179820272966, 122.82609019698046 43.10517978860822, 122.82609016312507 43.1051797512881, 122.8260901400334 43.10517970979258, 122.82609012862105 43.10517966576719, 122.82609012934061 43.105179620957784, 122.82609035290595 43.105178157896795, 122.82609035329902 43.105178135834244, 122.82609009843102 43.10517595420137, 122.8260900929263 43.105175932508736, 122.82608926052936 43.10517382955842, 122.82608924933962 43.10517380907426, 122.82608787157893 43.10517186606805, 122.82608785513638 43.10517184758345, 122.8260859852507 43.105170139602194, 122.82608596419131 43.105170123831904, 122.82608367443581 43.10516871687437, 122.82608364957292 43.10516870442736, 122.82608102842735 43.10516765286086, 122.82608100072154 43.105167644218085, 122.82607814947151 43.10516698867682, 122.82607811999317 43.105166984172214, 122.82607514881487 43.10516674998713, 122.82607511877877 43.10516674979541, 122.82607211255076 43.10516694907231, 122.82603510529293 43.105172112891665, 122.826035045703 43.10517211685888, 122.82603498619422 43.10517211228448, 122.8260349290254 43.10517209934208, 122.8260348763665 43.10517207852295, 122.82603483021643 43.105172050617384, 122.82603479232701 43.10517201668457, 122.82603476413635 43.10517197801257, 122.82603474671461 43.10517193606932, 122.82603474072313 43.1051718924469, 122.82603474638913 43.10517184880111, 122.82603476349772 43.1051718067887, 122.82603479139942 43.105171768004375, 122.82603482903511 43.105171733920315, 122.8260348749763 43.10517170583031, 122.82603492747903 43.10517168480056, 122.82605203010276 43.10516634663149, 122.82605463430858 43.10516530320519, 122.82605465902527 43.105165290863454, 122.82605693687547 43.10516389655062, 122.82605695784862 43.105163880924636, 122.82605882252086 43.10516218887294, 122.82605883894962 43.10516217055951, 122.82606021936105 43.10516024527125, 122.82606023062054 43.10516022496709, 122.82606107414854 43.10515813983599, 122.82606107980874 43.10515811831642, 122.8260613542976 43.10515595282909, 122.8260613541431 43.105155930913504, 122.82606104912912 43.1051537676204, 122.82606104316572 43.10515374614431, 122.82606017027632 43.10515166751117, 122.8260601587315 43.10515164729413, 122.82605875124213 43.10514973256071, 122.82605873455526 43.10514971437192, 122.82605684612041 43.10514803652895, 122.82605682492897 43.10514802106332, 122.8260545275369 43.10514664407133, 122.82605450264747 43.105146631917435, 122.82605188387681 43.10514560826867, 122.82605185623899 43.10514559989023, 122.82604901591912 43.10514496860676, 122.82604898658633 43.105144964323046, 122.82604603299247 43.10514474947, 122.82604600308251 43.105144749444264, 122.82604304880786 43.105144959212, 122.82604301953474 43.10514496343466, 122.82604014890545 43.10514559717316, 122.82595317554048 43.105171788060694, 122.82595311623426 43.105171800982625, 122.82595305459675 43.105171804932255, 122.82595299312968 43.10517179974931, 122.8259529343277 43.10517178564415, 122.82595288057759 43.10517176318926, 122.82595283406084 43.105171733296025, 122.82595279666543 43.10517169717771, 122.8259527699091 43.10517165630027, 122.82595275487795 43.10517161232281, 122.82595275218189 43.10517156703025, 122.82595276193035 43.105171522260875, 122.8259527837278 43.10517147983174, 122.82595281668945 43.10517144146495, 122.82595285947751 43.10517140871768, 122.8259529103553 43.10517138291906, 122.82598143399389 43.10515984395886, 122.82598392655969 43.10515858319851, 122.82598394982338 43.10515856872469, 122.82598605180358 43.10515697092371, 122.8259860706888 43.10515695335856, 122.8259876986507 43.105155081938676, 122.82598771240875 43.105155061978834, 122.82598880173039 43.10515299122626, 122.8259888098151 43.10515296966387, 122.82598931725602 43.1051507817768, 122.82598931934628 43.1051507594687, 122.82598922476346 43.10514854129587, 122.82598922077638 43.1051485191256, 122.8259885279246 43.105146358717626, 122.82598851801824 43.10514633756625, 122.82598725440049 43.105144320679706, 122.82598723896844 43.10514430138763, 122.82598545474328 43.105142508082125, 122.82598543439804 43.10514249141478, 122.82598320039108 43.10514099287635, 122.82598317593973 43.10514097949493, 122.82598058082954 43.10513983520778, 122.82598055324331 43.10513982564379, 122.82597770004249 43.10513908103026, 122.82597767041604 43.10513907566321, 122.82597467238226 43.105138760280745, 122.82597464189192 43.105138759323715, 122.82597161803184 43.10513888569143, 122.82597158796304 43.10513888917366, 122.82596862910394 43.10513945903457, 122.82594663402688 43.10514545823532, 122.82594475071089 43.10514608109399, 122.8258477457559 43.10518408461642, 122.82584493226446 43.10518550405336, 122.82582975649541 43.10519513738329, 122.82582970766983 43.10519516272629, 122.82582965306433 43.105195180651386, 122.82582959475168 43.10519519047818, 122.82582953494529 43.105195191833666, 122.82582947591526 43.10519518466641, 122.82582941990216 43.10519516924843, 122.82582936903226 43.105195146165, 122.82582815760739 43.105194468492655, 122.82582813351635 43.1051944574457, 122.82582561500335 43.105193528592935, 122.82582558854277 43.10519352099594, 122.82582343074164 43.10519306536297, 122.82582337444398 43.10519304891511, 122.82582332365075 43.1051930246867, 122.82582328034022 43.10519299362127, 122.82582324619914 43.1051929569287, 122.8258232225569 43.105192916037936, 122.82581829136967 43.105181313254214, 122.82581827953561 43.105181272334384, 122.82581827824154 43.10518123051667, 122.82581828753226 43.10518118924588, 122.82581830708669 43.105181149947946, 122.82581833622937 43.10518111398061, 122.82581837395325 43.10518108258659, 122.82581841895508 43.10518105685053, 122.82581846967993 43.10518103766164, 122.82592873978726 43.10514843606084, 122.8260283716606 43.10511523614782, 122.8260309294243 43.10511415242745, 122.8260309536291 43.105114139722915, 122.82603317699638 43.10511271393325, 122.82603319739027 43.10511269803773, 122.82603500235716 43.105110984044934, 122.82603501816934 43.105110965559234, 122.82603633655353 43.10510902810908, 122.8260363471867 43.10510900773164, 122.82603712918586 43.10510692001164, 122.8260371342388 43.10510689851135, 122.82603735031296 43.105104739385936, 122.82603734959444 43.10510471757536, 122.82603699158172 43.105102568604, 122.82603698511898 43.105102547308086, 122.82603606654311 43.10510048966877, 122.82603605458044 43.105100469691266, 122.8260346101406 43.10509858111141, 122.82603459312988 43.10509856320677, 122.82603267739003 43.10509691502784, 122.8260326559735 43.105096899872166, 122.82603034130106 43.10509555435422, 122.82603031628766 43.10509554252017, 122.8260276901193 43.105094550489916, 122.82602766245407 43.10509454242471, 122.82602482399322 43.105093941356024, 122.8260247947214 43.105093937364316, 122.82602185119082 43.10509374996259, 122.8260218214181 43.10509375019518, 122.82601888400963 43.105093983539504, 122.82601885493322 43.1050939879765, 122.82601600654802 43.105094640776926, 122.82587067608125 43.105139661660175, 122.82587061889056 43.10513967472874, 122.82587055932532 43.105139679413526, 122.82587049965218 43.10513967553629, 122.82587044214155 43.105139663244564, 122.82587038898174 43.10513964300603, 122.82587034219543 43.10513961559076, 122.82587030356272 43.10513958204188, 122.82587027455374 43.10513954363593, 122.82587025627215 43.105139501834245, 122.82587024941368 43.105139458227335, 122.82587025423915 43.105139414474436, 122.82587027056499 43.10513937224035, 122.82587029777004 43.10513933313205, 122.82587033481923 43.10513929863756, 122.82587038030269 43.10513927006944, 122.82587043248995 43.105139248514654, 122.82603421281782 43.10508628843029, 122.82603679455508 43.10508522226248, 122.82603681901853 43.105085209711575, 122.82603906938871 43.105083796781315, 122.82603909006407 43.105083780991094, 122.82604092354579 43.105082074994485, 122.82604093964707 43.10508205656525, 122.82604228656126 43.105080122336666, 122.82604229747712 43.10508010196786, 122.8260431066367 43.10507801301478, 122.82604311195165 43.105077991481636, 122.8260433526058 43.1050758271912, 122.82604335211794 43.105075805311486, 122.82604301512079 43.10507364793514, 122.82604300884898 43.10507362654087, 122.82604210700741 43.10507155806547, 122.82604209519016 43.10507153797005, 122.82604066277736 43.10506963700573, 122.82604064586354 43.10506961897206, 122.82603873731686 43.10506795776275, 122.82603871594884 43.105067942475856, 122.82603640380026 43.10506658415352, 122.82603637878996 43.105066572194524, 122.82603375090876 43.10506556837977, 122.82603372320762 43.10506556020366, 122.82603087946246 43.10506494904499, 122.82603085012283 43.10506494496226, 122.82602789858632 43.10506474968598, 122.82602786872317 43.10506474985178, 122.82602492156454 43.105064977879074, 122.8260248923852 43.10506498227618, 122.82602203344085 43.10506563244632, 122.82599297020782 43.105074588001784, 122.82599291393322 43.10507460084638, 122.82599285534619 43.1050746055774, 122.82599279660468 43.105074602020544, 122.82599273987226 43.105074590306856, 122.82599268723868 43.10507457086778, 122.82599264064247 43.10507454441932, 122.82599260179997 43.105074511935626, 122.82599257214186 43.10507447461319, 122.82599255276055 43.105074433826715, 122.82599254436987 43.1050743910785, 122.8259925472789 43.105074347943045, 122.82599256138045 43.10507430600919, 122.82599258615521 43.10507426682148, 122.8259962547914 43.10506967804551, 122.82599681515156 43.105068744299096, 122.8259968434821 43.105068707105545, 122.82599688087008 43.105068674489814, 122.82599692597591 43.10506864762042, 122.82599697718362 43.10506862746005, 122.82605296842866 43.10505136575754, 122.82605563279171 43.1050503038958, 122.82605565804747 43.10505029128745, 122.82605798168782 43.10504886300619, 122.82605800302497 43.10504884697506, 122.82605989345284 43.105047109126446, 122.82605991002247 43.105047090310165, 122.8260612919888 43.105045112069796, 122.82606130313029 43.10504509121876, 122.82606212162558 43.10504295133079, 122.82606212689616 43.10504292927366, 122.82606234933954 43.105040712918075, 122.82606234852925 43.105040690533606, 122.8260619660664 43.10503848593304, 122.82606195920765 43.105038464111885, 122.82606098706248 43.105036359021085, 122.82606097442854 43.105036338632345, 122.8260594512982 43.10503441684631, 122.82605943339081 43.1050343987001, 122.82605741990436 43.105032736715955, 122.82605739743744 43.105032721536006, 122.826054973742 43.10503138550937, 122.82605494760958 43.10503137389957, 122.82605221018143 43.10503041701158, 122.82605218142375 43.10503040943411, 122.82604923922742 43.10502986977419, 122.82604920898935 43.1050298665306, 122.82604617914035 43.10502976558018, 122.82604614870148 43.105029766796505, 122.82604312176832 43.10503011312402, 122.8259801215759 43.105042114420186, 122.82597716131122 43.105042927121886, 122.82597713281328 43.10504293753649, 122.82597446595418 43.105044181275254, 122.82597444101245 43.10504419578317, 122.82597218287852 43.105045816776965, 122.8259721625709 43.10504583475113, 122.82597041081065 43.10504776290345, 122.8259703960161 43.1050477835659, 122.82596922638096 43.10504993549758, 122.82596921775992 43.10504995789978, 122.8259686770293 43.10505226381721, 122.82596862658814 43.105052818669, 122.82596861765498 43.10505285957187, 122.82596859864096 43.105052898581974, 122.8259685701906 43.105052934377476, 122.82596853326764 43.1050529657455, 122.82596848912347 43.10505299162314, 122.82596843925364 43.10505301113355, 122.82590803313201 43.10507163348659, 122.82590567182702 43.10507254790717, 122.8259056492749 43.1050725585959, 122.82590352226487 43.10507377453159, 122.82584868823625 43.105111209329266, 122.82584864478838 43.10511123405614, 122.82584859601695 43.105111252706564, 122.8258444105634 43.105112517893126, 122.82582715939948 43.10511717297939, 122.82582709979098 43.10511718424676, 122.82582703831316 43.10511718657713, 122.82582697743614 43.10511717987689, 122.82582691960566 43.10511716441522, 122.82582686714545 43.105117140813334, 122.82582682216307 43.10511711001953, 122.82582678646591 43.10511707327101, 122.82582676148827 43.10511703204429, 122.82582674823354 43.10511698799575, 122.82582674723442 43.10511694289519, 122.82582675853097 43.10511689855464, 122.8258267816693 43.10511685675562, 122.82582720947778 43.10511626296534, 122.82582722081825 43.10511624261401, 122.82582807091593 43.10511415195106, 122.82582807662558 43.105114130370346, 122.82582835430765 43.105111958398496, 122.82582835416743 43.10511193641635, 122.82582804878349 43.10510976644139, 122.82582804279883 43.10510974490128, 122.82582716606207 43.105107660153344, 122.825827154462 43.10510763988005, 122.82582574000003 43.10510572031998, 122.82582572323014 43.10510570209249, 122.82582382529446 43.10510402134455, 122.82582380399752 43.105104005861385, 122.82582149538352 43.10510262839084, 122.8258214703769 43.10510261624623, 122.82581883963185 43.10510159488629, 122.82581881187417 43.105101586545715, 122.82581595990084 43.10510096047072, 122.82581593045657 43.10510095625414, 122.82581296664227 43.10510074947716, 122.82581293664127 43.10510074954641, 122.82580997466336 43.105100969998354, 122.82580994532931 43.10510097433988, 122.82580707046915 43.10510162104612, 122.82579681600546 43.10510475771522, 122.82579675735771 43.10510477079634, 122.82579669633246 43.10510477508177, 122.82579663536148 43.105104770400736, 122.82579657687404 43.10510475693977, 122.82579652320065 43.10510473523521, 122.82579647647991 43.105104706151934, 122.82579643857349 43.10510467084873, 122.82579641099186 43.105104630732306, 122.82579639483383 43.1051045874011, 122.8257951401263 43.105099125094284, 122.82579451298025 43.10509732346471, 122.82577870873179 43.10506373945375, 122.82577870204848 43.10506372331247, 122.82574572259126 43.10497180214445, 122.82568672010069 43.10482579805282, 122.82568595691636 43.104824307939424, 122.82560095475758 43.10468830661441, 122.82559962283082 43.1046865927374, 122.82546563247855 43.10454460299208, 122.82535041341525 43.10442837872212, 122.8253491168891 43.104427316103475, 122.82534907573769 43.10442727321237, 122.82534904924826 43.104427224507994, 122.8253421254893 43.10440834155167, 122.82534211517542 43.104408291368756, 122.82534212047051 43.104408240768535, 122.82534608189071 43.10439310915497, 122.82534635284755 43.1043908551366, 122.82534635241542 43.10439083234187, 122.82534599612038 43.104388584716354, 122.82534598941035 43.10438856245598, 122.82534502056745 43.10438641396511, 122.82534500785609 43.10438639315709, 122.82534346644525 43.104384432459184, 122.82534344825791 43.10438441396338, 122.82534139788639 43.10438272196818, 122.82534137497272 43.10438270654689, 122.82533890025137 43.10438135307621, 122.82533887355711 43.10438134136602, 122.82533607660665 43.10438038227147, 122.82533604723355 43.104380374755756, 122.82533304347217 43.10437984961515, 122.8253330126321 43.10437984660396, 122.82533189419865 43.10437982141478, 122.82533183864535 43.10437981642493, 122.82533178525043 43.104379804130495, 122.82533173578726 43.10437978493979, 122.82533169189868 43.104379759490186, 122.82533165504235 43.10437972862691, 122.82533162644226 43.104379693375044, 122.82533160704835 43.10437965490535, 122.82532882466472 43.10437207052327, 122.82532781017174 43.104370082826655, 122.82532779739007 43.10437006359953, 122.82532721577768 43.10436936643879, 122.82532718083299 43.104369306405026, 122.82531884571365 43.10434612635644, 122.82531818315435 43.10434468772566, 122.8252662801491 43.104252859063386, 122.82521242910843 43.10414814875399, 122.82516266363204 43.10404463677345, 122.82516265726073 43.10404462189503, 122.82511116874593 43.103907979386776, 122.82511115901853 43.10390794056614, 122.8250872852021 43.10372193567741, 122.82508671671795 43.10371979218186, 122.82508670812784 43.10371977109803, 122.82508557986729 43.10371775005487, 122.82508556582823 43.10371773060352, 122.82508392115002 43.103715909680055, 122.82508390220188 43.1037158926094, 122.82508180430956 43.10371434178212, 122.82508178118083 43.1037143277483, 122.82507931069553 43.1037131066149, 122.8250792842744 43.10371309615681, 122.82507653613543 43.10371225164469, 122.82507650743777 43.10371224516453, 122.82507358725432 43.1037118097277, 122.82507355738271 43.10371180747442, 122.82507057737601 43.10371179784654, 122.82507054747848 43.103711799906705, 122.82506762216815 43.103712216457794, 122.82506759339384 43.1037122227522, 122.825064835198 43.103713049474464, 122.82506480865244 43.10371305976126, 122.82506232356732 43.10371426488404, 122.82506230027022 43.103714278768074, 122.82506018379573 43.1037158159795, 122.8250601646432 43.10371583292689, 122.82505849811471 43.10371764315231, 122.8250584838419 43.10371766251259, 122.82505733130287 43.103719676186486, 122.82505732245932 43.10371969721414, 122.82505672820105 43.10372183695261, 122.82505672513372 43.10372185878572, 122.82505671332488 43.103724064420966, 122.82508071430333 43.103911063146676, 122.82508120182393 43.103913004052245, 122.8251331968033 43.10405099081636, 122.8251335185546 43.104051742176814, 122.82518363192332 43.10415596992064, 122.82523762898607 43.10426096425719, 122.82528940760133 43.104352588227194, 122.82528942083245 43.10435261699078, 122.82529855997419 43.10437803527227, 122.82529857006313 43.10437809643595, 122.82529815532844 43.10439592983841, 122.82529814692417 43.1043959784247, 122.82529812437373 43.10439602452809, 122.82529808874506 43.10439606596491, 122.82529804172569 43.10439610077248, 122.82526434418818 43.104416128561255, 122.82526430129766 43.10441614992172, 122.82526425411369 43.10441616568976, 122.82526420398158 43.104416175415786, 122.82526326561906 43.1044162964893, 122.825260306792 43.1044169958492, 122.8252602489358 43.104417005127566, 122.82526018972483 43.104417006096156, 122.82526013136116 43.10441699871895, 122.82526007601521 43.10441698327028, 122.82526002574548 43.10441696032472, 122.82525911534113 43.10441644931063, 122.82525908993438 43.10441643774499, 122.82525642777318 43.10441547585333, 122.8252563997837 43.104415468125815, 122.82525353327361 43.1044149036262, 122.82525350376763 43.10441490003124, 122.82525054219342 43.104414754444996, 122.82525051229648 43.104414755119805, 122.82524756856682 43.10441503399726, 122.82524753949167 43.104415038903845, 122.82524469787661 43.104415739619085, 122.82519770168925 43.10443119734584, 122.82519766291718 43.10443120786343, 122.82519763473337 43.1044312139632, 122.82519459581594 43.104432144253664, 122.82519456677497 43.104432155997216, 122.82519420183046 43.104432344018306, 122.82519415095447 43.10443236523282, 122.82517803046875 43.10443766736102, 122.82511468228553 43.10445674477209, 122.82474040453033 43.10458042639088, 122.82451062146389 43.1046538729848, 122.82447304229683 43.104665629557886, 122.82411112079534 43.10477560570171, 122.82391565432704 43.10483875403275, 122.82355180134603 43.1049597051576, 122.82333894516033 43.10502665996911, 122.82316689544416 43.10508367397931, 122.8228041333385 43.10519360188674, 122.82267731831479 43.10523351252039, 122.82258904369563 43.105260921787, 122.82217753662283 43.105381953626335, 122.82207122571812 43.10541157415553, 122.82193327738028 43.105452566754565, 122.82181156002052 43.105486478060755, 122.82159467691379 43.10554644573883, 122.82139884887704 43.105598400136515, 122.82121893332342 43.10564458168799, 122.82121886954992 43.10564459263487, 122.82121880405867 43.10564459342383, 122.82121873982852 43.10564458401902, 122.82121615291074 43.10564398919945, 122.82121612349356 43.10564398469908, 122.82121315850746 43.10564375005626, 122.82121312845736 43.10564374985051, 122.82121015800443 43.10564394385175, 122.82121012847774 43.10564394794847, 122.82120726687175 43.10564456312789, 122.8212072390045 43.10564457136955, 122.82120459637028 43.10564558405278, 122.82120457123537 43.10564559612206, 122.82120224927077 43.10564696733769, 122.82120222783576 43.10564698276977, 122.8212007285611 43.10564829779808, 122.82120068786139 43.10564832738101, 122.82120064036727 43.10564835090628, 122.82120058773357 43.105648367554174, 122.8212005317942 43.105648376744625, 122.82120047449821 43.1056483781574, 122.8212004178422 43.10564837174329, 122.82120036380005 43.10564835772576, 122.82120031425484 43.10564833659324, 122.82120027093296 43.10564830908208, 122.82120023534395 43.10564827615081, 122.82119988622578 43.105647882527755, 122.82119798066218 43.10564613616601, 122.82119795915207 43.10564612007287, 122.82119561629914 43.10564468787681, 122.82119559083594 43.10564467525498, 122.82119290484384 43.10564361470958, 122.82119287645376 43.10564360606779, 122.82118995552271 43.10564295989508, 122.82118992534922 43.10564295558135, 122.82118688714384 43.105642749811295, 122.82118685640249 43.105642749999404, 122.8211838233111 43.10564299292108, 122.82118379324014 43.10564299760345, 122.82118088744524 43.105643679431225, 122.82118085925637 43.105643688419136, 122.82117819781327 43.10564478168671, 122.82117817264098 43.10564479461855, 122.82117586276053 43.105646255285635, 122.82117584162047 43.10564627163959, 122.82117397635172 43.1056480408664, 122.8211739600944 43.10564805998428, 122.82117261457734 43.10565006649952, 122.82117260385739 43.10565008761199, 122.82117183229325 43.10565225058766, 122.82117182754335 43.105652272842256, 122.82117166101318 43.10565450514761, 122.8211716624242 43.1056545276487, 122.82117210763653 43.10565673935786, 122.82117211513298 43.10565676114552, 122.82117316609141 43.10565888401283, 122.82123416753585 43.105751883589235, 122.82123577103488 43.10575380331576, 122.82123578977479 43.10575382136258, 122.82123788723337 43.10575546570937, 122.82123791054228 43.10575548062759, 122.82124041632395 43.1057567824585, 122.82124044324961 43.105756793638726, 122.82124325504677 43.1057576998016, 122.82124328449056 43.105757706787635, 122.82124628750044 43.10575818028488, 122.82124631825985 43.10575818279133, 122.82124938987336 43.10575820429067, 122.82124942069267 43.10575820221522, 122.82125243549939 43.10575777083894, 122.82125246512014 43.10575776426627, 122.82125530002928 43.105756897626925, 122.82125532724218 43.10575688682539, 122.82125786650838 43.10575562030659, 122.82125789020155 43.1057556057176, 122.82126003014906 43.10575399102999, 122.82126004930831 43.105753973292984, 122.8212617179543 43.10575205658733, 122.82129307818266 43.10570649551256, 122.82129310929152 43.105706459337334, 122.82129314917731 43.10570642812653, 122.82129319639994 43.10570640300695, 122.82129324925467 43.10570638488545, 122.8213649826455 43.10568764378626, 122.82147679317946 43.105660689460585, 122.8215866614377 43.105630459022635, 122.82182765511546 43.10556046085731, 122.82182840661306 43.105560225609516, 122.82194709671909 43.10552032977453, 122.8220226089592 43.10549777394536, 122.82202265677536 43.10549776290062, 122.82211141710444 43.105482968835766, 122.8221136609913 43.1054824591522, 122.82262064399174 43.10533546407757, 122.82273391859326 43.105298386025524, 122.82278999942429 43.10528235736556, 122.82314415693192 43.105172307617046, 122.8236151537335 43.10502130863803, 122.8237573157428 43.10497425589605, 122.82375845630159 43.1049738361615, 122.8238482554277 43.104937324428, 122.82384830420327 43.10493730848749, 122.82393000600557 43.1049166369462, 122.82393120214316 43.10491629304806, 122.82416000765356 43.104842355986584, 122.82451415896905 43.10473630695114, 122.82490670036792 43.10461045398096, 122.82490671844516 43.10461044867886, 122.82498126285583 43.10459056937458, 122.82498353368241 43.10458980443882, 122.82503410118721 43.10456898252421, 122.82503411799303 43.10456897609594, 122.82512955484336 43.10453517558782, 122.82529752119287 43.10447852421445, 122.8252975573512 43.10447851399157, 122.82530481805424 43.104476838445336, 122.825304875534 43.1044768294994, 122.825304934287 43.10447682873882, 122.82530499216213 43.104476836191424, 122.82530504704077 43.1044768515844, 122.82530509691384 43.10447687435419, 122.8253051399554 43.10447690366723, 122.82530555576257 43.10447724678061, 122.82530557766219 43.104477261642394, 122.82530793658823 43.104478574283256, 122.82530796200557 43.10447858575128, 122.82531062355086 43.10447953828764, 122.82531065152044 43.104479545926225, 122.82531351463635 43.104480102193854, 122.82531354409663 43.10448010571317, 122.82531650008166 43.104480244592665, 122.82531652991399 43.104480243859086, 122.82531946654076 43.10447996007776, 122.82531949561253 43.10447995511914, 122.82532230138888 43.10447925945098, 122.82532232859617 43.10447925045567, 122.82532489699666 43.104478169312756, 122.82532492130774 43.10447815662178, 122.82532715482085 43.10447673105076, 122.82532717531093 43.10447671514692, 122.8253289891388 43.1044749992711, 122.82532900503115 43.10447498075727, 122.82533033030964 43.10447303972209, 122.82533034100044 43.104473019301516, 122.82533112741403 43.10447092680035, 122.82533113248478 43.10447090530232, 122.82533135093246 43.10446871883723, 122.82533131626947 43.104467661624874, 122.82533132041814 43.10446761896809, 122.82533133550515 43.10446757765664, 122.82533136098579 43.10446753918253, 122.82533139880476 43.104467493674385, 122.82533255628294 43.104465579983035, 122.82533256543682 43.10446555993727, 122.82533321408927 43.10446351728731, 122.8253332179433 43.104463496391865, 122.82533333236843 43.104461379650054, 122.82533243263181 43.10444923325493, 122.82533243532757 43.104449188925784, 122.82533244984216 43.10444914584604, 122.82533247561128 43.104449105690705, 122.82533251163308 43.104449070021154, 122.82533255650674 43.10444904022424, 122.8253326084876 43.10444901745858, 122.82533266555451 43.104449002609314, 122.82533272548861 43.10444899625382, 122.82533278595945 43.10444899863922, 122.825332844616 43.10444900967276, 122.82533289917733 43.10444902892545, 122.82533294752216 43.104449055648665, 122.82533298777064 43.10444908880338, 122.82544047321139 43.104557509009524, 122.82557358577425 43.1046985686237, 122.82557361239293 43.10469860291038, 122.82565757616051 43.10483294498671, 122.82565759141015 43.10483297479327, 122.82571620743187 43.10497802469436, 122.8257491470504 43.10506985599845, 122.82574948478047 43.105070671761744, 122.82576505958436 43.10510376823725, 122.82576507210722 43.10510380427388, 122.8257673184623 43.10511359198228, 122.82576732261822 43.105113634948374, 122.82576731552533 43.10511367770758, 122.82576729744352 43.10511371869324, 122.82576726903535 43.10511375640369, 122.8257672313416 43.10511378945731, 122.82576718574319 43.105113816643055, 122.82576713391097 43.10511383696487, 122.82563716727142 43.105153591417334, 122.82529191081426 43.10525567079573, 122.82454891966522 43.10549066798964, 122.82436866844553 43.105553746668434, 122.82421295332782 43.10560265738617, 122.824212224869 43.10560290271538, 122.82408722958122 43.10564790101732, 122.8239701052144 43.10569094701363, 122.82396810764025 43.10569182687238, 122.82393659496591 43.105708201123434, 122.82393654315982 43.10570822283359, 122.82393648660141 43.10570823679238, 122.82393642742637 43.1057082424727, 122.82393636786922 43.10570823966005, 122.82393631017904 43.105708228460635, 122.82393592299128 43.105708122869004, 122.82393589372623 43.10570811722497, 122.82393292815104 43.10570777004459, 122.82393289801834 43.10570776872935, 122.82392986691262 43.10570785745339, 122.82383186719956 43.10571785852512, 122.82382896067489 43.10571837263878, 122.82382893229456 43.10571837988662, 122.82382619254183 43.10571931117891, 122.82369527132015 43.10577582394133, 122.82369520327185 43.105775845684484, 122.82369513009121 43.10577585482863, 122.82369478794311 43.10577586680928, 122.82369475834611 43.10577586998801, 122.82369187733065 43.10577639403562, 122.82369184914127 43.105776401368026, 122.82368916204021 43.10577732565668, 122.82368913633333 43.105777336863056, 122.8236867456037 43.10577862615038, 122.82368672335826 43.10577864080408, 122.82368472015611 43.105780245930774, 122.82368470222184 43.10578026347219, 122.82368374609531 43.10578141865715, 122.8236837097104 43.105781454168266, 122.82368273241099 43.1057822340123, 122.82368271430826 43.10578225166981, 122.82368116178463 43.10578412501464, 122.82368114875062 43.10578414492823, 122.82368012689871 43.10578620475057, 122.82368011943869 43.10578622614813, 122.8236796678193 43.105788392703, 122.82367966622179 43.10578841475704, 122.82367980231895 43.105790604167446, 122.82367980664587 43.10579062602313, 122.82368052519081 43.105792753526316, 122.823680535275 43.10579277433908, 122.8236818084496 43.10579475756968, 122.82368182389973 43.105794776532015, 122.8236836024141 43.10579653871077, 122.82368362263281 43.10579655508957, 122.82368583763159 43.105798027993465, 122.82368586177549 43.10579804112167, 122.82368845418198 43.105799178181364, 122.82371009782538 43.10580667021264, 122.82371014997153 43.10580669314274, 122.8237101949288 43.105806723152085, 122.82371023093438 43.10580675906393, 122.82372879399551 43.105829739649494, 122.82373061612867 43.105831549746625, 122.8237306369061 43.105831566532444, 122.82373291817353 43.10583307151069, 122.82373294312973 43.1058330848959, 122.82373559051874 43.105834223394815, 122.8237356186364 43.10583423283377, 122.82373852420291 43.10583495843253, 122.82373855433558 43.10583496354025, 122.82374159960878 43.10583524665355, 122.82374163052728 43.10583524722167, 122.82374469133995 43.10583507630591, 122.82374472178377 43.10583507231132, 122.8237476733348 43.10583445433539, 122.82374770206314 43.105834445940864, 122.82375042400622 43.105833406102136, 122.82375044984768 43.10583339364984, 122.82375283119944 43.105831974346295, 122.82375285309928 43.10583195834459, 122.82375479676341 43.10583021744629, 122.82375481382947 43.10583019854702, 122.82375624055437 43.10582820703794, 122.8237562520911 43.10582818601142, 122.82375710370462 43.105826025092, 122.82375710924103 43.10582600279666, 122.82375735101937 43.10582376057607, 122.82375735033008 43.10582373792003, 122.82375697241517 43.10582150582193, 122.82375696552826 43.105821483729635, 122.8237568970359 43.10582133512978, 122.82375688347622 43.10582129226811, 122.82375688155814 43.10582124829245, 122.82375689135507 43.105821204883874, 122.82375691249247 43.10582116370177, 122.82375694416234 43.10582112632046, 122.82375698515398 43.10582109416895, 122.82375703390038 43.10582106847628, 122.82375708853806 43.10582105022466, 122.82375714697841 43.10582104011179, 122.8237572069873 43.105821038524276, 122.82375726627086 43.10582104552277, 122.82375732256267 43.10582106083976, 122.8237882864589 43.10583211806987, 122.82379118226751 43.10583289715901, 122.82379121237945 43.10583290279893, 122.82379426321174 43.105833237507895, 122.82379429425777 43.105833238577645, 122.82379737449513 43.105833115125805, 122.82379740519666 43.1058331115813, 122.82380038800318 43.105832535052045, 122.82380041702302 43.10583252705935, 122.82380320678168 43.10583151000234, 122.8238288212251 43.10581966937889, 122.82382887129526 43.10581965068715, 122.82382892517519 43.10581963899282, 122.8238289810614 43.10581963468741, 122.82382903708262 43.10581963791504, 122.8238644160972 43.105824089952854, 122.82386758342146 43.10582424227545, 122.82386761537205 43.105824241360864, 122.82387075681727 43.105823908448905, 122.82387078773462 43.10582390270731, 122.82387379586818 43.1058230898144, 122.82397972231458 43.105784886843374, 122.82397980009377 43.105784867738926, 122.82398033891899 43.105784792015086, 122.82398036758343 43.105784785805625, 122.82398315037865 43.10578395740607, 122.82399614962726 43.10577895649363, 122.8239986206575 43.10577776833998, 122.82399864385192 43.105777754649964, 122.82400075439969 43.10577623861973, 122.8240007735409 43.105776221899546, 122.82400244384375 43.10577443529008, 122.8240024582071 43.10577441617285, 122.82400362513032 43.10577242651502, 122.82400363417376 43.105772405722384, 122.82400376900743 43.10577194480188, 122.82400379087288 43.105771897001055, 122.82400382671295 43.10577185396646, 122.82400387472882 43.10577181785797, 122.82401001745484 43.10576813222095, 122.82401004659684 43.10576811673393, 122.82401415248972 43.105766193255874, 122.8240142308986 43.10576616704081, 122.82410836199311 43.105745787482995, 122.82411051332878 43.10574518936087, 122.82412791178875 43.10573923007156, 122.8241279681726 43.10573921546832, 122.82412802735003 43.10573920914828, 122.82412808707713 43.105739211351064, 122.82412814508926 43.10573922199316, 122.82412819918689 43.10573924067107, 122.82412824731885 43.10573926667657, 122.82412828766013 43.105739299023675, 122.8241283186812 43.105739336485854, 122.82412833920588 43.10573937764276, 122.82412834845586 43.10573942093383, 122.82412834608043 43.10573946471767, 122.82412833216982 43.105739507334164, 122.82412830725124 43.10573954716745, 122.82411972423151 43.105750347282694, 122.8241184884852 43.105752323314015, 122.82411847874367 43.10575234402147, 122.82411779027169 43.1057544582649, 122.82411778620407 43.10575447996421, 122.82411767121637 43.105756651922455, 122.82411767297756 43.10575667378707, 122.82411813585291 43.105758820755774, 122.824118143376 43.105758841954, 122.82411916648873 43.105760882179716, 122.82411917948728 43.105760901904254, 122.8241207238794 43.105762757699814, 122.8241207418583 43.1057627751989, 122.82412274872206 43.10576437589886, 122.82412277099674 43.10576439050649, 122.82412516391469 43.10576567515912, 122.82412518963747 43.10576568631921, 122.82412787749128 43.105766606007265, 122.82412790568206 43.105766613294506, 122.82413078612369 43.105767132998096, 122.82413081570898 43.105767136135114, 122.8241337790563 43.105767236064764, 122.82413380890992 43.105767234932145, 122.82413674232396 43.10576691128278, 122.82413677123691 43.10576690593694, 122.82413959072852 43.10576616260865, 122.82417165337739 43.10575502713899, 122.82417170978879 43.105755012290125, 122.82417176906212 43.10575500575269, 122.82417182893967 43.10575500777571, 122.82417188714038 43.10575501828212, 122.82417194144746 43.1057550368717, 122.82417198979228 43.105755062836344, 122.82417203033313 43.105755095187014, 122.8241720615259 43.10575513269144, 122.82417501893619 43.10575962357628, 122.82417504042054 43.105759667195244, 122.82417504924635 43.10575971311474, 122.82417504503913 43.10575975938482, 122.8241750279773 43.10575980404053, 122.82417499878554 43.10575984518564, 122.82417495870345 43.105759881072885, 122.8241749094331 43.105759910178314, 122.82417485306681 43.10575993126593, 122.82417479199809 43.105759943440276, 122.82415850317862 43.10576189925746, 122.82415554509053 43.105762483433395, 122.82415551624725 43.10576249148982, 122.82415277809532 43.10576349837284, 122.82415275204256 43.10576351050295, 122.82415034501771 43.105764899203066, 122.82415032281287 43.10576491491457, 122.82414834467177 43.10576662903255, 122.82414832721757 43.10576664768668, 122.82414685829907 43.1057686176066, 122.82414684630369 43.10576863844628, 122.82414594626475 43.10577078416398, 122.8241459402157 43.10577080634266, 122.82414564561026 43.10577304071306, 122.82414564575303 43.10577306333008, 122.82414596854568 43.10577529560838, 122.82414597487474 43.10577531774602, 122.82414690195603 43.10577745727258, 122.82414691421398 43.105777478030326, 122.82414840793268 43.105779437912865, 122.8241484256214 43.10577945644779, 122.82415042531267 43.10578115708892, 122.82415044765881 43.105781172610385, 122.8241528975419 43.10578255790452, 122.82420989810849 43.10580855686399, 122.82421259722963 43.10580953105084, 122.82421262561951 43.105809538846934, 122.82421553372649 43.10581010444832, 122.82421556365541 43.10581010799477, 122.82421856683342 43.10581024285572, 122.82421859712979 43.10581024201372, 122.8242215777361 43.10580994085138, 122.82422160721264 43.10580993565389, 122.82422444848956 43.10580921026558, 122.82422447599171 43.105809200916205, 122.82422706663911 43.10580807971721, 122.82422709108941 43.105808066582235, 122.82422932962456 43.10580659349282, 122.82422935006528 43.105806577086874, 122.82423114879936 43.10580480981168, 122.82423116442982 43.10580479077735, 122.82423245290143 43.10580279854542, 122.82423246310958 43.105802777628085, 122.82423319084614 43.10580063848008, 122.8242331952318 43.10580061649962, 122.82423333372597 43.10579841423189, 122.82423333211757 43.10579839204824, 122.82423287594429 43.105796212928745, 122.82423286840478 43.105796191412495, 122.82423198807986 43.10579442678561), (122.82587880114778 43.105252888556834, 122.8258787486723 43.10525290745667, 122.82587869225938 43.10525291872673, 122.82587863395375 43.105252921958495, 122.82587857586891 43.10525291703482, 122.8258785201104 43.10525290413416, 122.82587846869932 43.10525288372416, 122.82587842349919 43.105252856544645, 122.82587838614863 43.105252823580855, 122.82587835800129 43.10525278602761, 122.82587834007758 43.10525274524621, 122.82587833302723 43.10525270271487, 122.82587833710576 43.10525265997531, 122.82587835216542 43.10525261857675, 122.82587837766016 43.10525258001983, 122.82587841266599 43.10525254570216, 122.82588902678697 43.1052439799181, 122.82588907948958 43.10524394609634, 122.82588914128182 43.10524392190608, 122.82591245688843 43.10523716989366, 122.82591251519283 43.10523715772341, 122.82591257562397 43.10523715418208, 122.82591263582708 43.10523715940763, 122.82591269345652 43.105237173196485, 122.82591274626645 43.10523719501131, 122.82591279219929 43.10523722400213, 122.82591282946515 43.105237259039264, 122.82591285661212 43.105237298757494, 122.82591287258217 43.10523734160919, 122.82591287675318 43.10523738592459, 122.82591286896258 43.10523742997694, 122.82591284951391 43.105237472049716, 122.825912819165 43.10523751050355, 122.82591277909846 43.10523754384007, 122.8259127308755 43.10523757076027, 122.82587880114778 43.105252888556834), (122.82583281154889 43.1052334931249, 122.82583280077141 43.105233451402874, 122.82583280088244 43.10523340894018, 122.825832811878 43.10523336724872, 122.82583283336665 43.105233327812996, 122.8258328645832 43.10523329203716, 122.82583290441619 43.10523326119505, 122.82583295144728 43.10523323638486, 122.82583300400181 43.105233218489964, 122.82583306020862 43.10523320814755, 122.82583578655887 43.10523290306167, 122.82583581578298 43.10523289759027, 122.82583862891042 43.10523214803675, 122.82583865610495 43.105232138475486, 122.82584121424752 43.10523099955476, 122.82584123835792 43.105230986274385, 122.8258430073076 43.10522979508463, 122.82584305366736 43.10522976934749, 122.82584310581807 43.105229750476234, 122.82584316188928 43.10522973914767, 122.82584321986985 43.105229735768134, 122.82584327768018 43.10522974045884, 122.82584333324678 43.10522975305155, 122.82584338457676 43.105229773094614, 122.825843429829 43.10522979986913, 122.82584346738044 43.10522983241477, 122.82584349588429 43.105229869564276, 122.82584351431808 43.10522990998515, 122.8258435220208 43.10522995222767, 122.825843518716 43.1052299947767, 122.82584350452241 43.10523003610616, 122.82584055525037 43.105236118974425, 122.82584052984052 43.1052361586391, 122.82584049442194 43.10523619394383, 122.82584045033747 43.10523622355007, 122.82584039925842 43.10523624633536, 122.82584034312153 43.10523626143581, 122.82583447826543 43.105237378554094, 122.82583441633588 43.105237385511934, 122.82583435376797 43.10523738311615, 122.82583429316551 43.105237371466444, 122.82583423705077 43.10523735104766, 122.82583418775894 43.105237322709584, 122.82583414734162 43.105237287631574, 122.8258341174807 43.10523724727347, 122.82583409941907 43.10523720331491, 122.8258337473902 43.105235863918736, 122.82583281154889 43.1052334931249), (122.8257606291147 43.105159455130746, 122.82576058704483 43.10515942083768, 122.82576055539785 43.105159380981355, 122.82576053550252 43.10515933723526, 122.82576052819437 43.105159291436166, 122.82576053378 43.10515924550707, 122.82576055202503 43.10515920137641, 122.82576058216338 43.105159160897145, 122.82576062292955 43.1051591257689, 122.82576067261192 43.1051590974666, 122.82576072912447 43.1051590771786, 122.8257670880363 43.1051573608361, 122.82576714925443 43.10515734938726, 122.82576721237464 43.10515734735958, 122.8257672747253 43.10515735483888, 122.82576733366791 43.105157371508625, 122.82576738670778 43.10515739666332, 122.82576743160027 43.1051574292384, 122.82576870149197 43.10515856303154, 122.82576873798006 43.105158603987526, 122.82577248815086 43.10516402090278, 122.82577250831874 43.10516405778909, 122.82577251931755 43.10516409669956, 122.82577252080436 43.10516413642092, 122.82577230624153 43.10516671116907, 122.82577229608005 43.10516675642383, 122.8257722736075 43.10516679922914, 122.8257722397573 43.105166837807, 122.82577219593561 43.10516687055499, 122.82577214396265 43.10516689611283, 122.8257720859971 43.10516691341894, 122.82577202444686 43.10516692175449, 122.82577196186851 43.105166920773186, 122.8257719008613 43.105166910515834, 122.82577184395933 43.10516689140848, 122.82577179352619 43.1051668642448, 122.8257606291147 43.105159455130746), (122.82575945769652 43.10530662849334, 122.82575951439573 43.10530661547156, 122.82575957345608 43.1053066106936, 122.82575963266662 43.105306614338296, 122.8257596898112 43.10530662626923, 122.82575974275079 43.1053066460398, 122.82575978950356 43.10530667290995, 122.82575982831966 43.10530670587388, 122.82575985774602 43.10530674369771, 122.82575987668132 43.10530678496561, 122.82576044380447 43.10530858039954, 122.82576045331409 43.10530860108959, 122.8257616650504 43.105310577318754, 122.825761679847 43.105310596269554, 122.82576339076624 43.10531236324563, 122.82576341028903 43.10531237973874, 122.825765555666 43.10531387061573, 122.82576557917764 43.105313884028234, 122.82576771540926 43.10531487437847, 122.82576776357355 43.10531490198585, 122.82576780331821 43.10531493603794, 122.82576783306759 43.10531497518466, 122.82576785164237 43.105315017874084, 122.82576785830611 43.105315062413766, 122.82576785279447 43.105315107037896, 122.82576783532618 43.10531514997735, 122.82576780659363 43.10531518952979, 122.82576776773595 43.105315224127146, 122.8257677202937 43.10531525239778, 122.8257676661478 43.10531527322091, 122.82547925002034 43.105400566990276, 122.82516498341502 43.105498647973256, 122.82488904955332 43.105586626506536, 122.82480472356596 43.10561173113546, 122.82443409016551 43.10573323801169, 122.82443403187574 43.105733252191364, 122.8244339709009 43.10573325758916, 122.82443390967944 43.105733253989186, 122.82443385065987 43.10573324153541, 122.82443379620237 43.10573322072591, 122.8244337484849 43.10573319239288, 122.82443370941583 43.105733157669455, 122.82443368055758 43.105733117944276, 122.8244336630643 43.105733074806075, 122.82443365763547 43.10573302998002, 122.8244336644883 43.10573298525883, 122.82443368334876 43.105732942431, 122.8244337134626 43.105732903209336, 122.82443375362529 43.10573286916238, 122.82443380223081 43.10573284165175, 122.82453416143642 43.10568698786338, 122.82453420073482 43.10568697268255, 122.82466710479866 43.1056443243695, 122.82538689602383 43.10541838989568, 122.8256537474143 43.105339433810826, 122.82575945769652 43.10530662849334), (122.82576701715371 43.105214315717845, 122.82576707546966 43.105214302297355, 122.82576713625782 43.105214297604746, 122.8257671971104 43.10521430182589, 122.82576725561682 43.10521431479358, 122.8257673094596 43.105214335994134, 122.825767356506 43.1052143645878, 122.82576739489234 43.10521439944191, 122.82576742309811 43.10521443917585, 122.82576744000605 43.1052144822157, 122.82576744494648 43.10521452685659, 122.82576743772358 43.10521457133022, 122.82576741862357 43.105214613874914, 122.82576738840292 43.10521465280543, 122.82576734825882 43.10521468657964, 122.82576729978138 43.105214713859766, 122.82571407543995 43.105238906722846, 122.8257140274133 43.1052389244898, 122.82556809532606 43.105281613441505, 122.82527285789618 43.10537168762738, 122.82495691078014 43.10547267071521, 122.82462496514685 43.10557665368166, 122.82446041895716 43.10562983403186, 122.82418661056016 43.105724929265094, 122.8241865541488 43.10572494411398, 122.82418649487549 43.10572495065142, 122.82418643499796 43.105724948628406, 122.82418637679727 43.105724938122016, 122.8241863224902 43.105724919532435, 122.82418627414543 43.1057248935678, 122.82418623360458 43.10572486121713, 122.82418620241184 43.10572482371271, 122.82418335034262 43.1057204927895, 122.82418332950155 43.10572045103643, 122.82418332027008 43.10572040709605, 122.82418332300843 43.1057203626834, 122.82418333760975 43.10572031953194, 122.8241833635041 43.1057202793259, 122.82418339968088 43.10572024363457, 122.82418344472805 43.10572021385103, 122.82418349688731 43.105720191137706, 122.82436438664215 43.105658232786965, 122.82464515629279 43.105566308201006, 122.82490604969404 43.10548434166127, 122.82503512379124 43.10544231864087, 122.82538493190256 43.1053333783974, 122.82566585522831 43.10524840157523, 122.82566675295827 43.105248105242765, 122.82571938962823 43.10522923549256, 122.82571940387146 43.10522923071243, 122.82576701715371 43.105214315717845), (122.82400023430043 43.105730947842126, 122.82400018389765 43.10573092511052, 122.82400014038161 43.105730895717116, 122.82400010536831 43.10573086075355, 122.82400008015811 43.105730821518264, 122.82400006568714 43.10573077946834, 122.824000062493 43.1057307361654, 122.82400007069413 43.10573069321763, 122.82400008998616 43.10573065221997, 122.8240001196524 43.10573061469496, 122.82400015859126 43.10573058203622, 122.82400020535661 43.10573055545657, 122.82403846359533 43.105712853854, 122.82403849335354 43.10571284172137, 122.82422844771598 43.105645213987174, 122.82441741629304 43.10558422235195, 122.82460721646486 43.10552028966068, 122.82478318262379 43.10546529936689, 122.82511209517052 43.10535932754041, 122.82528185442258 43.10530640257819, 122.82543892393309 43.10526038066821, 122.8255989169634 43.10521138280137, 122.82572768728213 43.10516813884637, 122.8257277435919 43.10516812459355, 122.82572780259777 43.105168118574674, 122.8257278620793 43.10516812101625, 122.82572791979855 43.10516813182639, 122.82572797358343 43.105168150598324, 122.82572802141013 43.105168176625696, 122.82574114253651 43.10517688429294, 122.82574118360608 43.10517691758561, 122.82574121484281 43.10517695618758, 122.8257412350044 43.105176998563614, 122.8257412432891 43.105177043028405, 122.8257412393674 43.10517708781356, 122.82574122339516 43.10517713113793, 122.82574119600774 43.10517717127851, 122.82574115829428 43.10517720663887, 122.82574111175468 43.10517723581272, 122.82574105823987 43.10517725763978, 122.82573270447236 43.10517990369936, 122.82569544447124 43.10519051053959, 122.8256943596183 43.10519085478433, 122.82565949025488 43.105203095981985, 122.82558207243157 43.10522761953014, 122.8252507943138 43.10532570808555, 122.82491389553334 43.10543467534386, 122.82460599323673 43.105530644910324, 122.82437184690141 43.10560968878822, 122.82420111888459 43.10566160625737, 122.8242000967225 43.10566194942029, 122.82410509487087 43.105696950434776, 122.8241037215302 43.105697523427196, 122.82401858181812 43.10573740871291, 122.82401852573165 43.10573742940468, 122.82401846507376 43.10573744130544, 122.82401840238025 43.10573744391772, 122.82401834027213 43.10573743713228, 122.82401828134572 43.10573742123278, 122.82400023430043 43.105730947842126), (122.82419981637845 43.105745496779605, 122.82419979558857 43.10574545517217, 122.82419978632817 43.10574541138648, 122.82419978895635 43.10574536712002, 122.82419980337123 43.10574532408898, 122.82419982901384 43.105745283961596, 122.82419986489026 43.10574524829353, 122.8241999096094 43.105745218467625, 122.8241999614377 43.10574519564016, 122.8244733844831 43.10565023423518, 122.82463711849886 43.10559732011653, 122.82496903548122 43.10549334611896, 122.82528501920703 43.10539235165345, 122.82557979624272 43.10530241963969, 122.82572670548984 43.1052594452278, 122.82572898211545 43.10525860302503, 122.82572903932964 43.10525858688247, 122.82572909977992 43.10525857938859, 122.82572916105713 43.10525858084204, 122.82572922071935 43.10525859118486, 122.82572927638897 43.10525861000492, 122.82572932584745 43.105258636552186, 122.8257293671239 43.10525866976873, 122.8257293985733 43.10525870833084, 122.82572941894242 43.10525875070176, 122.82572942741953 43.10525879519297, 122.8257294236668 43.105258840031425, 122.82572940783383 43.10525888343028, 122.82572938055146 43.10525892366003, 122.82572934290702 43.105258959117485, 122.8257279293889 43.10526004640782, 122.82572791129843 43.10526006330062, 122.82572634326812 43.10526185761953, 122.82572632989778 43.10526187672801, 122.82572525681975 43.10526385698158, 122.8257252486596 43.105263877605275, 122.82572470979545 43.105265971340984, 122.82572470714388 43.105265992724775, 122.82572472220997 43.105268123336344, 122.82572472516378 43.1052681446992, 122.82572529360898 43.105270234230844, 122.8257253020603 43.105270254791314, 122.82572535686828 43.10527035295559, 122.82572537410128 43.10527039525719, 122.82572537973174 43.10527043920998, 122.82572537354285 43.10527048312241, 122.82572535577282 43.105270525304576, 122.82572532710546 43.10527056413302, 122.82572528864412 43.105270598113485, 122.82572524186894 43.105270625938196, 122.82572518858011 43.10527064653636, 122.82551106909196 43.105334621468, 122.82503507479198 43.10548061971579, 122.8247348656095 43.10558068357599, 122.8245646215965 43.10563276492304, 122.82421502683226 43.105749629455666, 122.82421501093164 43.10574963438026, 122.82420478053754 43.10575255735133, 122.82420472550812 43.10575256887982, 122.82420466851488 43.105752572726665, 122.82420461153724 43.105752568758284, 122.82420455655394 43.105752557112474, 122.82420450547438 43.1057525381937, 122.82420446007275 43.105752512658995, 122.82420442192564 43.10575248139518, 122.82420439235807 43.105752445487994, 122.82419981637845 43.105745496779605), (122.82525886127253 43.105348189030884, 122.82525880408176 43.105348202184565, 122.82525874449324 43.10534820694792, 122.8252586847769 43.105348203139506, 122.82525862720765 43.105348190904415, 122.82525857397833 43.105348170708716, 122.82525852711682 43.105348143321734, 122.82525848840805 43.105348109786725, 122.82525845932676 43.10534807138119, 122.82525844098059 43.10534802956807, 122.8252584340685 43.10534798594022, 122.82525843885378 43.105347942159554, 122.82525845515414 43.10534789989385, 122.82525848234864 43.10534786075314, 122.82525851940129 43.105347826228446, 122.82525856490074 43.105347797634906, 122.82525861711372 43.10534777606178, 122.82526297415225 43.10534636680309, 122.82526639154568 43.1053453548914, 122.82526644897143 43.10534534250014, 122.82526650858696 43.105345338506936, 122.82526656812725 43.10534534306354, 122.82526662532995 43.105345355996846, 122.82526667802176 43.10534537681543, 122.82526672420073 43.10534540472833, 122.82526676211234 43.105345438674995, 122.82526679031596 43.10534547736564, 122.82526680774018 43.105345519330236, 122.82526681372293 43.105345562974335, 122.82526680803691 43.105345606639744, 122.82526679089816 43.1053456486674, 122.82526676295787 43.1053456874605, 122.8252667252775 43.10534572154509, 122.82526667928886 43.10534574962616, 122.82526662673918 43.10534577063679, 122.82525886127253 43.105348189030884), (122.82194456847277 43.105473494955554, 122.82202372287665 43.10545144105119, 122.82218885059912 43.10540287448379, 122.82228368837151 43.105376451167636, 122.82248598845581 43.10531736071715, 122.82260073967322 43.105281730328805, 122.82261872372644 43.10527644072743, 122.82268885287455 43.105254370929075, 122.8227049269937 43.10524937986657, 122.82314785482424 43.10511540169297, 122.82335920104767 43.10504529400419, 122.82357532455502 43.10497725297933, 122.82400713396879 43.10483431606293, 122.82444213788328 43.10470031367887, 122.8245229457255 43.10467448489133, 122.82466431008987 43.104630257702546, 122.82475285777166 43.104600997077746, 122.82488014131685 43.104560312585456, 122.82519023433485 43.1044583198187, 122.82520590339672 43.10445360212193, 122.82520591972893 43.10445359759785, 122.8252074631455 43.10445320643513, 122.82520752296874 43.10445319604483, 122.82520758441768 43.10445319459381, 122.82520764502983 43.10445320214023, 122.82520770237595 43.10445321838165, 122.82520775415807 43.104453242667205, 122.82520779830082 43.104453274023626, 122.82520783303526 43.104453311194284, 122.82520785696931 43.10445335268956, 122.8252078691439 43.10445339684647, 122.825207869071 43.104453441895444, 122.82520785675362 43.10445348603111, 122.82520783268535 43.104453527484694, 122.82520182999264 43.10446153107222, 122.82520179598271 43.10446156744895, 122.8252017529447 43.10446159826786, 122.82520170253106 43.10446162234568, 122.82518490430934 43.10446802281838, 122.82518247518996 43.104469175718876, 122.82518245232929 43.10446918899295, 122.82518036543466 43.10447065831699, 122.82518034642196 43.1044706745248, 122.82518028122504 43.10447074220053, 122.82518024459122 43.104470773642255, 122.82518020072568 43.10447079964285, 122.82518015110907 43.1044708193248, 122.82515195715354 43.10447965630094, 122.82503921441078 43.10451756558502, 122.82503918969456 43.104517572960894, 122.8249558185474 43.10453940931317, 122.82495321051682 43.104540303477165, 122.82487518658999 43.10457388339387, 122.82487514741405 43.104573897610294, 122.82478618559688 43.104600586154206, 122.82478541111252 43.10460083679671, 122.82472204211508 43.104622878230145, 122.82463986287007 43.104650682971595, 122.8243299371257 43.10474366250501, 122.82388194576646 43.10488465978153, 122.82378253316102 43.104919793292666, 122.82354081199055 43.10499870225738, 122.82315495081082 43.10512165800401, 122.82256015443221 43.10530559503058, 122.82231234688257 43.105378538403954, 122.82187149756585 43.10550449534872, 122.82154672953159 43.10559443112345, 122.8213510088429 43.105645115877635, 122.82135095226107 43.105645126227316, 122.8213508940292 43.1056451285535, 122.82135083624706 43.10564512277231, 122.82135078099819 43.105645109092215, 122.82135073027455 43.10564508800649, 122.82135068590523 43.1056450602754, 122.82135064949001 43.10564502689887, 122.82135062234187 43.105644989080375, 122.82135060543985 43.10564494818354, 122.82135059939328 43.10564490568297, 122.82135060442012 43.10564486311116, 122.82135062033925 43.10564482200311, 122.82135064657666 43.10564478384106, 122.8213506821862 43.10564475000104, 122.82135072588396 43.10564472170324, 122.8213633702472 43.105637984939705, 122.82136344037266 43.1056379569785, 122.82163006481385 43.105562628136155, 122.82163008302871 43.10556262346605, 122.82165562783517 43.10555672720028, 122.82165856268057 43.10555579105772, 122.82165859072451 43.10555577939975, 122.82166058714621 43.105554731688244, 122.82166063314942 43.10555471173891, 122.82166068317677 43.1055546979365, 122.82169414793717 43.10554783300095, 122.82169577906396 43.105547424426604, 122.82194456847277 43.105473494955554), (122.8249093254944 43.1045858062757, 122.82490926688426 43.104585817259014, 122.8249092064729 43.10458581961081, 122.82490914660434 43.104585813239844, 122.8249090896018 43.10458579839333, 122.82490903767697 43.104585775647344, 122.82490899284478 43.10458574588448, 122.82490895684482 43.10458571025964, 122.82490893107384 43.10458567015514, 122.824908916532 43.10458562712711, 122.82490891378339 43.10458558284519, 122.82490892293481 43.104585539027596, 122.82490894363113 43.104585497374586, 122.82490897506923 43.10458545950238, 122.82490901602927 43.10458542688052, 122.82490906492183 43.10458540077483, 122.82496750524537 43.10456024923405, 122.82496755741846 43.10456023136816, 122.82504154473828 43.10454085373932, 122.82504160495573 43.104540842842006, 122.82504166693325 43.104540841032794, 122.82504172814295 43.10454084838545, 122.825041786088 43.104540864600054, 122.82504183840467 43.10454088901522, 122.82504188295921 43.10454092063505, 122.82504191793399 43.10454095816977, 122.82504194190247 43.104541000088304, 122.82504195388707 43.10454104468079, 122.82504195339874 43.10454109012831, 122.82504194045757 43.104541134577026, 122.82504191559134 43.10454117621387, 122.8250418798144 43.10454121334045, 122.8250418345861 43.1045412444424, 122.82504178175121 43.10454126825104, 122.82502032173906 43.10454886816635, 122.82501947303888 43.10454919279508, 122.82496959209737 43.104569732005736, 122.82496954667172 43.104569747291265, 122.8249093254944 43.1045858062757), (122.8243208133755 43.105739494282176, 122.82432075290583 43.10573950378114, 122.82432069106484 43.105739504210874, 122.82432063036016 43.105739495554005, 122.82432057325332 43.105739478161524, 122.82432052205971 43.10573945273866, 122.82432047885523 43.105739420316304, 122.8243204453918 43.10573938220909, 122.82432042302622 43.10573933996221, 122.82432041266554 43.10573929528873, 122.82432041472971 43.105739250000056, 122.82432042913501 43.10573920593257, 122.82432045529747 43.10573916487314, 122.82432049215612 43.105739128486675, 122.8243205382165 43.10573909824856, 122.82432059161088 43.10573907538492, 122.82447101745282 43.10568879018557, 122.82447107574535 43.105688775669165, 122.82447113681818 43.105688769963606, 122.8244711982169 43.10568877329818, 122.82447125747429 43.1056887855389, 122.82447131220889 43.10568880619383, 122.82447136022104 43.10568883443293, 122.8244713995814 43.10568886912136, 122.82447142870822 43.10568890886512, 122.82447144643088 43.10568895206702, 122.82447145203729 43.10568899699094, 122.82447144530215 43.10568904183156, 122.8244714264959 43.10568908478685, 122.82447139637463 43.105689124130606, 122.82447135614854 43.105689158281734, 122.82447130743435 43.1056891858678, 122.82440451460928 43.10571970325359, 122.82440444639315 43.10571972646828, 122.8243208133755 43.105739494282176), (122.82439453061595 43.105745715340845, 122.82439459123445 43.10574570582979, 122.82439465322473 43.105745705432184, 122.82439471406117 43.10574571416422, 122.82439477126503 43.10574573167011, 122.82439482250558 43.1057457572366, 122.82439486569503 43.105745789822016, 122.82439489907371 43.105745828098705, 122.82439492128172 43.1057458705071, 122.82439493141405 43.105745915319346, 122.82439492905806 43.10574596070961, 122.82439491430966 43.10574600482852, 122.82439488776974 43.10574604587848, 122.8243948505196 43.10574608218696, 122.824394804077 43.105746112274616, 122.82439475033429 43.10574613491557, 122.82432158587723 43.105770120605214, 122.82432151010488 43.10577013726694, 122.82429850317493 43.10577289925796, 122.82429554531498 43.105773483370385, 122.82429551647402 43.10577349142579, 122.82429277850274 43.10577449818262, 122.82429275245173 43.10577451031107, 122.82429116884028 43.10577542387962, 122.82429111498261 43.10577544879075, 122.82429105527054 43.10577546502658, 122.82429099227195 43.1057754718889, 122.82429092869634 43.10577546908254, 122.8242908672778 43.10577545672821, 122.82428780239644 43.10577458104804, 122.82428775064751 43.10577456196547, 122.82428770471003 43.10577453610186, 122.82428766621851 43.10577450437749, 122.82428763654258 43.105774467921194, 122.82428761673823 43.10577442803015, 122.82428760751002 43.10577438612377, 122.82428760918647 43.10577434369316, 122.82428762170777 43.10577430224812, 122.8242876446284 43.105774263263335, 122.82428767713293 43.105774228125966, 122.82428771806467 43.10577419808626, 122.82428776596721 43.10577417421313, 122.82430708703218 43.105766388105806, 122.82430714074908 43.10576637111869, 122.82439453061595 43.105745715340845), (122.8241219534091 43.10571643050308, 122.8241218971648 43.105716445080624, 122.8241218381352 43.105716451415596, 122.8241217785478 43.105716449268904, 122.82412172065115 43.10571643872155, 122.82412166662984 43.10571642017154, 122.8241216185224 43.10571639431886, 122.8241215781441 43.10571636213903, 122.82412154701862 43.105716324846355, 122.82412152632048 43.10571628384804, 122.82412151683073 43.10571624069118, 122.82412151890745 43.105716197004234, 122.82412153247233 43.10571615443573, 122.82412155701338 43.105716114591985, 122.82412159160457 43.10571607897647, 122.82412163494072 43.10571604893312, 122.82412168538653 43.10571602559561, 122.82421339074837 43.10568223940699, 122.82421341097195 43.10568223261692, 122.82427533903639 43.10566339748228, 122.82427539581217 43.1056633847665, 122.82427545486624 43.1056633802924, 122.82427551399175 43.105663384227164, 122.82427557097935 43.10566339642374, 122.82427562369945 43.105663416426395, 122.8242756701821 43.10566344348765, 122.8242757086903 43.105663476596284, 122.82427573778507 43.10566351451509, 122.82427575637925 43.105663555827114, 122.82427576377783 43.10566359898862, 122.82427575970456 43.10566364238673, 122.82427574431155 43.10566368439975, 122.82427571817398 43.10566372345773, 122.82427568226865 43.10566375810116, 122.8242756379372 43.10566378703546, 122.8242755868362 43.10566380917945, 122.8241219534091 43.10571643050308), (122.82422109170686 43.105777011811085, 122.82422105531792 43.105777046154536, 122.82422101059464 43.10577707472956, 122.82422095920633 43.10577709646946, 122.82422090307142 43.10577711056269, 122.82422084428548 43.105777116483154, 122.82422078504284 43.105777114009825, 122.82422072755516 43.10577710323504, 122.82422067396833 43.10577708456104, 122.8242206262828 43.10577705868489, 122.82422058627878 43.105777026572575, 122.82422055544943 43.10577698942283, 122.82421804727569 43.10577318071886, 122.82421802581855 43.1057731371801, 122.82421801697379 43.10577309134553, 122.82421802111575 43.105773045154685, 122.82421803806902 43.10577300056208, 122.8242180671164 43.10577295945466, 122.82421810702868 43.105772923571884, 122.82421815611687 43.10577289443211, 122.82421821230396 43.105772873268386, 122.82422657476312 43.105770483993005, 122.82422737774488 43.1057702353012, 122.82425764445038 43.105760117633615, 122.82425770001328 43.10576010358938, 122.82425775821007 43.10576009755793, 122.82425781690921 43.10576009976016, 122.82425787396086 43.10576011011542, 122.82425792727555 43.10576012824443, 122.82425797490039 43.105760153483196, 122.82425801509139 43.10576018490736, 122.82425804637626 43.10576022136602, 122.82425806760942 43.105760261523805, 122.82425807801303 43.10576030390998, 122.82425807720612 43.1057603469721, 122.82425806521827 43.105760389133, 122.82425804248851 43.105760428848555, 122.82425800984926 43.10576046466411, 122.824257968496 43.105760495267944, 122.82425791994339 43.10576051953919, 122.824226587002 43.1057731475444, 122.8242240655261 43.10577442169093, 122.82422404201535 43.105774436338564, 122.82422192030624 43.10577605497011, 122.82422190128045 43.105776072773224, 122.82422109170686 43.105777011811085), (122.82391567636056 43.105769850229024, 122.82391566700558 43.10576980361832, 122.82391567110025 43.105769756601916, 122.82391568846523 43.105769711240576, 122.82391571833945 43.105769669522466, 122.82391575941354 43.1057696332761, 122.82391580988703 43.105769604090185, 122.82396909179161 43.105744951292145, 122.82396914771272 43.105744930920565, 122.82396920810204 43.105744919258896, 122.82396927046236 43.105744916789334, 122.82396933221521 43.10574492361399, 122.82396939080719 43.10574493945068, 122.82398824082325 43.10575170086792, 122.82398829293776 43.10575172455648, 122.82398833758958 43.10575175535974, 122.8239883729984 43.10575179204941, 122.82398839775205 43.10575183316247, 122.82398841086372 43.10575187705959, 122.82398841181045 43.10575192199034, 122.82398840055457 43.1057519661631, 122.82398837754477 43.105752007816506, 122.82398834369869 43.105752045289606, 122.82398830036593 43.1057520770882, 122.82396896447311 43.10576367862273, 122.82396890552509 43.10576370641566, 122.82388759015629 43.10579303327636, 122.82388753199416 43.10579304913257, 122.82388747066898 43.105793056097966, 122.82388740868475 43.105793053888206, 122.82388734857216 43.105793042593454, 122.82388729278563 43.10579302267492, 122.8238872436027 43.10579299494582, 122.82388720303173 43.105792960538345, 122.82388717272897 43.10579292085729, 122.82388715393178 43.105792877522816, 122.82388714740759 43.10579283230423, 122.82388715342276 43.105792787047776, 122.8238871717317 43.105792743601214, 122.8238872015869 43.10579270373846, 122.82388724176943 43.10579266908706, 122.8238872906386 43.10579264106178, 122.82390920539876 43.105782509392846, 122.82391152827655 43.10578118938061, 122.82391154982005 43.105781174482416, 122.8239134825393 43.10577955158111, 122.82391349976659 43.10577953392351, 122.82391497006721 43.10577766881154, 122.82391498233441 43.10577764905455, 122.8239159352401 43.10577561147082, 122.82391594208873 43.1057755903525, 122.8239163419697 43.10577345648479, 122.82391634314313 43.10577343479478, 122.82391617504801 43.10577128442975, 122.82391617050237 43.105771262980355, 122.82391567636056 43.105769850229024), (122.82373964820617 43.10578323359397, 122.82373959135157 43.10578321866559, 122.82373953958344 43.10578319587353, 122.82373949490356 43.10578316609916, 122.8237394590398 43.105783130493855, 122.82373943337907 43.10578309043452, 122.82373941891362 43.10578304747028, 122.82373941620298 43.10578300326256, 122.82373942535172 43.10578295952092, 122.82373944600617 43.105782917936885, 122.82373947736777 43.105782880118525, 122.8237395182235 43.10578284752832, 122.8237395669936 43.1057828214265, 122.82383910091276 43.105739857117406, 122.82383915572161 43.105739838510694, 122.82383921444071 43.10573982812431, 122.82388340351228 43.10573531904494, 122.82388346179117 43.1057353171964, 122.82388351949582 43.105735323455214, 122.82388357454451 43.105735337595576, 122.82388362495126 43.10573535910734, 122.82388366889766 43.10573538721448, 122.82388370479828 43.10573542090299, 122.8238837313581 43.10573545895751, 122.82388374761867 43.105735500005224, 122.82388375299365 43.10573554256529, 122.82388374728906 43.105735585102295, 122.82388373071058 43.10573562608169, 122.8238837038564 43.10573566402513, 122.82388366769523 43.10573569756373, 122.82388362353176 43.105735725487584, 122.82386739064493 43.10574416021034, 122.82386733769873 43.10574418229371, 122.82374469731192 43.105784111723445, 122.82374463268042 43.10578412676351, 122.8237445651199 43.10578413104448, 122.82374449792404 43.10578412435766, 122.82373964820617 43.10578323359397), (122.82125111261622 43.10566062728376, 122.82125105219453 43.10566062177459, 122.82125099444346 43.10566060763982, 122.82125094163302 43.105660585435, 122.82125089583892 43.10566055603289, 122.821250858861 43.105660520589105, 122.82125083215264 43.105660480496766, 122.82125081676367 43.10566043733169, 122.82125081329892 43.10566039279047, 122.82125082189452 43.105660348623736, 122.8212508422127 43.10566030656747, 122.82125087345483 43.10566026827468, 122.82125091439302 43.10566023525043, 122.82125096341815 43.105660208792735, 122.82125101860325 43.105660189941496, 122.82128465279612 43.105651556466384, 122.8212847093609 43.105651546237404, 122.8212847675442 43.1056515440195, 122.82128482525219 43.10565154989249, 122.82128488040813 43.10565156364504, 122.821284931027 43.1056515847822, 122.82128497528728 43.105651612543326, 122.82128501159609 43.105651645929335, 122.82128503864666 43.105651683738756, 122.82128505546557 43.1056517246109, 122.82128506144763 43.105651767074896, 122.82128505637738 43.105651809602534, 122.82128504043747 43.10565185066335, 122.82128501420142 43.1056518887797, 122.82128497861348 43.10565192257982, 122.8212849349543 43.10565195084731, 122.82126816205628 43.10566088722386, 122.8212681041323 43.10566091151535, 122.82126804041428 43.1056609260648, 122.82126797391128 43.10566093018515, 122.82125111261622 43.10566062728376), (122.82126943886752 43.10568857602981, 122.82126938223134 43.10568858678727, 122.82126932383855 43.10568858947978, 122.82126926580862 43.105688584009656, 122.82126921024745 43.1056885705754, 122.82126915917155 43.10568854966457, 122.82126911443444 43.10568852203609, 122.82126907765998 43.10568848869265, 122.82126905018265 43.10568845084438, 122.82126903299962 43.10568840986486, 122.82126902673463 43.10568836724137, 122.82126903161503 43.1056883245208, 122.82126904746367 43.105688283253585, 122.82126907370535 43.10568824493741, 122.82126910938774 43.105688210962875, 122.82126915321577 43.105688182562965, 122.82127149534763 43.10568693470712, 122.82127154564111 43.105686912943376, 122.82127160064839 43.105686898549926, 122.82127165837987 43.105686892047416, 122.82127171674748 43.10568689367103, 122.82127177364 43.105686903362034, 122.82127182699952 43.10568692076993, 122.82127187489617 43.105686945265035, 122.82127191559742 43.10568697596139, 122.82127194763116 43.10568701174867, 122.82127196983862 43.105687051332445, 122.82127198141656 43.10568709328098, 122.82127198194631 43.105687136076966, 122.82127197140863 43.105687178172474, 122.82127195018471 43.105687218044885, 122.82127142471943 43.10568798145699, 122.82127139391656 43.105688017341244, 122.82127135447556 43.10568804835596, 122.82127130779583 43.105688073400486, 122.82127125553407 43.10568809158606, 122.82126943886752 43.10568857602981), (122.82124555742514 43.10571730102962, 122.82124553674635 43.105717259462644, 122.82124552756642 43.10571721573457, 122.82124553024035 43.1057171715356, 122.82124554466482 43.10571712857419, 122.82124557028206 43.105717088510914, 122.82124560610208 43.10571705289436, 122.82124565074028 43.105717023101235, 122.82124570247119 43.10571700028313, 122.82124575929527 43.105716985322054, 122.82124581901607 43.10571697879628, 122.82124587932518 43.10571698095806, 122.82124822725322 43.10571723629242, 122.82124825718527 43.105717237376126, 122.82125083721027 43.10571714543177, 122.82125089531618 43.10571714740196, 122.8212509518729 43.105717157364246, 122.82125100485176 43.105717174961256, 122.82125105235217 43.105717199561745, 122.82125109267031 43.105717230283275, 122.82125112435982 43.105717266023795, 122.82125114628401 43.10571730550126, 122.82125115765638 43.105717347299496, 122.82125115806902 43.10571738991916, 122.82125114750716 43.10571743183143, 122.8212511263495 43.105717471532806, 122.82124861290416 43.10572112313862, 122.82124857950417 43.10572116146145, 122.8212485362718 43.10572119408224, 122.82124848497224 43.105721219669135, 122.82124842769984 43.10572123717745, 122.82124836679316 43.10572124589235, 122.82124830473873 43.10572124545801, 122.82124824407039 43.105721235892155, 122.82124818726494 43.10572121758537, 122.82124813664184 43.10572119128508, 122.82124809426789 43.10572115806509, 122.8212480618731 43.105721119281746, 122.82124555742514 43.10571730102962)), ((122.81139640465857 43.0799479713991, 122.8113986453218 43.079947462353935, 122.81189765103125 43.0798024613993, 122.81214759335666 43.079721489513005, 122.81214761775537 43.07972148250505, 122.81244061959447 43.07964773374111, 122.81259127229865 43.07961580656494, 122.81259313845618 43.079615312760254, 122.8127591403374 43.079562311360746, 122.81276129852162 43.07956146466273, 122.81276131922591 43.07956145489104, 122.81276328298796 43.079560353583, 122.81281628363517 43.07952535179042, 122.81281824897899 43.07952378082324, 122.81288223657769 43.079461792825114, 122.81288293396959 43.079461058893024, 122.81297133538803 43.079359744884954, 122.812971361181 43.07935971946348, 122.81300434808603 43.07933158356903, 122.81300435994893 43.07933157401931, 122.81305404471917 43.07929381358867, 122.81305466826926 43.07929331040203, 122.81318189060396 43.079184262695776, 122.81318190126868 43.07918425402079, 122.81324213871787 43.079137740746404, 122.81324349674581 43.079136533296214, 122.81326375671608 43.079115740188946, 122.8132637760269 43.079115722352164, 122.81330852030527 43.079078435398976, 122.8133094204145 43.07907761103433, 122.81342641190116 43.07895961959661, 122.81352118297497 43.07885376315084, 122.81371407438121 43.07861689644024, 122.81382792962847 43.07848506389187, 122.81394758724419 43.07834945189617, 122.8139475996768 43.07834943884267, 122.81406527200498 43.07823475736366, 122.81406636822337 43.078233528926276, 122.81414012244115 43.07813784775265, 122.81414013238057 43.0781378357488, 122.81421924389382 43.078048687388055, 122.81431910652924 43.07792385933625, 122.81454445453254 43.077663612245075, 122.81454447610425 43.07766359035577, 122.81469787781364 43.07752612646128, 122.8146983543628 43.07752567689817, 122.81485965401376 43.077365368169374, 122.81503864878984 43.07717437370187, 122.81503909252793 43.077173872471676, 122.81519060707161 43.07699245369785, 122.81519062778362 43.07699243190063, 122.81537506785624 43.076820882771294, 122.8153751111117 43.0768208500024, 122.8155804402043 43.07669398006505, 122.81558046697438 43.07669396527855, 122.81564723606589 43.07666111483513, 122.81564728174266 43.0766610962833, 122.81586892895821 43.07658838193549, 122.81598301056256 43.07655564519984, 122.81598303379738 43.07655563930752, 122.8160864260305 43.076532773716885, 122.81618315359671 43.07650759692406, 122.81618628325494 43.07650647253148, 122.81625027983523 43.076476472987, 122.81625249874813 43.07647520642799, 122.81625251940667 43.07647519219886, 122.8162538303146 43.076474105033334, 122.81625387776866 43.07647407314904, 122.8162539332497 43.076474049220266, 122.81627795569473 43.076466041717616, 122.81627801227543 43.076466027546616, 122.81627807153022 43.07646602168494, 122.8162781312111 43.076466024355, 122.81627818905373 43.07646603545547, 122.8162782428638 43.07646605456523, 122.81627829059981 43.076466080959285, 122.8162783304506 43.07646611363628, 122.81627836090443 43.07646615135649, 122.81627839713401 43.07646620823335, 122.81628008473638 43.07646809077462, 122.81628010431614 43.07646810841916, 122.8162822797237 43.07646970629844, 122.81628230375426 43.07646972068653, 122.81628487397224 43.07647096421051, 122.81628490146642 43.076470974751174, 122.81628776092303 43.07647181284194, 122.81628779075156 43.07647181910225, 122.81629082199416 43.076472217335024, 122.81629085285486 43.07647221905364, 122.81629396242485 43.076472159338884, 122.81632596131358 43.07646915841518, 122.81632878101635 43.076468690822516, 122.81632880869361 43.07646868414963, 122.81633145655003 43.07646783353565, 122.81633148200214 43.076467823140945, 122.81633386217175 43.07646662029517, 122.81633388447806 43.07646660655454, 122.81633591080308 43.076465095017674, 122.81633592915563 43.07646507842878, 122.81633752828793 43.07646331291507, 122.81633754202241 43.07646329407853, 122.8163386560766 43.07646133849578, 122.81633866469558 43.0764613180939, 122.81633925334533 43.07645924322984, 122.81633925653726 43.07645922200074, 122.81633929847416 43.07645710296176, 122.81633929612362 43.076457081673716, 122.81633878982991 43.076454995164895, 122.81633878204137 43.07645497463952, 122.81633773409044 43.07645297656555, 122.8163243556762 43.07643327383865, 122.81632433457877 43.07643323343583, 122.81632432441758 43.076433190820126, 122.81632432556839 43.076433147566576, 122.81632433798855 43.07643310527372, 122.81632436121899 43.07643306550467, 122.8163243944012 43.07643302972924, 122.81632443630882 43.0764329992696, 122.81632448539301 43.076432975251514, 122.81632453983968 43.07643295856266, 122.81632459763654 43.076432949819825, 122.81632465664758 43.076432949346135, 122.81632471469177 43.076432957159085, 122.81632524229961 43.076433067484025, 122.81632527183244 43.07643307141668, 122.81632824065417 43.076433249217516, 122.81632827066615 43.07643324885096, 122.81633122976062 43.076432998649786, 122.81633125909823 43.07643299399815, 122.81633409474878 43.07643232541014, 122.8163341222853 43.07643231665198, 122.81633672551955 43.076431255370544, 122.81633675019562 43.07643124284282, 122.81633762450086 43.076430698729716, 122.81633766949983 43.07643067547312, 122.8163377194422 43.07643065848327, 122.81633952396963 43.07643018355788, 122.81633955034414 43.07643017445543, 122.81634203814635 43.07642909279493, 122.8163420616895 43.07642908019397, 122.8163442248159 43.07642767254576, 122.81634424467605 43.07642765690204, 122.81634600474318 43.07642597427403, 122.8163460201998 43.076425956154864, 122.81634731343085 43.076424059518025, 122.81634732392322 43.07642403958085, 122.81634810345639 43.07642199766184, 122.81634810859238 43.076421976680436, 122.81634834720506 43.07641984204195, 122.816347350052 43.076363996415594, 122.81634934835414 43.076250927942525, 122.81634734833398 43.07601493250768, 122.81634334858317 43.07590884129028, 122.81634334850385 43.075591002150404, 122.81634034944403 43.07547592572194, 122.81634334804473 43.075134075520886, 122.81634034773569 43.075032854655014, 122.81633934908972 43.07483513252813, 122.81634334817902 43.07472495752167, 122.81634234882247 43.074514087359404, 122.81635434510446 43.07406222315426, 122.81635134809181 43.0739398965687, 122.81635134804223 43.07374131725145, 122.81635134851096 43.073741304819684, 122.81635532419303 43.07368862685794, 122.81635533633911 43.07368756090844, 122.8163503346029 43.07359255547778, 122.81634993547567 43.07359040880751, 122.81634654947561 43.073579874601286, 122.81634654157558 43.0735798326469, 122.81634654453816 43.07357979035037, 122.81634655825863 43.073579749209884, 122.81634658225089 43.073579710682665, 122.81635530556316 43.07356860620676, 122.81635651095426 43.07356666185986, 122.81635652048392 43.073566641500946, 122.8163571975337 43.07356456425091, 122.81635720158815 43.07356454293252, 122.81635732541207 43.07356240913558, 122.81635732384208 43.073562387641914, 122.81635688988794 43.07356027574198, 122.81635688275134 43.07356025486348, 122.81635590697242 43.07355824249959, 122.81635589453154 43.07355822300311, 122.81635441280002 43.07355638415487, 122.81635439551295 43.07355636675825, 122.81635246230088 43.073554769026465, 122.81635244080258 43.073554754368296, 122.81635012718019 43.07355345649025, 122.8163501022606 43.07355344510931, 122.81634749328322 43.07355249479847, 122.81634746585891 43.073552487113325, 122.81634465743895 43.07355191930539, 122.81634462851765 43.07355191559856, 122.81634172389995 43.07355175116763, 122.81634169454566 43.07355175157543, 122.81633880051132 43.07355199656643, 122.8163387718026 43.073552001073885, 122.81633798786025 43.07355218326719, 122.81633792611112 43.073552192636946, 122.81633786305325 43.07355219255878, 122.81633780134774 43.07355218303599, 122.81633774359855 43.073552164470456, 122.8163376922427 43.07355213764564, 122.81633764944736 43.073552103693565, 122.81633761701869 43.073552064047014, 122.81633759632508 43.07355202037909, 122.816331934516 43.07353440977959, 122.81633107900583 43.07353252235741, 122.81633106809852 43.07353250397038, 122.81632976837011 43.07353075817814, 122.81632975317599 43.073530741505934, 122.81632805066327 43.07352919299497, 122.81632803166787 43.07352917857014, 122.8163259806487 43.07352787670883, 122.81632595851201 43.073527865019656, 122.8163236001794 43.073526841838955, 122.81630905540544 43.07352175117063, 122.81630900516055 43.07352172903826, 122.81630896157058 43.073521700307595, 122.81630892622495 43.073521666026316, 122.81630890041265 43.07352162744451, 122.81630888507496 43.073521585969104, 122.81630888077106 43.07352154311253, 122.81630934298654 43.07350623860311, 122.81630910360757 43.073504006525404, 122.81630909812498 43.07350398432829, 122.81630825468979 43.07350183244528, 122.81630824326228 43.073501811499426, 122.81630682984655 43.07349982674365, 122.81630681293672 43.07349980789716, 122.81630488664648 43.07349807045793, 122.81630486493584 43.0734980544705, 122.81630250359824 43.073496634544966, 122.81630247796551 43.073496622063736, 122.81629977698371 43.0734955770198, 122.81629974846395 43.073495568548694, 122.8162968169648 43.073494940608946, 122.81629678671024 43.07349493649031, 122.816294509503 43.07349479772501, 122.81629443437738 43.073494786082094, 122.81629157053816 43.073494058174106, 122.81629154082619 43.07349405298618, 122.81628853665853 43.07349375631317, 122.81628850613276 43.07349375555242, 122.81628548141836 43.07349390197584, 122.81628545129423 43.07349390567259, 122.81628252642341 43.073494489364485, 122.81628249789965 43.073494497371634, 122.8162797892889 43.073495495099664, 122.81627976350089 43.07349550709852, 122.81627737895877 43.073496879151, 122.81627735698785 43.07349689462532, 122.81627537272864 43.073498604196764, 122.81625837427178 43.07351660434943, 122.81625696242986 43.073518453281785, 122.8162569506832 43.07351847282323, 122.81625604197488 43.07352048429616, 122.81625603548858 43.073520505114125, 122.81625566279422 43.0735226063433, 122.81625566180503 43.07352262763321, 122.8162558417717 43.07352476388461, 122.81625833592936 43.07353635440832, 122.81625833967442 43.07353639072683, 122.81625833537845 43.07353642701254, 122.81625805386619 43.0735376468981, 122.81625803842911 43.0735376887525, 122.81625801232968 43.07353772765969, 122.81625797653685 43.07353776217539, 122.81625793237934 43.07353779101831, 122.81625788149634 43.07353781311774, 122.81625782577682 43.07353782765328, 122.816257767289 43.073537834085364, 122.8162567182826 43.07353787443114, 122.81625668872067 43.073537877711125, 122.8162538124962 43.0735384116265, 122.81625378436733 43.07353841905567, 122.81625110451603 43.07353935257074, 122.81625107889292 43.07353936386583, 122.81624869760131 43.073540661384285, 122.81624867546077 43.0735406761147, 122.81624668353072 43.073542288160375, 122.81624666571703 43.073542305764455, 122.81624513910333 43.07354417086817, 122.81624512629614 43.07354419067434, 122.81624412321057 43.07354623771695, 122.81624411591608 43.07354625891747, 122.81624367158605 43.07354843172712, 122.81623467306792 43.07367643202968, 122.81623482009637 43.07367865324273, 122.81623482461787 43.07367867540317, 122.8162355705956 43.07368083093748, 122.81623558103166 43.07368085199746, 122.81623689622522 43.073682855936894, 122.81623691216025 43.073682875058, 122.8162387441486 43.073684647529745, 122.81623876494737 43.07368466394913, 122.81623933551238 43.07368503258764, 122.81623937994736 43.073685068194486, 122.81623941300441 43.073685109928206, 122.81623943316336 43.073685155869455, 122.81623943949691 43.073685203905335, 122.816235652905 43.073935871783036, 122.8162416489115 43.07414402478134, 122.81623465647537 43.07443670511859, 122.81622965212784 43.07454292180625, 122.81622765213211 43.07474591622429, 122.81622964991554 43.07484300589484, 122.81622765177939 43.07494304481124, 122.816228651023 43.075135922251384, 122.81622365417634 43.07533879216885, 122.81622964987646 43.07552408327554, 122.81622865354306 43.075612184005195, 122.81623064927396 43.07570299845647, 122.81622665294738 43.07587515849216, 122.81623165274642 43.076141151331775, 122.81623464634608 43.07618818473204, 122.81623464665473 43.076188198089234, 122.81623265265794 43.07630285126413, 122.81623664417258 43.07638804259307, 122.81623664425203 43.07638805610412, 122.81623470383643 43.07644335755792, 122.81623469357996 43.076443409734836, 122.81622962799909 43.07645734007445, 122.81622960346965 43.07645738630489, 122.81622956571955 43.076457427472555, 122.81622951658304 43.07645746157713, 122.81622945844762 43.07645748696146, 122.81608840078415 43.076504506137944, 122.8160883705881 43.07650451482317, 122.81588816241617 43.07655332178886, 122.81588700510352 43.07655364204759, 122.81568099798842 43.076617645361125, 122.81567843440591 43.076618663376195, 122.81563234836464 43.076641337785354, 122.81563230271463 43.076641356328395, 122.81560371223186 43.07665073817808, 122.81560009162997 43.0766524068589, 122.81556196519402 43.07667596473866, 122.81556193842798 43.076675979523166, 122.8154284316408 43.07674166699237, 122.81542545764233 43.07674358335008, 122.81522046334081 43.076914579676284, 122.81521898768268 43.07691603254963, 122.81505425054014 43.0771087250398, 122.81505424001713 43.07710873654562, 122.81492710655073 43.07723889539987, 122.81478555691477 43.077399384739614, 122.81478553803774 43.077399403862294, 122.81461105690188 43.077557932407814, 122.8144857963737 43.07767817623778, 122.81448489174483 43.077679146279976, 122.8143810389614 43.07780396930548, 122.81427418678255 43.077922805130335, 122.81427372594028 43.07792335056253, 122.81408313019654 43.078163840417226, 122.81408311308438 43.078163859672976, 122.81396758585065 43.07828038280648, 122.81386901914432 43.07838499548799, 122.81367580611538 43.078609250344236, 122.81347793528778 43.07885309109868, 122.8133904206504 43.0789535342219, 122.81339040576377 43.07895354981274, 122.81329481136775 43.07904516109096, 122.81323970877885 43.079101705993644, 122.81323968948134 43.07910172381704, 122.81317133613791 43.079158685874525, 122.81315906917764 43.07916920040225, 122.81315905851542 43.07916920907525, 122.81314069723014 43.07918338729978, 122.81297769247911 43.07931339182041, 122.812976403289 43.07931457064924, 122.81285970740608 43.07943725091098, 122.8128596951646 43.07943726290826, 122.81276801346344 43.079521141899406, 122.81276797037238 43.079521174094374, 122.81276791938838 43.07952119934365, 122.81262506321593 43.07957756436014, 122.81262500850984 43.07957758117368, 122.81234446453846 43.079641250724535, 122.81234362349711 43.07964146114322, 122.81202963444979 43.07972745814166, 122.81175215088834 43.079814596091744, 122.81149504500259 43.07988933626338, 122.81149501695413 43.07988934328856, 122.81123573007397 43.07994419356245, 122.81123296272122 43.07994500172469, 122.81123293605809 43.07994501183287, 122.81123043696705 43.0799462002156, 122.81123041350615 43.07994621394277, 122.81122827871427 43.07994773687755, 122.81122825935815 43.07994775369545, 122.81122657090421 43.079949552656906, 122.81122655639581 43.07994957191996, 122.81122537916644 43.07995157777496, 122.81122537006381 43.07995159874193, 122.81122482739883 43.079953465714475, 122.81122480998468 43.079953506313615, 122.81122478245442 43.07995354378337, 122.8112247457926 43.0799535767836, 122.81122470131048 43.07995360413396, 122.81122465059903 43.07995362485625, 122.8112245954721 43.07995363820926, 122.8111385696891 43.07996803400444, 122.8111357444717 43.07996872628277, 122.81113571707247 43.07996873527062, 122.81113313038834 43.07996981827045, 122.81113310590762 43.07996983100385, 122.81113085715889 43.07997126310687, 122.8111308365375 43.07997127909652, 122.81112901214233 43.07997300526785, 122.8111289961729 43.07997302389902, 122.81112766624227 43.079974977802436, 122.81112765553779 43.07997499836012, 122.81112687117972 43.07997710490859, 122.81112686615229 43.079977126601875, 122.81112665750935 43.07997930484167, 122.81112665835205 43.07997932683689, 122.81112703344233 43.079981493059734, 122.81112704012287 43.07998151451248, 122.81112798453185 43.07998358547147, 122.81112799679316 43.07998360555599, 122.81112947422811 43.07998550166596, 122.81112949159922 43.079985519611085, 122.81113144528291 43.07998716800495, 122.81113146709633 43.079987183121176, 122.8111338219493 43.07998852045187, 122.81113384736713 43.079988532158396, 122.81113651289445 43.07998950703351, 122.81113654093876 43.07998951488002, 122.81113941470569 43.079990089835505, 122.81113944429966 43.079990093520706, 122.81114241586847 43.079990246461264, 122.81114244579956 43.07999024584509, 122.81114543064153 43.079989967051624, 122.81139640465857 43.0799479713991), (122.81629380986091 43.07630787985363, 122.81629378692132 43.07630784495696, 122.81629377248564 43.076307807693304, 122.8162937669815 43.07630776916688, 122.81629334713392 43.076290835134515, 122.81628634964918 43.07582401071422, 122.81628834817214 43.075705922870675, 122.81628434897974 43.0752660237849, 122.81628834835335 43.07498799881202, 122.81628834826134 43.07461913053661, 122.81629734416616 43.07432925760159, 122.81629934700358 43.07414107990474, 122.81629921217514 43.074139505613786, 122.8162833347884 43.0740521801059, 122.81628333213398 43.0740521538467, 122.81628262211787 43.07401842851345, 122.81628262783259 43.07401838168393, 122.81628264669577 43.07401833674704, 122.81628267788406 43.07401829566436, 122.81628272003609 43.074018260229245, 122.8162827713117 43.07401823198851, 122.81628282947266 43.074018212174934, 122.81628289198012 43.07401820165342, 122.81628530707978 43.074017986302515, 122.81628533607262 43.074017981590536, 122.81628813766393 43.07401731169252, 122.81628816487061 43.074017302966446, 122.81629073738229 43.0740162492121, 122.81629076177943 43.07401623680021, 122.81629300844719 43.07401483882613, 122.81629302911695 43.07401482319546, 122.81629486543339 43.07401313358569, 122.81629488159878 43.07401311532405, 122.81629623849075 43.074011197633446, 122.81629624954421 43.074011177426485, 122.8162970759731 43.074009103788626, 122.81629708148442 43.074009082450544, 122.81629734761415 43.07400690903536, 122.8162963492987 43.07390407300231, 122.81630434464329 43.07362023575563, 122.81630433510666 43.073619538673476, 122.81630333442119 43.07360153567148, 122.81630315913732 43.07360024025081, 122.81630207979266 43.07359522448446, 122.81630207605257 43.07359518762667, 122.81630208059241 43.07359515081719, 122.81630404752266 43.073586868990446, 122.81630406315674 43.07358682733749, 122.81630408935999 43.07358678864227, 122.81630412516657 43.07358675433087, 122.81630416925687 43.073586725667816, 122.81630422000589 43.0735867037095, 122.81630427554344 43.07358668926519, 122.8163043338226 43.07358668286723, 122.81630439269554 43.073586684751405, 122.81630444999242 43.073586694848274, 122.81630450360166 43.07358671278571, 122.81630455154745 43.07358673790268, 122.81630459206285 43.07358676927344, 122.81630462365453 43.07358680574186, 122.81630464515833 43.0735868459639, 122.81630465578166 43.0735868884572, 122.81630490611086 43.07358903902528, 122.81630966823234 43.073608087530076, 122.81630967322708 43.07360812473125, 122.81631265008063 43.07375399233876, 122.81630965387585 43.07389382033527, 122.81630966221987 43.07389441216098, 122.81631664515658 43.074035069164886, 122.81631664527922 43.074035082502505, 122.81630465197688 43.07441894425109, 122.81629865182491 43.07527606423431, 122.8163066515411 43.07632306129836, 122.81630721309003 43.076342735207135, 122.81630720854174 43.07634277879051, 122.81630719258565 43.07634282090713, 122.81630716582373 43.07634285996794, 122.81630712926571 43.0763428944992, 122.81630708429086 43.07634292319804, 122.8163070325961 43.0763429449817, 122.81630697613188 43.07634295902827, 122.81630691702851 43.076342964807786, 122.81630685751598 43.076342962102196, 122.81630679983967 43.076342951013565, 122.81630674617561 43.076342931960276, 122.81630669854857 43.076342905661186, 122.81630665875547 43.076342873108565, 122.81630662829781 43.07634283553061, 122.81630660832455 43.0763427943451, 122.81629588807203 43.07631126854871, 122.81629490319624 43.07630923564802, 122.81629489061174 43.07630921596251, 122.81629380986091 43.07630787985363), (122.81630544471787 43.073583598895084, 122.81630542062727 43.073583640407456, 122.81630538572618 43.07358367756298, 122.81630534141723 43.07358370886839, 122.81630528948102 43.07358373306559, 122.81630523200485 43.073583749182085, 122.81630517129877 43.07358375657015, 122.81630510980233 43.07358375493292, 122.81630504998708 43.07358374433615, 122.81630499425702 43.07358372520572, 122.81630494485181 43.07358369831049, 122.81630490375701 43.073583664731316, 122.8163048726242 43.07358362581776, 122.81630485270452 43.07358358313369, 122.81630484479857 43.073583538394544, 122.81630484922417 43.07358349339836, 122.81630591607457 43.07357900138719, 122.8163059321772 43.073578958840145, 122.81630595930248 43.073578919417216, 122.81630599640611 43.073578884636156, 122.8163060420596 43.07357885583598, 122.81630609450524 43.07357883412551, 122.81630615172413 43.07357882034057, 122.81630621151321 43.07357881501187, 122.81630627157068 43.07357881834454, 122.81630632958444 43.0735788302103, 122.81630638332089 43.07357885015232, 122.81630793588916 43.07357957468388, 122.816307983899 43.073579602370096, 122.8163080234803 43.07357963647728, 122.81630805306574 43.07357967565477, 122.8163080714838 43.07357971835122, 122.8163080780051 43.073579762875845, 122.81630807237144 43.073579807465556, 122.81630805480586 43.07357985035461, 122.81630802600401 43.0735798898447, 122.816307254231 43.07358073364034, 122.8163058613854 43.073582624832845, 122.8163058499228 43.073582644794335, 122.81630544471787 43.073583598895084), (122.81626578181894 43.07644537914261, 122.81626572307317 43.07644539368198, 122.81626566154019 43.076445399270895, 122.81626559973029 43.076445395681354, 122.81626554016523 43.0764453830598, 122.81626548527504 43.076445361921174, 122.81626543729917 43.076445333127836, 122.81626539819467 43.07644529785449, 122.81626536955704 43.07644525754018, 122.81626535255465 43.076445213829594, 122.81626534788101 43.076445168506005, 122.81626610466036 43.07642360015575, 122.81626611169843 43.07642355769094, 122.81626612957105 43.076423516969655, 122.81626615763236 43.07642347946339, 122.81626619486843 43.07642344652745, 122.81626623993357 43.076423419351954, 122.81626629119953 43.076423398918905, 122.81626634681376 43.07642338596662, 122.8162664047666 43.076423380963156, 122.81626646296388 43.0764233840893, 122.81626651930279 43.07642339523211, 122.81626657174748 43.07642341398893, 122.81626661840278 43.07642343968197, 122.81626665758284 43.07642347138283, 122.81626668787183 43.076423507945975, 122.81626670817538 43.07642354805021, 122.81626671775979 43.07642359024637, 122.81626769100184 43.07643379433344, 122.81626817448462 43.07643590869029, 122.81626818213175 43.07643592955604, 122.81626920919452 43.07643793684313, 122.81626922215294 43.07643795624871, 122.81627075475375 43.07643978212273, 122.81627077254257 43.07643979934825, 122.8162727539094 43.07644137617354, 122.81627277587042 43.07644139058194, 122.81627378658025 43.076441934962055, 122.81627383440961 43.07644196693087, 122.81627387203193 43.076442005540756, 122.81627389777448 43.0764420490752, 122.81627391049297 43.076442095598736, 122.81627390962183 43.076442143043, 122.8162738951998 43.07644218929874, 122.81627366913648 43.076442672605836, 122.81627364303367 43.076442714105724, 122.8162736060321 43.07644275088405, 122.81627355965777 43.076442781424106, 122.81627350582318 43.076442804466396, 122.81626578181894 43.07644537914261), (122.81627028953254 43.07367513488081, 122.81627029595205 43.07367509152486, 122.81627031365826 43.07367504989082, 122.8162703419861 43.073675011542306, 122.81627157168028 43.073673674918076, 122.81627161032948 43.073673640739855, 122.81627165737936 43.07367361278931, 122.81627171099863 43.073673592154286, 122.81627176910037 43.07367357963792, 122.81627182942331 43.073673575727376, 122.81627188961951 43.073673580574855, 122.81627194734621 43.07367359399166, 122.81627200035652 43.07367361545562, 122.81627204658732 43.07367364413133, 122.81627208423919 43.07367367890273, 122.81627211184667 43.07367371841645, 122.81627212833538 43.07367376113462, 122.8162721330635 43.07367380539458, 122.81626952502727 43.07376638999421, 122.8162695179334 43.07376643366596, 122.81626949938823 43.07376647549215, 122.81626947010015 43.073766513875164, 122.81626943118775 43.073766547348896, 122.81626938413741 43.073766574634824, 122.81626933074631 43.07376659469068, 122.81626927305368 43.073766606750425, 122.81626921326327 43.07376661035342, 122.8162691536588 43.073766605362046, 122.81626909651699 43.07376659196695, 122.8162690440204 43.073766570679766, 122.8162689981742 43.073766542313614, 122.81626896072953 43.07376650795194, 122.81626893311679 43.073766468907266, 122.81626891639047 43.07376642667093, 122.81626891118951 43.07376638285621, 122.81627028953254 43.07367513488081)))</textarea>
            <div class="coord-settings" style="margin-bottom:8px;font-size:12px;color:#333;">
                <label>WKT坐标系：
                    <select id="coordSysSelect" style="margin-left:6px;">
                        <option value="wgs84" selected>WGS84</option>
                        <option value="gcj02">GCJ-02（国测局）</option>
                        <option value="bd09">BD-09（百度）</option>
                        <option value="cgcs2000">CGCS2000</option>
                    </select>
                </label>
                <!-- 已移除“不进行绘制坐标转换”选项，统一使用WGS84绘制 -->
            </div>

            <div class="button-group">
                <button id="drawButton">绘制轮廓</button>
                <button id="clearButton">清空轮廓</button>
            </div>
            <!-- 显示开关：仅保留显示亩数 -->
            <div class="display-toggles" style="margin-top:8px;font-size:12px;color:#333;">
                <label><input type="checkbox" id="toggleLabelsCheckbox"> 显示亩数</label>
            </div>
            <!-- 颜色选择器 -->
            <div class="color-picker-container" style="margin-top:8px;">
                <div style="margin-bottom:6px;font-size:12px;color:#333;">轮廓颜色设置：</div>
                <div style="display:flex;align-items:center;gap:8px;">
                    <div style="display:flex;align-items:center;gap:4px;">
                        <label style="font-size:12px;">边框颜色:</label>
                        <div id="outlineColorPicker" class="color-picker" style="width:24px;height:24px;border:1px solid #ccc;cursor:pointer;background-color:#FFD700;"></div>
                        <input type="color" id="outlineColorInput" value="#FFD700" style="display:none;">
                    </div>
                    <div style="display:flex;align-items:center;gap:4px;">
                        <label style="font-size:12px;">填充颜色:</label>
                        <div id="fillColorPicker" class="color-picker" style="width:24px;height:24px;border:1px solid #ccc;cursor:pointer;background-color:#FFFF00;"></div>
                        <input type="color" id="fillColorInput" value="#FFFF00" style="display:none;">
                    </div>
                    <div style="display:flex;align-items:center;gap:4px;">
                        <label style="font-size:12px;">透明度:</label>
                        <input type="range" id="fillOpacitySlider" min="0" max="100" value="35" style="width:60px;">
                        <span id="fillOpacityValue" style="font-size:12px;">35%</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-pane" id="tabSplit">
            <!-- MultiPolygon → 多个 Polygon 分割器 -->
            <div class="split-section">
                <div class="title">MultiPolygon → 多个 Polygon 分割器</div>
                <div class="desc">输入一个 MULTIPOLYGON WKT，分割为多行 POLYGON WKT。</div>
                <textarea id="multiInput"></textarea>
                <div class="split-actions">
                    <button id="splitMultiBtn">分割为多个 POLYGON</button>
                    <button id="copyPolysBtn">复制结果</button>
                </div>
                <textarea id="polyOutput" readonly></textarea>
            </div>
        </div>

        <div class="tab-pane" id="tabBatch">
            <!-- 批量POLYGON → MULTIPOLYGON 生成器 -->
            <div class="batch-section">
                <div class="title">批量POLYGON → MULTIPOLYGON 合并器</div>
                <div class="desc">每行一个 POLYGON WKT（或用分号分隔）。生成后可一键填充到上方并绘制。</div>
                <textarea id="batchInput"></textarea>
                <div class="batch-actions">
                    <button id="generateMultiBtn">生成 MULTIPOLYGON</button>
                    <button id="copyMultiBtn">复制结果</button>
                </div>
                <textarea id="multiOutput" readonly></textarea>
            </div>
        </div>
        <div class="tab-pane" id="tabTrack">
            <div class="tip">请粘贴轨迹文本（支持两种格式：1）每行一条：定位时间yyyyMMddHHmmss, 经度, 纬度；2）单行#分隔：经度,纬度,定位时间yyyyMMddHHmmss#经度,纬度,定位时间yyyyMMddHHmmss#…）。</div>
            <div class="coord-settings" style="margin-bottom:8px;font-size:12px;color:#333;">
                <label>轨迹坐标系：
                    <select id="trackCoordSysSelect" style="margin-left:6px;">
                        <option value="wgs84" selected>WGS84</option>
                        <option value="gcj02">GCJ-02（国测局）</option>
                        <option value="bd09">BD-09（百度）</option>
                        <option value="cgcs2000">CGCS2000</option>
                    </select>
                </label>
            </div>
            <textarea id="trackTextarea" style="width:100%;height:120px;margin-bottom:10px;padding:8px;border:1px solid #ddd;border-radius:4px;font-family:monospace;resize:vertical;box-sizing:border-box;">20250915075504,122.807561,43.088081
20250915075514,122.807579,43.087975
20250915075524,122.807604,43.087860
20250915075534,122.807620,43.087731
20250915075544,122.807581,43.087636
20250915075554,122.807574,43.087630
20250915075604,122.807574,43.087630
20250915075614,122.807574,43.087630
20250915075624,122.807574,43.087630
20250915075634,122.807574,43.087630
20250915075644,122.807632,43.087639
20250915075654,122.807657,43.087618
20250915075704,122.807709,43.087564
20250915075714,122.807715,43.087555
20250915075724,122.807715,43.087554
20250915075734,122.807960,43.087458
20250915075744,122.808843,43.087395
20250915075754,122.809200,43.087283
20250915075804,122.809166,43.087135
20250915075814,122.809093,43.086943
20250915075824,122.809023,43.086676
20250915075834,122.808938,43.086446
20250915075844,122.808880,43.086288
20250915075854,122.808813,43.086079
20250915075904,122.808750,43.085872
20250915075914,122.808689,43.085666
20250915075924,122.808619,43.085453
20250915075934,122.808533,43.085208
20250915075944,122.808448,43.084934
20250915075954,122.808350,43.084649
20250915080004,122.808265,43.084394
20250915080014,122.808185,43.084124
20250915080024,122.808090,43.083830
20250915080034,122.807998,43.083538
20250915080044,122.807902,43.083246
20250915080054,122.807814,43.082947
20250915080104,122.807719,43.082649
20250915080114,122.807620,43.082352
20250915080124,122.807531,43.082054
20250915080134,122.807435,43.081758
20250915080144,122.807339,43.081463
20250915080154,122.807298,43.081187
20250915080204,122.807517,43.081043
20250915080214,122.807855,43.080960
20250915080224,122.808229,43.080865
20250915080234,122.808592,43.080745
20250915080244,122.808916,43.080641
20250915080254,122.809184,43.080545
20250915080304,122.809381,43.080480
20250915080314,122.809694,43.080389
20250915080324,122.809928,43.080329
20250915080334,122.810208,43.080242
20250915080344,122.810538,43.080148
20250915080354,122.810852,43.080051
20250915080404,122.811142,43.079979
20250915080414,122.811393,43.079937
20250915080424,122.811658,43.079860
20250915080434,122.811892,43.079792
20250915080444,122.812142,43.079711
20250915080454,122.812436,43.079637
20250915080504,122.812587,43.079605
20250915080514,122.812753,43.079552
20250915080524,122.812806,43.079517
20250915080534,122.812870,43.079455
20250915080544,122.812959,43.079353
20250915080554,122.812993,43.079324
20250915080604,122.812994,43.079324
20250915080614,122.812994,43.079324
20250915080624,122.812994,43.079324
20250915080634,122.813043,43.079286
20250915080644,122.813183,43.079166
20250915080654,122.813297,43.079071
20250915080704,122.813414,43.078953
20250915080714,122.813508,43.078848
20250915080724,122.813603,43.078733
20250915080734,122.813701,43.078611
20250915080744,122.813815,43.078479
20250915080754,122.813935,43.078343
20250915080804,122.814053,43.078228
20250915080814,122.814127,43.078132
20250915080824,122.814206,43.078043
20250915080834,122.814306,43.077918
20250915080844,122.814404,43.077806
20250915080854,122.814532,43.077657
20250915080904,122.814686,43.077519
20250915080914,122.814847,43.077359
20250915080924,122.815026,43.077168
20250915080934,122.815178,43.076986
20250915080944,122.815364,43.076813
20250915080954,122.815610,43.076661
20250915081004,122.815863,43.076578
20250915081014,122.815976,43.076546
20250915081024,122.815978,43.076545
20250915081034,122.816020,43.076536
20250915081044,122.816082,43.076522
20250915081054,122.816082,43.076522
20250915081104,122.816082,43.076522
20250915081114,122.816082,43.076522
20250915081124,122.816082,43.076522
20250915081134,122.816178,43.076497
20250915081144,122.816178,43.076497
20250915081154,122.816178,43.076497
20250915081204,122.816178,43.076497
20250915081214,122.816178,43.076497
20250915081224,122.816178,43.076497
20250915081234,122.816178,43.076497
20250915081244,122.816178,43.076497
20250915081254,122.816178,43.076497
20250915081304,122.816181,43.076496
20250915081314,122.816242,43.076467
20250915081324,122.816250,43.076445
20250915081334,122.816252,43.076388
20250915081344,122.816248,43.076303
20250915081354,122.816248,43.076303
20250915081404,122.816248,43.076303
20250915081414,122.816248,43.076303
20250915081424,122.816248,43.076303
20250915081434,122.816248,43.076303
20250915081444,122.816248,43.076303
20250915081454,122.816249,43.076286
20250915081504,122.816249,43.076244
20250915081514,122.816250,43.076188
20250915081524,122.816247,43.076141
20250915081534,122.816247,43.076094
20250915081544,122.816246,43.076028
20250915081554,122.816244,43.075954
20250915081604,122.816242,43.075875
20250915081614,122.816243,43.075793
20250915081624,122.816246,43.075703
20250915081634,122.816244,43.075612
20250915081644,122.816245,43.075524
20250915081654,122.816241,43.075434
20250915081704,122.816239,43.075339
20250915081714,122.816241,43.075234
20250915081724,122.816244,43.075136
20250915081734,122.816244,43.075042
20250915081744,122.816243,43.074943
20250915081754,122.816245,43.074843
20250915081804,122.816243,43.074746
20250915081814,122.816244,43.074647
20250915081824,122.816245,43.074543
20250915081834,122.816250,43.074437
20250915081844,122.816252,43.074334
20250915081854,122.816254,43.074236
20250915081904,122.816257,43.074144
20250915081914,122.816255,43.074048
20250915081924,122.816251,43.073936
20250915081934,122.816253,43.073837
20250915081944,122.816255,43.073730
20250915081954,122.816256,43.073605
20250915082004,122.816259,43.073549
20250915082014,122.816250,43.073677
20250915082024,122.816273,43.073652
20250915082034,122.816292,43.073572
20250915082044,122.816294,43.073506
20250915082054,122.816269,43.073557
20250915082104,122.816288,43.073505
20250915082114,122.816271,43.073523
20250915082124,122.816288,43.073602
20250915082134,122.816288,43.073620
20250915082144,122.816289,43.073620
20250915082154,122.816288,43.073622
20250915082204,122.816287,43.073706
20250915082214,122.816284,43.073806
20250915082224,122.816281,43.073904
20250915082234,122.816282,43.074007
20250915082244,122.816266,43.073958
20250915082254,122.816268,43.074053
20250915082304,122.816284,43.074141
20250915082314,122.816283,43.074224
20250915082324,122.816282,43.074329
20250915082334,122.816278,43.074423
20250915082344,122.816276,43.074525
20250915082354,122.816273,43.074619
20250915082404,122.816273,43.074712
20250915082414,122.816273,43.074841
20250915082424,122.816273,43.074988
20250915082434,122.816271,43.075129
20250915082444,122.816269,43.075266
20250915082454,122.816269,43.075330
20250915082504,122.816270,43.075457
20250915082514,122.816272,43.075585
20250915082524,122.816273,43.075706
20250915082534,122.816271,43.075824
20250915082544,122.816273,43.075947
20250915082554,122.816274,43.076067
20250915082604,122.816276,43.076185
20250915082614,122.816278,43.076291
20250915082624,122.816281,43.076412
20250915082634,122.816283,43.076433
20250915082644,122.816283,43.076433
20250915082654,122.816283,43.076433
20250915082704,122.816283,43.076433
20250915082714,122.816283,43.076433
20250915082724,122.816283,43.076433
20250915082734,122.816283,43.076433
20250915082744,122.816283,43.076433
20250915082754,122.816283,43.076433
20250915082804,122.816283,43.076433
20250915082814,122.816283,43.076433
20250915082824,122.816283,43.076433
20250915082834,122.816283,43.076433
20250915082844,122.816283,43.076433
20250915082854,122.816283,43.076433
20250915082904,122.816283,43.076433
20250915082914,122.816283,43.076433
20250915082924,122.816283,43.076433
20250915082934,122.816283,43.076433
20250915082944,122.816283,43.076433
20250915082954,122.816283,43.076433
20250915083004,122.816283,43.076433
20250915083014,122.816283,43.076433
20250915083024,122.816283,43.076433
20250915083034,122.816283,43.076433
20250915083044,122.816283,43.076433
20250915083054,122.816283,43.076433
20250915083104,122.816283,43.076433
20250915083114,122.816283,43.076433
20250915083124,122.816283,43.076433
20250915083134,122.816283,43.076433
20250915083144,122.816283,43.076433
20250915083154,122.816283,43.076433
20250915083204,122.816282,43.076421
20250915083214,122.816281,43.076314
20250915083224,122.816315,43.076414
20250915083234,122.816269,43.076377
20250915083244,122.816324,43.076458
20250915083254,122.816292,43.076461
20250915083304,122.816324,43.076393
20250915083314,122.816323,43.076361
20250915083324,122.816323,43.076361
20250915083334,122.816323,43.076361
20250915083344,122.816322,43.076323
20250915083354,122.816322,43.076305
20250915083404,122.816321,43.076185
20250915083414,122.816320,43.076035
20250915083424,122.816319,43.075885
20250915083434,122.816317,43.075725
20250915083444,122.816316,43.075567
20250915083454,122.816314,43.075424
20250915083504,122.816314,43.075276
20250915083514,122.816315,43.075127
20250915083524,122.816317,43.074984
20250915083534,122.816316,43.074834
20250915083544,122.816317,43.074696
20250915083554,122.816318,43.074559
20250915083604,122.816320,43.074419
20250915083614,122.816324,43.074284
20250915083624,122.816329,43.074148
20250915083634,122.816332,43.074035
20250915083644,122.816325,43.073894
20250915083654,122.816328,43.073754
20250915083704,122.816325,43.073607
20250915083714,122.816320,43.073587
20250915083724,122.816342,43.073563
20250915083734,122.816331,43.073577
20250915083744,122.816271,43.073549
20250915083754,122.816277,43.073523
20250915083804,122.816317,43.073537
20250915083814,122.816335,43.073593
20250915083824,122.816339,43.073672
20250915083834,122.816340,43.073688
20250915083844,122.816340,43.073688
20250915083854,122.816340,43.073688
20250915083904,122.816340,43.073688
20250915083914,122.816336,43.073741
20250915083924,122.816336,43.073832
20250915083934,122.816336,43.073940
20250915083944,122.816339,43.074062
20250915083954,122.816337,43.074182
20250915084004,122.816334,43.074296
20250915084014,122.816331,43.074409
20250915084024,122.816327,43.074514
20250915084034,122.816327,43.074617
20250915084044,122.816328,43.074725
20250915084054,122.816324,43.074835
20250915084103,122.816324,43.074934
20250915084113,122.816325,43.075033
20250915084123,122.816328,43.075134
20250915084133,122.816327,43.075224
20250915084143,122.816327,43.075352
20250915084153,122.816325,43.075476
20250915084203,122.816328,43.075591
20250915084213,122.816328,43.075697
20250915084223,122.816328,43.075803
20250915084233,122.816328,43.075909
20250915084243,122.816332,43.076015
20250915084253,122.816333,43.076133
20250915084303,122.816334,43.076251
20250915084313,122.816332,43.076364
20250915084323,122.816333,43.076420
20250915084333,122.816327,43.076378
20250915084343,122.816328,43.076415
20250915084353,122.816328,43.076418
20250915084403,122.816328,43.076418
20250915084413,122.816328,43.076418
20250915084423,122.816328,43.076418
20250915084433,122.816328,43.076418
20250915084443,122.816328,43.076418
20250915084453,122.816328,43.076418
20250915084503,122.816328,43.076418
20250915084513,122.816328,43.076418
20250915084523,122.816328,43.076418
20250915084533,122.816328,43.076418
20250915084543,122.816328,43.076418
20250915084553,122.816328,43.076418
20250915084603,122.816328,43.076418
20250915084613,122.816328,43.076418
20250915084623,122.816328,43.076418
20250915084633,122.816328,43.076418
20250915084643,122.816328,43.076418
20250915084653,122.816328,43.076418
20250915084703,122.816328,43.076418
20250915084713,122.816328,43.076418
20250915084723,122.816328,43.076418
20250915084733,122.816328,43.076418
20250915084743,122.816328,43.076422
20250915085101,122.816315,43.076389
20250915085111,122.816286,43.076451
20250915085121,122.816094,43.076515
20250915085131,122.815893,43.076564
20250915085141,122.815774,43.076601
20250915085151,122.815771,43.076602
20250915085201,122.815771,43.076602
20250915085211,122.815771,43.076602
20250915085221,122.815771,43.076602
20250915085231,122.815771,43.076602
20250915085241,122.815771,43.076602
20250915085251,122.815771,43.076602
20250915085301,122.815771,43.076602
20250915085311,122.815771,43.076602
20250915085321,122.815771,43.076602
20250915085331,122.815771,43.076602
20250915085341,122.815771,43.076602
20250915085351,122.815771,43.076602
20250915085401,122.815771,43.076602
20250915085411,122.815771,43.076602
20250915085421,122.815771,43.076602
20250915085431,122.815771,43.076602
20250915085441,122.815771,43.076602
20250915085451,122.815771,43.076602
20250915085501,122.815771,43.076602
20250915085511,122.815687,43.076628
20250915085521,122.815437,43.076751
20250915085531,122.815232,43.076922
20250915085541,122.815067,43.077115
20250915085551,122.814940,43.077245
20250915085601,122.814798,43.077406
20250915085611,122.814623,43.077565
20250915085621,122.814498,43.077685
20250915085631,122.814394,43.077810
20250915085641,122.814287,43.077929
20250915085651,122.814186,43.078055
20250915085701,122.814096,43.078170
20250915085711,122.813980,43.078287
20250915085721,122.813882,43.078391
20250915085731,122.813796,43.078492
20250915085741,122.813689,43.078615
20250915085751,122.813583,43.078747
20250915085801,122.813491,43.078859
20250915085811,122.813403,43.078960
20250915085821,122.813307,43.079052
20250915085831,122.813233,43.079127
20250915085841,122.813231,43.079130
20250915085851,122.813152,43.079191
20250915085901,122.812989,43.079321
20250915085911,122.812872,43.079444
20250915085921,122.812778,43.079530
20250915085931,122.812631,43.079588
20250915085941,122.812349,43.079652
20250915085951,122.812035,43.079738
20250915090001,122.811758,43.079825
20250915090011,122.811500,43.079900
20250915090021,122.811240,43.079955
20250915090031,122.810964,43.080015
20250915090041,122.810666,43.080094
20250915090051,122.810354,43.080194
20250915090101,122.810032,43.080287
20250915090111,122.809744,43.080370
20250915090121,122.809391,43.080472
20250915090131,122.809065,43.080588
20250915090141,122.808771,43.080690
20250915090151,122.808429,43.080791
20250915090201,122.808075,43.080900
20250915090211,122.807705,43.080997
20250915090221,122.807351,43.081111
20250915090231,122.807306,43.081396
20250915090241,122.807404,43.081690
20250915090251,122.807503,43.081990
20250915090301,122.807599,43.082291
20250915090311,122.807692,43.082591
20250915090321,122.807791,43.082890
20250915090331,122.807880,43.083186
20250915090341,122.807972,43.083475
20250915090351,122.808069,43.083776
20250915090401,122.808165,43.084075
20250915090411,122.808253,43.084378
20250915090421,122.808344,43.084655
20250915090431,122.808432,43.084901
20250915090441,122.808525,43.085201
20250915090451,122.808628,43.085498
20250915090501,122.808717,43.085779
20250915090511,122.808787,43.086016
20250915090521,122.808873,43.086285
20250915090531,122.808959,43.086507
20250915090541,122.809055,43.086794
20250915090551,122.809116,43.087040
20250915090601,122.809196,43.087242
20250915090611,122.809235,43.087328
20250915090621,122.809235,43.087327
20250915090631,122.809254,43.087366
20250915090641,122.809323,43.087575
20250915090651,122.809386,43.087770
20250915090701,122.809465,43.088039
20250915090711,122.809605,43.088243
20250915090721,122.810014,43.088198
20250915090731,122.810433,43.088161
20250915090741,122.810854,43.088121
20250915090751,122.811277,43.088088
20250915090801,122.811668,43.088051
20250915090811,122.811875,43.088038
20250915090821,122.811930,43.088066
20250915090831,122.811930,43.088065
20250915090841,122.811932,43.088072
20250915090852,122.811910,43.088005
20250915090901,122.811954,43.088200
20250915090911,122.812052,43.088466
20250915090921,122.812157,43.088762
20250915090931,122.812254,43.089063
20250915090941,122.812367,43.089361
20250915090952,122.812459,43.089591
20250915091001,122.812494,43.089681
20250915091011,122.812532,43.089755
20250915091021,122.812599,43.089888
20250915091031,122.812696,43.090081
20250915091041,122.812890,43.090326
20250915091051,122.813202,43.090460
20250915091101,122.813366,43.090530
20250915091111,122.813604,43.090604
20250915091121,122.813838,43.090757
20250915091131,122.813965,43.090973
20250915091141,122.813995,43.091037
20250915091151,122.814043,43.091130
20250915091202,122.814067,43.091178
20250915091212,122.814091,43.091232
20250915091222,122.814143,43.091341
20250915091232,122.814242,43.091525
20250915091242,122.814258,43.091558
20250915091251,122.814313,43.091660
20250915091301,122.814459,43.091948
20250915091311,122.814598,43.092241
20250915091321,122.814753,43.092520
20250915091331,122.814787,43.092610
20250915091341,122.814910,43.092883
20250915091351,122.815066,43.093166
20250915091401,122.815317,43.093371
20250915091411,122.815402,43.093408
20250915091421,122.815611,43.093512
20250915091431,122.815967,43.093679
20250915091441,122.816303,43.093863
20250915091451,122.816571,43.094048
20250915091501,122.816753,43.094171
20250915091511,122.817370,43.094448
20250915091521,122.817903,43.094697
20250915091531,122.818501,43.094889
20250915091541,122.818799,43.095083
20250915091551,122.819108,43.095388
20250915091601,122.819461,43.095658
20250915091611,122.819659,43.095810
20250915091621,122.819970,43.096012
20250915091631,122.820191,43.096243
20250915091641,122.820483,43.096469
20250915091651,122.820700,43.096710
20250915091701,122.820903,43.096924
20250915091711,122.821120,43.097157
20250915091721,122.821336,43.097416
20250915091731,122.821580,43.097680
20250915091741,122.821903,43.097896
20250915091751,122.822167,43.098161
20250915091801,122.822312,43.098427
20250915091811,122.822422,43.098677
20250915091821,122.822548,43.098924
20250915091831,122.822811,43.099246
20250915091841,122.823070,43.099543
20250915091851,122.823231,43.099757
20250915091901,122.823392,43.099977
20250915091911,122.823581,43.100192
20250915091921,122.823781,43.100442
20250915091931,122.823979,43.100711
20250915091941,122.824186,43.100945
20250915091951,122.824403,43.101155
20250915092001,122.824587,43.101394
20250915092011,122.824627,43.101597
20250915092021,122.824698,43.101823
20250915092031,122.824841,43.102080
20250915092041,122.824948,43.102389
20250915092051,122.825012,43.102662
20250915092101,122.825047,43.102824
20250915092111,122.825090,43.102993
20250915092121,122.825098,43.103171
20250915092131,122.825073,43.103360
20250915092141,122.825070,43.103551
20250915092151,122.825072,43.103723
20250915092201,122.825096,43.103910
20250915092211,122.825148,43.104048
20250915092221,122.825198,43.104152
20250915092231,122.825252,43.104257
20250915092241,122.825304,43.104349
20250915092251,122.825305,43.104352
20250915092301,122.825305,43.104352
20250915092311,122.825305,43.104352
20250915092321,122.825305,43.104352
20250915092331,122.825305,43.104352
20250915092341,122.825305,43.104352
20250915092351,122.825305,43.104352
20250915092401,122.825305,43.104352
20250915092411,122.825305,43.104352
20250915092421,122.825316,43.104385
20250915092431,122.825336,43.104438
20250915092441,122.825336,43.104435
20250915092451,122.825314,43.104375
20250915092501,122.825313,43.104418
20250915092511,122.825316,43.104469
20250915092521,122.825314,43.104408
20250915092531,122.825318,43.104462
20250915092541,122.825292,43.104468
20250915092551,122.825216,43.104494
20250915092601,122.825210,43.104496
20250915092611,122.825210,43.104496
20250915092621,122.825210,43.104496
20250915092631,122.825210,43.104496
20250915092641,122.825210,43.104496
20250915092651,122.825210,43.104496
20250915092701,122.825210,43.104496
20250915092711,122.825210,43.104496
20250915092721,122.825210,43.104496
20250915092731,122.825210,43.104496
20250915092741,122.825210,43.104496
20250915092751,122.825210,43.104496
20250915092801,122.825210,43.104496
20250915092811,122.825210,43.104496
20250915092821,122.825210,43.104496
20250915092831,122.825191,43.104502
20250915092841,122.825123,43.104525
20250915092851,122.825027,43.104559
20250915092901,122.824976,43.104580
20250915092911,122.824901,43.104600
20250915092921,122.824809,43.104629
20250915092931,122.824709,43.104661
20250915092941,122.824614,43.104692
20250915092951,122.824508,43.104726
20250915093001,122.824382,43.104763
20250915093011,122.824266,43.104798
20250915093021,122.824154,43.104832
20250915093031,122.824040,43.104868
20250915093041,122.823925,43.104906
20250915093051,122.823842,43.104927
20250915093101,122.823771,43.104956
20250915093111,122.823751,43.104964
20250915093121,122.823751,43.104964
20250915093131,122.823716,43.104975
20250915093141,122.823609,43.105011
20250915093151,122.823487,43.105050
20250915093201,122.823361,43.105090
20250915093211,122.823241,43.105129
20250915093221,122.823138,43.105162
20250915093231,122.823030,43.105195
20250915093241,122.822915,43.105231
20250915093251,122.822784,43.105272
20250915093301,122.822728,43.105288
20250915093311,122.822615,43.105325
20250915093321,122.822482,43.105364
20250915093331,122.822357,43.105400
20250915093341,122.822234,43.105435
20250915093351,122.822108,43.105472
20250915093401,122.822018,43.105487
20250915093411,122.821941,43.105510
20250915093421,122.821822,43.105550
20250915093431,122.821674,43.105593
20250915093441,122.821581,43.105620
20250915093451,122.821472,43.105650
20250915093501,122.821360,43.105677
20250915093511,122.821249,43.105706
20250915093521,122.821369,43.105674
20250915093531,122.821317,43.105673
20250915093541,122.821202,43.105671
20250915093551,122.821187,43.105654
20250915093601,122.821248,43.105747
20250915093611,122.821301,43.105670
20250915093621,122.821347,43.105658
20250915093631,122.821348,43.105658
20250915093641,122.821349,43.105658
20250915093651,122.821353,43.105657
20250915093701,122.821439,43.105635
20250915093711,122.821523,43.105612
20250915093721,122.821507,43.105617
20250915093731,122.821507,43.105617
20250915093741,122.821507,43.105617
20250915093751,122.821507,43.105617
20250915093801,122.821507,43.105617
20250915093811,122.821507,43.105617
20250915093821,122.821507,43.105617
20250915093831,122.821552,43.105605
20250915093841,122.821652,43.105577
20250915093851,122.821766,43.105545
20250915093901,122.821877,43.105515
20250915093911,122.821993,43.105482
20250915093921,122.822103,43.105451
20250915093931,122.822212,43.105419
20250915093941,122.822318,43.105389
20250915093951,122.822445,43.105351
20250915094001,122.822566,43.105316
20250915094011,122.822671,43.105283
20250915094021,122.822771,43.105252
20250915094031,122.822901,43.105212
20250915094041,122.823034,43.105171
20250915094051,122.823161,43.105132
20250915094101,122.823284,43.105092
20250915094111,122.823412,43.105052
20250915094121,122.823547,43.105009
20250915094131,122.823677,43.104966
20250915094141,122.823789,43.104930
20250915094151,122.823888,43.104895
20250915094201,122.824016,43.104855
20250915094211,122.824155,43.104810
20250915094221,122.824336,43.104754
20250915094231,122.824488,43.104708
20250915094241,122.824646,43.104661
20250915094251,122.824779,43.104616
20250915094301,122.824761,43.104622
20250915094311,122.824626,43.104675
20250915094321,122.824569,43.104687
20250915094331,122.824569,43.104687
20250915094341,122.824569,43.104687
20250915094351,122.824569,43.104687
20250915094401,122.824569,43.104687
20250915094411,122.824569,43.104687
20250915094421,122.824569,43.104687
20250915094431,122.824569,43.104687
20250915094441,122.824569,43.104687
20250915094451,122.824569,43.104687
20250915094501,122.824569,43.104687
20250915094511,122.824569,43.104687
20250915094521,122.824569,43.104687
20250915094531,122.824570,43.104687
20250915094541,122.824585,43.104683
20250915094551,122.824646,43.104662
20250915094601,122.824695,43.104644
20250915094611,122.824792,43.104611
20250915094621,122.824882,43.104584
20250915094631,122.824961,43.104550
20250915094641,122.825045,43.104528
20250915094651,122.825158,43.104490
20250915094701,122.825292,43.104448
20250915094711,122.825192,43.104478
20250915094721,122.825213,43.104470
20250915094731,122.825225,43.104454
20250915094741,122.825331,43.104391
20250915094751,122.825320,43.104433
20250915094801,122.825313,43.104426
20250915094811,122.825268,43.104427
20250915094821,122.825226,43.104436
20250915094831,122.825227,43.104436
20250915094841,122.825226,43.104436
20250915094851,122.825227,43.104436
20250915094901,122.825213,43.104440
20250915094911,122.825214,43.104439
20250915094921,122.825121,43.104467
20250915094931,122.824956,43.104521
20250915094941,122.824821,43.104567
20250915094951,122.824658,43.104620
20250915095001,122.824479,43.104676
20250915095011,122.824292,43.104732
20250915095021,122.824117,43.104786
20250915095031,122.823922,43.104849
20250915095041,122.823737,43.104911
20250915095051,122.823558,43.104970
20250915095101,122.823515,43.104984
20250915095111,122.823515,43.104984
20250915095121,122.823512,43.104985
20250915095131,122.823345,43.105037
20250915095141,122.823173,43.105094
20250915095151,122.822997,43.105147
20250915095201,122.822810,43.105204
20250915095211,122.822613,43.105266
20250915095220,122.822416,43.105324
20250915095230,122.822220,43.105382
20250915095240,122.822018,43.105441
20250915095250,122.821817,43.105497
20250915095300,122.821600,43.105557
20250915095310,122.821404,43.105609
20250915095320,122.821217,43.105657
20250915095330,122.821213,43.105655
20250915095340,122.821234,43.105693
20250915095350,122.821356,43.105628
20250915095400,122.821625,43.105552
20250915095410,122.821651,43.105546
20250915095420,122.821651,43.105545
20250915095430,122.821690,43.105537
20250915095440,122.821886,43.105478
20250915095450,122.822077,43.105422
20250915095500,122.822278,43.105366
20250915095510,122.822480,43.105307
20250915095520,122.822699,43.105239
20250915095530,122.822921,43.105172
20250915095540,122.823142,43.105105
20250915095550,122.823353,43.105035
20250915095600,122.823569,43.104967
20250915095610,122.823786,43.104895
20250915095620,122.824001,43.104824
20250915095630,122.824219,43.104756
20250915095640,122.824436,43.104690
20250915095650,122.824665,43.104617
20250915095700,122.824874,43.104550
20250915095710,122.825064,43.104487
20250915095720,122.825251,43.104426
20250915095730,122.825201,43.104443
20250915095740,122.825201,43.104443
20250915095750,122.825201,43.104443
20250915095800,122.825201,43.104443
20250915095810,122.825201,43.104443
20250915095820,122.825201,43.104443
20250915095830,122.825201,43.104443
20250915095840,122.825202,43.104443
20250915095850,122.825202,43.104443
20250915095900,122.825202,43.104443
20250915095910,122.825202,43.104442
20250915095920,122.825202,43.104442
20250915095930,122.825338,43.104435
20250915095940,122.825453,43.104551
20250915095950,122.825587,43.104693
20250915100000,122.825672,43.104829
20250915100010,122.825731,43.104975
20250915100020,122.825764,43.105067
20250915100030,122.825775,43.105090
20250915100040,122.825775,43.105090
20250915100050,122.825775,43.105090
20250915100100,122.825775,43.105090
20250915100110,122.825775,43.105090
20250915100120,122.825775,43.105090
20250915100130,122.825775,43.105090
20250915100140,122.825780,43.105101
20250915100150,122.825794,43.105162
20250915100200,122.825811,43.105202
20250915100210,122.825788,43.105163
20250915100220,122.825785,43.105199
20250915100230,122.825790,43.105145
20250915100240,122.825800,43.105196
20250915100250,122.825796,43.105193
20250915100300,122.825713,43.105219
20250915100310,122.825683,43.105230
20250915100320,122.825683,43.105230
20250915100330,122.825683,43.105230
20250915100340,122.825683,43.105230
20250915100350,122.825683,43.105230
20250915100400,122.825683,43.105230
20250915100410,122.825660,43.105238
20250915100420,122.825597,43.105257
20250915100430,122.825495,43.105288
20250915100440,122.825379,43.105323
20250915100450,122.825259,43.105360
20250915100500,122.825153,43.105394
20250915100510,122.825029,43.105432
20250915100520,122.824900,43.105474
20250915100530,122.824764,43.105517
20250915100540,122.824639,43.105556
20250915100550,122.824499,43.105602
20250915100600,122.824358,43.105648
20250915100610,122.824232,43.105691
20250915100620,122.824104,43.105735
20250915100630,122.824007,43.105756
20250915100640,122.824008,43.105756
20250915100650,122.824008,43.105756
20250915100700,122.824008,43.105756
20250915100710,122.824008,43.105756
20250915100720,122.824008,43.105756
20250915100730,122.824009,43.105756
20250915100740,122.824024,43.105752
20250915100750,122.823932,43.105719
20250915100800,122.823834,43.105729
20250915100810,122.823695,43.105789
20250915100820,122.823721,43.105798
20250915100830,122.823742,43.105824
20250915100840,122.823724,43.105795
20250915100850,122.823867,43.105813
20250915100900,122.823989,43.105769
20250915100910,122.823976,43.105774
20250915100920,122.824001,43.105759
20250915100930,122.824112,43.105707
20250915100940,122.824207,43.105672
20250915100950,122.824295,43.105646
20250915101000,122.824378,43.105620
20250915101010,122.824499,43.105580
20250915101020,122.824612,43.105541
20250915101030,122.824758,43.105496
20250915101040,122.824920,43.105445
20250915101050,122.825089,43.105391
20250915101100,122.825257,43.105336
20250915101110,122.825425,43.105287
20250915101120,122.825588,43.105238
20250915101130,122.825749,43.105187
20250915101140,122.825712,43.105200
20250915101150,122.825607,43.105234
20250915101200,122.825701,43.105201
20250915101210,122.825838,43.105162
20250915101220,122.826000,43.105112
20250915101230,122.826022,43.105105
20250915101240,122.825923,43.105138
20250915101250,122.825808,43.105172
20250915101300,122.825861,43.105130
20250915101310,122.826028,43.105076
20250915101320,122.825949,43.105100
20250915101330,122.825856,43.105129
20250915101340,122.825810,43.105153
20250915101350,122.825914,43.105082
20250915101400,122.826047,43.105041
20250915101410,122.825984,43.105053
20250915101420,122.825983,43.105064
20250915101430,122.825975,43.105074
20250915101440,122.825979,43.105084
20250915101450,122.825850,43.105123
20250915101500,122.825766,43.105145
20250915101510,122.825762,43.105147
20250915101520,122.825761,43.105147
20250915101530,122.825762,43.105147
20250915101540,122.825762,43.105147
20250915101550,122.825762,43.105147
20250915101600,122.825761,43.105147
20250915101610,122.825761,43.105147
20250915101620,122.825761,43.105147
20250915101630,122.825761,43.105147
20250915101640,122.825761,43.105147
20250915101650,122.825761,43.105147
20250915101700,122.825761,43.105147
20250915101710,122.825761,43.105147
20250915101720,122.825761,43.105147
20250915101730,122.825760,43.105148
20250915101740,122.825760,43.105148
20250915101750,122.825724,43.105157
20250915101800,122.825593,43.105201
20250915101810,122.825433,43.105250
20250915101820,122.825276,43.105296
20250915101830,122.825106,43.105349
20250915101840,122.824932,43.105405
20250915101850,122.824777,43.105455
20250915101900,122.824601,43.105510
20250915101910,122.824411,43.105574
20250915101920,122.824222,43.105635
20250915101930,122.824031,43.105703
20250915101940,122.823897,43.105765
20250915101950,122.823780,43.105803
20250915102000,122.823901,43.105773
20250915102010,122.823795,43.105822
20250915102020,122.823697,43.105787
20250915102030,122.823746,43.105796
20250915102040,122.823874,43.105754
20250915102050,122.823875,43.105754
20250915102100,122.823977,43.105701
20250915102110,122.824094,43.105658
20250915102120,122.824219,43.105613
20250915102130,122.824375,43.105564
20250915102140,122.824555,43.105501
20250915102150,122.824743,43.105442
20250915102200,122.824923,43.105385
20250915102210,122.825111,43.105326
20250915102220,122.825298,43.105266
20250915102230,122.825475,43.105214
20250915102240,122.825643,43.105164
20250915102250,122.825813,43.105112
20250915102300,122.825719,43.105141
20250915102310,122.825719,43.105141
20250915102320,122.825719,43.105141
20250915102330,122.825719,43.105141
20250915102340,122.825719,43.105141
20250915102350,122.825719,43.105141
20250915102400,122.825719,43.105141
20250915102410,122.825719,43.105141
20250915102420,122.825719,43.105141
20250915102430,122.825719,43.105141
20250915102440,122.825719,43.105141
20250915102450,122.825719,43.105141
20250915102500,122.825719,43.105142
20250915102510,122.825676,43.105157
20250915102520,122.825722,43.105149
20250915102530,122.825832,43.105222
20250915102540,122.825820,43.105204
20250915102550,122.825721,43.105249
20250915102600,122.825574,43.105292
20250915102610,122.825429,43.105336
20250915102620,122.825279,43.105382
20250915102630,122.825118,43.105433
20250915102640,122.824963,43.105483
20250915102650,122.824796,43.105535
20250915102700,122.824631,43.105587
20250915102710,122.824467,43.105640
20250915102720,122.824307,43.105695
20250915102730,122.824133,43.105756
20250915102740,122.824164,43.105717
20250915102750,122.824218,43.105799
20250915102800,122.824161,43.105773
20250915102810,122.824186,43.105770
20250915102820,122.824221,43.105760
20250915102830,122.824328,43.105724
20250915102840,122.824432,43.105689
20250915102850,122.824571,43.105643
20250915102900,122.824741,43.105591
20250915102910,122.824896,43.105540
20250915102920,122.825041,43.105491
20250915102930,122.825189,43.105446
20250915102940,122.825349,43.105397
20250915102950,122.825517,43.105345
20250915103000,122.825693,43.105293
20250915103010,122.825845,43.105247
20250915103020,122.825740,43.105267
20250915103030,122.825855,43.105194
20250915103040,122.825952,43.105156
20250915103050,122.825974,43.105150
20250915103100,122.825796,43.105222
20250915103110,122.825905,43.105200
20250915103120,122.826046,43.105156
20250915103130,122.825870,43.105209
20250915103140,122.825854,43.105242
20250915103150,122.825976,43.105207
20250915103200,122.826075,43.105178
20250915103210,122.825946,43.105196
20250915103220,122.825898,43.105220
20250915103230,122.825841,43.105266
20250915103240,122.825780,43.105287
20250915103250,122.825780,43.105287
20250915103300,122.825780,43.105287
20250915103310,122.825780,43.105287
20250915103320,122.825780,43.105287
20250915103330,122.825780,43.105287
20250915103340,122.825780,43.105287
20250915103350,122.825780,43.105287
20250915103400,122.825780,43.105287
20250915103410,122.825780,43.105287
20250915103420,122.825781,43.105287
20250915103430,122.825781,43.105287
20250915103440,122.825780,43.105287
20250915103450,122.825793,43.105284
20250915103500,122.825793,43.105284
20250915103510,122.825792,43.105284
20250915103520,122.825792,43.105284
20250915103530,122.825792,43.105284
20250915103540,122.825773,43.105290
20250915103550,122.825648,43.105329
20250915103600,122.825517,43.105367
20250915103610,122.825381,43.105408
20250915103620,122.825229,43.105455
20250915103630,122.825070,43.105505
20250915103640,122.824925,43.105552
20250915103650,122.824780,43.105596
20250915103700,122.824661,43.105634
20250915103710,122.824527,43.105677
20250915103720,122.824411,43.105730
20250915103730,122.824301,43.105756
20250915103740,122.824234,43.105783
20250915103750,122.824254,43.105777
20250915103800,122.824303,43.105791
20250915103810,122.824301,43.105784
20250915103820,122.824326,43.105781
20250915103830,122.824326,43.105781
20250915103840,122.824429,43.105747
20250915103850,122.824568,43.105702
20250915103900,122.824725,43.105651
20250915103910,122.824811,43.105622
20250915103920,122.824895,43.105597
20250915103930,122.825031,43.105554
20250915103940,122.825171,43.105509
20250915103950,122.825327,43.105461
20250915104000,122.825485,43.105411
20250915104010,122.825635,43.105367
20250915104020,122.825813,43.105314
20250915104030,122.825810,43.105309
20250915104040,122.825933,43.105251
20250915104049,122.826091,43.105202
20250915104059,122.826121,43.105193
20250915104109,122.826123,43.105184
20250915104119,122.825992,43.105215
20250915104129,122.825786,43.105308
20250915104139,122.825924,43.105280
20250915104149,122.826052,43.105242
20250915104159,122.826058,43.105238
20250915104209,122.825775,43.105305
20250915104219,122.825819,43.105239
20250915104229,122.825789,43.105163
20250915104239,122.825780,43.105150
20250915104249,122.825780,43.105151
20250915104259,122.825780,43.105151
20250915104309,122.825780,43.105151
20250915104319,122.825780,43.105151
20250915104329,122.825780,43.105151
20250915104339,122.825780,43.105151
20250915104521,122.825457,43.104548
20250915104531,122.825283,43.104299
20250915104541,122.825146,43.104029
20250915104551,122.825081,43.103728
20250915104601,122.825077,43.103420
20250915104611,122.825108,43.103114
20250915104621,122.825047,43.102804
20250915104631,122.824978,43.102493
20250915104641,122.824895,43.102187
20250915104651,122.824747,43.101910
20250915104701,122.824642,43.101622
20250915104711,122.824562,43.101339
20250915104721,122.824362,43.101105
20250915104731,122.824114,43.100863
20250915104741,122.823912,43.100618
20250915104751,122.823734,43.100365
20250915104801,122.823561,43.100158
20250915104811,122.823373,43.099943
20250915104821,122.823215,43.099717
20250915104831,122.823041,43.099502
20250915104841,122.822840,43.099270
20250915104851,122.822688,43.099061
20250915104901,122.822524,43.098874
20250915104911,122.822433,43.098688
20250915104921,122.822343,43.098481
20250915104931,122.822253,43.098288
20250915104941,122.822133,43.098099
20250915104951,122.821919,43.097903
20250915105001,122.821618,43.097707
20250915105011,122.821383,43.097467
20250915105021,122.821187,43.097228
20250915105031,122.820966,43.096983
20250915105041,122.820735,43.096741
20250915105051,122.820539,43.096517
20250915105101,122.820273,43.096305
20250915105111,122.820035,43.096062
20250915105121,122.819722,43.095852
20250915105131,122.819465,43.095656
20250915105141,122.819175,43.095430
20250915105151,122.818905,43.095186
20250915105201,122.818633,43.094945
20250915105211,122.818247,43.094803
20250915105221,122.817861,43.094671
20250915105231,122.817508,43.094500
20250915105241,122.817138,43.094332
20250915105251,122.816767,43.094168
20250915105301,122.816446,43.093954
20250915105311,122.816115,43.093749
20250915105321,122.815754,43.093573
20250915105331,122.815390,43.093403
20250915105341,122.815099,43.093213
20250915105351,122.814936,43.092919
20250915105401,122.814806,43.092672
20250915105411,122.814676,43.092377
20250915105421,122.814530,43.092081
20250915105431,122.814389,43.091785
20250915105441,122.814258,43.091551
20250915105451,122.814206,43.091442
20250915105501,122.814127,43.091292
20250915105511,122.814079,43.091190
20250915105521,122.814042,43.091114
20250915105531,122.813989,43.091002
20250915105541,122.813948,43.090909
20250915105551,122.813915,43.090845
20250915105601,122.813663,43.090614
20250915105611,122.813383,43.090535
20250915105621,122.813249,43.090478
20250915105631,122.813131,43.090429
20250915105641,122.812816,43.090253
20250915105651,122.812670,43.090017
20250915105701,122.812570,43.089826
20250915105711,122.812519,43.089718
20250915105721,122.812465,43.089587
20250915105731,122.812363,43.089344
20250915105741,122.812324,43.089244
20250915105751,122.812189,43.088849
20250915105801,122.812055,43.088460
20250915105811,122.811933,43.088096
20250915105821,122.811904,43.088035
20250915105831,122.811873,43.087684
20250915105841,122.811835,43.087351
20250915105851,122.811816,43.087250
20250915105901,122.811579,43.087220
20250915105911,122.810664,43.087293
20250915105921,122.809541,43.087376
20250915105931,122.808507,43.087461
20250915105941,122.807739,43.087541
20250915105951,122.807677,43.087764
20250915141120,122.807562,43.087970
20250915141130,122.807590,43.087845
20250915141140,122.807586,43.087745
20250915141150,122.807607,43.087857
20250915141200,122.807630,43.087878
20250915141210,122.807588,43.087933
20250915141220,122.807557,43.087994
20250915141230,122.807525,43.088058
20250915141240,122.807507,43.088094
20250915141250,122.807494,43.088129</textarea>
            <div class="button-group">
                <button id="drawTrackButton" disabled style="flex: 1;">绘制轨迹</button>
                <button id="showTrackPointsButton" disabled style="flex: 1;" class="btn-warning">打点</button>
                <button id="clearTrackButton" disabled style="flex: 1;">清空轨迹</button>
            </div>
            <!-- 轨迹颜色选择器 -->
            <div class="color-picker-container" style="margin-top:8px;">
                <div style="margin-bottom:6px;font-size:12px;color:#333;">轨迹颜色设置：</div>
                <div style="display:flex;align-items:center;gap:8px;">
                    <div style="display:flex;align-items:center;gap:4px;">
                        <label style="font-size:12px;">轨迹线颜色:</label>
                        <div id="trackLineColorPicker" class="color-picker" style="width:24px;height:24px;border:1px solid #ccc;cursor:pointer;background-color:#FF0000;"></div>
                        <input type="color" id="trackLineColorInput" value="#FF0000" style="display:none;">
                    </div>
                    <div style="display:flex;align-items:center;gap:4px;">
                        <label style="font-size:12px;">轨迹点颜色:</label>
                        <div id="trackPointColorPicker" class="color-picker" style="width:24px;height:24px;border:1px solid #ccc;cursor:pointer;background-color:#68EAF3;"></div>
                        <input type="color" id="trackPointColorInput" value="#68EAF3" style="display:none;">
                    </div>
                </div>
            </div>
            <!-- 回放控制 -->
            <div class="split-section" style="margin-top:8px;">
                <div class="title">轨迹回放</div>
                <div class="playback-actions" style="display:flex;gap:8px;margin-bottom:8px;">
                    <button id="playbackStartBtn" disabled>开始</button>
                    <button id="playbackPauseBtn" disabled>继续</button>
                    <button id="playbackStopBtn" disabled>结束</button>
                </div>
                <div class="playback-speed" style="display:flex;align-items:center;gap:8px;margin-bottom:8px;">
                    <label>速度：
                        <select id="playbackSpeedSelect" disabled>
                            <option value="1" selected>1×</option>
                            <option value="2">2×</option>
                            <option value="4">4×</option>
                            <option value="8">8×</option>
                            <option value="16">16×</option>
                            <option value="32">32×</option>
                            <option value="64">64×</option>
                            <option value="128">128×</option>
                            <option value="256">256×</option>
                            <option value="512">512×</option>
                            <option value="1024">1024×</option>
                        </select>
                    </label>
                    <span id="playbackTimeLabel" style="font-size:12px;color:#666;">时间：—</span>
                </div>
                <div class="playback-time" style="display:flex;flex-direction:column;gap:4px;margin-bottom:8px;">
                    <label class="playback-time-label" style="display:flex;align-items:center;gap:8px;flex:1 1 auto;min-width:0;">
                        <span class="playback-time-text" style="white-space:nowrap;">起始时间：</span>
                        <input type="range" id="playbackTimeSlider" disabled min="0" max="0" step="1000" value="0" style="flex:1 1 auto;min-width:0;max-width:100%;vertical-align:middle;">
                    </label>
                    <span id="playbackTimeCursor" style="font-size:12px;color:#666;align-self:flex-end;">—</span>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    let map;
    let currentPolygons = []; // 存储多边形和其标签
    let currentTracks = []; // 存储轨迹折线及相关覆盖物
    let mapLoaded = false;
    let mapLabelHandlers = []; // 存储地图事件处理器
    let labelsEnabled = false; // 标签显示开关（默认关闭）
    let isDrawing = false; // 绘制进行中防止重复点击
    let currentMapType = 'satellite'; // 当前地图类型：'satellite'（卫星图）或'street'（街道图）

    window.onload = function () {
        if (typeof T === 'undefined') {
            alert("天地图API加载失败，请检查网络或密钥！");
            return;
        }
        initMap();
        bindDrawEvent();
        bindMinimizeEvent();
        bindTabs();
        bindBatchGenerator();
        bindMultiSplitter();
        bindLabelsToggle(); // 绑定标签显示开关
        bindTrackEvents();  // 绑定轨迹绘制与清空
        bindPlaybackControls(); // 绑定轨迹回放
        bindMeasureEvents(); // 绑定测量功能
        bindMapTypeEvent(); // 绑定地图类型切换功能
        initColorPickers(); // 初始化颜色选择器
    };

    function initMap() {
        showLoading();
        disableButtons(true);

        try {
            map = new T.Map("mapContainer", {
                zoom: 12,
                center: new T.LngLat(116.40769, 39.90403)
            });

            // 已移除测试标签
            map.enableScrollWheelZoom();

            // 不再添加地图类型控件到地图，改为使用左侧工具条按钮切换
            // const mapTypeCtrl = new T.Control.MapType({
            //     mapTypes: [TMAP_NORMAL_MAP, TMAP_SATELLITE_MAP, TMAP_TERRAIN_MAP],
            //     position: T_ANCHOR_TOP_LEFT
            // });
            // map.addControl(mapTypeCtrl);

            // 加载影像底图（卫星）
            const tk = "648f621977051d0199ff0f965d3fd322";

            // 方案1：使用默认地图类型（作为备选）
            map.setMapType(TMAP_SATELLITE_MAP);
            currentMapType = 'satellite';
            updateMapTypeButton('卫星图');

            // 方案2：手动添加影像图层（底图 + 标注）
            const vecLayer = new T.TileLayer(`https://t0.tianditu.gov.cn/img_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=img&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk=${tk}`);
            const cvaLayer = new T.TileLayer(`https://t0.tianditu.gov.cn/cia_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=cia&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk=${tk}`);

            // 添加图层并监听加载状态
            vecLayer.addEventListener("load", function () {
                console.log("影像底图加载完成");
            });

            vecLayer.addEventListener("error", function (e) {
                console.error("影像底图加载错误:", e);
                alert("影像底图加载错误，将使用默认地图类型");
            });

            map.addLayer(vecLayer);
            map.addLayer(cvaLayer);

            // 监听地图加载事件
            map.addEventListener("loaded", function () {
                console.log("地图加载完成");
                markMapLoaded();
            });
            map.addEventListener("load", function () {
                console.log("地图load事件触发");
                markMapLoaded();
            });
            map.addEventListener("tilesloaded", function () {
                console.log("地图瓦片加载完成");
                markMapLoaded();
            });
            // 监听地图加载失败事件
            map.addEventListener("error", function (e) {
                console.error("地图加载错误:", e);
                alert("地图加载错误: " + e.message);
                hideLoading();
            });

            // 监听地图移动事件，用于更新标签位置
            const moveHandler = function () {
                updateAllLabelsPosition();
            };
            map.addEventListener("move", moveHandler);
            map.addEventListener("zoom", moveHandler);

            // 存储事件处理器，用于清理
            mapLabelHandlers.push({ event: "move", handler: moveHandler });
            mapLabelHandlers.push({ event: "zoom", handler: moveHandler });

            // 超时容错
            setTimeout(() => {
                if (!mapLoaded) markMapLoaded();
            }, 8000);

        } catch (error) {
            alert("地图初始化失败：" + error.message);
            console.error(error);
            hideLoading();
        }
    }

    function markMapLoaded() {
        if (!mapLoaded) {
            mapLoaded = true;
            hideLoading();
            // 不再禁用按钮，保持按钮始终可用
            // disableButtons(false);
            disableTrackButtons(false);
            // 仅开启速度选择，回放按钮按状态控制
            const speedSel = document.getElementById('playbackSpeedSelect');
            if (speedSel) speedSel.disabled = false;
            updatePlaybackButtonsState('idle');
        }
    }

    function showLoading() {
        const loading = document.getElementById("mapLoading");
        loading.style.display = "flex";
        loading.style.opacity = "1";
    }

    function hideLoading() {
        const loading = document.getElementById("mapLoading");
        loading.style.opacity = "0";
        setTimeout(() => loading.style.display = "none", 300);
    }

    function disableButtons(disabled) {
        // 不再禁用按钮，保持按钮始终可用
        // document.getElementById("drawButton").disabled = disabled;
        // document.getElementById("clearButton").disabled = disabled;
    }

    function disableTrackButtons(disabled) {
        const drawTrackBtn = document.getElementById("drawTrackButton");
        const showTrackPointsBtn = document.getElementById("showTrackPointsButton");
        const clearTrackBtn = document.getElementById("clearTrackButton");
        if (drawTrackBtn) drawTrackBtn.disabled = disabled;
        if (showTrackPointsBtn) showTrackPointsBtn.disabled = disabled;
        if (clearTrackBtn) clearTrackBtn.disabled = disabled;
    }
    // 回放控件的禁用/启用
    function disablePlaybackButtons(disabled) {
        ["playbackStartBtn","playbackPauseBtn","playbackStopBtn","playbackSpeedSelect","playbackTimeSlider"].forEach(id=>{
            const el = document.getElementById(id);
            if (el) el.disabled = disabled;
        });
    }

    // 回放按钮状态管理：空闲/播放/暂停
    function updatePlaybackButtonsState(state){
        try {
            const startBtn = document.getElementById('playbackStartBtn');
            const pauseBtn = document.getElementById('playbackPauseBtn');
            const stopBtn = document.getElementById('playbackStopBtn');
            if (!startBtn || !pauseBtn || !stopBtn) return;
            if (state === 'idle') {
                startBtn.disabled = false;
                pauseBtn.disabled = true;
                stopBtn.disabled = true;
                pauseBtn.textContent = '继续';
            } else if (state === 'playing') {
                startBtn.disabled = true;
                pauseBtn.disabled = false;
                stopBtn.disabled = false;
                pauseBtn.textContent = '暂停';
            } else if (state === 'paused') {
                startBtn.disabled = true;
                pauseBtn.disabled = false;
                stopBtn.disabled = false;
                pauseBtn.textContent = '继续';
            }
        } catch(e) { console.warn('更新按钮状态失败:', e); }
    }

    function bindDrawEvent() {
        document.getElementById("drawButton").addEventListener("click", function () {
            if (isDrawing) { console.log('绘制进行中，忽略重复点击'); return; }
            isDrawing = true;
            showLoading();
            try {
                const wktStr = document.getElementById("wktTextarea").value.trim();
                if (!wktStr) { alert("请输入WKT字符串！"); return; }
                clearOverlays();
                const geojson = parseWkt(wktStr);
    
                const polygonData = [];
                if (geojson.type === "Polygon") {
                    polygonData.push({ index: 1, coordinates: geojson.coordinates });
                } else if (geojson.type === "MultiPolygon") {
                    geojson.coordinates.forEach((polygon, index) => {
                        polygonData.push({ index: index + 1, coordinates: polygon });
                    });
                }
    
                // 重置并绘制
                polygonInfoList = [];
                polygonData.forEach(pd => processPolygon(pd.index, pd.coordinates));
    
                // 视图居中到所有已绘制轮廓
                try { fitViewportToPolygons(); } catch (e) { console.warn('视图居中失败', e); }
    
                // 在视图稳定后再创建/更新标签
                setTimeout(() => {
                    if (labelsEnabled) {
                        try {
                            createAllLabels();
                            updateAllLabelsPosition();
                        } catch (e) {
                            console.warn('创建或更新标签失败:', e);
                        }
                    }
                }, 150);
            } catch (e) {
                alert('绘制失败：' + (e && e.message ? e.message : e));
                console.error('绘制异常:', e);
            } finally {
                hideLoading();
                isDrawing = false;
                // 不再禁用按钮，保持按钮始终可用
                // disableButtons(false);
            }
        });

        document.getElementById("clearButton").addEventListener("click", function () {
            if (isDrawing) { console.log('绘制进行中，暂不清空'); return; }
            clearOverlays();
            console.log("已清空所有轮廓");
        });
    }

    // 存储多边形数据，用于后续标签创建
    let polygonInfoList = [];

    // 处理单个多边形的绘制和面积计算
    function processPolygon(actualPolygonIndex, polygonCoords) {
        console.log('开始处理多边形', actualPolygonIndex);

        // 坐标系选择（绘制始终使用WGS84坐标）
        const coordSys = (document.getElementById('coordSysSelect') && document.getElementById('coordSysSelect').value) || 'wgs84';

        // 统一转换为WGS84用于绘制与面积计算
        function toWgs(point){
            const lng = point[0], lat = point[1];
            if (coordSys === 'wgs84' || coordSys === 'cgcs2000') {
                return [lng, lat];
            } else if (coordSys === 'gcj02') {
                const w = gcj02ToWgs84(lng, lat);
                return [w.lng, w.lat];
            } else if (coordSys === 'bd09') {
                const gcj = bd09ToGcj02(lng, lat);
                const w = gcj02ToWgs84(gcj.lng, gcj.lat);
                return [w.lng, w.lat];
            }
            return [lng, lat];
        }
        const coordsWGS84 = polygonCoords.map(ring => ring.map(toWgs));
        let outerRingWGS = coordsWGS84[0] || [];

        // 生成用于绘制的坐标（直接使用WGS84坐标）
        const rings = coordsWGS84.map(ring => ring.map(([lng, lat]) => new T.LngLat(lng, lat)));


         // 创建半透明填充的多边形（无边框）
          const polygon = new T.Polygon(rings, {
              color: currentOutlineColor,
              weight: 1,
              opacity: 1,
              fillColor: currentFillColor,
              fillOpacity: currentFillOpacity
          });
 
          // 使用WGS84坐标计算面积（更准确的面积计算）
         let areaSqm;
         let areaMu;



         try {
             // 检查Turf.js是否可用
             if (typeof turf !== 'undefined' && turf.area) {
                 // 使用Turf.js计算多边形面积
                // 构造GeoJSON格式的多边形
                const geoJsonPolygon = {
                    type: "Polygon",
                    coordinates: coordsWGS84
                };


                 // 使用Turf.js计算面积（平方米）
                 areaSqm = turf.area(geoJsonPolygon);
                 areaMu = (areaSqm / 666.6667).toFixed(4); // 转换为亩
                 console.log(`多边形${actualPolygonIndex}面积计算结果(Turf.js): ${areaSqm}平方米 = ${areaMu}亩`);
             } else {
                 // 如果Turf.js不可用，回退到之前的计算方法
                 console.warn('Turf.js不可用，使用备用计算方法');
                 // 计算带孔洞的多边形面积
                 areaSqm = 0;
                 // 计算外环面积
                 outerRingWGS = coordsWGS84[0] || [];
                 areaSqm += calculatePolygonArea(outerRingWGS);

                 // 减去内环（孔洞）面积
                 for (let i = 1; i < coordsWGS84.length; i++) {
                     const innerRingArea = calculatePolygonArea(coordsWGS84[i]);
                     areaSqm -= innerRingArea;
                 }

                  areaMu = (areaSqm / 666.6667).toFixed(4); // 使用更精确的转换系数
                  console.log(`多边形${actualPolygonIndex}面积计算结果(备用): ${areaSqm}平方米 = ${areaMu}亩`);
              }
          } catch (error) {
              console.error(`面积计算失败:`, error);
              areaSqm = 0;
              areaMu = '0.0000';
          }

          // 计算多边形的中心点和底部中心点（WGS84）
          const centerPoint = calculatePolygonCenter(outerRingWGS);
          const bottomCenterPoint = calculatePolygonBottomCenter(outerRingWGS);

          // 添加多边形到地图
          if (map) {
              map.addOverLay(polygon);
              console.log(`多边形${actualPolygonIndex}已添加到地图`);
          } else {
              console.error('地图对象不存在');
          }

          // 存储多边形信息，用于后续标签创建
          polygonInfoList.push({
              index: actualPolygonIndex,
              polygon: polygon,
              area: areaMu,
              bottomCenter: { lng: bottomCenterPoint.lng, lat: bottomCenterPoint.lat },
              ringPoints: rings
          });
      }

    // 视图居中：根据已绘制的GCJ-02点
    function fitViewportToPolygons() {
        const points = [];
        try {
            if (!map || !map.setViewport) return;
            polygonInfoList.forEach(info => {
                if (!info || !info.ringPoints) return;
                info.ringPoints.forEach(ring => {
                    ring.forEach(ll => points.push(ll));
                });
            });
            if (!points.length) return;
            map.setViewport(points);
        } catch (e) {
            try {
                const lngs = points.map(p => p.lng);
                const lats = points.map(p => p.lat);
                const center = new T.LngLat(
                    (Math.min(...lngs) + Math.max(...lngs)) / 2,
                    (Math.min(...lats) + Math.max(...lats)) / 2
                );
                if (map && map.panTo) map.panTo(center);
            } catch (e2) {
                console.warn('视图居中失败:', e2);
            }
        }
    }

    // 统一创建所有多边形的标签
    function createAllLabels() {
        const mapContainer = document.getElementById('mapContainer');
        if (!mapContainer || !map) return;

        polygonInfoList.forEach(info => {
            if (!info) return;
            // 防止重复创建
            if (info.labelRef) return;
            // 创建标签元素
            const labelDiv = document.createElement('div');
            labelDiv.className = 'area-label';
            labelDiv.innerHTML = `多边形${info.index}：${info.area}亩`;

            // 添加到地图容器并根据屏幕边界定位到轮廓下方
            mapContainer.appendChild(labelDiv);
            positionLabelForPolygon(labelDiv, info);

            // 记录引用，避免重复创建
            info.labelRef = labelDiv;

            // 存储到 currentPolygons 以复用现有定位/清理逻辑
            const labelObj = {
                domElement: labelDiv,
                isDomLabel: true,
                polygonInfo: info
            };
            currentPolygons.push({ polygon: info.polygon, label: labelObj });
        });

        // 不清空 polygonInfoList，便于开关随时创建/隐藏标签
    }

    // 根据多边形屏幕边界定位标签，保证始终在轮廓下方
    function positionLabelForPolygon(labelDiv, info) {
        if (!map || !info || !info.ringPoints) return;
        const points = [];
        info.ringPoints.forEach(ring => {
            ring.forEach(ll => {
                const p = map.lngLatToContainerPoint(ll);
                points.push(p);
            });
        });
        if (!points.length) return;
        const minX = Math.min(...points.map(p => p.x));
        const maxX = Math.max(...points.map(p => p.x));
        const maxY = Math.max(...points.map(p => p.y));
        const container = document.getElementById('mapContainer');
        const labelWidth = labelDiv.offsetWidth;
        const labelHeight = labelDiv.offsetHeight;
        const targetLeft = Math.round((minX + maxX) / 2 - labelWidth / 2);
        const targetTop = Math.round(maxY + 6);
        const clampedLeft = Math.max(0, Math.min(targetLeft, container.clientWidth - labelWidth));
        const clampedTop = Math.max(0, Math.min(targetTop, container.clientHeight - labelHeight));
        labelDiv.style.left = clampedLeft + 'px';
        labelDiv.style.top = clampedTop + 'px';
    }

    // 更新所有标签位置（地图move/zoom时调用）
    function updateAllLabelsPosition() {
        try {
            if (!map) return;
            const container = document.getElementById('mapContainer');
            if (!container) return;
            currentPolygons.forEach(item => {
                if (!item || !item.label) return;
                const labelObj = item.label;
                if (labelObj.isDomLabel && labelObj.domElement && labelObj.polygonInfo) {
                    // 确保标签在容器中
                    if (!labelObj.domElement.parentNode) {
                        container.appendChild(labelObj.domElement);
                    }
                    positionLabelForPolygon(labelObj.domElement, labelObj.polygonInfo);
                }
            });
        } catch (e) {
            console.warn('更新标签位置时出错:', e);
        }
    }
    // 确保在全局可用（处理第三方库事件回调作用域差异）
    window.updateAllLabelsPosition = updateAllLabelsPosition;

    // 绑定“显示亩数标签”开关（默认隐藏）
    function bindLabelsToggle() {
        const cb = document.getElementById('toggleLabelsCheckbox');
        const container = document.getElementById('mapContainer');
        if (!cb || !container) return;
        // 默认隐藏标签
        container.classList.add('labels-hidden');
        cb.addEventListener('change', () => {
            labelsEnabled = cb.checked;
            if (labelsEnabled) {
                container.classList.remove('labels-hidden');
                const hasAnyLabel = currentPolygons.some(item => item && item.label && item.label.domElement);
                if (!hasAnyLabel) {
                    try { createAllLabels(); } catch (e) { console.warn('创建标签失败:', e); }
                }
                updateAllLabelsPosition();
            } else {
                container.classList.add('labels-hidden');
            }
        });
    }

    /**
     * 计算多边形中心点（比底部中心更适合显示标签）
     */
    function calculatePolygonCenter(outerRing) {
        let sumLng = 0, sumLat = 0;
        const len = outerRing.length;

        for (let i = 0; i < len; i++) {
            sumLng += outerRing[i][0];
            sumLat += outerRing[i][1];
        }

        return {
            lng: sumLng / len,
            lat: sumLat / len
        };
    }

    /**
     * 计算多边形面积（球面多边形面积计算）
     * 使用更准确的球面坐标面积计算方法，确保面积与视觉大小一致
     */
    function calculatePolygonArea(coordinates) {
        // 地球半径（米）- 使用更精确的值
        const R = 6371000.8;
        const n = coordinates.length;

        // 将所有坐标转换为弧度
        const coordsRad = coordinates.map(point => [
            point[0] * Math.PI / 180,
            point[1] * Math.PI / 180
        ]);

        let areaRad = 0;

        // 使用更准确的球面多边形面积公式（Girard定理）
        for (let i = 0; i < n; i++) {
            const j = (i + 1) % n;
            const lon1 = coordsRad[i][0];
            const lat1 = coordsRad[i][1];
            const lon2 = coordsRad[j][0];
            const lat2 = coordsRad[j][1];

            // 计算球面多边形面积增量
            const dlon = lon2 - lon1;
            const sinLat1 = Math.sin(lat1);
            const sinLat2 = Math.sin(lat2);
            const cosLat1 = Math.cos(lat1);
            const cosLat2 = Math.cos(lat2);

            // 使用更精确的公式
            areaRad += dlon * (sinLat1 * cosLat2 * Math.cos(dlon / 2) + sinLat2 * cosLat1);
        }

        // 计算总面积（平方米）
        const areaSqm = Math.abs(areaRad) * R * R * 0.5;

        return areaSqm;
    }

    /**
     * 清空所有多边形和标签（同时处理 polygonInfoList 与 currentPolygons）
     */
    function clearOverlays() {
        try {
            // 先移除 polygonInfoList 中记录的多边形与其DOM标签
            polygonInfoList.forEach(info => {
                if (info && info.polygon && map && map.removeOverLay) {
                    try { map.removeOverLay(info.polygon); } catch (e) { console.warn('移除多边形失败:', e); }
                }
                if (info && info.labelRef && info.labelRef.parentNode) {
                    try { info.labelRef.parentNode.removeChild(info.labelRef); } catch (e) { console.warn('移除DOM标签失败:', e); }
                    info.labelRef = null;
                }
            });

            // 再处理 currentPolygons（兼容旧路径与标签对象）
            currentPolygons.forEach(item => {
                if (item.polygon && map && map.removeOverLay) {
                    try { map.removeOverLay(item.polygon); } catch (e) { console.warn('移除多边形失败:', e); }
                }
                if (item.label) {
                    if (item.label.domElement && item.label.domElement.parentNode) {
                        try { item.label.domElement.parentNode.removeChild(item.label.domElement); } catch (e) { console.warn('移除DOM标签失败:', e); }
                    } else if (map && map.removeOverLay && !item.label.isDomLabel) {
                        try { map.removeOverLay(item.label); } catch (e) { console.warn('移除地图覆盖物标签失败:', e); }
                    }
                }
            });

            // 清空记录数组
            currentPolygons = [];
            polygonInfoList = [];

            console.log('已清空所有多边形和标签（保留事件监听器）');
        } catch (error) {
            console.error('清空覆盖物时出错:', error);
        }
    }

    // 其他辅助函数（保持不变）
    function bindMinimizeEvent() {
        const container = document.querySelector(".wkt-input-container");
        const btn = document.getElementById("minimizeBtn");
        const minIcon = btn?.querySelector(".min-icon");
        const restoreIcon = btn?.querySelector(".restore-icon");

        btn?.addEventListener("click", () => {
            const minimized = container.classList.toggle("minimized");
            if (minIcon && restoreIcon) {
                if (minimized) {
                    minIcon.style.display = "none";
                    restoreIcon.style.display = "";
                } else {
                    minIcon.style.display = "";
                    restoreIcon.style.display = "none";
                }
            }
        });
    }

    // 在脚本内部补充：页签切换（3个页签）
     function bindTabs() {
         const tabs = [
             { btn: document.getElementById('tabDrawBtn'), pane: document.getElementById('tabDraw'), key: 'draw' },
             { btn: document.getElementById('tabTrackBtn'), pane: document.getElementById('tabTrack'), key: 'track' },
             { btn: document.getElementById('tabSplitBtn'), pane: document.getElementById('tabSplit'), key: 'split' },
             { btn: document.getElementById('tabBatchBtn'), pane: document.getElementById('tabBatch'), key: 'batch' },
         ];
         if (tabs.some(t => !t.btn || !t.pane)) return;
         function activate(key) {
             tabs.forEach(t => {
                 const active = t.key === key;
                 t.btn.classList.toggle('active', active);
                 t.pane.classList.toggle('active', active);
             });
         }
         tabs.forEach(t => t.btn.addEventListener('click', () => activate(t.key)));
         activate('draw');
     }
    function updateParserStatus() {
        const el = document.getElementById('parserStatus');
        if (!el) return;
        const ok = (typeof Terraformer !== 'undefined' && Terraformer.WKT && typeof Terraformer.WKT.parse === 'function');
        if (ok) {
            el.textContent = 'Terraformer WKT Parser';
            el.style.color = '#2f8f2f';
        } else {
            el.textContent = '本地回退解析（仅支持POLYGON/MULTIPOLYGON）';
            el.style.color = '#c77d1e';
        }
    }
     function parseWkt(wkt) {
         wkt = wkt.trim();
         // 优先使用成熟库（Terraformer WKT Parser）
         if (typeof Terraformer !== 'undefined' && Terraformer.WKT && Terraformer.WKT.parse) {
             try {
                 return Terraformer.WKT.parse(wkt);
             } catch (e) {
                 console.warn('Terraformer解析失败，尝试本地回退解析:', e);
             }
         } else {
             // 不再提示“未加载”，由状态栏展示回退信息
         }
         // 回退解析：仅支持 POLYGON / MULTIPOLYGON
         const typeMatch = wkt.match(/^\s*(POLYGON|MULTIPOLYGON)\s*\(/i);
         if (!typeMatch) throw new Error('仅支持POLYGON/MULTIPOLYGON');
         const type = typeMatch[1].toUpperCase();
         const inner = wkt.substring(wkt.indexOf('('));
         if (type === 'POLYGON') {
             const coords = parsePolygonCoords(inner.replace(/^\(/, '').replace(/\)$/, ''));
             return { type: 'Polygon', coordinates: coords };
         } else {
             const trimmed = inner.replace(/^\(\(/, '').replace(/\)\)$/, '');
             const coords = parseMultiPolygonCoords(trimmed);
             return { type: 'MultiPolygon', coordinates: coords };
         }
     }

     function bindMultiSplitter() {
         const input = document.getElementById('multiInput');
         const output = document.getElementById('polyOutput');
         const splitBtn = document.getElementById('splitMultiBtn');
         const copyBtn = document.getElementById('copyPolysBtn');
         if (!input || !output || !splitBtn || !copyBtn) return;

         // 本地WKT序列化辅助
         function ringToText(ring) {
             if (!ring || !ring.length) return '()';
             const first = ring[0];
             const last = ring[ring.length - 1];
             const closed = (first[0] === last[0] && first[1] === last[1]) ? ring : ring.concat([[first[0], first[1]]]);
             return '(' + closed.map(pt => pt[0] + ' ' + pt[1]).join(', ') + ')';
         }
         function toWktPolygonCoords(coords) {
             return 'POLYGON(' + coords.map(ringToText).join(', ') + ')';
         }
         function toWktMulti(coords) {
             return 'MULTIPOLYGON(' + coords.map(poly => '(' + poly.map(ringToText).join(', ') + ')').join(', ') + ')';
         }

         function polygonsFromMulti(text) {
             const geo = parseWkt(text.trim());
             if (geo.type !== 'MultiPolygon') throw new Error('请输入有效的 MULTIPOLYGON WKT');
             const polys = geo.coordinates.map(rings => toWktPolygonCoords(rings));
             return polys;
         }
         splitBtn.addEventListener('click', () => {
             try {
                 const list = polygonsFromMulti(input.value.trim());
                 output.value = list.join('\n');
             } catch (e) {
                 alert('分割失败：' + e.message);
             }
         });
         copyBtn.addEventListener('click', async () => {
             const val = output.value.trim();
             if (!val) { alert('没有可复制的结果'); return; }
             try { await navigator.clipboard.writeText(val); alert('已复制到剪贴板'); } catch (e) { console.warn('复制失败', e); }
         });
     }

     function bindBatchGenerator() {
         const batchInput = document.getElementById('batchInput');
         const output = document.getElementById('multiOutput');
         const genBtn = document.getElementById('generateMultiBtn');
         const copyBtn = document.getElementById('copyMultiBtn');

         // 本地WKT序列化辅助（与分割器保持一致）
         function ringToText(ring) {
             if (!ring || !ring.length) return '()';
             const first = ring[0];
             const last = ring[ring.length - 1];
             const closed = (first[0] === last[0] && first[1] === last[1]) ? ring : ring.concat([[first[0], first[1]]]);
             return '(' + closed.map(pt => pt[0] + ' ' + pt[1]).join(', ') + ')';
         }
         function toWktMulti(coords) {
             return 'MULTIPOLYGON(' + coords.map(poly => '(' + poly.map(ringToText).join(', ') + ')').join(', ') + ')';
         }

         genBtn.addEventListener('click', () => {
             try {
                 const lines = batchInput.value.trim().split(/\n|;/).map(s => s.trim()).filter(Boolean);
                 if (lines.length === 0) throw new Error('请按每行或分号输入至少一个POLYGON');
                 const polygons = lines.map((line, idx) => {
                     const g = parseWkt(line);
                     if (g.type !== 'Polygon') throw new Error(`第${idx + 1}行不是有效的POLYGON WKT`);
                     return g;
                 });
                 const multiGeo = { type: 'MultiPolygon', coordinates: polygons.map(p => p.coordinates) };
                 output.value = toWktMulti(multiGeo.coordinates);
             } catch (e) {
                 alert('生成失败：' + e.message);
             }
         });

         copyBtn.addEventListener('click', async () => {
             const val = output.value.trim();
             if (!val) { alert('没有可复制的结果'); return; }
             try { await navigator.clipboard.writeText(val); alert('已复制到剪贴板'); } catch (e) { console.warn('复制失败', e); }
         });

     }

     function setExampleWkt() {
         const exampleWkt = "MULTIPOLYGON(" +
             "(" +
             "(116.35 39.93, 116.39 39.93, 116.39 39.90, 116.35 39.90, 116.35 39.93)," + // 外环
             "(116.36 39.92, 116.38 39.92, 116.38 39.91, 116.36 39.91, 116.36 39.92)" +  // 内环
             ")," +
             "(" +
             "(116.40 39.95, 116.43 39.97, 116.46 39.96, 116.49 39.98, 116.52 39.95, 116.55 39.93, 116.58 39.94, 116.61 39.92, 116.64 39.95, 116.40 39.95)" +
             ")" +
             ")";
         document.getElementById("wktTextarea").value = exampleWkt;
     }

     function parsePolygonCoords(coordStr) {
         const ringStrs = coordStr.split(/\)\s*,\s*\(/).map(s => s.replace(/[()]/g, '').trim());
         const rings = [];
         ringStrs.forEach(ringStr => {
             const pts = ringStr.split(/,\s*/).map(pointStr => {
                 const [lng, lat] = pointStr.split(/\s+/).map(Number);
                 if (isNaN(lng) || isNaN(lat)) throw new Error("坐标格式错误：" + pointStr);
                 return [lng, lat];
             });
             // 自动拆分：如果一个ring中包含多次回到起点（闭合），则拆分为多个环
             // 兼容用户将外环与内环错误地写在同一对括号中的情况
             let start = 0;
             while (start < pts.length) {
                 const startPt = pts[start];
                 let closeIdx = -1;
                 for (let i = start + 1; i < pts.length; i++) {
                     if (pts[i][0] === startPt[0] && pts[i][1] === startPt[1]) {
                         closeIdx = i;
                         break;
                     }
                 }
                 if (closeIdx === -1) {
                     // 未找到闭合：将剩余点视为一个环，并强制闭合
                     const ring = pts.slice(start);
                     if (ring.length && (ring[0][0] !== ring[ring.length - 1][0] || ring[0][1] !== ring[ring.length - 1][1])) {
                         ring.push([ring[0][0], ring[0][1]]);
                     }
                     rings.push(ring);
                     break;
                 } else {
                     const ring = pts.slice(start, closeIdx + 1);
                     rings.push(ring);
                     start = closeIdx + 1;
                 }
             }
         });
         return rings;
     }

     function parseMultiPolygonCoords(coordStr) {
         const polygonStrs = coordStr.split(/\)\s*\)\s*,\s*\(\s*\(/).map(s => s.replace(/[()]/g, '').trim());
         return polygonStrs.map(polygonStr => parsePolygonCoords(polygonStr));
     }

     function wgs84ToGcj02(lng, lat) {
         const x_PI = 3.14159265358979324 * 3000.0 / 180.0;
         const PI = 3.1415926535897932384626;
         const a = 6378245.0;
         const ee = 0.00669342162296594323;

         if (outOfChina(lng, lat)) return { lng, lat };

         let dlat = transformLat(lng - 105.0, lat - 35.0);
         let dlng = transformLng(lng - 105.0, lat - 35.0);
         const radlat = lat / 180.0 * PI;
         let magic = Math.sin(radlat);
         magic = 1 - ee * magic * magic;
         const sqrtmagic = Math.sqrt(magic);
         dlat = (dlat * 180.0) / ((a * (1 - ee)) / (magic * sqrtmagic) * PI);
         dlng = (dlng * 180.0) / (a / sqrtmagic * Math.cos(radlat) * PI);

         return { lng: lng + dlng, lat: lat + dlat };

         function outOfChina(lng, lat) {
             return (lng < 72.004 || lng > 137.8347) || (lat < 0.8293 || lat > 55.8271);
         }

         function transformLat(x, y) {
             let ret = -100.0 + 2.0 * x + 3.0 * y + 0.2 * y * y + 0.1 * x * y + 0.2 * Math.sqrt(Math.abs(x));
             ret += (20.0 * Math.sin(6.0 * x * PI) + 20.0 * Math.sin(2.0 * x * PI)) * 2.0 / 3.0;
             ret += (20.0 * Math.sin(y * PI) + 40.0 * Math.sin(y / 3.0 * PI)) * 2.0 / 3.0;
             ret += (160.0 * Math.sin(y / 12.0 * PI) + 320 * Math.sin(y * PI / 30.0)) * 2.0 / 3.0;
             return ret;
         }

         function transformLng(x, y) {
             let ret = 300.0 + x + 2.0 * y + 0.1 * x * x + 0.1 * x * y + 0.1 * Math.sqrt(Math.abs(x));
             ret += (20.0 * Math.sin(6.0 * x * PI) + 20.0 * Math.sin(2.0 * x * PI)) * 2.0 / 3.0;
             ret += (20.0 * Math.sin(x * PI) + 40.0 * Math.sin(x / 3.0 * PI)) * 2.0 / 3.0;
             ret += (150.0 * Math.sin(x / 12.0 * PI) + 300.0 * Math.sin(x / 30.0 * PI)) * 2.0 / 3.0;
             return ret;
         }
     }

     function gcj02ToWgs84(lng, lat) {
         const g = wgs84ToGcj02(lng, lat);
         return { lng: lng * 2 - g.lng, lat: lat * 2 - g.lat };
     }

     function bd09ToGcj02(bdLng, bdLat) {
         const x_PI = 3.14159265358979324 * 3000.0 / 180.0;
         const x = bdLng - 0.0065;
         const y = bdLat - 0.006;
         const z = Math.sqrt(x * x + y * y) - 0.00002 * Math.sin(y * x_PI);
         const theta = Math.atan2(y, x) - 0.000003 * Math.cos(x * x_PI);
         const ggLng = z * Math.cos(theta);
         const ggLat = z * Math.sin(theta);
         return { lng: ggLng, lat: ggLat };
     }

     function calculatePolygonBottomCenter(outerRing) {
         let minLat = Infinity;
         let bottomPoints = [];
         outerRing.forEach(point => {
             const lat = point[1];
             if (lat < minLat) {
                 minLat = lat;
                 bottomPoints = [point];
             } else if (lat === minLat) {
                 bottomPoints.push(point);
             }
         });

         const sumLng = bottomPoints.reduce((sum, point) => sum + point[0], 0);
         const centerLng = sumLng / bottomPoints.length;

         return { lng: centerLng, lat: minLat };
     }

     function fitBounds(geojson) {
         try {
             const allPoints = [];
             function collectPoints(coords) {
                 if (typeof coords[0] === 'number') {
                     allPoints.push(coords);
                 } else {
                     coords.forEach(coord => collectPoints(coord));
                 }
             }
             collectPoints(geojson.coordinates);

             if (allPoints.length === 0) return;

             const lats = allPoints.map(p => p[1]);
             const lngs = allPoints.map(p => p[0]);
             const minLng = Math.min(...lngs);
             const maxLng = Math.max(...lngs);
             const minLat = Math.min(...lats);
             const maxLat = Math.max(...lats);

             const sw = wgs84ToGcj02(minLng, minLat);
             const ne = wgs84ToGcj02(maxLng, maxLat);

             // 修复setViewport方法的使用，确保参数格式正确
             if (map && map.setViewport) {
                 map.setViewport([
                     new T.LngLat(sw.lng, sw.lat),
                     new T.LngLat(ne.lng, ne.lat)
                 ], { padding: [50, 50] });
             } else {
                 console.warn('地图对象或setViewport方法不可用');
             }
         } catch (error) {
             console.error('调整视图范围时出错:', error);
         }
     }
// 轨迹绘制与解析
    function bindTrackEvents() {
        const drawBtn = document.getElementById('drawTrackButton');
        const showPointsBtn = document.getElementById('showTrackPointsButton');
        const clearBtn = document.getElementById('clearTrackButton');
        const ta = document.getElementById('trackTextarea');
        if (!drawBtn || !showPointsBtn || !clearBtn || !ta) return;

        drawBtn.addEventListener('click', function(){
            try {
                const text = ta.value.trim();
                if (!text) { alert('请粘贴轨迹文本（时间戳,经度,纬度）'); return; }
                const points = parseTrackText(text);
                if (points.length < 2) { alert('有效轨迹点不足，至少需要两点'); return; }
                drawTrackFromPoints(points);
                fitViewportToTrack(points);
            } catch (e) {
                alert('绘制轨迹失败：' + (e && e.message ? e.message : e));
                console.error('绘制轨迹异常:', e);
            }
        });

        showPointsBtn.addEventListener('click', function(){
            try {
                const text = ta.value.trim();
                if (!text) { alert('请粘贴轨迹文本（时间戳,经度,纬度）'); return; }
                const points = parseTrackText(text);
                if (points.length === 0) { alert('未找到有效轨迹点'); return; }
                showTrackPoints(points);
                fitViewportToTrack(points);
            } catch (e) {
                alert('显示轨迹点失败：' + (e && e.message ? e.message : e));
                console.error('显示轨迹点异常:', e);
            }
        });

        clearBtn.addEventListener('click', function(){
            clearTrackOverlays();
            console.log('已清空轨迹');
        });
    }

    function showTrackPoints(points) {
        // 先移除旧轨迹（不影响轮廓）
        clearTrackOverlays(false);
        
        if (!map || !points || points.length === 0) {
            console.log('无轨迹点可显示');
            return;
        }
        
        console.log(`准备显示${points.length}个轨迹点`);
        
        // 使用批量处理和更小的图标来提高性能
        // 创建一个更小的自定义颜色点SVG图标
        const smallColoredDotIcon = new T.Icon({
            iconUrl: `data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="1" height="1"><circle cx="0.5" cy="0.5" r="0.3" fill="%23${currentTrackPointColor.substring(1)}"/></svg>`,
            iconSize: new T.Point(1, 1),
            iconAnchor: new T.Point(0.5, 0.5)
        });
        
        // 优化批量添加点的速度
        const batchSize = 2000; // 增加每批处理的点数
        const concurrentBatches = 4; // 并发批次数量
        
        // 预创建点击事件处理函数，避免重复创建
        function createClickHandler(point, index) {
            return function() {
                const infoWindow = new T.InfoWindow({
                    content: `点${index + 1}<br/>经度: ${point.lng.toFixed(6)}<br/>纬度: ${point.lat.toFixed(6)}`,
                    offset: new T.Point(0, -20)
                });
                infoWindow.open(map, point);
            };
        }
        
        // 使用setTimeout实现更高效的批量添加，避免阻塞UI
        let currentIndex = 0;
        
        function addBatch() {
            if (currentIndex >= points.length) {
                console.log(`已显示${points.length}个轨迹点`);
                return;
            }
            
            // 添加当前批次的点
            const endIndex = Math.min(currentIndex + batchSize, points.length);
            const markersToAdd = [];
            
            // 先创建所有标记
            for (let i = currentIndex; i < endIndex; i++) {
                const point = points[i];
                const index = i;
                
                const marker = new T.Marker(point, {
                    icon: smallColoredDotIcon
                });
                
                // 添加点击事件
                marker.addEventListener('click', createClickHandler(point, index));
                
                markersToAdd.push(marker);
            }
            
            // 批量添加到地图和数组
            markersToAdd.forEach(marker => {
                map.addOverLay(marker);
                currentTracks.push(marker);
            });
            
            currentIndex = endIndex;
            
            // 使用setTimeout而不是requestAnimationFrame，减少对渲染周期的依赖
            // 设置为0，将任务放入微任务队列，但允许UI有短暂的呼吸空间
            setTimeout(addBatch, 0);
        }
        
        // 启动批量添加
        addBatch();
    }
    
    // 恢复原始的clearTrackOverlays函数
    function clearTrackOverlays(resetArray = true){        
        try {
            currentTracks.forEach(pl => {
                if (pl && map && map.removeOverLay) {
                    try { map.removeOverLay(pl); } catch (e) { console.warn('移除轨迹失败:', e); }
                }
            });
            if (resetArray) currentTracks = [];
        } catch (e) {
            console.warn('清空轨迹时出错:', e);
        }
    }

    function parseTrackText(text){
        // 选择输入坐标系（优先使用轨迹页签专属选择器，若未设置则回退到绘制页签选择器）
        const coordSysEl = document.getElementById('trackCoordSysSelect') || document.getElementById('coordSysSelect');
        const coordSys = (coordSysEl && coordSysEl.value) || 'wgs84';
        const isHash = text.indexOf('#') !== -1;
        const items = isHash ? text.split('#') : text.split(/\r?\n/);
        const pts = [];
        for (let i=0;i<items.length;i++){
            const raw = items[i];
            if (!raw) continue;
            const line = raw.trim();
            if (!line) continue;
            const parts = line.split(',');
            if (parts.length < 3) continue;
            let lng = parseFloat((parts[isHash ? 0 : 1] || '').trim());
            let lat = parseFloat((parts[isHash ? 1 : 2] || '').trim());
            // 初步过滤：数值合法性与正常范围
            if (!isFinite(lng) || !isFinite(lat)) continue;
            if (lng === 0 || lat === 0) continue; // 丢弃0.0异常点
            if (lng < -180 || lng > 180 || lat < -90 || lat > 90) continue; // 超出经纬度范围丢弃

            // 将输入坐标转换为WGS84
            let w;
            if (coordSys === 'wgs84' || coordSys === 'cgcs2000') {
                w = { lng, lat };
            } else if (coordSys === 'gcj02') {
                w = gcj02ToWgs84(lng, lat);
            } else if (coordSys === 'bd09') {
                const g = bd09ToGcj02(lng, lat);
                w = gcj02ToWgs84(g.lng, g.lat);
            } else {
                w = { lng, lat };
            }
            // 转换结果兜底检查
            if (!isFinite(w.lng) || !isFinite(w.lat)) continue;
            if (w.lng < -180 || w.lng > 180 || w.lat < -90 || w.lat > 90) continue;

            // 使用WGS84坐标绘制到地图
            pts.push(new T.LngLat(w.lng, w.lat));
        }
        return pts;
    }

    function drawTrackFromPoints(points){
        // 先移除旧轨迹（不影响轮廓）
        clearTrackOverlays(false);
        const polyline = new T.Polyline(points, {
            color: currentTrackLineColor,
            weight: 1,
            opacity: 0.9
        });
        if (map) {
            map.addOverLay(polyline);
        }
        currentTracks.push(polyline);
    }

    function clearTrackOverlays(resetArray = true){
        try {
            currentTracks.forEach(pl => {
                if (pl && map && map.removeOverLay) {
                    try { map.removeOverLay(pl); } catch (e) { console.warn('移除轨迹失败:', e); }
                }
            });
            if (resetArray) currentTracks = [];
        } catch (e) {
            console.warn('清空轨迹时出错:', e);
        }
    }


    function fitViewportToTrack(points){
        try {
            if (!map || !map.setViewport || !points || !points.length) return;
            map.setViewport(points);
        } catch (e) {
            console.warn('轨迹视图居中失败:', e);
        }
    }

    // ========= 轨迹回放功能 =========
    let playbackState = { points: [], idx: 0, speed: 1, timer: null, running: false, marker: null, line: null, path: [] };

    function bindPlaybackControls(){
        const startBtn = document.getElementById('playbackStartBtn');
        const pauseBtn = document.getElementById('playbackPauseBtn');
        const stopBtn = document.getElementById('playbackStopBtn');
        const speedSel = document.getElementById('playbackSpeedSelect');
        const timeSlider = document.getElementById('playbackTimeSlider');
        const timeCursor = document.getElementById('playbackTimeCursor');
        const ta = document.getElementById('trackTextarea');
        if (!startBtn || !pauseBtn || !stopBtn || !speedSel) return;

        // 初始按钮状态
        updatePlaybackButtonsState('idle');

        startBtn.addEventListener('click', function(){
            try {
                const text = (ta && ta.value || '').trim();
                if (!text) { alert('请粘贴轨迹文本（时间戳,经度,纬度）'); return; }
                const pts = parseTrackTextWithTime(text);
                if (pts.length < 2) { alert('有效轨迹点不足，至少需要两点'); return; }
                startPlayback(pts);
                // 状态在startPlayback中已设置为playing
            } catch (e) {
                alert('开始回放失败：' + (e && e.message ? e.message : e));
                console.error('开始回放异常:', e);
            }
        });

        pauseBtn.addEventListener('click', function(){
            if (!playbackState.running) {
                // 继续
                playbackState.running = true;
                scheduleNext();
                updatePlaybackButtonsState('playing');
            } else {
                // 暂停
                if (playbackState.timer) { clearTimeout(playbackState.timer); playbackState.timer = null; }
                playbackState.running = false;
                updatePlaybackButtonsState('paused');
            }
        });

        stopBtn.addEventListener('click', function(){ 
            stopPlayback(); 
            updatePlaybackButtonsState('idle');
        });

        speedSel.addEventListener('change', function(){
            const v = parseFloat(speedSel.value);
            playbackState.speed = (isFinite(v) && v > 0) ? v : 1;
        });

        if (timeSlider) {
            timeSlider.addEventListener('input', function(){
                const ms = parseInt(timeSlider.value, 10);
                const txt = formatTimeForLabel(ms);
                if (timeCursor) timeCursor.textContent = txt;
            });
            timeSlider.addEventListener('change', function(){
                jumpToSliderTime();
            });
        }
    }

    function parseTrackTextWithTime(text){
        const coordSysEl = document.getElementById('trackCoordSysSelect') || document.getElementById('coordSysSelect');
        const coordSys = (coordSysEl && coordSysEl.value) || 'wgs84';
        const isHash = text.indexOf('#') !== -1;
        const items = isHash ? text.split('#') : text.split(/\r?\n/);
        const out = [];
        for (let i=0;i<items.length;i++){
            const raw = items[i];
            if (!raw) continue;
            const line = raw.trim();
            if (!line) continue;
            const parts = line.split(',');
            if (parts.length < 3) continue;
            const tsRaw = (parts[isHash ? 2 : 0] || '').trim();
            const ts = (tsRaw || '').replace(/\D/g,'');
            let lng = parseFloat((parts[isHash ? 0 : 1] || '').trim());
            let lat = parseFloat((parts[isHash ? 1 : 2] || '').trim());
            if (!isFinite(lng) || !isFinite(lat)) continue;
            if (lng === 0 || lat === 0) continue;
            if (lng < -180 || lng > 180 || lat < -90 || lat > 90) continue;
            const t = parseTimestamp(ts);
            if (!t) continue;
            let w;
            if (coordSys === 'wgs84' || coordSys === 'cgcs2000') {
                w = { lng, lat };
            } else if (coordSys === 'gcj02') {
                w = gcj02ToWgs84(lng, lat);
            } else if (coordSys === 'bd09') {
                const g = bd09ToGcj02(lng, lat);
                w = gcj02ToWgs84(g.lng, g.lat);
            } else { w = { lng, lat }; }
            if (!isFinite(w.lng) || !isFinite(w.lat)) continue;
            if (w.lng < -180 || w.lng > 180 || w.lat < -90 || w.lat > 90) continue;
            out.push({ ll: new T.LngLat(w.lng, w.lat), time: t, ts });
        }
        out.sort((a,b)=>a.time - b.time);
        return out;
    }

    function parseTimestamp(ts){
        const tstr = (ts || '').replace(/\D/g,'');
        const m = tstr && tstr.match(/^\d{14}$/);
        if (!m) return null;
        const y = parseInt(tstr.slice(0,4),10);
        const M = parseInt(tstr.slice(4,6),10) - 1;
        const d = parseInt(tstr.slice(6,8),10);
        const h = parseInt(tstr.slice(8,10),10);
        const m2 = parseInt(tstr.slice(10,12),10);
        const s = parseInt(tstr.slice(12,14),10);
        const dt = new Date(y,M,d,h,m2,s);
        return isNaN(dt.getTime()) ? null : dt;
    }

    function startPlayback(points){
        console.log('[Playback] startPlayback: 点数=', points && points.length);
        stopPlayback();
        playbackState.points = points;
        playbackState.idx = 0;
        playbackState.speed = playbackState.speed || 1;
        playbackState.running = true;
        // 配置时间滑动条，并尊重现有滑块位置作为起始
        configureTimeSlider(points);
        // 启用滑块
        const slider = document.getElementById('playbackTimeSlider');
        if (slider) slider.disabled = false;
        let initIdx = 0;
        if (slider && slider.min && slider.max) {
            const ms = parseInt(slider.value, 10);
            if (isFinite(ms)) initIdx = findIndexByTime(points, ms);
        }
        playbackState.idx = initIdx;
        const first = points[initIdx];
        console.log('[Playback] 首点:', first && first.ts, first && first.ll, 'initIdx=', initIdx);
        playbackState.path = points.slice(0, initIdx+1).map(p=>p.ll);
        playbackState.line = new T.Polyline(playbackState.path, { color: currentTrackLineColor, weight: 1, opacity: 0.9 });
        if (map) {
            map.addOverLay(playbackState.line);
        }
        currentTracks.push(playbackState.line);
        // 创建并定位DOM标记以保证可见移动
        ensurePlaybackDom(first.ll);
        updatePlaybackDom(first.ll);
        updatePlaybackTimeLabel(first.ts);
        try { fitViewportToTrack(points.map(p=>p.ll)); } catch(e){}
        // 更新按钮状态
        updatePlaybackButtonsState('playing');
        scheduleNext();
    }

    function scheduleNext(){
        if (!playbackState.running) return;
        if (!playbackState.points || playbackState.idx >= playbackState.points.length - 1) {
            playbackState.running = false;
            console.log('[Playback] 回放结束：idx=', playbackState.idx, '点数=', playbackState.points ? playbackState.points.length : 0);
            updatePlaybackButtonsState('idle'); // 播放结束后按钮回到初始状态：开始可点，继续/结束灰化
            return;
        }
        const next = playbackState.points[playbackState.idx+1];
        const speed = playbackState.speed || 1;
        const delay = Math.max(4, Math.round(1000 / speed)); // 1x=1000ms/点，2x=500ms/点...
        console.log('[Playback] scheduleNext: idx=', playbackState.idx, '->', playbackState.idx+1, 'delay=', delay, 'speed=', speed);
        playbackState.timer = setTimeout(()=>{
            playbackState.idx++;
            const nextLL = next.ll;
            console.log('[Playback] 下一点:', next && next.ts, nextLL);
            try {
                // 维护路径数组
                playbackState.path = playbackState.path || [];
                playbackState.path.push(nextLL);
                console.log('[Playback] 路径长度=', playbackState.path.length);
                // 使用DOM标记进行移动（容器/图层坐标）
                if (!playbackDom.el) console.log('[Playback] DOM标记不存在，将尝试创建');
                updatePlaybackDom(nextLL);
                // 折线更新：优先setLngLats，兜底重建
                if (playbackState.line && typeof playbackState.line.setLngLats === 'function') {
                    try { playbackState.line.setLngLats(playbackState.path); }
                    catch(e){
                        console.warn('[Playback] setLngLats失败，重建折线', e);
                        if (map) { try { map.removeOverLay(playbackState.line); } catch(e){} }
                        playbackState.line = new T.Polyline(playbackState.path, { color: currentTrackLineColor, weight: 1, opacity: 0.9 });
                        if (map) map.addOverLay(playbackState.line);
                    }
                } else {
                    console.log('[Playback] 折线不支持setLngLats，重建');
                    if (playbackState.line && map) { try { map.removeOverLay(playbackState.line); } catch(e){} }
                    playbackState.line = new T.Polyline(playbackState.path, { color: currentTrackLineColor, weight: 1, opacity: 0.9 });
                    if (map) map.addOverLay(playbackState.line);
                }
            } catch(e) { console.warn('更新回放覆盖物失败:', e); }
            updatePlaybackTimeLabel(next.ts);
            scheduleNext();
        }, delay);
    }

    function stopPlayback(){
        if (playbackState.timer) { clearTimeout(playbackState.timer); playbackState.timer = null; }
        playbackState.running = false;
        playbackState.idx = 0;
        try {
            // 移除DOM标记
            removePlaybackDom();
            if (playbackState.marker && map) map.removeOverLay(playbackState.marker);
            if (playbackState.line && map) map.removeOverLay(playbackState.line);
        } catch(e){}
        playbackState.marker = null;
        playbackState.line = null;
        updatePlaybackTimeLabel('—');
        // 按钮回到初始状态
        updatePlaybackButtonsState('idle');
    }

    function updatePlaybackTimeLabel(text){
        const el = document.getElementById('playbackTimeLabel');
        if (el) el.textContent = '时间：' + (text || '—');
    }

    // 时间滑动条：配置与跳转
    function configureTimeSlider(points){
        try {
            const slider = document.getElementById('playbackTimeSlider');
            const cursor = document.getElementById('playbackTimeCursor');
            if (!slider || !points || !points.length) return;
            const minMs = points[0].time.getTime();
            const maxMs = points[points.length - 1].time.getTime();
            const prev = parseInt(slider.value, 10);
            slider.min = String(minMs);
            slider.max = String(maxMs);
            slider.step = '1000'; // 以秒为步进
            let val = (isFinite(prev) && prev >= minMs && prev <= maxMs) ? prev : minMs;
            slider.value = String(val);
            if (cursor) cursor.textContent = formatTimeForLabel(val);
        } catch(e) { console.warn('配置时间滑动条失败:', e); }
    }
    function formatTimeForLabel(ms){
        if (!isFinite(ms)) return '—';
        const d = new Date(ms);
        const pad = n => String(n).padStart(2,'0');
        const y = d.getFullYear();
        const M = pad(d.getMonth()+1);
        const da = pad(d.getDate());
        const h = pad(d.getHours());
        const m = pad(d.getMinutes());
        const s = pad(d.getSeconds());
        return `${y}-${M}-${da} ${h}:${m}:${s}`;
    }
    function findIndexByTime(points, ms){
        try {
            if (!points || !points.length) return 0;
            const n = points.length;
            const minMs = points[0].time.getTime();
            const maxMs = points[n-1].time.getTime();
            if (!isFinite(ms)) return 0;
            if (ms <= minMs) return 0;
            if (ms >= maxMs) return n-1;
            let lo = 0, hi = n - 1, ans = 0;
            while (lo <= hi) {
                const mid = (lo + hi) >> 1;
                const t = points[mid].time.getTime();
                if (t < ms) { lo = mid + 1; ans = lo; }
                else { hi = mid - 1; ans = mid; }
            }
            return Math.max(0, Math.min(n-1, ans));
        } catch(e){ console.warn('findIndexByTime失败:', e); return 0; }
    }
    function jumpToSliderTime(){
        try {
            const slider = document.getElementById('playbackTimeSlider');
            if (!slider || !playbackState.points || !playbackState.points.length) return;
            const ms = parseInt(slider.value, 10);
            if (!isFinite(ms)) return;
            const idx = findIndexByTime(playbackState.points, ms);
            playbackState.idx = idx;
            const pts = playbackState.points;
            const ll = pts[idx].ll;
            playbackState.path = pts.slice(0, idx+1).map(p=>p.ll);
            // 更新折线
            try {
                if (playbackState.line && typeof playbackState.line.setLngLats === 'function') {
                    playbackState.line.setLngLats(playbackState.path);
                } else {
                    if (playbackState.line && map) { try { map.removeOverLay(playbackState.line); } catch(e){} }
                    playbackState.line = new T.Polyline(playbackState.path, { color: currentTrackLineColor, weight: 1, opacity: 0.9 });
                    if (map) map.addOverLay(playbackState.line);
                }
            } catch(e){ console.warn('滑块更新折线失败:', e); }
            // 更新标记与时间
            ensurePlaybackDom(ll);
            updatePlaybackDom(ll);
            updatePlaybackTimeLabel(pts[idx].ts);
            // 若正在播放，立即按新位置继续
            if (playbackState.running) {
                if (playbackState.timer) { clearTimeout(playbackState.timer); playbackState.timer = null; }
                scheduleNext();
            }
        } catch(e) { console.warn('滑块跳转失败:', e); }
    }

    // DOM标记：使用容器坐标实现可见移动
    let playbackDom = { el: null, lastLL: null, bound: false };

    function ensurePlaybackDom(ll){
        try {
            playbackDom.lastLL = ll;
            const pane = (map && map.getPanes && map.getPanes().overlayPane) || document.getElementById('mapContainer');
            if (!pane) { console.warn('未找到overlayPane或mapContainer'); return; }
            if (!playbackDom.el) {
                const el = document.createElement('div');
                el.id = 'playbackDomMarker';
                el.style.position = 'absolute';
                el.style.width = '0';
                el.style.height = '0';
                el.style.borderLeft = '3px solid transparent';
                el.style.borderRight = '3px solid transparent';
                el.style.borderBottom = '4px solid #2C64A7';
                el.style.borderTop = '0';
                el.style.transform = 'translate(-50%, -50%)';
                el.style.zIndex = '9999';
                // 添加伪元素来增强箭头效果
                el.style.clipPath = 'polygon(50% 0, 100% 100%, 0 100%)';
                pane.appendChild(el);
                playbackDom.el = el;
                console.log('[Playback] 创建DOM标记，父节点=', pane === document.getElementById('mapContainer') ? '#mapContainer' : 'overlayPane');
                bindPlaybackDomEvents();
            }
            updatePlaybackDom(ll);
        } catch(e) { console.warn('创建DOM标记失败:', e); }
    }

    function updatePlaybackDom(ll){
        try {
            playbackDom.lastLL = ll;
            if (!map || !playbackDom.el || !ll) { console.log('[Playback] update取消：map/el/ll缺失'); return; }
            let p;
            if (typeof map.lngLatToLayerPoint === 'function') {
                p = map.lngLatToLayerPoint(ll);
                console.log('[Playback] 使用layerPoint定位:', ll && ll.lng, ll && ll.lat, '=>', p && p.x, p && p.y);
            } else if (typeof map.lngLatToContainerPoint === 'function') {
                p = map.lngLatToContainerPoint(ll);
                console.log('[Playback] 使用containerPoint定位:', ll && ll.lng, ll && ll.lat, '=>', p && p.x, p && p.y);
            } else {
                console.warn('地图对象不支持lngLat到像素坐标转换');
                return;
            }
            playbackDom.el.style.left = p.x + 'px';
            playbackDom.el.style.top = p.y + 'px';
        } catch(e) { console.warn('更新DOM标记位置失败:', e); }
    }

    function bindPlaybackDomEvents(){
        if (playbackDom.bound) return;
        const updater = function(){
            try {
                if (!map || !playbackDom.el || !playbackDom.lastLL) return;
                let p;
                if (typeof map.lngLatToLayerPoint === 'function') {
                    p = map.lngLatToLayerPoint(playbackDom.lastLL);
                } else if (typeof map.lngLatToContainerPoint === 'function') {
                    p = map.lngLatToContainerPoint(playbackDom.lastLL);
                }
                if (!p) return;
                playbackDom.el.style.left = p.x + 'px';
                playbackDom.el.style.top = p.y + 'px';
            } catch(e){}
        };
        try {
            map.addEventListener('move', updater);
            map.addEventListener('zoom', updater);
            playbackDom.bound = true;
        } catch(e){}
    }

    function removePlaybackDom(){
        try {
            const el = playbackDom.el;
            playbackDom.lastLL = null;
            if (el && el.parentNode) el.parentNode.removeChild(el);
        } catch(e){}
        playbackDom.el = null;
        playbackDom.bound = false;
    }

    // 测量功能相关变量
    let measureState = {
        isActive: false,
        mode: '', // 'distance' or 'area'
        points: [],
        tempLine: null,
        lines: [],
        markers: [],
        labels: [],
        polygon: null,
        areaLabel: null
    };

    // 绑定测量按钮事件
    function bindMeasureEvents() {
        const distanceBtn = document.getElementById('measureDistanceBtn');
        const areaBtn = document.getElementById('measureAreaBtn');
        
        if (distanceBtn) {
            distanceBtn.addEventListener('click', function() {
                startMeasureDistance();
            });
        }
        
        if (areaBtn) {
            areaBtn.addEventListener('click', function() {
                startMeasureArea();
            });
        }
    }

    // 绑定地图类型切换按钮事件
    function bindMapTypeEvent() {
        const mapTypeBtn = document.getElementById('mapTypeBtn');
        
        if (mapTypeBtn) {
            mapTypeBtn.addEventListener('click', function() {
                toggleMapType();
            });
        }
    }

    // 切换地图类型
    function toggleMapType() {
        if (!map) {
            alert('地图未初始化');
            return;
        }
        
        // 切换地图类型
        if (currentMapType === 'satellite') {
            // 切换到街道地图
            map.setMapType(TMAP_NORMAL_MAP);
            currentMapType = 'street';
            updateMapTypeButton('街道图');
        } else {
            // 切换到卫星地图
            map.setMapType(TMAP_SATELLITE_MAP);
            currentMapType = 'satellite';
            updateMapTypeButton('卫星图');
        }
    }

    // 更新地图类型按钮显示
    function updateMapTypeButton(typeName) {
        const mapTypeBtn = document.getElementById('mapTypeBtn');
        if (mapTypeBtn) {
            mapTypeBtn.innerHTML = `<span>${typeName}</span>`;
            mapTypeBtn.title = `当前：${typeName}，点击切换`;
        }
    }

    // 开始测距
    function startMeasureDistance() {
        if (!map) {
            alert('地图未初始化');
            return;
        }
        
        // 先移除所有可能存在的事件监听器
        try {
            map.removeEventListener('click', handleMapClick);
            map.removeEventListener('click', handleAreaMapClick);
            map.removeEventListener('mousemove', handleMouseMove);
            map.removeEventListener('mousemove', handleAreaMouseMove);
            map.removeEventListener('dblclick', finishMeasure);
            map.removeEventListener('dblclick', finishAreaMeasure);
        } catch(e) {
            console.log('移除事件监听器时出错:', e);
        }
        
        // 重置测量状态
        clearMeasureResult();
        
        // 设置测量状态为激活
        measureState.isActive = true;
        measureState.mode = 'distance'; // 设置为距离测量模式
        
        // 禁用其他按钮
        disableButtons(true);
        
        // 添加地图点击事件监听器
        map.addEventListener('click', handleMapClick);
        
        // 添加鼠标移动事件监听器
        map.addEventListener('mousemove', handleMouseMove);
        
        // 添加双击事件监听器结束测量
        map.addEventListener('dblclick', finishMeasure);
        
        console.log('测距功能已启动');
    }

    // 开始测面
    function startMeasureArea() {
        if (!map) {
            alert('地图未初始化');
            return;
        }
        
        // 先移除所有可能存在的事件监听器
        try {
            map.removeEventListener('click', handleMapClick);
            map.removeEventListener('click', handleAreaMapClick);
            map.removeEventListener('mousemove', handleMouseMove);
            map.removeEventListener('mousemove', handleAreaMouseMove);
            map.removeEventListener('dblclick', finishMeasure);
            map.removeEventListener('dblclick', finishAreaMeasure);
        } catch(e) {
            console.log('移除事件监听器时出错:', e);
        }
        
        // 重置测量状态
        clearMeasureResult();
        
        // 设置测量状态为激活
        measureState.isActive = true;
        measureState.mode = 'area'; // 设置为面积测量模式
        
        // 禁用其他按钮
        disableButtons(true);
        
        // 添加地图点击事件监听器
        map.addEventListener('click', handleAreaMapClick);
        
        // 添加鼠标移动事件监听器
        map.addEventListener('mousemove', handleAreaMouseMove);
        
        // 添加双击事件监听器结束测量
        map.addEventListener('dblclick', finishAreaMeasure);
        
        console.log('测面功能已启动');
    }

    // 处理地图点击事件
    function handleMapClick(event) {
        if (!measureState.isActive || measureState.mode !== 'distance') return;
        
        const point = event.lnglat;
        measureState.points.push(point);
        
        // 创建小圆点图标
        const smallDotIcon = new T.Icon({
            iconUrl: 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="8" height="8"><circle cx="4" cy="4" r="3" fill="%23FF0000" stroke="%23FFFFFF" stroke-width="1"/></svg>',
            iconSize: new T.Point(8, 8),
            iconAnchor: new T.Point(4, 4)
        });
        
        // 创建点标记
        const marker = new T.Marker(point, {icon: smallDotIcon});
        map.addOverLay(marker);
        measureState.markers.push(marker);
        
        // 如果不是第一个点，创建线段
        if (measureState.points.length > 1) {
            const prevPoint = measureState.points[measureState.points.length - 2];
            const line = new T.Polyline([prevPoint, point], {
                color: '#FF0000',
                weight: 3,
                opacity: 0.8
            });
            map.addOverLay(line);
            measureState.lines.push(line);
            
            // 计算距离并显示标签
            const distance = calculateDistance(prevPoint, point);
            showDistanceLabel(point, distance);
        }
        
        // 移除临时线
        if (measureState.tempLine) {
            map.removeOverLay(measureState.tempLine);
            measureState.tempLine = null;
        }
    }

    // 处理测面地图点击事件
    function handleAreaMapClick(event) {
        if (!measureState.isActive || measureState.mode !== 'area') return;
        
        const point = event.lnglat;
        measureState.points.push(point);
        
        // 创建小圆点图标（与测距功能一致）
        const smallDotIcon = new T.Icon({
            iconUrl: 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="8" height="8"><circle cx="4" cy="4" r="3" fill="%23FF0000" stroke="%23FFFFFF" stroke-width="1"/></svg>',
            iconSize: new T.Point(8, 8),
            iconAnchor: new T.Point(4, 4)
        });
        
        // 创建点标记
        const marker = new T.Marker(point, {icon: smallDotIcon});
        map.addOverLay(marker);
        measureState.markers.push(marker);
        
        // 移除之前的多边形
        if (measureState.polygon) {
            map.removeOverLay(measureState.polygon);
        }
        
        // 如果点数大于2，创建多边形
        if (measureState.points.length >= 3) {
            const polygon = new T.Polygon(measureState.points, {
                color: currentOutlineColor,
                weight: 3,
                opacity: 0.8,
                fillColor: currentFillColor,
                fillOpacity: currentFillOpacity
            });
            map.addOverLay(polygon);
            measureState.polygon = polygon;
            
            // 计算面积并显示标签
            const area = calculatePolygonArea(measureState.points);
            showAreaLabel(getPolygonCenter(measureState.points), area);
        }
        
        // 移除临时线
        if (measureState.tempLine) {
            map.removeOverLay(measureState.tempLine);
            measureState.tempLine = null;
        }
    }

    // 处理鼠标移动事件
    function handleMouseMove(event) {
        if (!measureState.isActive || measureState.mode !== 'distance' || measureState.points.length === 0) return;
        
        const lastPoint = measureState.points[measureState.points.length - 1];
        const currentPoint = event.lnglat;
        
        // 移除之前的临时线
        if (measureState.tempLine) {
            map.removeOverLay(measureState.tempLine);
        }
        
        // 创建新的临时线
        measureState.tempLine = new T.Polyline([lastPoint, currentPoint], {
            color: '#0000FF',
            weight: 2,
            opacity: 0.6,
            dashArray: [5, 5]
        });
        map.addOverLay(measureState.tempLine);
    }

    // 处理测面鼠标移动事件
    function handleAreaMouseMove(event) {
        if (!measureState.isActive || measureState.mode !== 'area' || measureState.points.length === 0) return;
        
        const firstPoint = measureState.points[0];
        const lastPoint = measureState.points[measureState.points.length - 1];
        const currentPoint = event.lnglat;
        
        // 移除之前的临时线
        if (measureState.tempLine) {
            map.removeOverLay(measureState.tempLine);
        }
        
        // 创建新的临时线（从最后一个点到当前点，再到第一个点形成闭合效果）
        const tempPoints = [lastPoint, currentPoint];
        if (measureState.points.length >= 2) {
            tempPoints.push(firstPoint);
        }
        
        measureState.tempLine = new T.Polyline(tempPoints, {
            color: '#0000FF',
            weight: 2,
            opacity: 0.6,
            dashArray: [5, 5]
        });
        map.addOverLay(measureState.tempLine);
    }

    // 结束测量
    function finishMeasure() {
        if (!measureState.isActive || measureState.mode !== 'distance') return;
        
        // 移除事件监听器
        map.removeEventListener('click', handleMapClick);
        map.removeEventListener('mousemove', handleMouseMove);
        map.removeEventListener('dblclick', finishMeasure);
        
        // 移除临时线
        if (measureState.tempLine) {
            map.removeOverLay(measureState.tempLine);
            measureState.tempLine = null;
        }
        
        // 显示总距离
        if (measureState.points.length > 1) {
            const totalDistance = calculateTotalDistance();
            showTotalDistanceLabel(totalDistance);
        }
        
        // 重置测量状态
        measureState.isActive = false;
        measureState.mode = '';
        
        // 恢复其他按钮
        disableButtons(false);
        
        console.log('测距功能已完成');
    }

    // 结束测面测量
    function finishAreaMeasure() {
        if (!measureState.isActive || measureState.mode !== 'area') return;
        
        // 移除事件监听器
        map.removeEventListener('click', handleAreaMapClick);
        map.removeEventListener('mousemove', handleAreaMouseMove);
        map.removeEventListener('dblclick', finishAreaMeasure);
        
        // 移除临时线
        if (measureState.tempLine) {
            map.removeOverLay(measureState.tempLine);
            measureState.tempLine = null;
        }
        
        // 如果点数大于等于3，创建最终多边形
        if (measureState.points.length >= 3) {
            // 移除之前的多边形
            if (measureState.polygon) {
                map.removeOverLay(measureState.polygon);
            }
            
            const polygon = new T.Polygon(measureState.points, {
                color: currentOutlineColor,
                weight: 3,
                opacity: 0.8,
                fillColor: currentFillColor,
                fillOpacity: currentFillOpacity
            });
            map.addOverLay(polygon);
            measureState.polygon = polygon;
            
            // 计算并显示总面积
            const area = calculatePolygonArea(measureState.points);
            showTotalAreaLabel(getPolygonCenter(measureState.points), area);
        } else {
            // 点数不足3个，移除所有标记
            clearMeasureResult();
        }
        
        // 重置测量状态
        measureState.isActive = false;
        measureState.mode = '';
        
        // 恢复其他按钮
        disableButtons(false);
        
        console.log('测面功能已完成');
    }

    // 计算两点间距离（米）
    function calculateDistance(point1, point2) {
        // 使用天地图提供的距离计算方法
        if (T.CRS && T.CRS.EPSG4326 && T.CRS.EPSG4326.distance) {
            return T.CRS.EPSG4326.distance(point1, point2);
        }
        
        // 如果没有提供，则使用球面距离公式
        const R = 6371000; // 地球半径（米）
        const dLat = (point2.lat - point1.lat) * Math.PI / 180;
        const dLon = (point2.lng - point1.lng) * Math.PI / 180;
        const a = 
            Math.sin(dLat/2) * Math.sin(dLat/2) +
            Math.cos(point1.lat * Math.PI / 180) * Math.cos(point2.lat * Math.PI / 180) * 
            Math.sin(dLon/2) * Math.sin(dLon/2);
        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
        return R * c;
    }

    // 计算多边形面积（平方米）
    function calculatePolygonArea(points) {
        // 使用天地图提供的面积计算方法（如果可用）
        if (T.GeometryUtils && T.GeometryUtils.computeArea) {
            return T.GeometryUtils.computeArea(points);
        }
        
        // 如果没有提供，则使用球面多边形面积计算公式
        // 这里使用简单的平面近似计算，对于小面积比较准确
        if (points.length < 3) return 0;
        
        let area = 0;
        const n = points.length;
        
        for (let i = 0; i < n; i++) {
            const j = (i + 1) % n;
            area += points[i].lng * points[j].lat;
            area -= points[j].lng * points[i].lat;
        }
        
        area = Math.abs(area) / 2.0;
        
        // 转换为平方米（这是一个简化的近似值）
        // 更精确的计算需要考虑地球曲率
        const earthRadius = 6371000; // 地球半径（米）
        const degreeToMeter = (2 * Math.PI * earthRadius) / 360; // 每度对应的米数
        
        // 这个转换只是一个粗略的近似
        return area * degreeToMeter * degreeToMeter;
    }

    // 获取多边形中心点
    function getPolygonCenter(points) {
        if (points.length === 0) return null;
        
        let x = 0, y = 0;
        for (let i = 0; i < points.length; i++) {
            x += points[i].lng;
            y += points[i].lat;
        }
        
        return new T.LngLat(x / points.length, y / points.length);
    }

    // 计算总距离
    function calculateTotalDistance() {
        let total = 0;
        for (let i = 1; i < measureState.points.length; i++) {
            const distance = calculateDistance(measureState.points[i-1], measureState.points[i]);
            total += distance;
        }
        return total;
    }

    // 显示两点间距离标签
    function showDistanceLabel(point, distance) {
        const label = document.createElement('div');
        label.className = 'distance-label';
        label.innerHTML = distance.toFixed(2) + ' 米';
        label.style.position = 'absolute';
        label.style.backgroundColor = 'rgba(255, 255, 255, 0.9)';
        label.style.padding = '2px 6px';
        label.style.borderRadius = '3px';
        label.style.fontSize = '12px';
        label.style.boxShadow = '0 1px 2px rgba(0,0,0,0.3)';
        label.style.zIndex = '1000';
        label.style.transform = 'translate(-50%, -50%)';
        
        // 添加删除按钮
        const closeBtn = document.createElement('span');
        closeBtn.innerHTML = '×';
        closeBtn.style.marginLeft = '5px';
        closeBtn.style.cursor = 'pointer';
        closeBtn.style.fontWeight = 'bold';
        closeBtn.onclick = function() {
            if (label.parentNode) {
                label.parentNode.removeChild(label);
            }
        };
        label.appendChild(closeBtn);
        
        document.getElementById('mapContainer').appendChild(label);
        
        // 定位标签（向上偏移20像素）
        const pixel = map.lngLatToContainerPoint(point);
        label.style.left = pixel.x + 'px';
        label.style.top = (pixel.y - 20) + 'px';
        
        measureState.labels.push(label);
    }

    // 显示面积标签
    function showAreaLabel(point, area) {
        // 如果已存在面积标签，先移除它
        if (measureState.areaLabel) {
            if (measureState.areaLabel.parentNode) {
                measureState.areaLabel.parentNode.removeChild(measureState.areaLabel);
            }
        }
        
        const label = document.createElement('div');
        label.className = 'area-label';
        label.innerHTML = area.toFixed(2) + ' 平方米';
        label.style.position = 'absolute';
        label.style.backgroundColor = 'rgba(255, 255, 255, 0.9)';
        label.style.padding = '2px 6px';
        label.style.borderRadius = '3px';
        label.style.fontSize = '12px';
        label.style.boxShadow = '0 1px 2px rgba(0,0,0,0.3)';
        label.style.zIndex = '1000';
        label.style.transform = 'translate(-50%, -50%)';
        
        // 添加删除按钮
        const closeBtn = document.createElement('span');
        closeBtn.innerHTML = '×';
        closeBtn.style.marginLeft = '5px';
        closeBtn.style.cursor = 'pointer';
        closeBtn.style.fontWeight = 'bold';
        closeBtn.onclick = function() {
            if (label.parentNode) {
                label.parentNode.removeChild(label);
            }
        };
        label.appendChild(closeBtn);
        
        document.getElementById('mapContainer').appendChild(label);
        
        // 定位标签
        const pixel = map.lngLatToContainerPoint(point);
        label.style.left = pixel.x + 'px';
        label.style.top = (pixel.y - 20) + 'px';
        
        measureState.areaLabel = label;
        measureState.labels.push(label);
    }

    // 显示总面积标签
    function showTotalAreaLabel(point, area) {
        // 如果已存在面积标签，先移除它
        if (measureState.areaLabel) {
            if (measureState.areaLabel.parentNode) {
                measureState.areaLabel.parentNode.removeChild(measureState.areaLabel);
            }
        }
        
        // 计算亩数（1亩 ≈ 666.6667平方米）
        const areaInMu = area / 666.6667;
        
        const label = document.createElement('div');
        label.className = 'total-area-label';
        label.innerHTML = '总面积: ' + area.toFixed(2) + ' 平方米<br>' + areaInMu.toFixed(2) + ' 亩';
        label.style.position = 'absolute';
        label.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';
        label.style.color = 'white';
        label.style.padding = '4px 8px';
        label.style.borderRadius = '4px';
        label.style.fontSize = '14px';
        label.style.fontWeight = 'bold';
        label.style.boxShadow = '0 2px 4px rgba(0,0,0,0.3)';
        label.style.zIndex = '1000';
        label.style.transform = 'translate(-50%, -50%)';
        label.style.lineHeight = '1.4';
        
        // 添加删除按钮
        const closeBtn = document.createElement('span');
        closeBtn.innerHTML = ' ×';
        closeBtn.style.cursor = 'pointer';
        closeBtn.style.fontWeight = 'bold';
        closeBtn.onclick = function() {
            if (label.parentNode) {
                label.parentNode.removeChild(label);
            }
        };
        label.appendChild(closeBtn);
        
        document.getElementById('mapContainer').appendChild(label);
        
        // 定位标签
        const pixel = map.lngLatToContainerPoint(point);
        label.style.left = pixel.x + 'px';
        label.style.top = (pixel.y - 40) + 'px';
        
        measureState.areaLabel = label;
        measureState.labels.push(label);
    }

    // 显示总距离标签
    function showTotalDistanceLabel(totalDistance) {
        const lastPoint = measureState.points[measureState.points.length - 1];
        const label = document.createElement('div');
        label.className = 'total-distance-label';
        label.innerHTML = '总距离: ' + totalDistance.toFixed(2) + ' 米';
        label.style.position = 'absolute';
        label.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';
        label.style.color = 'white';
        label.style.padding = '4px 8px';
        label.style.borderRadius = '4px';
        label.style.fontSize = '14px';
        label.style.fontWeight = 'bold';
        label.style.boxShadow = '0 2px 4px rgba(0,0,0,0.3)';
        label.style.zIndex = '1000';
        label.style.transform = 'translate(-50%, -50%)';
        
        // 添加删除按钮
        const closeBtn = document.createElement('span');
        closeBtn.innerHTML = ' ×';
        closeBtn.style.cursor = 'pointer';
        closeBtn.style.fontWeight = 'bold';
        closeBtn.onclick = function() {
            if (label.parentNode) {
                label.parentNode.removeChild(label);
            }
        };
        label.appendChild(closeBtn);
        
        document.getElementById('mapContainer').appendChild(label);
        
        // 定位标签（向上偏移40像素，比段距离标签更高）
        const pixel = map.lngLatToContainerPoint(lastPoint);
        label.style.left = pixel.x + 'px';
        label.style.top = (pixel.y - 60) + 'px';  // 从-40改为-60，增加间距
        
        measureState.labels.push(label);
    }

    // 清除测量结果
    function clearMeasureResult() {
        // 移除所有线条
        measureState.lines.forEach(line => {
            if (map && map.removeOverLay) {
                try { map.removeOverLay(line); } catch(e) {}
            }
        });
        
        // 移除所有标记
        measureState.markers.forEach(marker => {
            if (map && map.removeOverLay) {
                try { map.removeOverLay(marker); } catch(e) {}
            }
        });
        
        // 移除所有标签
        measureState.labels.forEach(label => {
            if (label.parentNode) {
                try { label.parentNode.removeChild(label); } catch(e) {}
            }
        });
        
        // 移除临时线
        if (measureState.tempLine) {
            if (map && map.removeOverLay) {
                try { map.removeOverLay(measureState.tempLine); } catch(e) {}
            }
            measureState.tempLine = null;
        }
        
        // 移除多边形
        if (measureState.polygon) {
            if (map && map.removeOverLay) {
                try { map.removeOverLay(measureState.polygon); } catch(e) {}
            }
            measureState.polygon = null;
        }
        
        // 移除面积标签
        if (measureState.areaLabel) {
            if (measureState.areaLabel.parentNode) {
                try { measureState.areaLabel.parentNode.removeChild(measureState.areaLabel); } catch(e) {}
            }
            measureState.areaLabel = null;
        }
        
        // 重置状态
        measureState.points = [];
        measureState.lines = [];
        measureState.markers = [];
        measureState.labels = [];
        measureState.isActive = false;
        measureState.mode = '';
    }

    // 添加CSS样式用于距离标签
    const style = document.createElement('style');
    style.innerHTML = `
        .distance-label, .total-distance-label {
            font-family: Arial, sans-serif;
            pointer-events: auto;
        }
    `;
    document.head.appendChild(style);

    // 颜色选择器相关变量和函数
    let currentOutlineColor = "#FFD700"; // 默认边框颜色
    let currentFillColor = "#FFFF00";   // 默认填充颜色
    let currentFillOpacity = 0.35;       // 默认透明度
    
    // 轨迹颜色相关变量
    let currentTrackLineColor = "#FF0000"; // 默认轨迹线颜色
    let currentTrackPointColor = "#68EAF3"; // 默认轨迹点颜色

    // 初始化颜色选择器
    function initColorPickers() {
        // 边框颜色选择器
        const outlineColorPicker = document.getElementById('outlineColorPicker');
        const outlineColorInput = document.getElementById('outlineColorInput');
        
        outlineColorPicker.addEventListener('click', function() {
            outlineColorInput.click();
        });
        
        outlineColorInput.addEventListener('change', function() {
            currentOutlineColor = this.value;
            outlineColorPicker.style.backgroundColor = currentOutlineColor;
        });
        
        // 填充颜色选择器
        const fillColorPicker = document.getElementById('fillColorPicker');
        const fillColorInput = document.getElementById('fillColorInput');
        
        fillColorPicker.addEventListener('click', function() {
            fillColorInput.click();
        });
        
        fillColorInput.addEventListener('change', function() {
            currentFillColor = this.value;
            fillColorPicker.style.backgroundColor = currentFillColor;
        });
        
        // 透明度滑块
        const fillOpacitySlider = document.getElementById('fillOpacitySlider');
        const fillOpacityValue = document.getElementById('fillOpacityValue');
        
        fillOpacitySlider.addEventListener('input', function() {
            currentFillOpacity = this.value / 100;
            fillOpacityValue.textContent = this.value + '%';
        });
        
        // 轨迹线颜色选择器
        const trackLineColorPicker = document.getElementById('trackLineColorPicker');
        const trackLineColorInput = document.getElementById('trackLineColorInput');
        
        if (trackLineColorPicker && trackLineColorInput) {
            trackLineColorPicker.addEventListener('click', function() {
                trackLineColorInput.click();
            });
            
            trackLineColorInput.addEventListener('change', function() {
                currentTrackLineColor = this.value;
                trackLineColorPicker.style.backgroundColor = currentTrackLineColor;
            });
        }
        
        // 轨迹点颜色选择器
        const trackPointColorPicker = document.getElementById('trackPointColorPicker');
        const trackPointColorInput = document.getElementById('trackPointColorInput');
        
        if (trackPointColorPicker && trackPointColorInput) {
            // 设置初始背景色
            trackPointColorPicker.style.backgroundColor = currentTrackPointColor;
            
            trackPointColorPicker.addEventListener('click', function() {
                trackPointColorInput.click();
            });
            
            trackPointColorInput.addEventListener('change', function() {
                currentTrackPointColor = this.value;
                trackPointColorPicker.style.backgroundColor = currentTrackPointColor;
            });
        }
    }

</script>
</body>

</html>
