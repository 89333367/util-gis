<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>展示轮廓</title>
    <style>
        body {
            margin: 0;
            padding: 0;
        }

        #mapContainer {
            width: 100vw;
            height: 100vh;
            position: relative;
        }

        #mapLoading {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 999;
            transition: opacity 0.3s;
        }

        .loading-text {
            font-size: 16px;
            color: #333;
            padding: 10px 20px;
            background: white;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .wkt-input-container {
            position: absolute;
            top: 20px;
            right: 10px;
            z-index: 1000;
            background: white;
            padding: 12px;
            border-radius: 6px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            width: min(320px, 90vw);
            box-sizing: border-box;
            transition: all 0.3s;
        }

        .minimize-btn {
            position: absolute;
            top: -5px;
            right: -4px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #f0f0f0;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: #666;
            z-index: 1001;
            transition: background 0.2s;
        }

        .minimize-btn:hover {
            background: #e0e0e0;
        }

        .content-wrapper {
            transition: all 0.3s;
        }

        .wkt-input-container.minimized {
            width: 40px;
            height: 40px;
            padding: 0;
        }

        .wkt-input-container.minimized .content-wrapper {
            display: none;
        }

        .wkt-input-container.minimized .min-icon {
            display: none;
        }

        .wkt-input-container.minimized .restore-icon {
            display: inline;
        }

        #wktTextarea {
            width: 100%;
            height: 120px;
            margin-bottom: 10px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: monospace;
            resize: vertical;
            box-sizing: border-box;
        }

        .button-group {
            display: flex;
            gap: 10px;
        }

        /* 页签样式 */
        .tabs-header {
            display: flex;
            gap: 8px;
            margin-bottom: 8px;
        }
        .tab-btn {
            flex: 1;
            padding: 6px 0;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            background: #f5f5f5;
            color: #333;
            transition: background 0.2s;
        }
        .tab-btn.active { background: #337AFF; color: #fff; }
        .tab-pane { display: none; }
        .tab-pane.active { display: block; }

        /* Multi → Polygons 分割器样式 */
        .split-section {
            margin-top: 10px;
            padding: 10px;
            background: #fafafa;
            border: 1px solid #eee;
            border-radius: 6px;
        }
        .split-section .title {
            font-size: 13px;
            font-weight: 600;
            color: #333;
            margin-bottom: 6px;
        }
        .split-section .desc {
            font-size: 12px;
            color: #666;
            margin-bottom: 8px;
        }
        #multiInput, #polyOutput {
            width: 100%;
            height: 90px;
            margin-bottom: 8px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: monospace;
            resize: vertical;
            box-sizing: border-box;
        }
        .split-actions {
            display: flex;
            gap: 8px;
            margin-bottom: 8px;
        }
        .split-actions button {
            flex: 1;
            padding: 6px 0;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            transition: background 0.2s;
        }
        #splitMultiBtn { background: #337AFF; color: #fff; }
        #splitMultiBtn:hover { background: #2860E0; }
        #copyPolysBtn { background: #f5f5f5; color: #333; }
        #copyPolysBtn:hover { background: #e0e0e0; }
        #drawButton,
        #clearButton,
        #drawTrackButton,
        #clearTrackButton {
            width: 50%;
            padding: 8px 0;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.2s;
        }

        #drawButton,
        #drawTrackButton {
            background: #337AFF;
            color: white;
        }

        #drawButton:hover,
        #drawTrackButton:hover {
            background: #2860E0;
        }

        #clearButton,
        #clearTrackButton {
            background: #f5f5f5;
            color: #333;
        }

        #clearButton:hover,
        #clearTrackButton:hover {
            background: #e0e0e0;
        }

        #drawButton:disabled,
        #clearButton:disabled,
        #drawTrackButton:disabled,
        #clearTrackButton:disabled {
            background: #e0e0e0;
            color: #999;
            cursor: not-allowed;
        }

        .tip {
            font-size: 12px;
            color: #666;
            margin-bottom: 8px;
            line-height: 1.4;
        }

        .area-label {
             position: absolute;
             background: rgba(255, 0, 0, 0.85);
             border: 1px solid #000;
             border-radius: 3px;
             padding: 4px 6px;
             font-size: 12px;
             color: #fff;
             font-weight: 600;
             box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
             white-space: nowrap;
             z-index: 9999;
             pointer-events: none;
         }
         /* 默认隐藏标签容器下的标签 */
          .labels-hidden .area-label { display: none; }

          /* Batch → Generator 样式 */
          .batch-section { margin-top: 10px; padding: 10px; background: #fafafa; border: 1px solid #eee; border-radius: 6px; }
          .batch-section .title { font-size: 13px; font-weight: 600; color: #333; margin-bottom: 6px; }
          .batch-section .desc { font-size: 12px; color: #666; margin-bottom: 8px; }
          #batchInput, #multiOutput { width: 100%; height: 90px; margin-bottom: 8px; padding: 8px; border: 1px solid #ddd; border-radius: 4px; font-family: monospace; resize: vertical; box-sizing: border-box; }
          .batch-actions { display: flex; gap: 8px; margin-bottom: 8px; }
          .batch-actions button { flex: 1; padding: 6px 0; border: none; border-radius: 4px; cursor: pointer; font-size: 13px; transition: background 0.2s; }
          #generateMultiBtn { background: #337AFF; color: #fff; }
          #generateMultiBtn:hover { background: #2860E0; }
          #copyMultiBtn { background: #f5f5f5; color: #333; }
          #copyMultiBtn:hover { background: #e0e0e0; }
      </style>
    <script src="https://api.tianditu.gov.cn/api?v=4.0&tk=648f621977051d0199ff0f965d3fd322"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/Turf.js/6.5.0/turf.min.js"></script>
    <script src="https://lib.baomitu.com/terraformer/1.0.12/terraformer.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://unpkg.com/terraformer-wkt-parser@1.2.1/terraformer-wkt-parser.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- 已移除动态备用加载器 ensureTerraformer：改为仅使用静态脚本标签加载 Terraformer 核心库与 WKT 解析器 -->
    <script>
        // 检查Turf.js是否加载成功
        window.addEventListener('load', function () {
            if (typeof turf === 'undefined') {
                console.warn('Turf.js加载失败，已启用备用面积算法');
            } else {
                console.log('Turf.js加载成功');
            }
        });
    </script>
</head>

<body>
<div id="mapContainer">
    <div id="mapLoading">
        <div class="loading-text">地图正在加载中...</div>
    </div>
</div>

<div class="wkt-input-container">
    <div class="minimize-btn" id="minimizeBtn">
        <span class="min-icon">−</span>
        <span class="restore-icon" style="display:none;">+</span>
    </div>

    <div class="content-wrapper">
        <div class="tabs-header">
            <button class="tab-btn active" id="tabDrawBtn">轮廓</button>
            <button class="tab-btn" id="tabTrackBtn">轨迹</button>
            <button class="tab-btn" id="tabSplitBtn">分割器</button>
            <button class="tab-btn" id="tabBatchBtn">合并器</button>
        </div>
        <div class="tab-pane active" id="tabDraw">
            <div class="tip">请输入WKT字符串（支持POLYGON/MULTIPOLYGON）：</div>
            <textarea id="wktTextarea">POLYGON ((124.48103668836985 45.336393867548686, 124.48103657530076 45.336394022801855, 124.48103642185418 45.336394159734766, 124.48103623380561 45.33639427319333, 124.48103601823323 45.336394358907036, 124.48103578325097 45.33639441364967, 124.48103553770345 45.33639443536073, 124.48103529083292 45.336394423223055, 124.48103505193163 45.33639437769347, 124.48103482999146 45.33639430048571, 124.4810346333663 45.3363941945058, 124.48103446945692 45.33639406374281, 124.48103397174795 45.33639357903268, 124.4810338890525 45.33639351319385, 124.48103168925864 45.33639207453221, 124.48103158994167 45.33639202133523, 124.48102903449876 45.336390912956226, 124.48102892237685 45.336390874445236, 124.48102610946721 45.336390138933886, 124.48102598884783 45.33639011658833, 124.48102302654614 45.33638978220376, 124.48102290206349 45.33638977688218, 124.48101990418421 45.33638985647176, 124.4810197806212 45.336389868378596, 124.48101686234558 45.3363903588844, 124.48101674559109 45.336390387284496, 124.48101390794054 45.336391310405666, 124.48096291313662 45.33641231268044, 124.48096062037014 45.33641346868019, 124.48096053171534 45.336413522733785, 124.48095857839414 45.33641495560413, 124.48095850529461 45.33641502020649, 124.48095695760334 45.33641668138638, 124.48095690253837 45.33641675434648, 124.4809558129554 45.3364185875093, 124.48095577779206 45.33641866635341, 124.48095518326241 45.336420609341644, 124.4809551691929 45.33642069139605, 124.4809550898757 45.336422678326954, 124.48095509737712 45.336422760810756, 124.48095553596201 45.336424724313, 124.48095556450099 45.33642480365234, 124.48095655026346 45.336426753989706, 124.4809752734527 45.336455331500396, 124.4809753080002 45.336455389470125, 124.48099608336543 45.33649397230943, 124.48099671634911 45.33649499730644, 124.48100373719878 45.336505016713694, 124.48100497192557 45.33650640565236, 124.48100508234435 45.33650656167771, 124.48101511604581 45.33652503220119, 124.48105916698293 45.336601127278634, 124.4810780792377 45.33663596505184, 124.48108714179807 45.336654079828506, 124.48112027465588 45.33671431279696, 124.48115719118734 45.33677717070249, 124.48119108630601 45.33683897910029, 124.48122611693539 45.33690603460176, 124.48126306118361 45.336973932671334, 124.48130497954685 45.33705581975107, 124.48130503625279 45.33705597017863, 124.48130505534522 45.337056125248274, 124.48130505534489 45.337056987319464, 124.48130508167644 45.33705764613515, 124.48130853932398 45.33710086688681, 124.48130852754848 45.33710104954376, 124.48130846365079 45.33710122674885, 124.48130835027058 45.33710139118197, 124.48130819209123 45.3371015360506, 124.48130799564713 45.3371016553704, 124.48127911431104 45.33711586682481, 124.48127890497382 45.337115950333995, 124.48127867713188 45.33711600464586, 124.4812784388849 45.33711602782963, 124.4812781987024 45.337116019061135, 124.48127796512289 45.33711597865209, 124.48127774644988 45.33711590803903, 124.48127755045702 45.33711580973221, 124.48127738411188 45.33711568722637, 124.48127725332793 45.33711554487655, 124.48121458266735 45.33703075514172, 124.48121454078222 45.33703069274283, 124.48121264098779 45.33702755668618, 124.48121123436906 45.3370257353753, 124.48121116586688 45.33702566398515, 124.48120929194847 45.33702406636587, 124.48120920535708 45.33702400553002, 124.48120693290865 45.33702269006955, 124.48120683142295 45.33702264203247, 124.4812042442876 45.33702165726544, 124.48120413165186 45.33702162379934, 124.48120132528224 45.337021006058855, 124.48120120565173 45.33702098839834, 124.48119828358986 45.337020760476165, 124.48119816137883 45.337020759272924, 124.48119523143443 45.33702092957823, 124.48119511115155 45.337020944876635, 124.48119228142565 45.33702150712601, 124.48119216750928 45.33702153836156, 124.4811895424049 45.33702247181079, 124.481189439058 45.33702251783088, 124.48118711542901 45.33702378804034, 124.48118702646455 45.33702384714703, 124.48118509004229 45.33702540725173, 124.48118501874166 45.33702547726493, 124.48118354097139 45.33702726970379, 124.48118348996539 45.33702734804072, 124.48118252536894 45.33702930668193, 124.48118249654058 45.337029390450766, 124.48118208070692 45.33703144303021, 124.48118207511921 45.33703152914143, 124.48118222339085 45.33703359992879, 124.48118224107702 45.33703368437819, 124.48118298278423 45.337035779424816, 124.48118398035363 45.337037768028054, 124.48118488157614 45.33703922589522, 124.48118568397445 45.33704031149575, 124.48118572644256 45.33704037485857, 124.48124736026891 45.33714244473748, 124.48124881053559 45.33714431118797, 124.48124888137357 45.33714438420531, 124.48125082268163 45.33714601367476, 124.4812509124555 45.337146075469846, 124.481253269349 45.337147404628155, 124.48125337456875 45.337147452798845, 124.48125605542191 45.337148429973965, 124.48125617199814 45.33714846264817, 124.48125907259214 45.33714904985226, 124.48125919599212 45.3371490657595, 124.48126220356615 45.3371492401649, 124.48126232899271 45.33714923868682, 124.48126510275355 45.33714901182377, 124.48126535862338 45.337149009121056, 124.48126561010912 45.337149042492705, 124.4812658470897 45.337149110595604, 124.48126606002734 45.33714921068888, 124.48126624035227 45.3371493387442, 124.4812663808071 45.337149489607796, 124.4812695017178 45.33715371200834, 124.48126955024821 45.33715378558428, 124.4813020160199 45.33720944122088, 124.48130208304465 45.33720959306578, 124.48130211111156 45.33720975086177, 124.48130220007722 45.33721147907814, 124.48130221722998 45.33721156752465, 124.48130292794984 45.33721365580767, 124.48130296958936 45.337213740108346, 124.481304252415 45.3372156878299, 124.48130431689356 45.33721576464873, 124.48130612104681 45.33721749471235, 124.48130620581253 45.337217561008785, 124.48130845988032 45.3372190049342, 124.48130856157695 45.337219058083164, 124.48131117633785 45.33722015871619, 124.48131129094013 45.33722019661414, 124.48131416289414 45.337220910388446, 124.48131428586663 45.33722093153553, 124.48131730133386 45.337221230197976, 124.48131742780822 45.337221233756985, 124.48132046742867 45.337221105485725, 124.48132059239894 45.33722109131581, 124.48132353585602 45.33722054118815, 124.48132365437549 45.33722050985019, 124.48132638515901 45.337219559641724, 124.48132649253647 45.337219512376166, 124.48132890255442 45.33721819969886, 124.48132899364852 45.33721813897053, 124.48133106455316 45.337216446512606, 124.48133206047487 45.33721544325565, 124.48133357036241 45.33721355636423, 124.48133362161626 45.33721347394981, 124.48133407940743 45.33721247594977, 124.4813341510072 45.33721235214159, 124.48134429578319 45.33719797082705, 124.48134535710514 45.3371960091043, 124.48134538977 45.337195924916465, 124.48134589254211 45.33719385551999, 124.48134590148165 45.33719376846497, 124.48134582674402 45.337191669570124, 124.4813458116199 45.3371915829411, 124.48134535603171 45.33719014551106, 124.48134532632463 45.33718998513708, 124.4813453378131 45.33718982360338, 124.48134771517907 45.33717793675651, 124.48134772835499 45.33717788280362, 124.48136181556622 45.337129119367646, 124.48136189144213 45.33712894720557, 124.48136201446745 45.337128789170734, 124.48136217970145 45.337128651609966, 124.48136238050819 45.33712854004778, 124.48136260882313 45.33712845896459, 124.48136285547702 45.33712841161678, 124.48136311056398 45.33712839990586, 124.48136336383962 45.33712842430215, 124.48136360513206 45.337128483825865, 124.48136382475101 45.3371285760865, 124.48136401387632 45.3371286973788, 124.48136416491262 45.3371288428316, 124.48136427179408 45.33712900660337, 124.48137092907989 45.33714266966294, 124.48141210782441 45.3372180181345, 124.48145504390571 45.33729789925465, 124.4814951861344 45.33737615958437, 124.48154012578206 45.33745605232819, 124.4815779730201 45.33752676658227, 124.481609883502 45.337593577361766, 124.4816102179586 45.33759421561887, 124.48164599533345 45.337656826053376, 124.48164602459605 45.3376568826607, 124.48167783683886 45.3377254778481, 124.48171204253813 45.337789896136655, 124.48174199353069 45.33784780147485, 124.48177695940005 45.337917733250286, 124.48180920787665 45.337979198163154, 124.48187117908908 45.33808814760206, 124.48190499332662 45.33814881429137, 124.48190501626968 45.3381488588707, 124.48192212859122 45.338185056574765, 124.48195813218962 45.33825105947427, 124.48195884612414 45.338252178341804, 124.48197725918212 45.33827734287095, 124.48197734911672 45.338277500938524, 124.48199574646782 45.338321494630904, 124.48199579613745 45.33832169359155, 124.48199578160475 45.33832189535227, 124.4819957036026 45.338322089738845, 124.48199474489807 45.33832374256836, 124.48199470920315 45.33832382690373, 124.48199413678068 45.33832590527185, 124.48199412511364 45.33832599289969, 124.48199413892712 45.33832811009034, 124.48199415161277 45.33832819678941, 124.48199478192127 45.3383303569954, 124.48200183425999 45.338346472556786, 124.48201904445074 45.33838389976751, 124.48204297623859 45.33842976976409, 124.48207390251335 45.338493617591695, 124.48207440114041 45.338494522388366, 124.48210544326521 45.33854458941473, 124.48214340397124 45.3386045273957, 124.48217504333704 45.3386559412597, 124.48217508667216 45.338656022108225, 124.48219182399936 45.33869245042932, 124.48219225087367 45.3386932730775, 124.48222122017508 45.33874322024275, 124.48225924256953 45.33881025881283, 124.48229924058812 45.33887925542563, 124.48233524185761 45.33894125764448, 124.48236613098652 45.33899307305296, 124.48236615464354 45.33899311575018, 124.48240600204147 45.339070818215475, 124.48244208085751 45.339137968885936, 124.48246327900185 45.339173321910295, 124.4825071753329 45.33924914347811, 124.48255201088242 45.33933184019818, 124.48258393256648 45.339396679832696, 124.48261586353006 45.339457555380314, 124.48261588820883 45.339457607219884, 124.48262908489673 45.339488399512646, 124.482629136557 45.33948859921213, 124.48262912341606 45.3394888019962, 124.48262425182259 45.339510264297076, 124.48262406962687 45.33951237656859, 124.48262407429304 45.339512464473565, 124.48262447989396 45.33951456113685, 124.48262450878728 45.33951464671033, 124.48262548659005 45.339516647281876, 124.48262553859998 45.33951672723538, 124.48262705102854 45.339518554834314, 124.48262712415672 45.33951862609595, 124.48262911308898 45.3395202104882, 124.482629204525 45.3395202703191, 124.48263159352747 45.339521550617484, 124.48263169975726 45.339521596718384, 124.48263439702187 45.339522523721804, 124.48263451396394 45.33952255432121, 124.48263741583605 45.33952309240537, 124.48263753899568 45.33952310632719, 124.48264053395826 45.33952323481391, 124.4826406586027 45.33952323152311, 124.48264363156065 45.339522945474734, 124.48264375289986 45.33952292509777, 124.4826465896042 45.33952223550701, 124.48264670297523 45.33952219882693, 124.48264929441302 45.339521132194356, 124.48264939545867 45.33952108062086, 124.4826516420429 45.33951967793634, 124.48265172687985 45.33951961345161, 124.4826535422748 45.339517928619756, 124.48265360764354 45.339517853701516, 124.48265492208458 45.339515951469785, 124.48265496505287 45.339515869795676, 124.48265575410933 45.33951373692569, 124.48265864229236 45.33950102890675, 124.48265870763801 45.33950085502374, 124.48265882073083 45.33950069378561, 124.48265897704916 45.33950055163902, 124.48265917034288 45.33950043426736, 124.48265939288372 45.339500346363415, 124.482659635774 45.33950029144182, 124.48265988930237 45.33950027169845, 124.48266014333211 45.339500287922704, 124.48266038770646 45.33950033946589, 124.48266061265488 45.33950042426721, 124.48266080918332 45.339500538936065, 124.48266096943406 45.339500678887745, 124.48266108699994 45.33950083852663, 124.48266181178874 45.33950212245004, 124.48266186906135 45.33950220059473, 124.48266350142285 45.339503976129656, 124.48266357921229 45.339504044893225, 124.48266567137067 45.339505561720834, 124.4826657666874 45.339505618460315, 124.48266823824206 45.3395068182897, 124.4826683474229 45.33950686082461, 124.48267110339393 45.33950769754718, 124.4826712222428 45.33950772424291, 124.48267415671933 45.339508165703684, 124.48267428066956 45.33950817553449, 124.48267728088119 45.33950820476838, 124.48267740516913 45.33950819735641, 124.4826803558194 45.339507813240004, 124.48268047566928 45.33950778887002, 124.48268326336573 45.33950700616485, 124.48268337417164 45.3395069657733, 124.48268589178542 45.33950581455815, 124.48268598928811 45.33950575969766, 124.48268814006911 45.33950428421268, 124.48268822052194 45.33950421699163, 124.48268992181627 45.33950247393922, 124.482689981544 45.33950239768626, 124.48269121195155 45.33950037146909, 124.48270520653817 45.33946936855964, 124.48270583987302 45.33946725194302, 124.48270585356559 45.339467162548964, 124.48270587576867 45.33946499943654, 124.48270586391264 45.33946490991236, 124.4827052741107 45.33946278711277, 124.48270523718168 45.339462701052, 124.48270408689918 45.33946075100795, 124.48270401590702 45.339460589096355, 124.48270398923194 45.339460420667876, 124.48270400782052 45.339460251699826, 124.48270407101305 45.339460088188645, 124.48270417656684 45.339459935937086, 124.48270432073609 45.33945980034832, 124.48270449840435 45.33945968623423, 124.48270470326649 45.33945959764453, 124.48270492805227 45.339459537723144, 124.48270516478424 45.33945950859661, 124.48270540506128 45.339459511298564, 124.48270564035622 45.339459545733135, 124.48270776032105 45.33946000648326, 124.48270788254719 45.33946002402537, 124.48271086726682 45.33946024073328, 124.48271099199717 45.339460241121635, 124.48271397931359 45.3394600430081, 124.48271410175467 45.3394600262278, 124.48271697686714 45.339459420906195, 124.48271709231355 45.339459387602055, 124.48271974473248 45.33945839833469, 124.48271984874819 45.33945834978645, 124.48272217654298 45.33945701459028, 124.48272226427176 45.3394569532638, 124.482724253151 45.33945525290582, 124.48276824920752 45.339409248870794, 124.48276970573687 45.339407335516725, 124.4827697546261 45.339407252098574, 124.4827706386266 45.33940517189296, 124.4827706628511 45.33940508326171, 124.48277093856863 45.339402920365934, 124.48277093714815 45.339402830108305, 124.48277059342364 45.33940067206154, 124.48277056641544 45.33940058383102, 124.48276961716104 45.33939851797697, 124.48276956565779 45.339398435343824, 124.48276804929279 45.33939654529426, 124.48276797538001 45.33939647160434, 124.48276595327665 45.33939483385552, 124.48276585994466 45.33939477209009, 124.48276341394467 45.33939345292762, 124.48276330497183 45.33939340558715, 124.48276053407267 45.33939245840167, 124.48276041386893 45.33939242740197, 124.48275743021851 45.339391890529356, 124.48275730487522 45.33939187725499, 124.48275410076566 45.33939177243761, 124.48273239599746 45.33939257631837, 124.4827321454977 45.33939256818929, 124.482731902093 45.33939252565647, 124.48273167518981 45.33939245036357, 124.4826978683055 45.33937821589036, 124.48269767177955 45.339378113986164, 124.48269750635076 45.339377987563154, 124.48269737806817 45.33937784124415, 124.48269729162261 45.33937768037948, 124.48269725017515 45.33937751085132, 124.48269725524129 45.3393773388587, 124.4826973066358 45.33937717069074, 124.48269740247932 45.33937701249666, 124.4826975392673 45.33937687006103, 124.48269816979216 45.339376332457384, 124.48269823849019 45.339376260805444, 124.48269964774434 45.33937443300513, 124.48269969567558 45.33937435338897, 124.48270058155009 45.339372368871246, 124.48270060693353 45.33937228424933, 124.48270093651894 45.339370216736874, 124.48270093841182 45.3393701302521, 124.48270069946473 45.33936805655118, 124.48270067800635 45.339367972240794, 124.4826998406298 45.33936588701569, 124.48267285857527 45.33931691961365, 124.48261987335827 45.339220946435574, 124.48257088826244 45.339130973881076, 124.48252181911637 45.33904384898053, 124.48247789459573 45.338965982816, 124.48245578821188 45.338923794554916, 124.48240279712437 45.33883081023584, 124.48235483045478 45.33874886581786, 124.48231390836763 45.33867301126653, 124.48228077704456 45.33861577510497, 124.48222380001326 45.3385158154459, 124.48217086546526 45.33842891438197, 124.48217083596224 45.33842886138298, 124.48212507983702 45.33833834307331, 124.48207614997266 45.33823349342308, 124.48202689229447 45.33813498176887, 124.48197392444324 45.338037041260925, 124.48192494715408 45.33794408450669, 124.48188362804736 45.33786650565257, 124.48188356438219 45.33786633907254, 124.4818835469749 45.33786616698455, 124.48188357646578 45.3378659957175, 124.48188365177019 45.33786583157011, 124.48188377011869 45.337865680579256, 124.48188392715862 45.33786554829793, 124.48188411711473 45.337865439591084, 124.48188433300078 45.33786535845664, 124.4818845668772 45.33786530787848, 124.48188481014269 45.337865289716724, 124.4818850538506 45.33786530463932, 124.48188528903799 45.33786535209747, 124.48188550705541 45.337865430345765, 124.48188569988487 45.33786553650649, 124.48188615240815 45.337865839140754, 124.48188624933417 45.337865892427125, 124.48188874540914 45.337867009399524, 124.48188885505232 45.33786704855104, 124.48189160902989 45.33786780627567, 124.48189172729961 45.33786782983166, 124.48189463644788 45.33786820004301, 124.48189475893258 45.33786820712483, 124.48189771473098 45.33786817601284, 124.48189783686138 45.33786816635627, 124.48190072904885 45.33786773508156, 124.48190084626935 45.33786770904678, 124.48190356695821 45.33786689369725, 124.48190367489593 45.3378668522555, 124.48190608410312 45.337865701630186, 124.48190631632141 45.33786561389472, 124.48190656914166 45.3378655616731, 124.4819068317807 45.33786554719271, 124.4819070930364 45.33786557107119, 124.48190734176544 45.33786563229005, 124.48190756735904 45.33786572823816, 124.48190776019521 45.33786585482313, 124.4819079120489 45.33786600664582, 124.48190910695509 45.33786751005875, 124.48191079876162 45.33786923304309, 124.48191087857481 45.3378692994863, 124.48191300926682 45.33787075882862, 124.48191310577239 45.33787081314889, 124.4819138218736 45.33787114144454, 124.4819140311976 45.33787126139346, 124.4819142000836 45.33787140970061, 124.4819143209812 45.33787157973577, 124.48195707180673 45.337951951290044, 124.48200708819934 45.338044982022936, 124.48205604769012 45.33813291161571, 124.48209891742597 45.338218649458724, 124.4821368828393 45.33829857633456, 124.48217589563357 45.33838059892777, 124.48217655197912 45.338381757214215, 124.48222843322543 45.338460576830414, 124.48226723358138 45.33852425012329, 124.48231106932158 45.33860494777449, 124.4823472046824 45.338674192875885, 124.48239316548431 45.33875512389014, 124.4824360750309 45.338832960422295, 124.4824960000411 45.338949814251734, 124.48253813850638 45.339026074962604, 124.48258209064876 45.339101000203165, 124.48258211493646 45.339101044943106, 124.48261395179118 45.33916471871067, 124.482649878312 45.33923757062092, 124.48268383688925 45.339312465073306, 124.48268502636454 45.339314407807976, 124.48268508679688 45.33931448476019, 124.48268679080849 45.339316226488194, 124.48268687136704 45.339316293647435, 124.48268902444534 45.33931776745888, 124.48268912203376 45.33931782224369, 124.48269164143737 45.33931897150089, 124.48269175230537 45.33931901180604, 124.48269454121495 45.33931979234353, 124.4826946611023 45.33931981662028, 124.48269761234125 45.33932019844238, 124.48269773664042 45.33932020575774, 124.48270073679456 45.339320174191236, 124.48270086072878 45.3393201642641, 124.4827037945039 45.33931972052208, 124.48270391331069 45.339319693733906, 124.4827066679628 45.339318854869184, 124.48270677707659 45.33931881224943, 124.48270924674652 45.33931761049896, 124.48270934197359 45.3393175536857, 124.48271143175269 45.339316035232414, 124.48271150943462 45.3393159664082, 124.482713139014 45.339314189605496, 124.4827131961645 45.339314111416044, 124.48271430292083 45.33931214454472, 124.48271433734368 45.33931205999473, 124.4827148787447 45.33930997864123, 124.48271488911742 45.33930989097943, 124.48271484435732 45.339307775128894, 124.48271483041749 45.3393076885712, 124.48271416922306 45.33930553418934, 124.4827076911038 45.33929124424532, 124.48270763902894 45.33929107404169, 124.48270763442055 45.33929089995124, 124.48270767745147 45.33929072849546, 124.48270776650956 45.339290566097176, 124.48270789825871 45.33929041883993, 124.48270806776358 45.33929029224002, 124.48270826867453 45.33929019103997, 124.48270849346508 45.33929011903078, 124.48270873371463 45.33929007890995, 124.48270898042331 45.33929007218043, 124.4827092243492 45.33929009909431, 124.48270945635475 45.339290158643365, 124.48270966774889 45.33929024859689, 124.48270985061276 45.339290365585164, 124.48270999809611 45.33929050522574, 124.48271010467421 45.33929066228761, 124.48271923323604 45.339308330467226, 124.48271930217797 45.33930853696373, 124.48271945251406 45.339309470698616, 124.48271948467854 45.33930956929693, 124.4827206337931 45.33931186618574, 124.48272069587595 45.3393119563051, 124.48272262959654 45.339314095706, 124.48273862100216 45.339328083446986, 124.48274033894681 45.33932935834334, 124.48274041555088 45.33932940662382, 124.48274248938462 45.339330509701064, 124.48277150111704 45.33934351003688, 124.48277412594587 45.339344450110104, 124.48277423988914 45.339344481609466, 124.4827751924932 45.33934467280764, 124.48277540973613 45.33934473199947, 124.48277560809916 45.339344818059736, 124.48277578097027 45.3393449281199, 124.48277635299475 45.339345365478735, 124.48277644614318 45.3393454239813, 124.4827788716913 45.33934666962683, 124.4827789792331 45.3393467141892, 124.48278170275408 45.33934760217634, 124.4827818205569 45.33934763108616, 124.48278473738715 45.339348127290094, 124.48278486092384 45.33934813943631, 124.48278785897152 45.339348224788225, 124.48278798349419 45.339348219704064, 124.4827909475461 45.339347890923904, 124.48279106826938 45.33934786880479, 124.48279388441851 45.339347138527366, 124.48279399670335 45.339347100223314, 124.48279655672641 45.33934599651281, 124.48279665625795 45.33934594349576, 124.48279886177436 45.3393445087674, 124.48279894472782 45.339344443074566, 124.48280071098115 45.33934273246389, 124.48280077416791 45.339342656620445, 124.48280203328237 45.33934073586517, 124.4828020742748 45.33934065278524, 124.48280277786282 45.339338595699644, 124.48280279491873 45.33933850941906, 124.48280291508465 45.33933630678012, 124.48279812783204 45.33927798962834, 124.48279813860987 45.33927780996439, 124.48279819983927 45.339277635401444, 124.48279830907391 45.33927747291413, 124.48279846194927 45.33927732899462, 124.48279865235733 45.33927720939324, 124.48279887269013 45.33927711888865, 124.4827991141444 45.33927706109695, 124.48279936707284 45.33927703832722, 124.48279962136976 45.33927705148921, 124.48279986687454 45.33927710005704, 124.48280009377824 45.3392771820902, 124.48280029301482 45.33927729431102, 124.48280045662386 45.339277432235754, 124.4828005780683 45.3392775903536, 124.4828123187007 45.339297377329416, 124.48281372202912 45.339299218988714, 124.4828137906051 45.33929929120417, 124.48281567092029 45.339300907473024, 124.48281575794836 45.339300969010765, 124.48281804477713 45.33930229933895, 124.48281814699364 45.3393023478914, 124.48282075455447 45.33930334237685, 124.48282086812505 45.3393033761225, 124.48282369860517 45.33930399746099, 124.4828238192694 45.33930401513391, 124.48282676649497 45.33930424001848, 124.48282688972657 45.33930424095576, 124.4828298431438 45.33930406095069, 124.48282996432046 45.339304045117196, 124.48283281314349 45.33930346697461, 124.48283292771902 45.33930343496438, 124.48283556508524 45.339302480371074, 124.4828356687631 45.33930243338453, 124.48283799574145 45.339301138148656, 124.48283808463206 45.339301077948306, 124.48284001393591 45.33929949065518, 124.48284008470405 45.33929941949981, 124.48284154396327 45.33929759969048, 124.48284159395511 45.339297520248664, 124.48284252843082 45.33929553618654, 124.482842555771 45.339295451438225, 124.48284293041027 45.339293377547314, 124.48284293407325 45.339293290671556, 124.48284273482305 45.33929120474563, 124.48284271486675 45.339291119833156, 124.48284191171346 45.339289016984985, 124.48279882901372 45.33920787304297, 124.48279876033295 45.339207682308285, 124.48279875209981 45.33920748560509, 124.48279893798419 45.33920585208687, 124.48279893588303 45.339205765079036, 124.4827985978446 45.33920368547623, 124.4827985719722 45.33920360039101, 124.4827976711743 45.3392016059003, 124.48279762250273 45.33920152593536, 124.48279619281868 45.33919969155649, 124.48279612317945 45.33919961972067, 124.48279421836953 45.33919801443158, 124.4827941303802 45.33919795342499, 124.48279289446985 45.33919724890314, 124.482792739415 45.33919714412382, 124.4827926114797 45.33919702248564, 124.48279251428951 45.33919688743583, 124.48273379870804 45.33909481259638, 124.4826288771748 45.338907952428, 124.4825519264176 45.33876404493237, 124.48247277111867 45.338628764522674, 124.4824024917855 45.33850530942816, 124.48232393274104 45.33838399044626, 124.48232387777912 45.33838389008085, 124.48227207103916 45.338269328115736, 124.48220902279985 45.33814023115267, 124.48214203257182 45.33800725062006, 124.48206992024687 45.33787902930451, 124.48202680518523 45.33779482487316, 124.48196623510773 45.33768758609787, 124.48196618318407 45.33768747291339, 124.48195747186091 45.33766308123447, 124.48195743691488 45.3376629298713, 124.48195743892872 45.33766277652129, 124.48195747784365 45.337662625640554, 124.481957582943 45.337662352801665, 124.48195793354239 45.337660291629895, 124.4819579362709 45.33766020443876, 124.4819577126153 45.33765811250525, 124.48195769158481 45.3376580274203, 124.48195685984031 45.33765592250814, 124.48195085276288 45.33764492213794, 124.48194946458226 45.337642984910346, 124.4819493957025 45.337642908894615, 124.48194748624435 45.337641206816265, 124.48194739719465 45.33764114205476, 124.48194504354403 45.337639743782745, 124.48194493792451 45.33763969289393, 124.48194223523352 45.33763865495677, 124.48194211731492 45.33763861999832, 124.48194104855283 45.33763838912108, 124.48194078234333 45.3376383072255, 124.48194054930103 45.337638184982765, 124.48194036150717 45.33763802873003, 124.48192525201257 45.337622079826176, 124.48192513941997 45.33762193314632, 124.48192506715638 45.337621774328284, 124.48192503770584 45.33762160883147, 124.48192505208061 45.33762144234472, 124.48192510978669 45.33762128059099, 124.4819252088403 45.33762112913051, 124.48192534583666 45.3376209931697, 124.48192551606653 45.33762087738216, 124.48192571367821 45.33762078574805, 124.48192673886614 45.33762040121566, 124.48192683989173 45.337620354117504, 124.48192910591928 45.33761906337253, 124.48192919246387 45.33761900362944, 124.48193107074405 45.33761743349415, 124.48193113967308 45.33761736327028, 124.48193256217903 45.33761557061106, 124.4819326109968 45.337615492448876, 124.48193352620862 45.33761354219178, 124.48193355314677 45.337613458923045, 124.48193392791796 45.337611421701055, 124.4819339320011 45.33761133634036, 124.4819337527585 45.33760928593712, 124.48193373402175 45.33760920239334, 124.48193297158382 45.33760713115245, 124.4819140259696 45.337570236836044, 124.48185407270525 45.337448331930275, 124.48179481593252 45.3373418441125, 124.48173282641005 45.33723186275203, 124.4817211283939 45.33721331630063, 124.48172106072258 45.337213180785156, 124.48171239716817 45.33719008986945, 124.48171155636645 45.337188417854684, 124.4817115138213 45.33718835121535, 124.4817102417596 45.33718673568592, 124.4816825054253 45.33715736781384, 124.48168235072582 45.33715714008888, 124.48166417923363 45.337116572129126, 124.48166296629542 45.337114583858416, 124.48166290438564 45.337114505197036, 124.48166115343858 45.337112727603724, 124.48166107052265 45.33711265923522, 124.48165885193818 45.33711116374476, 124.48165875134954 45.337111108417545, 124.48165615432848 45.33710995515818, 124.48165604011159 45.33710991509666, 124.48165316907102 45.33710915043686, 124.48165304581718 45.337109127251566, 124.48165001619071 45.33710878193531, 124.48164988885604 45.337108776558594, 124.48164682245343 45.337108864469656, 124.48164669615755 45.337108877117736, 124.48164371626672 45.33710939472157, 124.4816435960879 45.33710942488585, 124.48164082251928 45.3371103513715, 124.48164071328877 45.33711039783941, 124.48163825755688 45.33711169595651, 124.48163816366737 45.33711175685924, 124.4816361245081 45.337113374415296, 124.48163604973317 45.3371134473052, 124.48163450913361 45.337115319264115, 124.48163445648093 45.33711540120953, 124.48163366784102 45.33711705163293, 124.48163355923829 45.33711721960125, 124.48163340430858 45.33711736839848, 124.48163320957585 45.33711749175893, 124.48163298323993 45.337117584488034, 124.48163273483168 45.33711764268109, 124.4816324748112 45.337117663887646, 124.48163221412763 45.337117647214725, 124.48163196375815 45.33711759336442, 124.48163173424547 45.337117504604265, 124.48163153525402 45.337117384671885, 124.48162180923069 45.337110180209145, 124.48162162721607 45.33711000827491, 124.48160666478718 45.3370916543408, 124.48160655599888 45.3370914807155, 124.48160650128665 45.33709129485641, 124.48160557924807 45.33708474840314, 124.48160558342559 45.337084544695806, 124.48160565248413 45.33708434687479, 124.48161579565325 45.337065042126206, 124.48161589981021 45.33706488968991, 124.48161604259826 45.337064753705995, 124.48161621896564 45.33706463898535, 124.48161642267279 45.33706454958667, 124.48161664651282 45.3370644886727, 124.4816168825666 45.33706445839853, 124.48161712248286 45.33706445983519, 124.48161735777373 45.337064492931866, 124.4816198520081 45.33706501988071, 124.48161997176048 45.337065036560496, 124.48162289348178 45.33706524105985, 124.48162301554667 45.33706524130554, 124.4816259388754 45.33706504857078, 124.48162605876078 45.337065032373346, 124.48162887611926 45.337064449497056, 124.48162898941305 45.33706441745262, 124.48163159712298 45.337063465884505, 124.48163169965682 45.33706341917215, 124.48163400175534 45.337062133929585, 124.48163408975502 45.33706207426868, 124.48163600152466 45.33706050264877, 124.48163607175343 45.33706043223362, 124.48163752284187 45.33705863207182, 124.4816375727142 45.33705855349426, 124.48163850972232 45.33705659103556, 124.48163853740255 45.33705650718802, 124.48163892584905 45.33705445464946, 124.48163893031885 45.33705436861779, 124.48163875590845 45.33705230153316, 124.48163873718651 45.33705221730549, 124.48163797040637 45.33705012916302, 124.481581978574 45.33694114520001, 124.48152198046775 45.33682514892, 124.48146471437609 45.336716668598015, 124.48139852619349 45.33660436344599, 124.4813275396156 45.33649338447382, 124.48130435973434 45.33645912136413, 124.48130288353398 45.336457381410085, 124.48130281347936 45.33645731411001, 124.48130081827635 45.33645573899569, 124.48129471124706 45.33645173126245, 124.48129454240606 45.3364515957557, 124.48129441529181 45.336451439215345, 124.48129433501522 45.33645126793571, 124.48129430480405 45.33645108880368, 124.48129432587326 45.33645090902192, 124.48129439737559 45.33645073581924, 124.48129528456484 45.336449186137074, 124.48129532021335 45.33644909980195, 124.48129587842335 45.336446972589066, 124.48129588894646 45.33644688297487, 124.48129583452226 45.33644471997699, 124.48129581964324 45.336444631547984, 124.48129512104337 45.33644243259498, 124.48122911441912 45.33630143314971, 124.48122785570108 45.33629944471621, 124.48122779183048 45.33629936621205, 124.4812259928832 45.33629759642707, 124.48122590797165 45.33629752856105, 124.48122364199837 45.33629604943622, 124.48122353950248 45.336295994971, 124.48122089871973 45.336294866701095, 124.4812207828095 45.33629482785268, 124.48121787468774 45.33629409635431, 124.4812177500814 45.336294074704014, 124.48121469297058 45.33629376974643, 124.48121456473832 45.33629376617522, 124.48121148305191 45.3362939001691, 124.4812113564127 45.33629391482232, 124.48120837556378 45.33629448231463, 124.48120825567129 45.33629451459597, 124.48120549696964 45.33629549249187, 124.48120538870363 45.33629554108738, 124.48120296441851 45.336296889589995, 124.48120287218379 45.336296952522645, 124.48120088097514 45.336298616752515, 124.48120080852614 45.336298691460655, 124.48119933142806 45.33630060369059, 124.48119928171367 45.336300687133125, 124.48119837883914 45.336302769542094, 124.48119835412372 45.33630285746364, 124.48119805628129 45.33630511604338, 124.48119906144332 45.336416112029816, 124.48119932962396 45.33641805648923, 124.48119935110492 45.33641813630499, 124.48120011180258 45.33642001481424, 124.48120015332861 45.336420090591645, 124.4812013816296 45.33642184163773, 124.48120144184121 45.33642191089574, 124.48120309751324 45.336423477123994, 124.48120317369354 45.33642353700867, 124.48120529047425 45.336424919946424, 124.4812156247037 45.336430556799414, 124.48121571326301 45.33643060982071, 124.4812602993099 45.33645986942731, 124.48126049841429 45.336460036165754, 124.48126063480906 45.33646023178534, 124.48129839952713 45.336536600459645, 124.48129845750492 45.33653676776737, 124.48131572869069 45.33662087108723, 124.481315740333 45.33662104408284, 124.48131570475809 45.33662121544614, 124.4813156232845 45.33662137882619, 124.48131549893172 45.33662152816796, 124.48131533630828 45.336621657936654, 124.48131514144143 45.33662176332288, 124.48131492155294 45.33662184042091, 124.48131468479225 45.33662188637342, 124.48131443993402 45.33662189947732, 124.48131419605295 45.336621879246984, 124.48131396218746 45.336621826432165, 124.48131374700499 45.336621742990246, 124.48131355848047 45.33662163201368, 124.48131340360081 45.3366214976154, 124.48131328810605 45.33662134477635, 124.48127174659732 45.336550723355714, 124.4812267725204 45.33647276832382, 124.48118865004597 45.3364095679023, 124.48118759591809 45.336408130226445, 124.48118754630428 45.33640807344572, 124.48118614032758 45.33640670991232, 124.48118011455173 45.336401688688426, 124.48115297606212 45.33637931135466, 124.48115283346857 45.336379167413824, 124.48115273323604 45.33637900667904, 124.48115267918303 45.336378835273855, 124.4811526733688 45.33637865972821, 124.48115271601475 45.33637848672987, 124.48115280549641 45.33637832286951, 124.48115293840462 45.33637817438971, 124.48115310967611 45.33637804694703, 124.48115331278599 45.33637794539666, 124.48115514046653 45.33637720917861, 124.48115523974305 45.336377159765625, 124.48115745583125 45.33637581586569, 124.48115753998044 45.33637575404402, 124.48115935346176 45.33637413754911, 124.48115941941471 45.336374065573345, 124.48116076416159 45.33637223542794, 124.48116080951318 45.33637215592302, 124.48116163648922 45.3363701788636, 124.48116165936271 45.336370095541966, 124.48116194424209 45.336367959443756, 124.48116193898849 45.33636695928375, 124.48116166587118 45.336364928297876, 124.48116164328042 45.336364845057005, 124.48116097859192 45.3363632370841, 124.48116093069922 45.336363047858455, 124.48116094089656 45.33636285577629, 124.48116100871836 45.33636266960639, 124.48116193395846 45.336360928181755, 124.48116270529921 45.33635891643253, 124.48116272576536 45.33635883104689, 124.48116293478786 45.336356753257824, 124.48116293161992 45.33635666668906, 124.48116257090919 45.336354599270926, 124.48116254422507 45.33635451474302, 124.48116162721298 45.33635253468065, 124.48116157800635 45.336352455341235, 124.48116013884004 45.336350636366596, 124.48116006894301 45.33635056516983, 124.48115816121329 45.33634897501638, 124.48115807322854 45.33634891461363, 124.48115576797389 45.3363476124943, 124.48115566517811 45.33634756513496, 124.48115304823942 45.33634659953685, 124.4811529344607 45.336346566984474, 124.48115010328557 45.33634597386388, 124.48114998276036 45.33634595733045, 124.48114704277418 45.33634575877366, 124.48114692117917 45.33634575887383, 124.48114386003236 45.33634597475957, 124.48110786145149 45.33635097865741, 124.48110508696331 45.33635156076026, 124.4811049753736 45.33635159254623, 124.48110240598187 45.33635253262155, 124.4811023048728 45.336352578656744, 124.48110003238074 45.336353843101264, 124.48109994536954 45.33635390173864, 124.48109805105717 45.33635544532714, 124.48109798125485 45.33635551447006, 124.48109653287636 45.33635728199282, 124.4810964827794 45.33635735916865, 124.48109553213837 45.33635928740703, 124.48109550353932 45.33635936985468, 124.48109508463712 45.33636138984209, 124.48109507855871 45.33636147461272, 124.48109520637826 45.33636351410077, 124.48109522303774 45.336363598161974, 124.48109534560014 45.336363961483066, 124.48109537936067 45.336364136342716, 124.4810953640721 45.33636431248635, 124.48109530032278 45.33636448313605, 124.48109519056564 45.3363646417253, 124.48109503902415 45.33636478215161, 124.4810948515296 45.336364899011485, 124.48109463529667 45.336364987808196, 124.48109439864582 45.336365045124865, 124.48108227384412 45.3363670704008, 124.48107942007712 45.336367761553156, 124.48107930605318 45.33636779838637, 124.48107670023944 45.336368870822184, 124.48107659867595 45.336368922715025, 124.4810743417739 45.33637033483369, 124.48107425661635 45.336370399770246, 124.48107243632478 45.33637209669943, 124.48107237151689 45.33637217142504, 124.4810710092329 45.3363741688916, 124.4810697307344 45.336376627542315, 124.48106963619729 45.33637676959623, 124.48106950809961 45.33637689790311, 124.4810693503386 45.33637700855909, 124.48106916771452 45.33637709819732, 124.48104402110958 45.33638726861988, 124.48104162375846 45.336388467063614, 124.48104153133572 45.336388523403315, 124.48103950297408 45.33639002280488, 124.48103942751992 45.336390090562816, 124.48103784280254 45.33639183571084, 124.48103778709846 45.33639191238908, 124.48103668836985 45.336393867548686), (124.48157475749656 45.337110444651685, 124.481574695141 45.33711027498661, 124.48157468061473 45.337110100014264, 124.48157471446889 45.33710992637616, 124.48157479541865 45.33710976066315, 124.48157492039135 45.337109609165275, 124.4815750846433 45.33710947763301, 124.48157528193985 45.337109371059015, 124.48157550479216 45.337109293488524, 124.48157574474138 45.33710924786594, 124.48157599267964 45.337109235922966, 124.48157623919586 45.33710925811295, 124.48157647493272 45.3371093135936, 124.48157669094246 45.337109400259024, 124.48157687902584 45.337109514819616, 124.48159586145248 45.33712357589168, 124.48159604343114 45.33712374778196, 124.48165221427777 45.33719264168217, 124.48165399213063 45.337194391780926, 124.48165407594696 45.33719445896609, 124.48165631085762 45.337195925408615, 124.48165641191102 45.33719597952622, 124.48165901499951 45.33719710400043, 124.48165912927142 45.33719714289834, 124.4816619969918 45.3371978806749, 124.48166212762202 45.33719790418896, 124.4816623580229 45.337197962776976, 124.48166256830021 45.337198051341204, 124.48166275070159 45.337198166616574, 124.48166289850268 45.33719830435328, 124.48166300625448 45.337198459473406, 124.48171707550925 45.33729995787957, 124.48177311023969 45.33740302252731, 124.48182600527316 45.33749783568059, 124.48186888034141 45.33758757074549, 124.4818740782533 45.337596959519196, 124.48187414146933 45.33759711250533, 124.4818741654222 45.33759727095767, 124.48187414936022 45.337597429904825, 124.48187409378741 45.3375975843599, 124.4818740004473 45.33759772947692, 124.48187343519373 45.337598434626074, 124.48187338390277 45.33759851690228, 124.48187243724387 45.337600573523865, 124.48187241023305 45.337600661358884, 124.48187206376247 45.33760280978579, 124.48187206211546 45.337602899655536, 124.48187232973575 45.337605053680534, 124.48187235351865 45.33760514197839, 124.48187322449166 45.33760721516967, 124.48187327228246 45.33760729754691, 124.4818747770849 45.33760928423065, 124.4818894471087 45.33762476927365, 124.48188957465753 45.337624941772226, 124.48191010292753 45.337662010500736, 124.48192992753948 45.33769968027425, 124.48195375537713 45.33775263106234, 124.48195380799044 45.337752808087124, 124.4819538093312 45.3377529889566, 124.48195375934537 45.337753166359704, 124.48195366005343 45.337753333125505, 124.4819535154689 45.337753482513044, 124.48195333143613 45.33775360848382, 124.48195311539399 45.3377537059459, 124.4819528760754 45.337753770959665, 124.48195262315393 45.337753800897175, 124.48195047978633 45.337753900184005, 124.48195035808598 45.33775391426904, 124.48194749098496 45.337754451569424, 124.48194737542269 45.337754481947925, 124.48194470914542 45.3377553992379, 124.48194460406368 45.33775544476841, 124.4819422387769 45.337756707587175, 124.48194214812254 45.33775676655958, 124.48194017268493 45.33775832746583, 124.48194009986456 45.33775839766414, 124.4819385884896 45.337760198017406, 124.48193853623783 45.33776027680543, 124.48193754570464 45.33776224897044, 124.48193751598568 45.33776233338675, 124.48193708350644 45.33776440327348, 124.48193707743613 45.337764490148274, 124.48193721925844 45.33776657999482, 124.48193723689243 45.3377666652292, 124.48193798287802 45.337768780097214, 124.48194698910412 45.33778677964751, 124.48194825624888 45.337788692887656, 124.48194831969957 45.33778876840396, 124.4819499359912 45.33779032230439, 124.48195009458188 45.337790525214984, 124.48197218975587 45.337830154211744, 124.48197359122885 45.337832076894585, 124.48197366053554 45.33783215229574, 124.48197557709368 45.33783383942721, 124.48197566631345 45.337833903575834, 124.48197802111717 45.33783528752969, 124.48197812667296 45.33783533785366, 124.48198082527283 45.33783636312077, 124.48198094293035 45.337836397601244, 124.48198387708986 45.33783702305971, 124.48198400212941 45.33783704031366, 124.48198705416277 45.33783724087704, 124.48198718156961 45.33783724021254, 124.48199022906331 45.33783700783644, 124.48199035372724 45.33783698928015, 124.48199327444989 45.33783633328488, 124.48199339137123 45.33783629758099, 124.481994292961 45.33783594281202, 124.48199452113619 45.337835872642, 124.4819947642899 45.33783583506166, 124.48199501316253 45.33783583150205, 124.48199525827675 45.337835862098736, 124.48199549029815 45.33783592568657, 124.48199570039125 45.337836019844055, 124.48199588055542 45.33783614098553, 124.48199602392978 45.33783628449781, 124.48199612505434 45.337836444915766, 124.482001073136 45.33784695378577, 124.48204506236418 45.33792993350685, 124.4820850348597 45.338002886870164, 124.48214893686804 45.338132687893584, 124.48219282829545 45.33822146835962, 124.48222673494978 45.338300248939696, 124.48226393182011 45.33837567779228, 124.48226443232687 45.338376572086105, 124.4823132457152 45.33845427506253, 124.48231327028503 45.33845431699866, 124.48236211439767 45.33854403071715, 124.48239821449665 45.33861021001727, 124.48244220851096 45.338687199577095, 124.48248622653523 45.3387622319147, 124.48256611819467 45.33890403967524, 124.48260905770759 45.33898492526272, 124.48264218261873 45.3390401610241, 124.48266524927043 45.33908327047757, 124.48271227188486 45.339164298056566, 124.48271367500223 45.339166168539975, 124.48271374385612 45.339166241890005, 124.48271563741785 45.33916788336424, 124.48271572523862 45.33916794583104, 124.48271803649106 45.339169295234896, 124.48271813990426 45.33916934441835, 124.482720780027 45.33917034989477, 124.48272089505855 45.33917038390482, 124.48272376259325 45.339171006813906, 124.48272388482242 45.339171024343564, 124.48272686957134 45.339171240747234, 124.48272699430102 45.33917124112287, 124.48272998156175 45.339171042704805, 124.48273010399862 45.339171025912016, 124.48273297897207 45.33917042029736, 124.48273309441163 45.3391703869813, 124.48273574661401 45.33916939744362, 124.48273585061919 45.3391693488848, 124.48273817812851 45.33916801345124, 124.48273826670264 45.33916795151566, 124.48273904459313 45.33916728882723, 124.4827392136417 45.33916716959296, 124.48273941126905 45.33916707469975, 124.48273963053282 45.33916700748101, 124.48273986373077 45.339166970298045, 124.48274010267102 45.33916696445702, 124.4827403389598 45.339166990163136, 124.48274056429695 45.33916704651336, 124.4827407707666 45.3391671315282, 124.4827409511158 45.33916724222125, 124.48274109900929 45.33916737470403, 124.48274120925177 45.339167524322626, 124.48276024000124 45.339200608532046, 124.4827603142721 45.3392007908485, 124.48276033268677 45.339200980094994, 124.48276029442647 45.33920116785764, 124.48276024108746 45.33920131619659, 124.48276022237475 45.33920140576182, 124.48276008509488 45.3392036949301, 124.48276023399013 45.339205508755775, 124.48276023198504 45.339205633150506, 124.4827600613837 45.339207123344735, 124.48276006317346 45.33920720877849, 124.48276038338953 45.33920925145121, 124.48276040810518 45.33920933509693, 124.48276053407524 45.33920962149807, 124.48276058921233 45.33920983603485, 124.48276915001297 45.33931412254455, 124.48276913935995 45.3393143015926, 124.48276907859709 45.33931447559915, 124.48276897013545 45.33931463765956, 124.48276881827887 45.33931478134324, 124.48276862905307 45.339314900948736, 124.48276840996658 45.33931499173006, 124.48276816971283 45.339315050084984, 124.48276791782513 45.339315073697975, 124.48276766429858 45.339315061632036, 124.48276741919312 45.33931501436596, 124.4827671922347 45.3393149337753, 124.4827619452713 45.339312581687565, 124.48276177954341 45.33931249324841, 124.48276163637749 45.33931238700424, 124.48275302846973 45.33930485508695, 124.48275289621064 45.33930471403367, 124.48275280371693 45.33930455801686, 124.48275275425675 45.339304392549074, 124.48275270708876 45.33930410108635, 124.48275190017634 45.33930199555135, 124.48271633793874 45.33923541384643, 124.48271630441057 45.339235342068115, 124.48271532754617 45.33923291164645, 124.48271441418686 45.33923119916353, 124.48271436779001 45.33923113048028, 124.48271353074472 45.33923012161276, 124.48271343799765 45.33922998439928, 124.48270483001563 45.339213868302735, 124.48265283948089 45.33912088526817, 124.48259786011762 45.339021922460404, 124.48254688899658 45.338928975189944, 124.4824989083784 45.33884001120917, 124.48244877193355 45.33875276629117, 124.48236182033115 45.338601850359325, 124.4823135845359 45.33851445466567, 124.48225574663287 45.338421714618114, 124.48221299042092 45.33834415636389, 124.48216711509274 45.338247419341904, 124.4821171190777 45.33814242776864, 124.48207202357068 45.33805323271479, 124.48203384867946 45.33798290235857, 124.4819828143175 45.3378908584036, 124.48198098666364 45.33788847518575, 124.4819029846864 45.33781048230674, 124.48190080396297 45.337808736608295, 124.48190070279927 45.33780867138437, 124.48189822988994 45.33780739276799, 124.4818980279078 45.33780726268804, 124.48189786989086 45.33780710522896, 124.4818887808313 45.337795604778165, 124.48188867859575 45.33779543756638, 124.4818721815718 45.337758576050476, 124.48187101356886 45.33775664418853, 124.48187095416759 45.33775656759182, 124.48186927791751 45.337754831837216, 124.48186919860997 45.337754764801325, 124.48186707753317 45.337753290808116, 124.4818669813228 45.33775323587175, 124.48186449570328 45.33775207943176, 124.4818643862307 45.33775203867366, 124.48186231716221 45.33775144175838, 124.48186207793155 45.33775135066477, 124.48186187150671 45.33775122588464, 124.48186170726463 45.337751073086274, 124.48186159266623 45.337750899210725, 124.4818542412841 45.33773568053838, 124.48185422105462 45.33773563468522, 124.48185369245287 45.33773431318297, 124.481853645414 45.33773410229519, 124.48185290029899 45.33771994519119, 124.48185291484839 45.33771977232769, 124.48185297608869 45.33771960463262, 124.48185308175074 45.33771944831932, 124.48185322791969 45.33771930917944, 124.48185340917976 45.33771919236834, 124.4818536188149 45.33771910221405, 124.48185384905793 45.337719042056925, 124.48185653476439 45.33771854142722, 124.48185665399627 45.337718509906075, 124.4818594004621 45.33771755292416, 124.48185950840453 45.3377175052885, 124.48186192963864 45.33771618173268, 124.48186202196794 45.33771611989086, 124.48186245133382 45.3377157682572, 124.48186262603784 45.33771565001891, 124.48186282927414 45.33771555719356, 124.48186305371983 45.33771549312579, 124.48186329128768 45.3377154601241, 124.48186353341777 45.337715459377584, 124.48186377138568 45.33771549091314, 124.4818639966171 45.33771555359448, 124.48186420099627 45.3377156451631, 124.48186437715945 45.33771576231961, 124.48186451875884 45.33771590084266, 124.48186462069249 45.33771605574102, 124.48186898878997 45.337724779236446, 124.48187024301852 45.33772667709451, 124.48187030575654 45.337726752047026, 124.481872055696 45.33772844328125, 124.48187213777025 45.337728508282794, 124.48187431771161 45.337729929456124, 124.48187441603429 45.33772998206097, 124.48187694397026 45.33773107971011, 124.48187705484142 45.33773111793886, 124.48187983567243 45.337731850770766, 124.48187995492218 45.33773187318571, 124.4818828840344 45.33773221363149, 124.48188300717646 45.33773221938932, 124.48188597437834 45.33773215464164, 124.48188609678046 45.33773214352574, 124.48188899044737 45.337731676020404, 124.4818891075045 45.337731648448894, 124.48189181877845 45.337730795773226, 124.48189192608716 45.33773075278329, 124.48189435297152 45.33772954701453, 124.48189444649461 45.33772949022352, 124.48189649769182 45.33772797672163, 124.48189657391075 45.33772790826636, 124.48189817225533 45.33772614396876, 124.48189822830334 45.33772606642398, 124.48189931366682 45.33772411770218, 124.48189934743513 45.33772403398595, 124.4818998789864 45.33772197415027, 124.48189988920517 45.33772188740986, 124.48189984694784 45.33771979395117, 124.48189983336499 45.33771970828853, 124.48189918762777 45.33771757544845, 124.48188221248763 45.3376796310401, 124.48188183386664 45.33767887587183, 124.48186231609964 45.33764381623804, 124.48185603611408 45.33763125796107, 124.4818260151418 45.337572216277145, 124.48179589517117 45.33751798584513, 124.48174495392344 45.33742109763756, 124.48169385033175 45.33732890564413, 124.48164386106887 45.3372389250037, 124.48159792780655 45.3371550469418, 124.48157475749656 45.337110444651685), (124.48266561983476 45.339425363272696, 124.48266545549116 45.33942522390722, 124.48266533409706 45.33942506413671, 124.48266526058057 45.33942489044727, 124.48266523792618 45.339424709890075, 124.48266526705378 45.33942452979516, 124.48266534678065 45.339424357473746, 124.48266547387028 45.33942419992148, 124.48266564316332 45.33942406353446, 124.4826658477869 45.33942395384952, 124.48266607943407 45.33942387531948, 124.48266632870086 45.339423831132414, 124.48266658546771 45.33942382308216, 124.4826668393109 45.33942385149552, 124.48266698859615 45.339423879313216, 124.48266995069805 45.33942421673868, 124.48267007519003 45.339424222186125, 124.48267307371697 45.33942414558224, 124.48267319732352 45.33942413379659, 124.48267611704405 45.33942364610718, 124.48267623501529 45.33942361754139, 124.48267896372582 45.33942273750814, 124.48267907152851 45.33942269325982, 124.4826815043659 45.33942145470203, 124.48268159785681 45.33942139647182, 124.48268364132959 45.33941984698612, 124.48268371691552 45.33941977701206, 124.482685292493 45.339417976144844, 124.48268534727026 45.339417897115204, 124.48268639440435 45.33941591407267, 124.48268642626716 45.33941582902524, 124.4826869047171 45.339413740014756, 124.48268691244135 45.33941365221678, 124.48268680382064 45.339411537518004, 124.48268678727146 45.33941145119051, 124.48268606117685 45.33940930720031, 124.48268114844639 45.33939921806374, 124.48268108964162 45.339399040250534, 124.48268108295507 45.33939885772596, 124.482681128662 45.339398678008465, 124.48268122487983 45.33939850850081, 124.48268136764521 45.33939835618525, 124.48268155107748 45.33939822733584, 124.48268176762083 45.33939812726005, 124.48268200835548 45.339398060080114, 124.48268226336539 45.33939802856329, 124.48268252214628 45.33939803400776, 124.4826827740387 45.339398076189276, 124.48268300866684 45.33939815337032, 124.482719882918 45.33941367429973, 124.48272260556514 45.33941457775096, 124.4827227372845 45.33941461075048, 124.48272297034673 45.33941468865327, 124.48272317642576 45.339414798026155, 124.48272334709709 45.33941493439803, 124.48272347538392 45.33941509219409, 124.48272355604186 45.33941526496372, 124.48272358577374 45.33941544564419, 124.48272356336399 45.33941562684939, 124.48272348972891 45.33941580117175, 124.48272336787849 45.33941596148507, 124.4826977514462 45.3394427500187, 124.4826963253127 45.339444611871095, 124.4826962770719 45.339444692991734, 124.48269555396756 45.33944634778886, 124.48269545770178 45.339446509835724, 124.48269531861227 45.339446655596845, 124.4826951420042 45.339446779512784, 124.48269493461339 45.339446876857345, 124.48269470434983 45.33944694391776, 124.48269445999586 45.33944697813628, 124.48269421087133 45.33944697820783, 124.48269396647801 45.33944694412966, 124.482693736137 45.339446877201524, 124.48269352863383 45.33944677997613, 124.48269335188276 45.33944665616167, 124.48269321262498 45.33944651048052, 124.48269100889677 45.33944363395829, 124.48268977130772 45.33944227109418, 124.48268971449504 45.33944221779658, 124.48268813668224 45.33944095185634, 124.48266561983476 45.339425363272696), (124.48266395501174 45.33948661596017, 124.48266385261637 45.33948678240543, 124.4826637049479 45.33948693097599, 124.4826635180125 45.339487055628844, 124.48266329941379 45.339487151293895, 124.48266305804293 45.339487214080016, 124.48266280371749 45.33948724143349, 124.48266254678191 45.3394872322417, 124.48266229768686 45.33948718687854, 124.48266206656392 45.3394871071891, 124.48266186281383 45.339486996414664, 124.48266169472396 45.3394868590609, 124.48266156913122 45.339486700714524, 124.48266149114406 45.33948652781613, 124.48266124740287 45.339485709182526, 124.48264627001406 45.33945076196379, 124.48264586273127 45.33944992199924, 124.48264580320975 45.33944973817368, 124.48264579932655 45.33944954963605, 124.48264585125237 45.33944936466883, 124.48264595670607 45.33944919139759, 124.482646111055 45.339449037434115, 124.48264791499754 45.33944758808148, 124.48264798766115 45.3394475166459, 124.48264865129465 45.33944670707421, 124.48264880228864 45.33944655961428, 124.48264899225447 45.339446436588105, 124.48264921342665 45.33944634302476, 124.48264945676414 45.339446282748945, 124.48264971231974 45.33944625822465, 124.48264996964667 45.33944627045435, 124.48265021822596 45.33944631893816, 124.48265044789612 45.33944640169412, 124.48265064926869 45.3394465153393, 124.48266397209552 45.33945573883445, 124.4826640981201 45.33945584024373, 124.48266420123669 45.339455953798286, 124.48267249533194 45.33946679992698, 124.48267259351901 45.33946696638106, 124.48267264267417 45.33946714329969, 124.48267264082362 45.33946732357798, 124.48267258804161 45.339467499976145, 124.48266395501174 45.33948661596017), (124.48224967864873 45.33871507730612, 124.48224961133324 45.338714901603424, 124.48224959553879 45.338714719941095, 124.48224963191201 45.33871453975444, 124.48224971896401 45.33871436841831, 124.48224985313189 45.338714212945334, 124.48225002892441 45.33871407969888, 124.48225023914627 45.33871397413262, 124.48225212296138 45.33871321797248, 124.48225222247876 45.338713168584746, 124.48225444414223 45.33871182469787, 124.48225452850973 45.33871176285334, 124.4822563468283 45.338710145286655, 124.48225641296125 45.33871007324665, 124.48225776144247 45.338708241151494, 124.48225780692174 45.33870816155114, 124.48225863625338 45.33870618192462, 124.48225865919255 45.3387060984893, 124.48225894499916 45.338703958593705, 124.48225894227846 45.338702971060556, 124.48225879343741 45.33870145231661, 124.48225861262154 45.33870051633169, 124.48225860474925 45.33870046431483, 124.48225854881464 45.338699954689964, 124.4822585550902 45.33869977238714, 124.48225861336388 45.33869959472205, 124.48225872124128 45.33869942899464, 124.48225887428993 45.338699282014254, 124.48225906622126 45.33869915982008, 124.48225928914933 45.3386990674328, 124.48225953391452 45.33869900864844, 124.48225979045976 45.338698985882324, 124.4822600482443 45.33869900006986, 124.48226029667607 45.338699050628115, 124.48226052554762 45.338699135479764, 124.48226072545512 45.33869925113841, 124.48226088818473 45.338699392851865, 124.48226100705014 45.33869955479743, 124.48226915310973 45.33871410136768, 124.48231312707729 45.338794054073624, 124.48235824126829 45.338869258707554, 124.48239811894402 45.338940041022965, 124.48243214298923 45.33900408306957, 124.48248019483331 45.33909117572096, 124.4825781260533 45.339264054382404, 124.4826189862568 45.33934079131926, 124.48265445190917 45.33941363860493, 124.4826545098879 45.33941381203782, 124.48265451826029 45.33941399012779, 124.48265447669787 45.3394141658882, 124.4826543868312 45.33941433242381, 124.48265425218568 45.33941448320127, 124.48265407804375 45.33941461230545, 124.4826538712372 45.33941471467146, 124.48265363987906 45.3394147862834, 124.48265339304577 45.33941482433187, 124.48265314042092 45.33941482732418, 124.48265289191515 45.33941479514295, 124.4826526572776 45.33941472905066, 124.4826524457134 45.33941463164018, 124.48265226552219 45.339414506733036, 124.4826263503943 45.33939257854782, 124.4826262276472 45.33939245490995, 124.48262613593609 45.339392318539915, 124.48262495226162 45.339390093130646, 124.48258097233851 45.33930513282915, 124.48253384703206 45.339220898677546, 124.48248486845527 45.3391319376311, 124.482452793115 45.33907680212277, 124.48241887418796 45.339015947405365, 124.48237491861597 45.33893403024256, 124.48234478235071 45.33888178426084, 124.48230774396004 45.33881671803466, 124.48226582817155 45.33874486242897, 124.48224967864873 45.33871507730612), (124.48224061927195 45.33861044441927, 124.48224055801307 45.338610275445276, 124.48224054413596 45.33861010131044, 124.48224057816222 45.33860992855957, 124.48224065881305 45.338609763685525, 124.48224078305708 45.33860961288505, 124.48224094622465 45.338609481826, 124.4822411421831 45.33860937543415, 124.48224136356748 45.33860929770828, 124.48224160205702 45.338609251569714, 124.48224184868802 45.338609238752525, 124.48224209419091 45.33860925973847, 124.48224232933855 45.33860931373879, 124.48224254529298 45.3386093987239, 124.4822427339375 45.338609511499634, 124.48224288818194 45.33860964782731, 124.48224300222903 45.33860980258308, 124.48224378671662 45.33861117887582, 124.48224385787877 45.33861135228075, 124.48224387851936 45.33861153221448, 124.48224384780735 45.33861171143198, 124.48224376697928 45.33861188271696, 124.48224363928978 45.338612039172595, 124.48224346988032 45.338612174499175, 124.48224326557221 45.33861228324771, 124.48224303459192 45.33861236103943, 124.48224278623992 45.33861240474202, 124.48224253051623 45.33861241259578, 124.48224227771765 45.33861238428449, 124.48224203802314 45.33861232094809, 124.48224183653706 45.33861225072537, 124.48224160506837 45.338612146841854, 124.48224141045151 45.338612010453545, 124.48224126168967 45.338611847869885, 124.48224116566492 45.33861166661221, 124.48224097218632 45.338611131805465, 124.48224061927195 45.33861044441927), (124.48165386472488 45.33754863920702, 124.481653883801 45.33754846790083, 124.48165394871121 45.337548302277526, 124.48165405708731 45.33754814837948, 124.48165420497541 45.337548011821376, 124.48165438698025 45.337547897585196, 124.48165459646165 45.33754780983865, 124.4816548257772 45.337547751782935, 124.48165506656069 45.33754772553612, 124.48165531002785 45.33754773205575, 124.48165554729619 45.337547771103964, 124.48165576970958 45.33754784125618, 124.48165596915358 45.337547939953055, 124.48165613835201 45.33754806359383, 124.48165627113211 45.33754820766775, 124.48165636264953 45.337548366918604, 124.4816567131123 45.337549196961845, 124.48165701202157 45.337549836899925, 124.48169698226847 45.33762777892111, 124.4817132296814 45.33766027369936, 124.48171328695598 45.33766043382646, 124.48171330176326 45.33766059863936, 124.48171327360448 45.33766076258434, 124.48170840750973 45.337676671860635, 124.4817080625605 45.337678899660325, 124.48170806192881 45.33767899278783, 124.4817083766194 45.33768122267953, 124.48170840326587 45.33768131389205, 124.48170936401353 45.33768344990624, 124.48170941627816 45.337683534445326, 124.48171105267382 45.33768556348416, 124.48174066497273 45.33771487055195, 124.48174082652211 45.3377150882596, 124.48175696955938 45.33774675398581, 124.48179294234174 45.3378196988299, 124.481833117386 45.33790103592069, 124.48187712585059 45.33798205142723, 124.4819520697901 45.338118949088475, 124.48199395242645 45.33819972236684, 124.48202886979645 45.338272549382914, 124.48206583634487 45.338352477101004, 124.48210095654606 45.33842272780518, 124.48210129115397 45.3384233414529, 124.48217212555248 45.33854306169265, 124.48221038356161 45.33861761274775, 124.48221044802055 45.33861779745274, 124.4822165742624 45.33864950984166, 124.48221658380501 45.33864968330312, 124.48221654593203 45.338649854827864, 124.48221646205346 45.338650018029455, 124.48221633529248 45.33865016683136, 124.48221617036883 45.33865029569319, 124.4822159734231 45.338650399817006, 124.48221575178826 45.3386504753259, 124.48221551371644 45.338650519408475, 124.48221526807205 45.338650530423365, 124.48221502400105 45.33865050796044, 124.48221479059097 45.338650452856086, 124.48221457653268 45.33865036716202, 124.48221438979603 45.33865025406891, 124.48221423733402 45.33865011778756, 124.48221412482313 45.33864996339223, 124.48217182580377 45.33857486106883, 124.48212276658813 45.33849475095982, 124.48208996751634 45.338435116281666, 124.48204682099136 45.33834686207586, 124.48204675746427 45.33834665701038, 124.48204664477927 45.33834585011739, 124.4820466204461 45.33834576384209, 124.48204574946442 45.33834373887276, 124.48204570173274 45.33834365760263, 124.48204428733611 45.33834179138075, 124.48204421804022 45.33834171823928, 124.48204375296217 45.338341318569356, 124.48204362661569 45.338341188129796, 124.48204353456833 45.33834104411491, 124.4820186269365 45.3382906780185, 124.4820185684988 45.33829050846679, 124.48201855756955 45.33829033414825, 124.48201859455979 45.338290161620606, 124.48201874969389 45.338289728082266, 124.48201876811783 45.338289642388915, 124.48201892697394 45.338287560576084, 124.48201892169654 45.33828747398369, 124.48201851014375 45.33828540946228, 124.4820184816404 45.338285326015104, 124.48201746933452 45.338283275017325, 124.4820067604953 45.338266799887556, 124.48200672280576 45.33826673541796, 124.4819589927167 45.33817517161537, 124.48192102159598 45.3381002287637, 124.48188590126861 45.33803699647158, 124.48183898198451 45.337947151078886, 124.48179504316899 45.337861270768244, 124.48175694755115 45.33778308532586, 124.4817150234979 45.33770323002637, 124.48167705908699 45.33762530418367, 124.48164480874757 45.337560004945594, 124.48164474771373 45.337559821173, 124.48164474239059 45.33755963246378, 124.48164479301228 45.33755944712455, 124.48164489735065 45.33755927331354, 124.48164505081301 45.33755911868159, 124.48164524664409 45.33755899003526, 124.48164547622389 45.33755889303732, 124.48164601536607 45.337558716512966, 124.48164612070005 45.337558672910475, 124.48164849991008 45.3375574574815, 124.481648591492 45.33755740048869, 124.48165059761597 45.337555886858574, 124.48165067207067 45.33755581857604, 124.48165223119908 45.337554062509646, 124.48165228578463 45.337553985452374, 124.48165334047502 45.33755205164752, 124.48165337318048 45.33755196865402, 124.48165388457618 45.337549928356225, 124.48165389419634 45.337549842484854, 124.48165386472488 45.33754863920702), (124.48186486009686 45.33782740662864, 124.48186491663691 45.33782757565847, 124.48186492607266 45.33782774920063, 124.48186488805227 45.33782792078778, 124.48186480399283 45.337828084025446, 124.48186467702669 45.337828232830304, 124.48186451188575 45.337828361656904, 124.48186431472409 45.33782846570431, 124.48186409288927 45.337828541095014, 124.48186385464825 45.33782858501947, 124.48186360887968 45.33782859584077, 124.48186336474241 45.33782857315562, 124.48186313133462 45.33782851780944, 124.48186291735462 45.33782843186477, 124.48186273077675 45.3378283185245, 124.48186257855409 45.33782818201244, 124.48186246635962 45.33782802741592, 124.48185707601525 45.33781840878811, 124.4818570087808 45.337818244703804, 124.48185698672928 45.337818074614766, 124.4818570106556 45.33781790465182, 124.48185707969736 45.337817740941226, 124.48185719136586 45.33781758938384, 124.48185734163609 45.33781745544252, 124.48185752509168 45.33781734394513, 124.48185773511996 45.33781725891052, 124.48185796415058 45.33781720340377, 124.4818582039282 45.33781717942558, 124.48185844581018 45.337817187840244, 124.48185868107788 45.33781722834444, 124.48185890125126 45.337817299478246, 124.48185982803682 45.33781767775807, 124.48186001483593 45.3378177706942, 124.48186017511465 45.33781788565292, 124.48186030372547 45.33781801894205, 124.48186039653773 45.33781816628078, 124.48186486009686 45.33782740662864), (124.4817950140777 45.337647072901305, 124.4817952104866 45.337646973284095, 124.48179543003096 45.33764690161159, 124.4817956648138 45.33764686046188, 124.48179590639003 45.3376468513151, 124.48179614607011 45.337646874500244, 124.48179637523278 45.337646929183364, 124.4817965856352 45.33764701339752, 124.48179676970904 45.33764712411352, 124.4817969208334 45.33764725734893, 124.48179858171953 45.33764904623141, 124.48179866239013 45.33764911636474, 124.48180095366841 45.33765073259158, 124.48180869284492 45.33765519750305, 124.48180886194078 45.33765531522123, 124.48180899714816 45.33765545301451, 124.48180909377591 45.33765560610209, 124.48181676447845 45.33767163239368, 124.4818168195622 45.33767179743573, 124.48181682975955 45.3376719668358, 124.48181679470827 45.337672134576664, 124.48181671565355 45.33767229470007, 124.48181659540332 45.33767244151835, 124.48181643822903 45.337672569816355, 124.48181624971362 45.337672675036934, 124.48181603655321 45.337672753442504, 124.48181580631945 45.33767280224808, 124.48181556719044 45.33767281972005, 124.48181532607666 45.33767282122606, 124.48181519935429 45.33767283102613, 124.48181219948701 45.3376732810399, 124.48181207807924 45.33767330846214, 124.48180926565756 45.337674171264055, 124.48180915443983 45.33767421520721, 124.48180664239379 45.33767545615225, 124.48180654583132 45.33767551485207, 124.48180443503051 45.33767708411097, 124.48180435700057 45.337677155210635, 124.48180273220231 45.33767898977096, 124.48180267583832 45.337679070415604, 124.48180160228442 45.33768109661264, 124.48180156985023 45.33768118356324, 124.48180109064835 45.33768332003741, 124.48180108351576 45.33768340893227, 124.48180122967374 45.3376856597542, 124.48181278132658 45.33774176787105, 124.48181279268286 45.33774194599107, 124.48181275400756 45.337742122192346, 124.48181266681992 45.33774228955363, 124.48181253454469 45.337742441500936, 124.48181236237757 45.33774257206571, 124.48181215708149 45.337742676119326, 124.48181192672045 45.337742749574545, 124.48181168034307 45.33774278954599, 124.48181142762726 45.33774279446362, 124.48181117849964 45.33774276413423, 124.48181094274604 45.337742699749185, 124.48181072962701 45.33774260383753, 124.48181054751385 45.33774248016674, 124.4818104035601 45.337742333594605, 124.48176614852608 45.33768607719435, 124.48176601905612 45.33768583692939, 124.481751945078 45.33764141601863, 124.4817519143856 45.33764122301842, 124.48175194313929 45.337641029869765, 124.48175887763934 45.33761839074959, 124.48175895294756 45.3376182248005, 124.4817590722021 45.33761807220252, 124.48175923092931 45.33761793867994, 124.48175942317522 45.33761782924156, 124.48175964172796 45.337617747992624, 124.48175987838928 45.33761769798099, 124.48176012428144 45.337617681082726, 124.4817603701803 45.33761769793171, 124.48176060686173 45.337617747895905, 124.48176082544725 45.33761782910102, 124.48176101773713 45.33761793850088, 124.48176117651825 45.33761807199163, 124.48176129583419 45.337618224565716, 124.4817613712093 45.33761839049971, 124.4817684343558 45.33764141790527, 124.48176936117653 45.33764344639902, 124.48176941131564 45.33764352762404, 124.4817708850847 45.337645388092206, 124.48177095687255 45.33764546078641, 124.481772920182 45.33764708079135, 124.48177301082174 45.337647142122485, 124.48177538714596 45.33764845851997, 124.48177549310395 45.337648506096855, 124.48177818981937 45.33764946757689, 124.4817783069659 45.33764949954513, 124.48178121896085 45.337650068631525, 124.48178134272908 45.33765008374492, 124.48178435650084 45.33765023825595, 124.48178448206697 45.33765023592552, 124.48178748014516 45.33764996983862, 124.48178760261501 45.33764995015523, 124.48179046814151 45.33764927384184, 124.48179058274117 45.33764923757276, 124.48179320402429 45.337648177394, 124.481793306287 45.337648125953066, 124.4817950140777 45.337647072901305), (124.48174796741908 45.33749668002074, 124.48174792753615 45.33749650001658, 124.48174793989264 45.3374963180365, 124.48174800398202 45.33749614154391, 124.48174811717567 45.3374959777772, 124.48174827483126 45.337495833452834, 124.48174847048305 45.33749571448989, 124.4817486961068 45.33749562576731, 124.4817489424493 45.337495570923814, 124.48174919940736 45.337495552208665, 124.48174945644251 45.337495570389414, 124.4817497030132 45.33749562472044, 124.48174992900688 45.33749571297348, 124.48175012515514 45.337495831529075, 124.48175028341348 45.33749597552499, 124.48175039729125 45.3374961390556, 124.48175565606262 45.3375061410283, 124.48175572146894 45.33750632007791, 124.48175573359286 45.337506504776435, 124.481755691922 45.33750668732214, 124.48175559821668 45.33750686000421, 124.48175545643514 45.33750701552846, 124.48175527256609 45.337507147325496, 124.4817540067357 45.337507884987964, 124.48175379462862 45.337507985216895, 124.48175355846809 45.337508053646566, 124.48175330771524 45.33750808753555, 124.48175305241584 45.337508085526146, 124.48175280279787 45.33750804769887, 124.48175256886147 45.337507975569174, 124.48175235997887 45.33750787202674, 124.48175218451819 45.33750774121971, 124.48175204950877 45.33750758838855, 124.4817519603597 45.33750741965601, 124.48174796741908 45.33749668002074), (124.48129193668771 45.33674123104527, 124.48129187707298 45.33674108681544, 124.48129185232061 45.336740937599906, 124.48129184264367 45.336740730040674, 124.4812912331762 45.33673684107414, 124.4812912262887 45.33673670972387, 124.48129246926412 45.33671247158483, 124.48129250233633 45.33671229805798, 124.48129258243961 45.33671213233554, 124.4812927065398 45.33671198069468, 124.48129286993627 45.33671184887923, 124.48129306643992 45.336711741881984, 124.48129328860777 45.33671166375578, 124.48129352802458 45.3367116174598, 124.48129377562186 45.33671160474768, 124.48129402202126 45.336711626100886, 124.48129425788964 45.33671168071061, 124.48129447429301 45.33671176650839, 124.48129466303443 45.33671188024441, 124.48129481696496 45.336712017610616, 124.4812949302539 45.33671217340391, 124.48132512433993 45.336766049487736, 124.48137507043428 45.33685994819085, 124.48142405314307 45.33695091640185, 124.48147005739797 45.337039923672755, 124.48151804680855 45.33713090365821, 124.48156615029475 45.33722309543931, 124.48161811746792 45.33731703614254, 124.48166709280952 45.33740799028868, 124.48171377664843 45.33749341223669, 124.48171382028615 45.33749350760318, 124.48174153271394 45.33756804453518, 124.48174157412323 45.337568253070124, 124.48174154566581 45.33756846268149, 124.48173948319956 45.33757519603283, 124.48173940599877 45.33757536506457, 124.48173928322298 45.33757552010786, 124.48173911965617 45.337575655121285, 124.48173892167182 45.337575764843976, 124.48173869698448 45.337575845000515, 124.48173845434924 45.337575892467555, 124.48173820322064 45.33757590539551, 124.48173795338396 45.337575883280614, 124.48173771457438 45.33757582698462, 124.48173749609715 45.33757573870112, 124.48173730646542 45.33757562187014, 124.48173715306825 45.33757548104407, 124.48173704188306 45.33757532171031, 124.48171201265583 45.33752820661695, 124.48167407415185 45.337449347606636, 124.48167285749955 45.33744744585473, 124.48167279691661 45.33744737134074, 124.48167100822769 45.33744560165561, 124.48166715725307 45.33744246866326, 124.48166700406031 45.33744231377088, 124.48166690009131 45.337442139736204, 124.48166684992773 45.33744195422838, 124.4816668557801 45.33744176542221, 124.48166693076648 45.33744135127946, 124.48166693422219 45.33744126196395, 124.48166671360164 45.33743911808628, 124.48166669210632 45.33743903091136, 124.48166583356829 45.337436875243185, 124.48164484543452 45.33739889678667, 124.4815998640774 45.33731793032435, 124.48155090166892 45.33722799941308, 124.4815059463618 45.337144082917085, 124.48149141718176 45.33711610901412, 124.48143896155372 45.33701412512098, 124.48143764155903 45.33701218665253, 124.48143757558444 45.337012110332346, 124.48143663543085 45.33701123315501, 124.48143653268072 45.33701112081577, 124.48143645466914 45.33701099897803, 124.481404974208 45.33695013733156, 124.48136190747822 45.336872009467385, 124.4813228839193 45.336797967175855, 124.48129193668771 45.33674123104527), (124.48160748592741 45.337443418891105, 124.4816074342203 45.337443245002255, 124.48160743197694 45.33744306733767, 124.48160747928495 45.33744289282695, 124.4816075742989 45.3374427282767, 124.48160771331317 45.33744258010501, 124.48160789090544 45.33744245409119, 124.48160810014899 45.337442355150245, 124.48160833288247 45.33744228714125, 124.48160858002836 45.33744225271687, 124.48160883194709 45.33744225321974, 124.48160907881275 45.33744228863028, 124.48160931099665 45.3374423575673, 124.48160951944274 45.33744245734203, 124.48160969602071 45.337442584062856, 124.48160983384344 45.33744273278715, 124.48161388612347 45.33744822273516, 124.48161554887302 45.33745001763548, 124.48161562814069 45.33745008702581, 124.4816177607 45.33745161456416, 124.48161785784765 45.33745167153888, 124.48162037635937 45.33745287173955, 124.48162048755523 45.33745291405122, 124.48162329269118 45.33745373957912, 124.48162341354971 45.337453765559076, 124.48162639467654 45.33745418385576, 124.48162652043095 45.33745419247933, 124.4816295599751 45.337454187047456, 124.48162968566577 45.33745417797454, 124.4816326637491 45.33745374902827, 124.48163278441882 45.33745372261682, 124.48163558358726 45.33745288707357, 124.4816356944776 45.33745284436501, 124.48163601957197 45.337452687742505, 124.48163625256649 45.33745259897048, 124.4816365065301 45.33745254604212, 124.48163677051684 45.33745253123869, 124.4816370331487 45.337452555198205, 124.48163728310595 45.337452616888, 124.48163750961521 45.33745271364923, 124.48163770291393 45.33745284131136, 124.48164474083389 45.337458567072204, 124.48164488356794 45.337458708847834, 124.48164498496425 45.33745886734089, 124.48165956478108 45.337489178055215, 124.4816596210808 45.33748934749538, 124.48165963006964 45.33748952141023, 124.48165959141137 45.337489693291644, 124.4816595065526 45.337489856707506, 124.48165937866894 45.337490005542556, 124.4816592125459 45.33749013422714, 124.48165901440017 45.33749023794569, 124.48165879164661 45.33749031281688, 124.48165855262094 45.337490356038934, 124.48165830626802 45.337490365994384, 124.48165806180671 45.337490342310694, 124.48165525439657 45.33748987162973, 124.48165513448207 45.33748985987412, 124.48165222519384 45.33748977191085, 124.48165210429279 45.33748977638533, 124.48164922403677 45.337490078616234, 124.48164910652548 45.33749009915882, 124.48164635955871 45.33749078064401, 124.48164624969068 45.337490816511114, 124.48164373544546 45.33749185258279, 124.48164363719727 45.337491902476366, 124.48164144668226 45.33749325563141, 124.4816413636103 45.33749331774551, 124.48163957611526 45.33749493900397, 124.48163951122685 45.33749501108994, 124.4816381914539 45.337496841767084, 124.48163814752742 45.33749692044638, 124.48163731507918 45.337498977610856, 124.48163692623098 45.33750044659242, 124.48163685323584 45.33750062158535, 124.48163673169122 45.33750078259663, 124.48163656659418 45.33750092300689, 124.481636364732 45.337501037043644, 124.48163613440347 45.33750112001868, 124.48163588507772 45.33750116852081, 124.481635627005 45.337501180556025, 124.48163537079493 45.33750115562953, 124.48163512698065 45.337501094766104, 124.48163490558575 45.33750100046791, 124.481634715712 45.3375008766117, 124.48163456516549 45.33750072828937, 124.48163142136106 45.337496853368066, 124.4816313120397 45.337496677265726, 124.48160748592741 45.337443418891105), (124.4813516262195 45.33668771369805, 124.4813515543149 45.336687540274134, 124.48135153299755 45.33668736021412, 124.48135156312728 45.33668718078143, 124.48135164348881 45.336687009214174, 124.48135177084033 45.336686852433175, 124.48135194004468 45.336686716762806, 124.48135214427636 45.336686607675865, 124.48135237529685 45.33668652957277, 124.48135379808869 45.33668616736479, 124.48135391066293 45.33668612954398, 124.48135647927376 45.33668503695626, 124.48135657922681 45.33668498437614, 124.48135879635635 45.33668355943459, 124.48135887984908 45.336683494114745, 124.48136066033585 45.33668179155229, 124.48136072416132 45.33668171600137, 124.48136199961684 45.33667980121392, 124.48136204132304 45.33667971833455, 124.48136276275633 45.336677664869626, 124.4813627805676 45.3366775786871, 124.48136292019369 45.33667537716438, 124.48135955630018 45.336629404203215, 124.48135956875582 45.33662922420637, 124.48135963182791 45.336629049571755, 124.48135974298556 45.33662888730691, 124.48135989776846 45.336628743923, 124.48136008996556 45.33662862517357, 124.48136031186463 45.336628535823664, 124.48136055456165 45.336628479458604, 124.48136080831773 45.336628458340144, 124.48136106295065 45.3366284733157, 124.48136130824278 45.33662852378434, 124.48136153435117 45.33662860772094, 124.481361732203 45.33662872175737, 124.48136189385897 45.33662886131772, 124.48136201283242 45.33662902080189, 124.48139815853087 45.336692111996406, 124.48144705636096 45.336782922296024, 124.48148899110446 45.336863796285, 124.481526874149 45.33693956399362, 124.48156525577481 45.33702616874115, 124.4815653076147 45.337026348203345, 124.48157305995149 45.33708138991828, 124.48157305577384 45.337081593625605, 124.48157298671521 45.33708179144659, 124.48156759530175 45.33709205250978, 124.48156748140862 45.33709221613197, 124.4815673230895 45.33709236020441, 124.48156712684374 45.337092478812664, 124.48156690072747 45.33709256708768, 124.48156665402314 45.33709262140563, 124.48156639685844 45.33709263953666, 124.48156613979042 45.33709262073647, 124.48156589337198 45.33709256577685, 124.48156566771912 45.33709247691396, 124.48156547209526 45.337092357795775, 124.48156531453101 45.337092213312296, 124.4815652014947 45.33709204939481, 124.48155795181273 45.33707809379477, 124.48151604632476 45.336998273857716, 124.48149709383152 45.33695838835473, 124.48149589707484 45.33695649529755, 124.48149583790232 45.336956421653156, 124.48149404386878 45.33695463078507, 124.48149388794552 45.33695442116753, 124.48145989338018 45.33688898438055, 124.48141393944536 45.33680406954194, 124.48137178436038 45.336722790230205, 124.4813516262195 45.33668771369805), (124.48103658558395 45.336405447131696, 124.48103669188549 45.33640529219068, 124.4810368380812 45.33640515436446, 124.48103701881915 45.33640503869848, 124.48103722748318 45.33640494942695, 124.48103745643444 45.3364048898179, 124.48103769729174 45.33640486205343, 124.48103794123801 45.33640486714994, 124.48103817934278 45.336404904920876, 124.48103840288992 45.3364049739835, 124.48103860369574 45.33640507180965, 124.48103877440934 45.33640519481817, 124.48103890878141 45.33640533850598, 124.48103900189287 45.336405497613136, 124.4810425751242 45.33641377247379, 124.48104262325985 45.336413939126764, 124.48104262606424 45.336414109191026, 124.48104258343697 45.336414276588485, 124.48104249690162 45.336414435336295, 124.48104212544597 45.33641496185544, 124.48104208109673 45.3364150440735, 124.48104129425488 45.336417086096844, 124.48104127350047 45.336417172836775, 124.4810410666268 45.336419283888254, 124.48104107026441 45.33641937181756, 124.48104145130903 45.336421470770475, 124.4810414789289 45.336421555678875, 124.48104247861473 45.33642364414668, 124.48109126081386 45.33650030191901, 124.48109128759332 45.33650034727771, 124.48112113086705 45.33655505990171, 124.48116623363045 45.33663724240992, 124.48121516426482 45.336722122780515, 124.48130009218079 45.33687998886495, 124.48134107525213 45.33695595762871, 124.48138204125023 45.33703389298091, 124.48141906141201 45.33710491914506, 124.48142036753303 45.33710682423643, 124.48142043257354 45.337106899296494, 124.48142224055393 45.337108588048686, 124.48142232510702 45.337108652717184, 124.48142456548385 45.337110060256364, 124.48142466630073 45.33711011204842, 124.48142725297721 45.337111184283444, 124.4814273661832 45.33711122120865, 124.4814301997549 45.33711191693407, 124.48143032099992 45.337111937573496, 124.48143329257435 45.33711223005295, 124.48143341719843 45.33711223361341, 124.48143641257947 45.33711211160705, 124.48143653579393 45.33711209795176, 124.4814394398707 45.33711156614819, 124.48143955694013 45.33711153580194, 124.48144225811025 45.33711061463818, 124.48144236453655 45.337110568766924, 124.48144475899544 45.33710929364283, 124.48144485068792 45.33710923400967, 124.48144684641828 45.33710765392737, 124.4814469198534 45.33710758282388, 124.48144844016029 45.33710575850536, 124.48144849251611 45.33710567866379, 124.48144898448336 45.33710468199733, 124.48144909466201 45.33710451572889, 124.48144925039153 45.337104368690255, 124.48144944519073 45.33710424700103, 124.48144967095229 45.33710415572576, 124.4814499182802 45.33710409866319, 124.48145017688124 45.337104078188176, 124.48145043599258 45.33710409515289, 124.48145068483043 45.33710414885127, 124.48145091303843 45.33710423704845, 124.48145111111884 45.337104356073795, 124.48145127082789 45.33710450097361, 124.48145138551857 45.33710466571737, 124.48146071049489 45.33712244829644, 124.48147603464552 45.337151880244406, 124.48152111615195 45.33723603331655, 124.48156894447611 45.33732388070885, 124.48156901240924 45.33732405750367, 124.48156902815991 45.33732424033834, 124.481568991075 45.3373244216332, 124.48156890269199 45.33732459387249, 124.48156876667488 45.33732474991582, 124.48156858866244 45.337324883294215, 124.4815683760344 45.33732498847833, 124.48156813760541 45.337325061107634, 124.48156788325994 45.337325098171185, 124.4815676235421 45.33732509813249, 124.4815673692188 45.33732506099313, 124.4815671308334 45.33732498829274, 124.4815664581126 45.3373247228329, 124.48156634547824 45.33732468799302, 124.48156353401409 45.33732403854761, 124.48156341398037 45.337324019641436, 124.48156047787845 45.3373237638035, 124.48156035492983 45.33732376153734, 124.48155740388806 45.33732390886542, 124.48155728261833 45.337323923323936, 124.481554426894 45.33732446831358, 124.48155431183335 45.33732449895666, 124.48155165812172 45.33732542124589, 124.48155155356913 45.337325466928746, 124.4815492010176 45.337326732059246, 124.4815491108806 45.33732679107442, 124.48154714738489 45.33732835177864, 124.4815470750298 45.337328421922116, 124.48154557395078 45.33733021988848, 124.48154552208116 45.33733029853929, 124.48154453950154 45.3373322665929, 124.48154451005588 45.33733235081188, 124.48154408268678 45.33733441542221, 124.48154407676478 45.33733450206407, 124.48154422057371 45.33733658609309, 124.4815442382241 45.33733667108763, 124.48154498298187 45.33733878010957, 124.48155736977759 45.33736355371429, 124.48155743117728 45.33736373391632, 124.48156652290757 45.33741179029714, 124.48156653167415 45.337411964884666, 124.48156649243212 45.337412137375416, 124.48156640666114 45.33741230126495, 124.48156627759569 45.3374124503732, 124.48156611010259 45.33741257907746, 124.48156591049772 45.33741268252446, 124.48156568630807 45.33741275681332, 124.48156544598747 45.33741279914271, 124.48156519859826 45.337412807916444, 124.48156495346909 45.33741278280365, 124.48156471984349 45.33741272475132, 124.48156450653117 45.33741263594854, 124.48156432157592 45.33741251974396, 124.48156417195231 45.3374123805195, 124.48156406330227 45.33741222352516, 124.48155392324429 45.337393039671895, 124.4815139088145 45.33731801276669, 124.48147091263014 45.33723801990425, 124.48144791945738 45.337197027244, 124.48140302063177 45.33710822739008, 124.4813569660449 45.337020121010745, 124.48130891669305 45.33693502272596, 124.48126599988618 45.33685118668439, 124.48122493400362 45.33677406017477, 124.48118376376623 45.33670375265266, 124.48113482823564 45.33661786584188, 124.48109285863079 45.33654192101329, 124.48106474834017 45.336492726571116, 124.48102572204702 45.33642569213379, 124.48102430594065 45.33642380385283, 124.48101949281414 45.33641862048813, 124.48101937355591 45.336418458142695, 124.48101930330128 45.33641828214403, 124.48101928495201 45.336418099762035, 124.48101931926624 45.33641791853019, 124.48101940482644 45.33641774593456, 124.48101953809854 45.336417589104435, 124.48101971357752 45.33641745451788, 124.48103261722726 45.336409383968196, 124.48103465683165 45.3364078321205, 124.4810347322402 45.33640776206511, 124.48103630333084 45.33640595955832, 124.48103635791502 45.33640588047347, 124.48103658558395 45.336405447131696), (124.48133607588886 45.33705036546996, 124.48133603656264 45.33705018542222, 124.48133604947174 45.33705000347833, 124.4813361140866 45.337049827098866, 124.4813362277579 45.33704966351619, 124.4813363858246 45.33704951943792, 124.48133658180514 45.33704940077196, 124.48133680766342 45.33704931238416, 124.48133705413821 45.337049257898826, 124.48133731112296 45.33704923955011, 124.48133756808006 45.337049258090396, 124.48133781447301 45.33704931275944, 124.48133804019879 45.33704940131557, 124.4813382360013 45.33704952012756, 124.48133839385194 45.33704966432359, 124.48133850727802 45.33704982799093, 124.48133907611883 45.33705091620964, 124.48133913796362 45.33705108144857, 124.48133915438666 45.337051251954406, 124.48133912479537 45.33705142157411, 124.48133905025763 45.33705158418663, 124.48133893346319 45.33705173392377, 124.48133877862698 45.337051865381994, 124.48133859133634 45.33705197381736, 124.48133844848073 45.33705204160357, 124.48133823476185 45.337052123322486, 124.48133800294201 45.337052174960675, 124.48133776144175 45.33705219464246, 124.48133751903309 45.33705218165297, 124.48133728452113 45.337052136464, 124.48133706642419 45.337052060716964, 124.48133687266429 45.33705195716325, 124.4813367102793 45.337051829564274, 124.48133658516775 45.33705168255485, 124.48133650187401 45.3370515214749, 124.48133607588886 45.33705036546996), (124.48131698236679 45.33717165701678, 124.48131690875378 45.337171825397945, 124.48131679001631 45.337171980429645, 124.48131663070933 45.33717211616456, 124.48131643694425 45.33717222739565, 124.48131621615427 45.33717230985584, 124.48131597680926 45.33717236038182, 124.48131572809095 45.33717237703534, 124.48131547954065 45.3371723591775, 124.4813152406932 45.33717230749339, 124.4813150207114 45.3371722239657, 124.48131482803397 45.337172111798694, 124.48131467005265 45.337171975295355, 124.48131455282757 45.337171819692195, 124.48129875648999 45.337144740250835, 124.48129812560629 45.337143783781784, 124.4812933062146 45.33713726344499, 124.4812932095137 45.33713709145738, 124.4812931647435 45.33713690915522, 124.48129317379767 45.33713672424902, 124.48129323629325 45.337136544559485, 124.48129334958702 45.33713637768659, 124.48129350888709 45.337136230688344, 124.48129370745579 45.33713610978204, 124.4813301933246 45.33711815641069, 124.48133041385067 45.33711806941938, 124.48133065436299 45.33711801479232, 124.48133090542403 45.33711799467301, 124.48133115718242 45.33711800985094, 124.48133139975945 45.33711805973052, 124.48133162363656 45.337118142354534, 124.4813318200291 45.33711825448088, 124.48133198123064 45.337118391709836, 124.48133210091606 45.337118548656655, 124.48133217438877 45.33711871916291, 124.48133219876577 45.33711889653808, 124.48133217309073 45.33711907382213, 124.48131698236679 45.33717165701678), (124.48111176486194 45.336386860856706, 124.48111201930307 45.33638682109062, 124.48111227989318 45.3363868186274, 124.48111253575401 45.33638685356989, 124.48111277620504 45.336386924459475, 124.48111299120885 45.33638702833692, 124.48111317179038 45.336387160865975, 124.48111331041126 45.33638731651436, 124.48111340128514 45.336387488784695, 124.48111344061854 45.33638767048571, 124.48111342676941 45.33638785403253, 124.48111336031592 45.33638803176316, 124.48110906496467 45.33639607599131, 124.48110825619221 45.33639825213038, 124.4811082361269 45.33639834453321, 124.48110808440667 45.336400591386756, 124.48110809193024 45.33640068471611, 124.48110860375895 45.336402904962455, 124.48110863854447 45.33640299516499, 124.48110979169579 45.33640509238919, 124.48110985164588 45.33640517474237, 124.48111167432401 45.33640713376963, 124.48112514099921 45.33641880489063, 124.48112532136064 45.33641901392807, 124.48116130774213 45.33647737089915, 124.48121009588716 45.336562003433706, 124.48124131971714 45.33662329247834, 124.4812413871283 45.3366234978384, 124.4812461236018 45.3366537211477, 124.48124612706343 45.33665389343713, 124.48124608388858 45.336654063031894, 124.48124599566111 45.33665422371058, 124.48124586561758 45.33665436957886, 124.48124569852837 45.33665449528571, 124.48124550052295 45.336654596219695, 124.4812452788651 45.33665466867814, 124.48124504168617 45.33665471000302, 124.48124479768656 45.33665471867834, 124.48124455581733 45.33665469438589, 124.48124432495115 45.33665463801678, 124.48124411355712 45.336654551638865, 124.48124392938998 45.33665443842083, 124.48124377920577 45.336654302515974, 124.48124366851386 45.3366541489098, 124.48123678054762 45.33664178221683, 124.48118578311511 45.33655278673742, 124.48113578666738 45.336465792940515, 124.48113521911091 45.33646491195977, 124.48109060340883 45.336402635902964, 124.48109051019746 45.336402464088465, 124.48109046848879 45.33640228249357, 124.48109048002682 45.336402098711595, 124.48109054432919 45.33640192042732, 124.48109534901037 45.336392680652025, 124.48109544357989 45.33639253855866, 124.48109557172857 45.33639241022148, 124.48109572955505 45.33639229954754, 124.48109591225456 45.336392209906144, 124.48110542950687 45.336388362503634, 124.48110566208175 45.3363882891658, 124.48111176486194 45.336386860856706))</textarea>
            <div class="coord-settings" style="margin-bottom:8px;font-size:12px;color:#333;">
                <label>WKT坐标系：
                    <select id="coordSysSelect" style="margin-left:6px;">
                        <option value="wgs84" selected>WGS84</option>
                        <option value="gcj02">GCJ-02（国测局）</option>
                        <option value="bd09">BD-09（百度）</option>
                        <option value="cgcs2000">CGCS2000</option>
                    </select>
                </label>
                <!-- 已移除“不进行绘制坐标转换”选项，统一使用WGS84绘制 -->
            </div>

            <div class="button-group">
                <button id="drawButton" disabled>绘制轮廓</button>
                <button id="clearButton" disabled>清空轮廓</button>
            </div>
            <!-- 显示开关：仅保留显示亩数 -->
            <div class="display-toggles" style="margin-top:8px;font-size:12px;color:#333;">
                <label><input type="checkbox" id="toggleLabelsCheckbox"> 显示亩数</label>
            </div>
        </div>

        <div class="tab-pane" id="tabSplit">
            <!-- MultiPolygon → 多个 Polygon 分割器 -->
            <div class="split-section">
                <div class="title">MultiPolygon → 多个 Polygon 分割器</div>
                <div class="desc">输入一个 MULTIPOLYGON WKT，分割为多行 POLYGON WKT。</div>
                <textarea id="multiInput"></textarea>
                <div class="split-actions">
                    <button id="splitMultiBtn">分割为多个 POLYGON</button>
                    <button id="copyPolysBtn">复制结果</button>
                </div>
                <textarea id="polyOutput" readonly></textarea>
            </div>
        </div>

        <div class="tab-pane" id="tabBatch">
            <!-- 批量POLYGON → MULTIPOLYGON 生成器 -->
            <div class="batch-section">
                <div class="title">批量POLYGON → MULTIPOLYGON 合并器</div>
                <div class="desc">每行一个 POLYGON WKT（或用分号分隔）。生成后可一键填充到上方并绘制。</div>
                <textarea id="batchInput"></textarea>
                <div class="batch-actions">
                    <button id="generateMultiBtn">生成 MULTIPOLYGON</button>
                    <button id="copyMultiBtn">复制结果</button>
                </div>
                <textarea id="multiOutput" readonly></textarea>
            </div>
        </div>
        <div class="tab-pane" id="tabTrack">
            <div class="tip">请粘贴轨迹文本（支持两种格式：1）每行一条：定位时间yyyyMMddHHmmss, 经度, 纬度；2）单行#分隔：经度,纬度,定位时间yyyyMMddHHmmss#经度,纬度,定位时间yyyyMMddHHmmss#…）。</div>
            <div class="coord-settings" style="margin-bottom:8px;font-size:12px;color:#333;">
                <label>轨迹坐标系：
                    <select id="trackCoordSysSelect" style="margin-left:6px;">
                        <option value="wgs84" selected>WGS84</option>
                        <option value="gcj02">GCJ-02（国测局）</option>
                        <option value="bd09">BD-09（百度）</option>
                        <option value="cgcs2000">CGCS2000</option>
                    </select>
                </label>
            </div>
            <textarea id="trackTextarea" style="width:100%;height:120px;margin-bottom:10px;padding:8px;border:1px solid #ddd;border-radius:4px;font-family:monospace;resize:vertical;box-sizing:border-box;">20251005060816,124.504376,45.342028,4.3
20251005061446,124.503261,45.341735,19.0
20251005061456,124.502850,45.341662,8.8
20251005061506,124.502552,45.342048,19.8
20251005061516,124.502322,45.342373,7.1
20251005061526,124.501993,45.342506,15.5
20251005061536,124.501630,45.342735,13.5
20251005061546,124.501190,45.342706,7.2
20251005061556,124.500843,45.343088,26.2
20251005061606,124.500244,45.343708,32.6
20251005061616,124.499677,45.344322,27.1
20251005061626,124.499172,45.344880,27.9
20251005061636,124.498664,45.345475,27.5
20251005061646,124.498373,45.345870,11.8
20251005061656,124.498071,45.346216,18.1
20251005061706,124.497756,45.346427,14.5
20251005061716,124.497376,45.346722,16.8
20251005061726,124.497034,45.346889,12.5
20251005061736,124.496457,45.346638,21.7
20251005061746,124.495757,45.346331,22.1
20251005061756,124.495031,45.346009,28.2
20251005061806,124.494262,45.345676,25.1
20251005061816,124.493597,45.345394,14.6
20251005061826,124.492999,45.345123,27.3
20251005061836,124.492203,45.344772,24.3
20251005061846,124.491551,45.344263,30.5
20251005061856,124.490934,45.343717,23.6
20251005061906,124.490314,45.343263,23.0
20251005061916,124.489783,45.342880,17.9
20251005061926,124.489346,45.342651,19.8
20251005061937,124.488684,45.342378,21.7
20251005061947,124.487878,45.342018,27.7
20251005061957,124.487196,45.341683,24.7
20251005062007,124.486576,45.341343,21.5
20251005062017,124.485942,45.340985,25.8
20251005062027,124.485235,45.340797,18.5
20251005062037,124.484488,45.340913,25.1
20251005062047,124.483634,45.340914,22.8
20251005062057,124.482930,45.340985,22.4
20251005062107,124.482504,45.341176,1.4
20251005062117,124.482462,45.341170,4.3
20251005062127,124.482327,45.341108,4.2
20251005062137,124.482196,45.341027,4.6
20251005062147,124.482101,45.340935,4.2
20251005062157,124.482020,45.340828,4.8
20251005062207,124.481939,45.340717,4.1
20251005062217,124.481950,45.340603,4.9
20251005062227,124.482000,45.340555,3.5
20251005062237,124.482014,45.340539,3.6
20251005062247,124.482099,45.340428,5.4
20251005062257,124.482180,45.340314,3.1
20251005062307,124.482274,45.340180,11.1
20251005062317,124.482410,45.339976,9.7
20251005062327,124.482544,45.339763,9.7
20251005062337,124.482587,45.339633,3.7
20251005062347,124.482591,45.339627,0.0
20251005062357,124.482591,45.339627,0.0
20251005062602,124.482596,45.339624,0.0
20251005062612,124.482592,45.339623,0.0
20251005062622,124.482591,45.339618,0.0
20251005062632,124.482591,45.339618,0.0
20251005062642,124.482590,45.339619,0.0
20251005062652,124.482590,45.339621,0.0
20251005062702,124.482593,45.339624,0.0
20251005062838,124.482640,45.339512,0.0
20251005062848,124.482645,45.339490,0.0
20251005062858,124.482646,45.339489,0.0
20251005062908,124.482631,45.339454,1.9
20251005062918,124.482599,45.339393,2.2
20251005062928,124.482567,45.339328,3.9
20251005062938,124.482522,45.339245,3.8
20251005062948,124.482478,45.339169,3.2
20251005062958,124.482457,45.339134,2.9
20251005063008,124.482421,45.339067,3.1
20251005063018,124.482381,45.338989,2.7
20251005063028,124.482350,45.338937,2.2
20251005063038,124.482314,45.338875,2.9
20251005063048,124.482274,45.338806,3.0
20251005063058,124.482236,45.338739,2.6
20251005063108,124.482207,45.338689,2.7
20251005063118,124.482190,45.338652,3.3
20251005063128,124.482158,45.338600,2.2
20251005063138,124.482120,45.338540,2.6
20251005063148,124.482089,45.338490,2.1
20251005063158,124.482058,45.338426,3.0
20251005063208,124.482044,45.338399,4.1
20251005063218,124.482034,45.338380,3.5
20251005063228,124.482017,45.338343,2.4
20251005063238,124.482010,45.338327,1.2
20251005063248,124.482013,45.338323,3.7
20251005063258,124.481990,45.338268,3.5
20251005063308,124.482003,45.338288,5.8
20251005063318,124.481973,45.338247,2.5
20251005063328,124.481937,45.338181,2.8
20251005063338,124.481920,45.338145,2.3
20251005063348,124.481886,45.338084,2.4
20251005063358,124.481856,45.338031,2.5
20251005063408,124.481824,45.337975,2.4
20251005063418,124.481792,45.337914,3.0
20251005063429,124.481757,45.337844,2.3
20251005063439,124.481727,45.337786,2.4
20251005063449,124.481693,45.337722,2.8
20251005063459,124.481661,45.337653,2.5
20251005063509,124.481625,45.337590,2.8
20251005063519,124.481593,45.337523,2.9
20251005063529,124.481555,45.337452,3.3
20251005063539,124.481510,45.337372,3.4
20251005063549,124.481470,45.337294,3.5
20251005063559,124.481427,45.337214,3.3
20251005063609,124.481386,45.337139,3.3
20251005063619,124.481348,45.337061,3.3
20251005063629,124.481358,45.337086,3.4
20251005063639,124.481332,45.337176,3.5
20251005063649,124.481329,45.337191,0.0
20251005063659,124.481324,45.337201,0.0
20251005063709,124.481330,45.337193,0.0
20251005063719,124.481318,45.337210,0.0
20251005063729,124.481318,45.337210,0.0
20251005063739,124.481319,45.337209,0.0
20251005063749,124.481319,45.337209,0.0
20251005063759,124.481319,45.337209,0.0
20251005063809,124.481319,45.337209,0.0
20251005063819,124.481319,45.337209,0.0
20251005063829,124.481319,45.337209,0.0
20251005063839,124.481319,45.337209,0.0
20251005063849,124.481319,45.337209,0.0
20251005063859,124.481319,45.337209,0.0
20251005063909,124.481319,45.337209,0.0
20251005063919,124.481319,45.337209,0.0
20251005063929,124.481319,45.337209,0.0
20251005063939,124.481319,45.337209,0.0
20251005063949,124.481319,45.337209,0.0
20251005063959,124.481319,45.337209,0.0
20251005064009,124.481319,45.337209,0.0
20251005064019,124.481319,45.337209,0.0
20251005064029,124.481319,45.337209,0.0
20251005064039,124.481319,45.337209,0.0
20251005064049,124.481319,45.337209,0.0
20251005064059,124.481319,45.337209,0.0
20251005064109,124.481319,45.337209,0.0
20251005064119,124.481319,45.337209,0.0
20251005064129,124.481319,45.337209,0.0
20251005064139,124.481319,45.337209,0.0
20251005064149,124.481284,45.337149,5.9
20251005064159,124.481199,45.337034,2.4
20251005064209,124.481198,45.337032,0.0
20251005064219,124.481262,45.337138,4.6
20251005064229,124.481325,45.337107,2.8
20251005064239,124.481321,45.337057,0.8
20251005064249,124.481321,45.337054,0.0
20251005064259,124.481316,45.337044,2.2
20251005064309,124.481278,45.336970,3.5
20251005064319,124.481241,45.336902,4.2
20251005064329,124.481206,45.336835,3.3
20251005064339,124.481172,45.336773,2.5
20251005064349,124.481135,45.336710,2.6
20251005064359,124.481106,45.336657,5.2
20251005064409,124.481102,45.336650,4.3
20251005064419,124.481084,45.336614,2.1
20251005065456,124.481093,45.336632,0.0
20251005065506,124.481093,45.336632,0.0
20251005065516,124.481074,45.336597,3.1
20251005065526,124.481030,45.336521,3.3
20251005065536,124.480986,45.336440,3.9
20251005065546,124.481018,45.336500,0.0
20251005065556,124.481011,45.336490,2.7
20251005065606,124.480990,45.336451,0.6
20251005065616,124.480971,45.336422,1.8
20251005065626,124.481022,45.336401,1.9
20251005065636,124.480998,45.336416,0.3
20251005065646,124.481011,45.336430,2.5
20251005065656,124.481050,45.336497,3.2
20251005065706,124.481078,45.336546,2.7
20251005065716,124.481120,45.336622,3.7
20251005065726,124.481169,45.336708,3.6
20251005065736,124.481210,45.336778,3.4
20251005065746,124.481251,45.336855,3.4
20251005065756,124.481294,45.336939,3.4
20251005065806,124.481342,45.337024,3.7
20251005065816,124.481388,45.337112,3.6
20251005065826,124.481433,45.337201,3.6
20251005065836,124.481456,45.337242,3.5
20251005065846,124.481499,45.337322,3.4
20251005065856,124.481539,45.337397,3.1
20251005065906,124.481576,45.337467,3.4
20251005065916,124.481623,45.337550,3.6
20251005065926,124.481662,45.337629,3.3
20251005065936,124.481700,45.337707,3.4
20251005065946,124.481742,45.337787,3.3
20251005065956,124.481780,45.337865,3.3
20251005070006,124.481824,45.337951,3.9
20251005070016,124.481871,45.338041,3.9
20251005070026,124.481906,45.338104,3.2
20251005070036,124.481944,45.338179,3.3
20251005070046,124.481993,45.338273,4.5
20251005070056,124.482038,45.338364,3.4
20251005070106,124.482069,45.338427,4.2
20251005070116,124.482035,45.338359,0.2
20251005070126,124.482030,45.338348,0.0
20251005070136,124.482031,45.338348,0.0
20251005070146,124.482031,45.338348,0.0
20251005070156,124.482031,45.338349,0.0
20251005070206,124.482031,45.338349,0.0
20251005070216,124.482075,45.338439,3.7
20251005070226,124.482108,45.338499,2.5
20251005070236,124.482157,45.338579,3.7
20251005070246,124.482206,45.338666,3.7
20251005070256,124.482251,45.338749,1.9
20251005070306,124.482293,45.338821,3.6
20251005070316,124.482330,45.338886,4.9
20251005070326,124.482360,45.338938,3.3
20251005070336,124.482404,45.339020,3.2
20251005070346,124.482438,45.339081,7.7
20251005070356,124.482470,45.339136,3.1
20251005070406,124.482519,45.339225,3.9
20251005070416,124.482566,45.339309,3.6
20251005070426,124.482610,45.339394,3.7
20251005070436,124.482635,45.339441,2.5
20251005070446,124.482612,45.339398,0.0
20251005070456,124.482651,45.339431,4.9
20251005070506,124.482677,45.339449,4.1
20251005070516,124.482690,45.339466,2.9
20251005070526,124.482676,45.339497,0.0
20251005070536,124.482676,45.339497,0.0
20251005070801,124.482671,45.339413,2.5
20251005070811,124.482634,45.339337,3.5
20251005070821,124.482593,45.339260,3.4
20251005070831,124.482546,45.339177,3.8
20251005070841,124.482495,45.339087,3.8
20251005070851,124.482447,45.339000,3.5
20251005070901,124.482413,45.338936,4.6
20251005070911,124.482373,45.338865,3.7
20251005070921,124.482328,45.338790,3.7
20251005070931,124.482284,45.338710,3.0
20251005070941,124.482242,45.338635,3.1
20251005070951,124.482234,45.338622,7.4
20251005071001,124.482243,45.338704,0.0
20251005071011,124.482243,45.338704,0.0
20251005071021,124.482243,45.338704,0.0
20251005071031,124.482243,45.338703,0.0
20251005071041,124.482243,45.338703,0.0
20251005071051,124.482226,45.338615,3.6
20251005071101,124.482187,45.338539,3.3
20251005071111,124.482158,45.338490,1.4
20251005071121,124.482116,45.338419,3.1
20251005071131,124.482081,45.338349,2.8
20251005071141,124.482044,45.338269,2.9
20251005071151,124.482009,45.338196,3.1
20251005071201,124.481967,45.338115,3.5
20251005071211,124.481937,45.338060,3.6
20251005071221,124.481892,45.337978,3.4
20251005071231,124.481848,45.337897,3.3
20251005071241,124.481808,45.337816,2.6
20251005071251,124.481772,45.337743,3.1
20251005071301,124.481746,45.337692,1.7
20251005071311,124.481712,45.337624,3.7
20251005071321,124.481672,45.337546,3.5
20251005071331,124.481653,45.337501,3.5
20251005071341,124.481644,45.337535,2.2
20251005071351,124.481601,45.337482,1.6
20251005071401,124.481638,45.337549,5.8
20251005071411,124.481587,45.337435,3.8
20251005071421,124.481573,45.337361,2.7
20251005071431,124.481560,45.337335,1.2
20251005071441,124.481564,45.337342,0.0
20251005071451,124.481564,45.337342,0.0
20251005071501,124.481564,45.337342,0.0
20251005071511,124.481564,45.337342,0.0
20251005071521,124.481564,45.337342,0.0
20251005071531,124.481564,45.337342,0.0
20251005072027,124.481434,45.337101,2.9
20251005072037,124.481397,45.337030,2.9
20251005072047,124.481356,45.336952,2.9
20251005072057,124.481315,45.336876,3.4
20251005072107,124.481272,45.336796,3.3
20251005072117,124.481230,45.336718,3.1
20251005072127,124.481181,45.336633,3.5
20251005072137,124.481136,45.336551,3.8
20251005072147,124.481106,45.336496,3.1
20251005072157,124.481057,45.336419,2.1
20251005072207,124.481071,45.336441,0.0
20251005072217,124.481052,45.336397,4.7
20251005072227,124.481099,45.336378,1.3
20251005072237,124.481146,45.336367,0.0
20251005072247,124.481146,45.336368,0.0
20251005072257,124.481086,45.336378,3.2
20251005072307,124.481073,45.336403,3.6
20251005072317,124.481121,45.336470,3.2
20251005072327,124.481171,45.336557,3.8
20251005072337,124.481222,45.336646,3.6
20251005072347,124.481266,45.336725,3.2
20251005072357,124.481308,45.336802,3.2
20251005072407,124.481347,45.336876,3.2
20251005072417,124.481390,45.336954,3.3
20251005072427,124.481435,45.337041,3.9
20251005072437,124.481478,45.337123,4.1
20251005072447,124.481424,45.337018,0.0
20251005072457,124.481424,45.337018,0.0
20251005072507,124.481424,45.337018,0.0
20251005072517,124.481424,45.337018,0.0
20251005072527,124.481424,45.337018,0.0
20251005072537,124.481424,45.337018,0.0
20251005072547,124.481424,45.337019,0.0
20251005072557,124.481424,45.337019,0.0
20251005072607,124.481428,45.337027,1.6
20251005072617,124.481491,45.337148,3.1
20251005072627,124.481536,45.337232,3.4
20251005072637,124.481585,45.337322,3.7
20251005072647,124.481630,45.337403,3.6
20251005072657,124.481651,45.337441,5.1
20251005072707,124.481594,45.337371,6.6
20251005072717,124.481628,45.337443,2.0
20251005072727,124.481600,45.337405,5.6
20251005072737,124.481659,45.337453,4.3
20251005072747,124.481697,45.337532,2.3
20251005072757,124.481731,45.337596,2.9
20251005072807,124.481719,45.337589,5.8
20251005072817,124.481751,45.337690,3.8
20251005072827,124.481810,45.337765,3.1
20251005072837,124.481861,45.337856,3.9
20251005072847,124.481910,45.337948,3.9
20251005072857,124.481959,45.338041,4.1
20251005072907,124.482012,45.338139,4.1
20251005072917,124.482061,45.338237,4.2
20251005072927,124.482110,45.338342,3.9
20251005072937,124.482156,45.338433,3.5
20251005072947,124.482209,45.338520,4.3
20251005072957,124.482266,45.338620,4.2
20251005073007,124.482299,45.338677,2.0
20251005073017,124.482340,45.338753,3.1
20251005073027,124.482388,45.338835,3.9
20251005073037,124.482441,45.338928,4.5
20251005073047,124.482463,45.338970,3.3
20251005073057,124.482507,45.339048,3.8
20251005073107,124.482556,45.339135,3.6
20251005073117,124.482605,45.339225,3.7
20251005073127,124.482658,45.339321,4.1
20251005073137,124.482685,45.339370,7.8
20251005073147,124.482646,45.339309,0.0
20251005073157,124.482646,45.339309,0.0
20251005073207,124.482646,45.339309,0.0
20251005073217,124.482646,45.339309,0.0
20251005073227,124.482646,45.339309,0.0
20251005073237,124.482646,45.339310,0.0
20251005073247,124.482646,45.339310,0.0
20251005073257,124.482651,45.339327,1.5
20251005073307,124.482658,45.339359,0.0
20251005073317,124.482658,45.339359,0.0
20251005073327,124.482671,45.339380,2.0
20251005073337,124.482728,45.339404,2.3
20251005073347,124.482755,45.339403,2.3
20251005073357,124.482711,45.339449,0.1
20251005074013,124.482699,45.339309,3.1
20251005074023,124.482665,45.339234,3.1
20251005074033,124.482629,45.339161,3.0
20251005074043,124.482597,45.339097,2.6
20251005074053,124.482553,45.339022,3.4
20251005074103,124.482511,45.338946,3.1
20251005074113,124.482490,45.338905,3.4
20251005074123,124.482451,45.338829,3.1
20251005074133,124.482408,45.338751,3.4
20251005074143,124.482362,45.338670,3.9
20251005074153,124.482326,45.338601,3.4
20251005074203,124.482282,45.338520,3.4
20251005074213,124.482243,45.338456,2.8
20251005074223,124.482191,45.338377,3.1
20251005074233,124.482152,45.338295,3.5
20251005074243,124.482114,45.338215,3.5
20251005074253,124.482071,45.338129,3.5
20251005074303,124.482022,45.338041,4.0
20251005074313,124.481972,45.337948,3.9
20251005074323,124.481922,45.337854,4.1
20251005074333,124.481923,45.337862,8.1
20251005074343,124.481874,45.337800,3.7
20251005074353,124.481857,45.337762,1.5
20251005074403,124.481896,45.337857,2.5
20251005074413,124.481839,45.337739,2.5
20251005074423,124.481817,45.337684,1.6
20251005074433,124.481831,45.337752,4.3
20251005074443,124.481821,45.337775,5.8
20251005074453,124.481724,45.337679,8.0
20251005074503,124.481758,45.337568,3.4
20251005074513,124.481729,45.337490,3.3
20251005074523,124.481682,45.337404,3.6
20251005074533,124.481633,45.337313,3.9
20251005074543,124.481581,45.337219,4.2
20251005074553,124.481533,45.337127,3.7
20251005074603,124.481485,45.337036,3.8
20251005074613,124.481439,45.336947,3.7
20251005074623,124.481390,45.336856,3.9
20251005074633,124.481340,45.336762,3.9
20251005074643,124.481289,45.336671,3.7
20251005074653,124.481255,45.336608,5.5
20251005074703,124.481276,45.336742,1.3
20251005074713,124.481275,45.336742,0.0
20251005074723,124.481275,45.336742,0.0
20251005074733,124.481275,45.336742,0.0
20251005074743,124.481275,45.336742,0.0
20251005074753,124.481279,45.336664,4.5
20251005074803,124.481225,45.336558,3.4
20251005074813,124.481176,45.336473,3.6
20251005074823,124.481139,45.336413,5.8
20251005074833,124.481124,45.336400,4.6
20251005074843,124.481147,45.336357,0.0
20251005074853,124.481111,45.336362,3.2
20251005074903,124.481168,45.336409,2.3
20251005074913,124.481174,45.336414,0.0
20251005074923,124.481174,45.336414,0.0
20251005074933,124.481212,45.336477,3.5
20251005074943,124.481257,45.336555,3.3
20251005074953,124.481307,45.336640,3.7
20251005075003,124.481357,45.336727,3.5
20251005075013,124.481399,45.336808,3.6
20251005075023,124.481445,45.336893,3.8
20251005075033,124.481485,45.336970,3.7
20251005075043,124.481482,45.336962,2.6
20251005075053,124.481501,45.337002,3.3
20251005075103,124.481543,45.337082,3.5
20251005075113,124.481583,45.337159,3.3
20251005075123,124.481629,45.337243,3.6
20251005075133,124.481679,45.337333,4.1
20251005075143,124.481730,45.337425,3.8
20251005075153,124.481781,45.337522,4.2
20251005075203,124.481811,45.337576,0.0
20251005075213,124.481841,45.337635,3.5
20251005075223,124.481884,45.337721,2.7
20251005075233,124.481867,45.337683,4.9
20251005075243,124.481813,45.337586,2.8
20251005075253,124.481765,45.337516,9.2
20251005075303,124.481791,45.337624,3.3
20251005075313,124.481765,45.337577,5.0
20251005075323,124.481784,45.337639,0.9
20251005075333,124.481795,45.337591,6.8
20251005075343,124.481851,45.337708,3.9
20251005075353,124.481837,45.337657,6.6
20251005075403,124.481811,45.337642,3.0
20251005075413,124.481833,45.337645,7.3
20251005075423,124.481841,45.337797,4.1
20251005075433,124.481890,45.337817,4.9
20251005075443,124.481968,45.337895,4.1
20251005075453,124.482019,45.337987,3.9
20251005075503,124.482057,45.338057,3.7
20251005075513,124.482102,45.338146,4.2
20251005075523,124.482152,45.338251,4.2
20251005075533,124.482198,45.338348,3.3
20251005075543,124.482241,45.338426,3.5
20251005075553,124.482299,45.338519,3.6
20251005075603,124.482347,45.338606,3.4
20251005075613,124.482389,45.338679,3.1
20251005075623,124.482434,45.338757,3.8
20251005075633,124.482484,45.338844,3.8
20251005075643,124.482532,45.338933,3.7
20251005075653,124.482583,45.339026,4.3
20251005075703,124.482638,45.339125,4.2
20251005075713,124.482690,45.339218,3.9
20251005075723,124.482737,45.339306,4.0
20251005075733,124.482699,45.339235,1.9
20251005075743,124.482700,45.339236,0.0
20251005075753,124.482700,45.339236,0.0
20251005075803,124.482700,45.339236,0.0
20251005075813,124.482700,45.339236,0.0
20251005075823,124.482700,45.339236,0.0
20251005075833,124.482704,45.339246,2.7
20251005075843,124.482735,45.339306,0.0
20251005075853,124.482735,45.339307,0.0
20251005075903,124.482751,45.339321,5.6
20251005075913,124.482780,45.339334,3.3
20251005075923,124.482779,45.339330,3.3
20251005082034,124.482727,45.339160,3.3
20251005082044,124.482680,45.339079,3.3
20251005082054,124.482657,45.339036,0.5
20251005082104,124.482624,45.338981,3.1
20251005082114,124.482581,45.338900,3.3
20251005082124,124.482541,45.338829,2.6
20251005082134,124.482501,45.338758,3.2
20251005082144,124.482457,45.338683,3.2
20251005082154,124.482413,45.338606,3.3
20251005082204,124.482377,45.338540,3.9
20251005082214,124.482328,45.338450,3.6
20251005082224,124.482279,45.338372,3.8
20251005082234,124.482242,45.338297,3.7
20251005082244,124.482208,45.338218,2.8
20251005082254,124.482164,45.338129,3.6
20251005082304,124.482135,45.338070,0.3
20251005082314,124.482100,45.337999,3.2
20251005082324,124.482060,45.337926,3.0
20251005082334,124.482016,45.337843,3.6
20251005082344,124.481993,45.337794,3.2
20251005082354,124.481984,45.337775,7.3
20251005082404,124.481987,45.337826,3.4
20251005082414,124.481953,45.337765,1.0
20251005082424,124.481962,45.337783,3.7
20251005082434,124.481972,45.337756,5.0
20251005082444,124.481945,45.337696,0.0
20251005082454,124.481925,45.337658,3.2
20251005082504,124.481884,45.337584,2.9
20251005082514,124.481841,45.337494,3.9
20251005082524,124.481788,45.337399,3.8
20251005082534,124.481732,45.337296,4.6
20251005082544,124.481675,45.337189,4.3
20251005082554,124.481646,45.337134,5.9
20251005082604,124.481679,45.337187,5.1
20251005082614,124.481649,45.337120,2.9
20251005082625,124.481666,45.337187,7.6
20251005082635,124.481591,45.337095,3.3
20251005082645,124.481581,45.337024,3.2
20251005082655,124.481542,45.336936,4.2
20251005082705,124.481504,45.336860,1.6
20251005082715,124.481462,45.336779,3.6
20251005082725,124.481413,45.336688,4.3
20251005082735,124.481358,45.336592,3.0
20251005082745,124.481335,45.336547,3.8
20251005082755,124.481338,45.336553,5.5
20251005082805,124.481347,45.336676,0.5
20251005082815,124.481347,45.336676,0.0
20251005082825,124.481343,45.336675,0.0
20251005082835,124.481343,45.336674,0.0
20251005082845,124.481343,45.336673,0.0
20251005082855,124.481337,45.336646,3.5
20251005082905,124.481314,45.336534,4.7
20251005082915,124.481269,45.336443,3.4
20251005082925,124.481226,45.336367,5.2
20251005082935,124.481280,45.336446,5.6
20251005082945,124.481214,45.336305,0.8
20251005082955,124.481215,45.336416,2.1
20251005083005,124.481226,45.336422,1.3
20251005083015,124.481290,45.336464,0.0
20251005083025,124.481313,45.336498,4.3
20251005083035,124.481384,45.336609,5.0
20251005083045,124.481450,45.336721,4.5
20251005083055,124.481507,45.336829,4.7
20251005083105,124.481567,45.336945,4.7
20251005083115,124.481623,45.337054,4.1
20251005083125,124.481613,45.337038,7.4
20251005083135,124.481582,45.337097,5.8
20251005083145,124.481663,45.337157,2.4
20251005083155,124.481697,45.337193,2.2
20251005083205,124.481706,45.337217,0.1
20251005083215,124.481718,45.337236,3.8
20251005083225,124.481780,45.337346,5.1
20251005083235,124.481839,45.337452,5.2
20251005083245,124.481899,45.337574,4.5
20251005083255,124.481918,45.337611,2.3
20251005083305,124.481916,45.337608,2.7
20251005083315,124.481888,45.337603,4.7
20251005083325,124.481942,45.337660,0.0
20251005083335,124.481936,45.337649,4.1
20251005083345,124.481951,45.337691,4.3
20251005083355,124.482012,45.337799,4.3
20251005083405,124.482055,45.337883,4.0
20251005083415,124.482127,45.338011,5.6
20251005083425,124.482194,45.338144,5.2
20251005083435,124.482257,45.338273,5.4
20251005083445,124.482309,45.338388,4.4
20251005083455,124.482388,45.338510,5.9
20251005083505,124.482458,45.338633,4.9
20251005083515,124.482537,45.338768,6.0
20251005083525,124.482614,45.338912,5.9
20251005083535,124.482678,45.339026,7.9
20251005083545,124.482719,45.339099,4.5
20251005083555,124.482784,45.339212,5.2
20251005083605,124.482827,45.339293,5.3
20251005083615,124.482776,45.339207,0.0
20251005083625,124.482779,45.339206,0.0
20251005083635,124.482783,45.339206,0.0
20251005083645,124.482781,45.339207,0.0
20251005083655,124.482780,45.339206,0.0
20251005083704,124.482778,45.339204,0.0
20251005083714,124.482776,45.339203,0.0
20251005083724,124.482787,45.339337,6.4
20251005084211,124.482177,45.340309,11.1
20251005084221,124.481979,45.340570,10.9
20251005084231,124.481960,45.340751,6.9
20251005084241,124.482089,45.340929,10.2
20251005084251,124.482300,45.341098,8.2
20251005084301,124.482588,45.341167,15.2
20251005084311,124.482956,45.340973,13.0
20251005084321,124.483249,45.340848,4.7
20251005084331,124.483422,45.340887,5.8
20251005084341,124.483801,45.340943,12.3
20251005084351,124.484241,45.340956,12.4
20251005084401,124.484660,45.340889,12.0
20251005084411,124.485076,45.340814,12.0
20251005084421,124.485503,45.340825,12.5
20251005084431,124.485899,45.340969,13.2
20251005084441,124.486241,45.341140,5.8
20251005084451,124.486386,45.341230,11.8
20251005084501,124.486816,45.341489,19.0
20251005084511,124.487368,45.341774,20.2
20251005084521,124.488019,45.342091,26.7
20251005084531,124.488742,45.342407,26.5
20251005084541,124.489540,45.342743,20.3
20251005084551,124.490077,45.343100,25.4
20251005084601,124.490628,45.343495,19.0
20251005084611,124.491196,45.343951,27.5
20251005084621,124.491773,45.344479,21.1
20251005084631,124.491996,45.344665,11.0
20251005084641,124.492699,45.344993,31.3
20251005084651,124.493614,45.345395,28.4
20251005084701,124.494504,45.345782,29.5
20251005084711,124.495389,45.346173,30.8
20251005084721,124.496215,45.346533,21.4
20251005084731,124.496913,45.346840,19.0
20251005084741,124.497293,45.346812,20.4
20251005084751,124.497809,45.346415,19.7
20251005084801,124.498221,45.346053,31.6
20251005084811,124.498868,45.345265,34.4
20251005084821,124.499345,45.344694,13.9
20251005084831,124.499570,45.344453,22.9
20251005084841,124.500174,45.343811,24.0
20251005084851,124.500282,45.343675,0.1
20251005084901,124.500333,45.343620,0.9
20251005084911,124.500429,45.343543,16.4
20251005084921,124.500865,45.343085,23.3
20251005084931,124.501137,45.342763,8.5
20251005084941,124.501511,45.342725,13.2
20251005084951,124.501911,45.342585,18.0
20251005085001,124.502207,45.342403,8.5
20251005085011,124.502486,45.342163,21.6
20251005085021,124.502792,45.341727,12.2
20251005085031,124.503161,45.341713,19.6
20251005085041,124.503952,45.341946,17.9
20251005153234,124.504474,45.342040,0.0
20251005153244,124.504471,45.342047,0.0
20251005153254,124.504447,45.342116,4.8
20251005153304,124.504510,45.342231,7.7</textarea>
            <div class="button-group">
                <button id="drawTrackButton" disabled style="flex: 1;">绘制轨迹</button>
                <button id="showTrackPointsButton" disabled style="flex: 1;" class="btn-warning">打点</button>
                <button id="clearTrackButton" disabled style="flex: 1;">清空轨迹</button>
            </div>
            <!-- 回放控制 -->
            <div class="split-section" style="margin-top:8px;">
                <div class="title">轨迹回放</div>
                <div class="playback-actions" style="display:flex;gap:8px;margin-bottom:8px;">
                    <button id="playbackStartBtn" disabled>开始</button>
                    <button id="playbackPauseBtn" disabled>继续</button>
                    <button id="playbackStopBtn" disabled>结束</button>
                </div>
                <div class="playback-speed" style="display:flex;align-items:center;gap:8px;margin-bottom:8px;">
                    <label>速度：
                        <select id="playbackSpeedSelect" disabled>
                            <option value="1" selected>1×</option>
                            <option value="2">2×</option>
                            <option value="4">4×</option>
                            <option value="8">8×</option>
                            <option value="16">16×</option>
                            <option value="32">32×</option>
                            <option value="64">64×</option>
                            <option value="128">128×</option>
                            <option value="256">256×</option>
                            <option value="512">512×</option>
                            <option value="1024">1024×</option>
                        </select>
                    </label>
                    <span id="playbackTimeLabel" style="font-size:12px;color:#666;">时间：—</span>
                </div>
                <div class="playback-time" style="display:flex;flex-direction:column;gap:4px;margin-bottom:8px;">
                    <label class="playback-time-label" style="display:flex;align-items:center;gap:8px;flex:1 1 auto;min-width:0;">
                        <span class="playback-time-text" style="white-space:nowrap;">起始时间：</span>
                        <input type="range" id="playbackTimeSlider" disabled min="0" max="0" step="1000" value="0" style="flex:1 1 auto;min-width:0;max-width:100%;vertical-align:middle;">
                    </label>
                    <span id="playbackTimeCursor" style="font-size:12px;color:#666;align-self:flex-end;">—</span>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    let map;
    let currentPolygons = []; // 存储多边形和其标签
    let currentTracks = []; // 存储轨迹折线及相关覆盖物
    let mapLoaded = false;
    let mapLabelHandlers = []; // 存储地图事件处理器
    let labelsEnabled = false; // 标签显示开关（默认关闭）
    let isDrawing = false; // 绘制进行中防止重复点击

    window.onload = function () {
        if (typeof T === 'undefined') {
            alert("天地图API加载失败，请检查网络或密钥！");
            return;
        }
        initMap();
        bindDrawEvent();
        bindMinimizeEvent();
        bindTabs();
        bindBatchGenerator();
        bindMultiSplitter();
        bindLabelsToggle(); // 绑定标签显示开关
        bindTrackEvents();  // 绑定轨迹绘制与清空
        bindPlaybackControls(); // 绑定轨迹回放
    };

    function initMap() {
        showLoading();
        disableButtons(true);

        try {
            map = new T.Map("mapContainer", {
                zoom: 12,
                center: new T.LngLat(116.40769, 39.90403)
            });

            // 已移除测试标签
            map.enableScrollWheelZoom();

            // 添加地图类型控件
            const mapTypeCtrl = new T.Control.MapType({
                mapTypes: [TMAP_NORMAL_MAP, TMAP_SATELLITE_MAP, TMAP_TERRAIN_MAP],
                position: T_ANCHOR_TOP_LEFT
            });
            map.addControl(mapTypeCtrl);

            // 加载影像底图（卫星）
            const tk = "648f621977051d0199ff0f965d3fd322";

            // 方案1：使用默认地图类型（作为备选）
            map.setMapType(TMAP_SATELLITE_MAP);

            // 方案2：手动添加影像图层（底图 + 标注）
            const vecLayer = new T.TileLayer(`https://t0.tianditu.gov.cn/img_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=img&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk=${tk}`);
            const cvaLayer = new T.TileLayer(`https://t0.tianditu.gov.cn/cia_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=cia&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk=${tk}`);

            // 添加图层并监听加载状态
            vecLayer.addEventListener("load", function () {
                console.log("影像底图加载完成");
            });

            vecLayer.addEventListener("error", function (e) {
                console.error("影像底图加载错误:", e);
                alert("影像底图加载错误，将使用默认地图类型");
            });

            map.addLayer(vecLayer);
            map.addLayer(cvaLayer);

            // 监听地图加载事件
            map.addEventListener("loaded", function () {
                console.log("地图加载完成");
                markMapLoaded();
            });
            map.addEventListener("load", function () {
                console.log("地图load事件触发");
                markMapLoaded();
            });
            map.addEventListener("tilesloaded", function () {
                console.log("地图瓦片加载完成");
                markMapLoaded();
            });
            // 监听地图加载失败事件
            map.addEventListener("error", function (e) {
                console.error("地图加载错误:", e);
                alert("地图加载错误: " + e.message);
                hideLoading();
            });

            // 监听地图移动事件，用于更新标签位置
            const moveHandler = function () {
                updateAllLabelsPosition();
            };
            map.addEventListener("move", moveHandler);
            map.addEventListener("zoom", moveHandler);

            // 存储事件处理器，用于清理
            mapLabelHandlers.push({ event: "move", handler: moveHandler });
            mapLabelHandlers.push({ event: "zoom", handler: moveHandler });

            // 超时容错
            setTimeout(() => {
                if (!mapLoaded) markMapLoaded();
            }, 8000);

        } catch (error) {
            alert("地图初始化失败：" + error.message);
            console.error(error);
            hideLoading();
        }
    }

    function markMapLoaded() {
        if (!mapLoaded) {
            mapLoaded = true;
            hideLoading();
            disableButtons(false);
            disableTrackButtons(false);
            // 仅开启速度选择，回放按钮按状态控制
            const speedSel = document.getElementById('playbackSpeedSelect');
            if (speedSel) speedSel.disabled = false;
            updatePlaybackButtonsState('idle');
        }
    }

    function showLoading() {
        const loading = document.getElementById("mapLoading");
        loading.style.display = "flex";
        loading.style.opacity = "1";
    }

    function hideLoading() {
        const loading = document.getElementById("mapLoading");
        loading.style.opacity = "0";
        setTimeout(() => loading.style.display = "none", 300);
    }

    function disableButtons(disabled) {
        document.getElementById("drawButton").disabled = disabled;
        document.getElementById("clearButton").disabled = disabled;
    }

    function disableTrackButtons(disabled) {
        const drawTrackBtn = document.getElementById("drawTrackButton");
        const showTrackPointsBtn = document.getElementById("showTrackPointsButton");
        const clearTrackBtn = document.getElementById("clearTrackButton");
        if (drawTrackBtn) drawTrackBtn.disabled = disabled;
        if (showTrackPointsBtn) showTrackPointsBtn.disabled = disabled;
        if (clearTrackBtn) clearTrackBtn.disabled = disabled;
    }
    // 回放控件的禁用/启用
    function disablePlaybackButtons(disabled) {
        ["playbackStartBtn","playbackPauseBtn","playbackStopBtn","playbackSpeedSelect","playbackTimeSlider"].forEach(id=>{
            const el = document.getElementById(id);
            if (el) el.disabled = disabled;
        });
    }

    // 回放按钮状态管理：空闲/播放/暂停
    function updatePlaybackButtonsState(state){
        try {
            const startBtn = document.getElementById('playbackStartBtn');
            const pauseBtn = document.getElementById('playbackPauseBtn');
            const stopBtn = document.getElementById('playbackStopBtn');
            if (!startBtn || !pauseBtn || !stopBtn) return;
            if (state === 'idle') {
                startBtn.disabled = false;
                pauseBtn.disabled = true;
                stopBtn.disabled = true;
                pauseBtn.textContent = '继续';
            } else if (state === 'playing') {
                startBtn.disabled = true;
                pauseBtn.disabled = false;
                stopBtn.disabled = false;
                pauseBtn.textContent = '暂停';
            } else if (state === 'paused') {
                startBtn.disabled = true;
                pauseBtn.disabled = false;
                stopBtn.disabled = false;
                pauseBtn.textContent = '继续';
            }
        } catch(e) { console.warn('更新按钮状态失败:', e); }
    }

    function bindDrawEvent() {
        document.getElementById("drawButton").addEventListener("click", function () {
            if (isDrawing) { console.log('绘制进行中，忽略重复点击'); return; }
            isDrawing = true;
            disableButtons(true);
            showLoading();
            try {
                const wktStr = document.getElementById("wktTextarea").value.trim();
                if (!wktStr) { alert("请输入WKT字符串！"); return; }
                clearOverlays();
                const geojson = parseWkt(wktStr);
    
                const polygonData = [];
                if (geojson.type === "Polygon") {
                    polygonData.push({ index: 1, coordinates: geojson.coordinates });
                } else if (geojson.type === "MultiPolygon") {
                    geojson.coordinates.forEach((polygon, index) => {
                        polygonData.push({ index: index + 1, coordinates: polygon });
                    });
                }
    
                // 重置并绘制
                polygonInfoList = [];
                polygonData.forEach(pd => processPolygon(pd.index, pd.coordinates));
    
                // 视图居中到所有已绘制轮廓
                try { fitViewportToPolygons(); } catch (e) { console.warn('视图居中失败', e); }
    
                // 在视图稳定后再创建/更新标签
                setTimeout(() => {
                    if (labelsEnabled) {
                        try {
                            createAllLabels();
                            updateAllLabelsPosition();
                        } catch (e) {
                            console.warn('创建或更新标签失败:', e);
                        }
                    }
                }, 150);
            } catch (e) {
                alert('绘制失败：' + (e && e.message ? e.message : e));
                console.error('绘制异常:', e);
            } finally {
                hideLoading();
                isDrawing = false;
                disableButtons(false);
            }
        });

        document.getElementById("clearButton").addEventListener("click", function () {
            if (isDrawing) { console.log('绘制进行中，暂不清空'); return; }
            clearOverlays();
            console.log("已清空所有轮廓");
        });
    }

    // 存储多边形数据，用于后续标签创建
    let polygonInfoList = [];

    // 处理单个多边形的绘制和面积计算
    function processPolygon(actualPolygonIndex, polygonCoords) {
        console.log('开始处理多边形', actualPolygonIndex);

        // 坐标系选择（绘制始终使用WGS84坐标）
        const coordSys = (document.getElementById('coordSysSelect') && document.getElementById('coordSysSelect').value) || 'wgs84';

        // 统一转换为WGS84用于绘制与面积计算
        function toWgs(point){
            const lng = point[0], lat = point[1];
            if (coordSys === 'wgs84' || coordSys === 'cgcs2000') {
                return [lng, lat];
            } else if (coordSys === 'gcj02') {
                const w = gcj02ToWgs84(lng, lat);
                return [w.lng, w.lat];
            } else if (coordSys === 'bd09') {
                const gcj = bd09ToGcj02(lng, lat);
                const w = gcj02ToWgs84(gcj.lng, gcj.lat);
                return [w.lng, w.lat];
            }
            return [lng, lat];
        }
        const coordsWGS84 = polygonCoords.map(ring => ring.map(toWgs));
        let outerRingWGS = coordsWGS84[0] || [];

        // 生成用于绘制的坐标（直接使用WGS84坐标）
        const rings = coordsWGS84.map(ring => ring.map(([lng, lat]) => new T.LngLat(lng, lat)));


         // 创建半透明填充的多边形（无边框）
          const polygon = new T.Polygon(rings, {
              color: "#FFD700",
              weight: 1,
              opacity: 1,
              fillColor: "#FFFF00",
              fillOpacity: 0.35
          });
 
          // 使用WGS84坐标计算面积（更准确的面积计算）
         let areaSqm;
         let areaMu;



         try {
             // 检查Turf.js是否可用
             if (typeof turf !== 'undefined' && turf.area) {
                 // 使用Turf.js计算多边形面积
                // 构造GeoJSON格式的多边形
                const geoJsonPolygon = {
                    type: "Polygon",
                    coordinates: coordsWGS84
                };


                 // 使用Turf.js计算面积（平方米）
                 areaSqm = turf.area(geoJsonPolygon);
                 areaMu = (areaSqm / 666.6667).toFixed(4); // 转换为亩
                 console.log(`多边形${actualPolygonIndex}面积计算结果(Turf.js): ${areaSqm}平方米 = ${areaMu}亩`);
             } else {
                 // 如果Turf.js不可用，回退到之前的计算方法
                 console.warn('Turf.js不可用，使用备用计算方法');
                 // 计算带孔洞的多边形面积
                 areaSqm = 0;
                 // 计算外环面积
                 outerRingWGS = coordsWGS84[0] || [];
                 areaSqm += calculatePolygonArea(outerRingWGS);

                 // 减去内环（孔洞）面积
                 for (let i = 1; i < coordsWGS84.length; i++) {
                     const innerRingArea = calculatePolygonArea(coordsWGS84[i]);
                     areaSqm -= innerRingArea;
                 }

                  areaMu = (areaSqm / 666.6667).toFixed(4); // 使用更精确的转换系数
                  console.log(`多边形${actualPolygonIndex}面积计算结果(备用): ${areaSqm}平方米 = ${areaMu}亩`);
              }
          } catch (error) {
              console.error(`面积计算失败:`, error);
              areaSqm = 0;
              areaMu = '0.0000';
          }

          // 计算多边形的中心点和底部中心点（WGS84）
          const centerPoint = calculatePolygonCenter(outerRingWGS);
          const bottomCenterPoint = calculatePolygonBottomCenter(outerRingWGS);

          // 添加多边形到地图
          if (map) {
              map.addOverLay(polygon);
              console.log(`多边形${actualPolygonIndex}已添加到地图`);
          } else {
              console.error('地图对象不存在');
          }

          // 存储多边形信息，用于后续标签创建
          polygonInfoList.push({
              index: actualPolygonIndex,
              polygon: polygon,
              area: areaMu,
              bottomCenter: { lng: bottomCenterPoint.lng, lat: bottomCenterPoint.lat },
              ringPoints: rings
          });
      }

    // 视图居中：根据已绘制的GCJ-02点
    function fitViewportToPolygons() {
        const points = [];
        try {
            if (!map || !map.setViewport) return;
            polygonInfoList.forEach(info => {
                if (!info || !info.ringPoints) return;
                info.ringPoints.forEach(ring => {
                    ring.forEach(ll => points.push(ll));
                });
            });
            if (!points.length) return;
            map.setViewport(points);
        } catch (e) {
            try {
                const lngs = points.map(p => p.lng);
                const lats = points.map(p => p.lat);
                const center = new T.LngLat(
                    (Math.min(...lngs) + Math.max(...lngs)) / 2,
                    (Math.min(...lats) + Math.max(...lats)) / 2
                );
                if (map && map.panTo) map.panTo(center);
            } catch (e2) {
                console.warn('视图居中失败:', e2);
            }
        }
    }

    // 统一创建所有多边形的标签
    function createAllLabels() {
        const mapContainer = document.getElementById('mapContainer');
        if (!mapContainer || !map) return;

        polygonInfoList.forEach(info => {
            if (!info) return;
            // 防止重复创建
            if (info.labelRef) return;
            // 创建标签元素
            const labelDiv = document.createElement('div');
            labelDiv.className = 'area-label';
            labelDiv.innerHTML = `多边形${info.index}：${info.area}亩`;

            // 添加到地图容器并根据屏幕边界定位到轮廓下方
            mapContainer.appendChild(labelDiv);
            positionLabelForPolygon(labelDiv, info);

            // 记录引用，避免重复创建
            info.labelRef = labelDiv;

            // 存储到 currentPolygons 以复用现有定位/清理逻辑
            const labelObj = {
                domElement: labelDiv,
                isDomLabel: true,
                polygonInfo: info
            };
            currentPolygons.push({ polygon: info.polygon, label: labelObj });
        });

        // 不清空 polygonInfoList，便于开关随时创建/隐藏标签
    }

    // 根据多边形屏幕边界定位标签，保证始终在轮廓下方
    function positionLabelForPolygon(labelDiv, info) {
        if (!map || !info || !info.ringPoints) return;
        const points = [];
        info.ringPoints.forEach(ring => {
            ring.forEach(ll => {
                const p = map.lngLatToContainerPoint(ll);
                points.push(p);
            });
        });
        if (!points.length) return;
        const minX = Math.min(...points.map(p => p.x));
        const maxX = Math.max(...points.map(p => p.x));
        const maxY = Math.max(...points.map(p => p.y));
        const container = document.getElementById('mapContainer');
        const labelWidth = labelDiv.offsetWidth;
        const labelHeight = labelDiv.offsetHeight;
        const targetLeft = Math.round((minX + maxX) / 2 - labelWidth / 2);
        const targetTop = Math.round(maxY + 6);
        const clampedLeft = Math.max(0, Math.min(targetLeft, container.clientWidth - labelWidth));
        const clampedTop = Math.max(0, Math.min(targetTop, container.clientHeight - labelHeight));
        labelDiv.style.left = clampedLeft + 'px';
        labelDiv.style.top = clampedTop + 'px';
    }

    // 更新所有标签位置（地图move/zoom时调用）
    function updateAllLabelsPosition() {
        try {
            if (!map) return;
            const container = document.getElementById('mapContainer');
            if (!container) return;
            currentPolygons.forEach(item => {
                if (!item || !item.label) return;
                const labelObj = item.label;
                if (labelObj.isDomLabel && labelObj.domElement && labelObj.polygonInfo) {
                    // 确保标签在容器中
                    if (!labelObj.domElement.parentNode) {
                        container.appendChild(labelObj.domElement);
                    }
                    positionLabelForPolygon(labelObj.domElement, labelObj.polygonInfo);
                }
            });
        } catch (e) {
            console.warn('更新标签位置时出错:', e);
        }
    }
    // 确保在全局可用（处理第三方库事件回调作用域差异）
    window.updateAllLabelsPosition = updateAllLabelsPosition;

    // 绑定“显示亩数标签”开关（默认隐藏）
    function bindLabelsToggle() {
        const cb = document.getElementById('toggleLabelsCheckbox');
        const container = document.getElementById('mapContainer');
        if (!cb || !container) return;
        // 默认隐藏标签
        container.classList.add('labels-hidden');
        cb.addEventListener('change', () => {
            labelsEnabled = cb.checked;
            if (labelsEnabled) {
                container.classList.remove('labels-hidden');
                const hasAnyLabel = currentPolygons.some(item => item && item.label && item.label.domElement);
                if (!hasAnyLabel) {
                    try { createAllLabels(); } catch (e) { console.warn('创建标签失败:', e); }
                }
                updateAllLabelsPosition();
            } else {
                container.classList.add('labels-hidden');
            }
        });
    }

    /**
     * 计算多边形中心点（比底部中心更适合显示标签）
     */
    function calculatePolygonCenter(outerRing) {
        let sumLng = 0, sumLat = 0;
        const len = outerRing.length;

        for (let i = 0; i < len; i++) {
            sumLng += outerRing[i][0];
            sumLat += outerRing[i][1];
        }

        return {
            lng: sumLng / len,
            lat: sumLat / len
        };
    }

    /**
     * 计算多边形面积（球面多边形面积计算）
     * 使用更准确的球面坐标面积计算方法，确保面积与视觉大小一致
     */
    function calculatePolygonArea(coordinates) {
        // 地球半径（米）- 使用更精确的值
        const R = 6371000.8;
        const n = coordinates.length;

        // 将所有坐标转换为弧度
        const coordsRad = coordinates.map(point => [
            point[0] * Math.PI / 180,
            point[1] * Math.PI / 180
        ]);

        let areaRad = 0;

        // 使用更准确的球面多边形面积公式（Girard定理）
        for (let i = 0; i < n; i++) {
            const j = (i + 1) % n;
            const lon1 = coordsRad[i][0];
            const lat1 = coordsRad[i][1];
            const lon2 = coordsRad[j][0];
            const lat2 = coordsRad[j][1];

            // 计算球面多边形面积增量
            const dlon = lon2 - lon1;
            const sinLat1 = Math.sin(lat1);
            const sinLat2 = Math.sin(lat2);
            const cosLat1 = Math.cos(lat1);
            const cosLat2 = Math.cos(lat2);

            // 使用更精确的公式
            areaRad += dlon * (sinLat1 * cosLat2 * Math.cos(dlon / 2) + sinLat2 * cosLat1);
        }

        // 计算总面积（平方米）
        const areaSqm = Math.abs(areaRad) * R * R * 0.5;

        return areaSqm;
    }

    /**
     * 清空所有多边形和标签（同时处理 polygonInfoList 与 currentPolygons）
     */
    function clearOverlays() {
        try {
            // 先移除 polygonInfoList 中记录的多边形与其DOM标签
            polygonInfoList.forEach(info => {
                if (info && info.polygon && map && map.removeOverLay) {
                    try { map.removeOverLay(info.polygon); } catch (e) { console.warn('移除多边形失败:', e); }
                }
                if (info && info.labelRef && info.labelRef.parentNode) {
                    try { info.labelRef.parentNode.removeChild(info.labelRef); } catch (e) { console.warn('移除DOM标签失败:', e); }
                    info.labelRef = null;
                }
            });

            // 再处理 currentPolygons（兼容旧路径与标签对象）
            currentPolygons.forEach(item => {
                if (item.polygon && map && map.removeOverLay) {
                    try { map.removeOverLay(item.polygon); } catch (e) { console.warn('移除多边形失败:', e); }
                }
                if (item.label) {
                    if (item.label.domElement && item.label.domElement.parentNode) {
                        try { item.label.domElement.parentNode.removeChild(item.label.domElement); } catch (e) { console.warn('移除DOM标签失败:', e); }
                    } else if (map && map.removeOverLay && !item.label.isDomLabel) {
                        try { map.removeOverLay(item.label); } catch (e) { console.warn('移除地图覆盖物标签失败:', e); }
                    }
                }
            });

            // 清空记录数组
            currentPolygons = [];
            polygonInfoList = [];

            console.log('已清空所有多边形和标签（保留事件监听器）');
        } catch (error) {
            console.error('清空覆盖物时出错:', error);
        }
    }

    // 其他辅助函数（保持不变）
    function bindMinimizeEvent() {
        const container = document.querySelector(".wkt-input-container");
        const btn = document.getElementById("minimizeBtn");
        const minIcon = btn?.querySelector(".min-icon");
        const restoreIcon = btn?.querySelector(".restore-icon");

        btn?.addEventListener("click", () => {
            const minimized = container.classList.toggle("minimized");
            if (minIcon && restoreIcon) {
                if (minimized) {
                    minIcon.style.display = "none";
                    restoreIcon.style.display = "";
                } else {
                    minIcon.style.display = "";
                    restoreIcon.style.display = "none";
                }
            }
        });
    }

    // 在脚本内部补充：页签切换（3个页签）
     function bindTabs() {
         const tabs = [
             { btn: document.getElementById('tabDrawBtn'), pane: document.getElementById('tabDraw'), key: 'draw' },
             { btn: document.getElementById('tabTrackBtn'), pane: document.getElementById('tabTrack'), key: 'track' },
             { btn: document.getElementById('tabSplitBtn'), pane: document.getElementById('tabSplit'), key: 'split' },
             { btn: document.getElementById('tabBatchBtn'), pane: document.getElementById('tabBatch'), key: 'batch' },
         ];
         if (tabs.some(t => !t.btn || !t.pane)) return;
         function activate(key) {
             tabs.forEach(t => {
                 const active = t.key === key;
                 t.btn.classList.toggle('active', active);
                 t.pane.classList.toggle('active', active);
             });
         }
         tabs.forEach(t => t.btn.addEventListener('click', () => activate(t.key)));
         activate('draw');
     }
    function updateParserStatus() {
        const el = document.getElementById('parserStatus');
        if (!el) return;
        const ok = (typeof Terraformer !== 'undefined' && Terraformer.WKT && typeof Terraformer.WKT.parse === 'function');
        if (ok) {
            el.textContent = 'Terraformer WKT Parser';
            el.style.color = '#2f8f2f';
        } else {
            el.textContent = '本地回退解析（仅支持POLYGON/MULTIPOLYGON）';
            el.style.color = '#c77d1e';
        }
    }
     function parseWkt(wkt) {
         wkt = wkt.trim();
         // 优先使用成熟库（Terraformer WKT Parser）
         if (typeof Terraformer !== 'undefined' && Terraformer.WKT && Terraformer.WKT.parse) {
             try {
                 return Terraformer.WKT.parse(wkt);
             } catch (e) {
                 console.warn('Terraformer解析失败，尝试本地回退解析:', e);
             }
         } else {
             // 不再提示“未加载”，由状态栏展示回退信息
         }
         // 回退解析：仅支持 POLYGON / MULTIPOLYGON
         const typeMatch = wkt.match(/^\s*(POLYGON|MULTIPOLYGON)\s*\(/i);
         if (!typeMatch) throw new Error('仅支持POLYGON/MULTIPOLYGON');
         const type = typeMatch[1].toUpperCase();
         const inner = wkt.substring(wkt.indexOf('('));
         if (type === 'POLYGON') {
             const coords = parsePolygonCoords(inner.replace(/^\(/, '').replace(/\)$/, ''));
             return { type: 'Polygon', coordinates: coords };
         } else {
             const trimmed = inner.replace(/^\(\(/, '').replace(/\)\)$/, '');
             const coords = parseMultiPolygonCoords(trimmed);
             return { type: 'MultiPolygon', coordinates: coords };
         }
     }

     function bindMultiSplitter() {
         const input = document.getElementById('multiInput');
         const output = document.getElementById('polyOutput');
         const splitBtn = document.getElementById('splitMultiBtn');
         const copyBtn = document.getElementById('copyPolysBtn');
         if (!input || !output || !splitBtn || !copyBtn) return;

         // 本地WKT序列化辅助
         function ringToText(ring) {
             if (!ring || !ring.length) return '()';
             const first = ring[0];
             const last = ring[ring.length - 1];
             const closed = (first[0] === last[0] && first[1] === last[1]) ? ring : ring.concat([[first[0], first[1]]]);
             return '(' + closed.map(pt => pt[0] + ' ' + pt[1]).join(', ') + ')';
         }
         function toWktPolygonCoords(coords) {
             return 'POLYGON(' + coords.map(ringToText).join(', ') + ')';
         }
         function toWktMulti(coords) {
             return 'MULTIPOLYGON(' + coords.map(poly => '(' + poly.map(ringToText).join(', ') + ')').join(', ') + ')';
         }

         function polygonsFromMulti(text) {
             const geo = parseWkt(text.trim());
             if (geo.type !== 'MultiPolygon') throw new Error('请输入有效的 MULTIPOLYGON WKT');
             const polys = geo.coordinates.map(rings => toWktPolygonCoords(rings));
             return polys;
         }
         splitBtn.addEventListener('click', () => {
             try {
                 const list = polygonsFromMulti(input.value.trim());
                 output.value = list.join('\n');
             } catch (e) {
                 alert('分割失败：' + e.message);
             }
         });
         copyBtn.addEventListener('click', async () => {
             const val = output.value.trim();
             if (!val) { alert('没有可复制的结果'); return; }
             try { await navigator.clipboard.writeText(val); alert('已复制到剪贴板'); } catch (e) { console.warn('复制失败', e); }
         });
     }

     function bindBatchGenerator() {
         const batchInput = document.getElementById('batchInput');
         const output = document.getElementById('multiOutput');
         const genBtn = document.getElementById('generateMultiBtn');
         const copyBtn = document.getElementById('copyMultiBtn');

         // 本地WKT序列化辅助（与分割器保持一致）
         function ringToText(ring) {
             if (!ring || !ring.length) return '()';
             const first = ring[0];
             const last = ring[ring.length - 1];
             const closed = (first[0] === last[0] && first[1] === last[1]) ? ring : ring.concat([[first[0], first[1]]]);
             return '(' + closed.map(pt => pt[0] + ' ' + pt[1]).join(', ') + ')';
         }
         function toWktMulti(coords) {
             return 'MULTIPOLYGON(' + coords.map(poly => '(' + poly.map(ringToText).join(', ') + ')').join(', ') + ')';
         }

         genBtn.addEventListener('click', () => {
             try {
                 const lines = batchInput.value.trim().split(/\n|;/).map(s => s.trim()).filter(Boolean);
                 if (lines.length === 0) throw new Error('请按每行或分号输入至少一个POLYGON');
                 const polygons = lines.map((line, idx) => {
                     const g = parseWkt(line);
                     if (g.type !== 'Polygon') throw new Error(`第${idx + 1}行不是有效的POLYGON WKT`);
                     return g;
                 });
                 const multiGeo = { type: 'MultiPolygon', coordinates: polygons.map(p => p.coordinates) };
                 output.value = toWktMulti(multiGeo.coordinates);
             } catch (e) {
                 alert('生成失败：' + e.message);
             }
         });

         copyBtn.addEventListener('click', async () => {
             const val = output.value.trim();
             if (!val) { alert('没有可复制的结果'); return; }
             try { await navigator.clipboard.writeText(val); alert('已复制到剪贴板'); } catch (e) { console.warn('复制失败', e); }
         });

     }

     function setExampleWkt() {
         const exampleWkt = "MULTIPOLYGON(" +
             "(" +
             "(116.35 39.93, 116.39 39.93, 116.39 39.90, 116.35 39.90, 116.35 39.93)," + // 外环
             "(116.36 39.92, 116.38 39.92, 116.38 39.91, 116.36 39.91, 116.36 39.92)" +  // 内环
             ")," +
             "(" +
             "(116.40 39.95, 116.43 39.97, 116.46 39.96, 116.49 39.98, 116.52 39.95, 116.55 39.93, 116.58 39.94, 116.61 39.92, 116.64 39.95, 116.40 39.95)" +
             ")" +
             ")";
         document.getElementById("wktTextarea").value = exampleWkt;
     }

     function parsePolygonCoords(coordStr) {
         const ringStrs = coordStr.split(/\)\s*,\s*\(/).map(s => s.replace(/[()]/g, '').trim());
         const rings = [];
         ringStrs.forEach(ringStr => {
             const pts = ringStr.split(/,\s*/).map(pointStr => {
                 const [lng, lat] = pointStr.split(/\s+/).map(Number);
                 if (isNaN(lng) || isNaN(lat)) throw new Error("坐标格式错误：" + pointStr);
                 return [lng, lat];
             });
             // 自动拆分：如果一个ring中包含多次回到起点（闭合），则拆分为多个环
             // 兼容用户将外环与内环错误地写在同一对括号中的情况
             let start = 0;
             while (start < pts.length) {
                 const startPt = pts[start];
                 let closeIdx = -1;
                 for (let i = start + 1; i < pts.length; i++) {
                     if (pts[i][0] === startPt[0] && pts[i][1] === startPt[1]) {
                         closeIdx = i;
                         break;
                     }
                 }
                 if (closeIdx === -1) {
                     // 未找到闭合：将剩余点视为一个环，并强制闭合
                     const ring = pts.slice(start);
                     if (ring.length && (ring[0][0] !== ring[ring.length - 1][0] || ring[0][1] !== ring[ring.length - 1][1])) {
                         ring.push([ring[0][0], ring[0][1]]);
                     }
                     rings.push(ring);
                     break;
                 } else {
                     const ring = pts.slice(start, closeIdx + 1);
                     rings.push(ring);
                     start = closeIdx + 1;
                 }
             }
         });
         return rings;
     }

     function parseMultiPolygonCoords(coordStr) {
         const polygonStrs = coordStr.split(/\)\s*\)\s*,\s*\(\s*\(/).map(s => s.replace(/[()]/g, '').trim());
         return polygonStrs.map(polygonStr => parsePolygonCoords(polygonStr));
     }

     function wgs84ToGcj02(lng, lat) {
         const x_PI = 3.14159265358979324 * 3000.0 / 180.0;
         const PI = 3.1415926535897932384626;
         const a = 6378245.0;
         const ee = 0.00669342162296594323;

         if (outOfChina(lng, lat)) return { lng, lat };

         let dlat = transformLat(lng - 105.0, lat - 35.0);
         let dlng = transformLng(lng - 105.0, lat - 35.0);
         const radlat = lat / 180.0 * PI;
         let magic = Math.sin(radlat);
         magic = 1 - ee * magic * magic;
         const sqrtmagic = Math.sqrt(magic);
         dlat = (dlat * 180.0) / ((a * (1 - ee)) / (magic * sqrtmagic) * PI);
         dlng = (dlng * 180.0) / (a / sqrtmagic * Math.cos(radlat) * PI);

         return { lng: lng + dlng, lat: lat + dlat };

         function outOfChina(lng, lat) {
             return (lng < 72.004 || lng > 137.8347) || (lat < 0.8293 || lat > 55.8271);
         }

         function transformLat(x, y) {
             let ret = -100.0 + 2.0 * x + 3.0 * y + 0.2 * y * y + 0.1 * x * y + 0.2 * Math.sqrt(Math.abs(x));
             ret += (20.0 * Math.sin(6.0 * x * PI) + 20.0 * Math.sin(2.0 * x * PI)) * 2.0 / 3.0;
             ret += (20.0 * Math.sin(y * PI) + 40.0 * Math.sin(y / 3.0 * PI)) * 2.0 / 3.0;
             ret += (160.0 * Math.sin(y / 12.0 * PI) + 320 * Math.sin(y * PI / 30.0)) * 2.0 / 3.0;
             return ret;
         }

         function transformLng(x, y) {
             let ret = 300.0 + x + 2.0 * y + 0.1 * x * x + 0.1 * x * y + 0.1 * Math.sqrt(Math.abs(x));
             ret += (20.0 * Math.sin(6.0 * x * PI) + 20.0 * Math.sin(2.0 * x * PI)) * 2.0 / 3.0;
             ret += (20.0 * Math.sin(x * PI) + 40.0 * Math.sin(x / 3.0 * PI)) * 2.0 / 3.0;
             ret += (150.0 * Math.sin(x / 12.0 * PI) + 300.0 * Math.sin(x / 30.0 * PI)) * 2.0 / 3.0;
             return ret;
         }
     }

     function gcj02ToWgs84(lng, lat) {
         const g = wgs84ToGcj02(lng, lat);
         return { lng: lng * 2 - g.lng, lat: lat * 2 - g.lat };
     }

     function bd09ToGcj02(bdLng, bdLat) {
         const x_PI = 3.14159265358979324 * 3000.0 / 180.0;
         const x = bdLng - 0.0065;
         const y = bdLat - 0.006;
         const z = Math.sqrt(x * x + y * y) - 0.00002 * Math.sin(y * x_PI);
         const theta = Math.atan2(y, x) - 0.000003 * Math.cos(x * x_PI);
         const ggLng = z * Math.cos(theta);
         const ggLat = z * Math.sin(theta);
         return { lng: ggLng, lat: ggLat };
     }

     function calculatePolygonBottomCenter(outerRing) {
         let minLat = Infinity;
         let bottomPoints = [];
         outerRing.forEach(point => {
             const lat = point[1];
             if (lat < minLat) {
                 minLat = lat;
                 bottomPoints = [point];
             } else if (lat === minLat) {
                 bottomPoints.push(point);
             }
         });

         const sumLng = bottomPoints.reduce((sum, point) => sum + point[0], 0);
         const centerLng = sumLng / bottomPoints.length;

         return { lng: centerLng, lat: minLat };
     }

     function fitBounds(geojson) {
         try {
             const allPoints = [];
             function collectPoints(coords) {
                 if (typeof coords[0] === 'number') {
                     allPoints.push(coords);
                 } else {
                     coords.forEach(coord => collectPoints(coord));
                 }
             }
             collectPoints(geojson.coordinates);

             if (allPoints.length === 0) return;

             const lats = allPoints.map(p => p[1]);
             const lngs = allPoints.map(p => p[0]);
             const minLng = Math.min(...lngs);
             const maxLng = Math.max(...lngs);
             const minLat = Math.min(...lats);
             const maxLat = Math.max(...lats);

             const sw = wgs84ToGcj02(minLng, minLat);
             const ne = wgs84ToGcj02(maxLng, maxLat);

             // 修复setViewport方法的使用，确保参数格式正确
             if (map && map.setViewport) {
                 map.setViewport([
                     new T.LngLat(sw.lng, sw.lat),
                     new T.LngLat(ne.lng, ne.lat)
                 ], { padding: [50, 50] });
             } else {
                 console.warn('地图对象或setViewport方法不可用');
             }
         } catch (error) {
             console.error('调整视图范围时出错:', error);
         }
     }
// 轨迹绘制与解析
    function bindTrackEvents() {
        const drawBtn = document.getElementById('drawTrackButton');
        const showPointsBtn = document.getElementById('showTrackPointsButton');
        const clearBtn = document.getElementById('clearTrackButton');
        const ta = document.getElementById('trackTextarea');
        if (!drawBtn || !showPointsBtn || !clearBtn || !ta) return;

        drawBtn.addEventListener('click', function(){
            try {
                const text = ta.value.trim();
                if (!text) { alert('请粘贴轨迹文本（时间戳,经度,纬度）'); return; }
                const points = parseTrackText(text);
                if (points.length < 2) { alert('有效轨迹点不足，至少需要两点'); return; }
                drawTrackFromPoints(points);
                fitViewportToTrack(points);
            } catch (e) {
                alert('绘制轨迹失败：' + (e && e.message ? e.message : e));
                console.error('绘制轨迹异常:', e);
            }
        });

        showPointsBtn.addEventListener('click', function(){
            try {
                const text = ta.value.trim();
                if (!text) { alert('请粘贴轨迹文本（时间戳,经度,纬度）'); return; }
                const points = parseTrackText(text);
                if (points.length === 0) { alert('未找到有效轨迹点'); return; }
                showTrackPoints(points);
                fitViewportToTrack(points);
            } catch (e) {
                alert('显示轨迹点失败：' + (e && e.message ? e.message : e));
                console.error('显示轨迹点异常:', e);
            }
        });

        clearBtn.addEventListener('click', function(){
            clearTrackOverlays();
            console.log('已清空轨迹');
        });
    }

    function showTrackPoints(points) {
        // 先移除旧轨迹（不影响轮廓）
        clearTrackOverlays(false);
        
        if (!map || !points || points.length === 0) {
            console.log('无轨迹点可显示');
            return;
        }
        
        console.log(`准备显示${points.length}个轨迹点`);
        
        // 使用批量处理和更小的图标来提高性能
        // 创建一个更小的红点SVG图标
        const smallRedDotIcon = new T.Icon({
            iconUrl: 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="1" height="1"><circle cx="0.5" cy="0.5" r="0.3" fill="%23FF0000"/></svg>',
            iconSize: new T.Point(1, 1),
            iconAnchor: new T.Point(0.5, 0.5)
        });
        
        // 优化批量添加点的速度
        const batchSize = 2000; // 增加每批处理的点数
        const concurrentBatches = 4; // 并发批次数量
        
        // 预创建点击事件处理函数，避免重复创建
        function createClickHandler(point, index) {
            return function() {
                const infoWindow = new T.InfoWindow({
                    content: `点${index + 1}<br/>经度: ${point.lng.toFixed(6)}<br/>纬度: ${point.lat.toFixed(6)}`,
                    offset: new T.Point(0, -20)
                });
                infoWindow.open(map, point);
            };
        }
        
        // 使用setTimeout实现更高效的批量添加，避免阻塞UI
        let currentIndex = 0;
        
        function addBatch() {
            if (currentIndex >= points.length) {
                console.log(`已显示${points.length}个轨迹点`);
                return;
            }
            
            // 添加当前批次的点
            const endIndex = Math.min(currentIndex + batchSize, points.length);
            const markersToAdd = [];
            
            // 先创建所有标记
            for (let i = currentIndex; i < endIndex; i++) {
                const point = points[i];
                const index = i;
                
                const marker = new T.Marker(point, {
                    icon: smallRedDotIcon
                });
                
                // 添加点击事件
                marker.addEventListener('click', createClickHandler(point, index));
                
                markersToAdd.push(marker);
            }
            
            // 批量添加到地图和数组
            markersToAdd.forEach(marker => {
                map.addOverLay(marker);
                currentTracks.push(marker);
            });
            
            currentIndex = endIndex;
            
            // 使用setTimeout而不是requestAnimationFrame，减少对渲染周期的依赖
            // 设置为0，将任务放入微任务队列，但允许UI有短暂的呼吸空间
            setTimeout(addBatch, 0);
        }
        
        // 启动批量添加
        addBatch();
    }
    
    // 恢复原始的clearTrackOverlays函数
    function clearTrackOverlays(resetArray = true){        
        try {
            currentTracks.forEach(pl => {
                if (pl && map && map.removeOverLay) {
                    try { map.removeOverLay(pl); } catch (e) { console.warn('移除轨迹失败:', e); }
                }
            });
            if (resetArray) currentTracks = [];
        } catch (e) {
            console.warn('清空轨迹时出错:', e);
        }
    }

    function parseTrackText(text){
        // 选择输入坐标系（优先使用轨迹页签专属选择器，若未设置则回退到绘制页签选择器）
        const coordSysEl = document.getElementById('trackCoordSysSelect') || document.getElementById('coordSysSelect');
        const coordSys = (coordSysEl && coordSysEl.value) || 'wgs84';
        const isHash = text.indexOf('#') !== -1;
        const items = isHash ? text.split('#') : text.split(/\r?\n/);
        const pts = [];
        for (let i=0;i<items.length;i++){
            const raw = items[i];
            if (!raw) continue;
            const line = raw.trim();
            if (!line) continue;
            const parts = line.split(',');
            if (parts.length < 3) continue;
            let lng = parseFloat((parts[isHash ? 0 : 1] || '').trim());
            let lat = parseFloat((parts[isHash ? 1 : 2] || '').trim());
            // 初步过滤：数值合法性与正常范围
            if (!isFinite(lng) || !isFinite(lat)) continue;
            if (lng === 0 || lat === 0) continue; // 丢弃0.0异常点
            if (lng < -180 || lng > 180 || lat < -90 || lat > 90) continue; // 超出经纬度范围丢弃

            // 将输入坐标转换为WGS84
            let w;
            if (coordSys === 'wgs84' || coordSys === 'cgcs2000') {
                w = { lng, lat };
            } else if (coordSys === 'gcj02') {
                w = gcj02ToWgs84(lng, lat);
            } else if (coordSys === 'bd09') {
                const g = bd09ToGcj02(lng, lat);
                w = gcj02ToWgs84(g.lng, g.lat);
            } else {
                w = { lng, lat };
            }
            // 转换结果兜底检查
            if (!isFinite(w.lng) || !isFinite(w.lat)) continue;
            if (w.lng < -180 || w.lng > 180 || w.lat < -90 || w.lat > 90) continue;

            // 使用WGS84坐标绘制到地图
            pts.push(new T.LngLat(w.lng, w.lat));
        }
        return pts;
    }

    function drawTrackFromPoints(points){
        // 先移除旧轨迹（不影响轮廓）
        clearTrackOverlays(false);
        const polyline = new T.Polyline(points, {
            color: '#FF3B30',
            weight: 1,
            opacity: 0.9
        });
        if (map) {
            map.addOverLay(polyline);
        }
        currentTracks.push(polyline);
    }

    function clearTrackOverlays(resetArray = true){
        try {
            currentTracks.forEach(pl => {
                if (pl && map && map.removeOverLay) {
                    try { map.removeOverLay(pl); } catch (e) { console.warn('移除轨迹失败:', e); }
                }
            });
            if (resetArray) currentTracks = [];
        } catch (e) {
            console.warn('清空轨迹时出错:', e);
        }
    }


    function fitViewportToTrack(points){
        try {
            if (!map || !map.setViewport || !points || !points.length) return;
            map.setViewport(points);
        } catch (e) {
            console.warn('轨迹视图居中失败:', e);
        }
    }

    // ========= 轨迹回放功能 =========
    let playbackState = { points: [], idx: 0, speed: 1, timer: null, running: false, marker: null, line: null, path: [] };

    function bindPlaybackControls(){
        const startBtn = document.getElementById('playbackStartBtn');
        const pauseBtn = document.getElementById('playbackPauseBtn');
        const stopBtn = document.getElementById('playbackStopBtn');
        const speedSel = document.getElementById('playbackSpeedSelect');
        const timeSlider = document.getElementById('playbackTimeSlider');
        const timeCursor = document.getElementById('playbackTimeCursor');
        const ta = document.getElementById('trackTextarea');
        if (!startBtn || !pauseBtn || !stopBtn || !speedSel) return;

        // 初始按钮状态
        updatePlaybackButtonsState('idle');

        startBtn.addEventListener('click', function(){
            try {
                const text = (ta && ta.value || '').trim();
                if (!text) { alert('请粘贴轨迹文本（时间戳,经度,纬度）'); return; }
                const pts = parseTrackTextWithTime(text);
                if (pts.length < 2) { alert('有效轨迹点不足，至少需要两点'); return; }
                startPlayback(pts);
                // 状态在startPlayback中已设置为playing
            } catch (e) {
                alert('开始回放失败：' + (e && e.message ? e.message : e));
                console.error('开始回放异常:', e);
            }
        });

        pauseBtn.addEventListener('click', function(){
            if (!playbackState.running) {
                // 继续
                playbackState.running = true;
                scheduleNext();
                updatePlaybackButtonsState('playing');
            } else {
                // 暂停
                if (playbackState.timer) { clearTimeout(playbackState.timer); playbackState.timer = null; }
                playbackState.running = false;
                updatePlaybackButtonsState('paused');
            }
        });

        stopBtn.addEventListener('click', function(){ 
            stopPlayback(); 
            updatePlaybackButtonsState('idle');
        });

        speedSel.addEventListener('change', function(){
            const v = parseFloat(speedSel.value);
            playbackState.speed = (isFinite(v) && v > 0) ? v : 1;
        });

        if (timeSlider) {
            timeSlider.addEventListener('input', function(){
                const ms = parseInt(timeSlider.value, 10);
                const txt = formatTimeForLabel(ms);
                if (timeCursor) timeCursor.textContent = txt;
            });
            timeSlider.addEventListener('change', function(){
                jumpToSliderTime();
            });
        }
    }

    function parseTrackTextWithTime(text){
        const coordSysEl = document.getElementById('trackCoordSysSelect') || document.getElementById('coordSysSelect');
        const coordSys = (coordSysEl && coordSysEl.value) || 'wgs84';
        const isHash = text.indexOf('#') !== -1;
        const items = isHash ? text.split('#') : text.split(/\r?\n/);
        const out = [];
        for (let i=0;i<items.length;i++){
            const raw = items[i];
            if (!raw) continue;
            const line = raw.trim();
            if (!line) continue;
            const parts = line.split(',');
            if (parts.length < 3) continue;
            const tsRaw = (parts[isHash ? 2 : 0] || '').trim();
            const ts = (tsRaw || '').replace(/\D/g,'');
            let lng = parseFloat((parts[isHash ? 0 : 1] || '').trim());
            let lat = parseFloat((parts[isHash ? 1 : 2] || '').trim());
            if (!isFinite(lng) || !isFinite(lat)) continue;
            if (lng === 0 || lat === 0) continue;
            if (lng < -180 || lng > 180 || lat < -90 || lat > 90) continue;
            const t = parseTimestamp(ts);
            if (!t) continue;
            let w;
            if (coordSys === 'wgs84' || coordSys === 'cgcs2000') {
                w = { lng, lat };
            } else if (coordSys === 'gcj02') {
                w = gcj02ToWgs84(lng, lat);
            } else if (coordSys === 'bd09') {
                const g = bd09ToGcj02(lng, lat);
                w = gcj02ToWgs84(g.lng, g.lat);
            } else { w = { lng, lat }; }
            if (!isFinite(w.lng) || !isFinite(w.lat)) continue;
            if (w.lng < -180 || w.lng > 180 || w.lat < -90 || w.lat > 90) continue;
            out.push({ ll: new T.LngLat(w.lng, w.lat), time: t, ts });
        }
        out.sort((a,b)=>a.time - b.time);
        return out;
    }

    function parseTimestamp(ts){
        const tstr = (ts || '').replace(/\D/g,'');
        const m = tstr && tstr.match(/^\d{14}$/);
        if (!m) return null;
        const y = parseInt(tstr.slice(0,4),10);
        const M = parseInt(tstr.slice(4,6),10) - 1;
        const d = parseInt(tstr.slice(6,8),10);
        const h = parseInt(tstr.slice(8,10),10);
        const m2 = parseInt(tstr.slice(10,12),10);
        const s = parseInt(tstr.slice(12,14),10);
        const dt = new Date(y,M,d,h,m2,s);
        return isNaN(dt.getTime()) ? null : dt;
    }

    function startPlayback(points){
        console.log('[Playback] startPlayback: 点数=', points && points.length);
        stopPlayback();
        playbackState.points = points;
        playbackState.idx = 0;
        playbackState.speed = playbackState.speed || 1;
        playbackState.running = true;
        // 配置时间滑动条，并尊重现有滑块位置作为起始
        configureTimeSlider(points);
        // 启用滑块
        const slider = document.getElementById('playbackTimeSlider');
        if (slider) slider.disabled = false;
        let initIdx = 0;
        if (slider && slider.min && slider.max) {
            const ms = parseInt(slider.value, 10);
            if (isFinite(ms)) initIdx = findIndexByTime(points, ms);
        }
        playbackState.idx = initIdx;
        const first = points[initIdx];
        console.log('[Playback] 首点:', first && first.ts, first && first.ll, 'initIdx=', initIdx);
        playbackState.path = points.slice(0, initIdx+1).map(p=>p.ll);
        playbackState.line = new T.Polyline(playbackState.path, { color: '#00FFFF', weight: 1, opacity: 0.9 });
        if (map) {
            map.addOverLay(playbackState.line);
        }
        currentTracks.push(playbackState.line);
        // 创建并定位DOM标记以保证可见移动
        ensurePlaybackDom(first.ll);
        updatePlaybackDom(first.ll);
        updatePlaybackTimeLabel(first.ts);
        try { fitViewportToTrack(points.map(p=>p.ll)); } catch(e){}
        // 更新按钮状态
        updatePlaybackButtonsState('playing');
        scheduleNext();
    }

    function scheduleNext(){
        if (!playbackState.running) return;
        if (!playbackState.points || playbackState.idx >= playbackState.points.length - 1) {
            playbackState.running = false;
            console.log('[Playback] 回放结束：idx=', playbackState.idx, '点数=', playbackState.points ? playbackState.points.length : 0);
            updatePlaybackButtonsState('idle'); // 播放结束后按钮回到初始状态：开始可点，继续/结束灰化
            return;
        }
        const next = playbackState.points[playbackState.idx+1];
        const speed = playbackState.speed || 1;
        const delay = Math.max(4, Math.round(1000 / speed)); // 1x=1000ms/点，2x=500ms/点...
        console.log('[Playback] scheduleNext: idx=', playbackState.idx, '->', playbackState.idx+1, 'delay=', delay, 'speed=', speed);
        playbackState.timer = setTimeout(()=>{
            playbackState.idx++;
            const nextLL = next.ll;
            console.log('[Playback] 下一点:', next && next.ts, nextLL);
            try {
                // 维护路径数组
                playbackState.path = playbackState.path || [];
                playbackState.path.push(nextLL);
                console.log('[Playback] 路径长度=', playbackState.path.length);
                // 使用DOM标记进行移动（容器/图层坐标）
                if (!playbackDom.el) console.log('[Playback] DOM标记不存在，将尝试创建');
                updatePlaybackDom(nextLL);
                // 折线更新：优先setLngLats，兜底重建
                if (playbackState.line && typeof playbackState.line.setLngLats === 'function') {
                    try { playbackState.line.setLngLats(playbackState.path); }
                    catch(e){
                        console.warn('[Playback] setLngLats失败，重建折线', e);
                        if (map) { try { map.removeOverLay(playbackState.line); } catch(e){} }
                        playbackState.line = new T.Polyline(playbackState.path, { color: '#00FFFF', weight: 1, opacity: 0.9 });
                        if (map) map.addOverLay(playbackState.line);
                    }
                } else {
                    console.log('[Playback] 折线不支持setLngLats，重建');
                    if (playbackState.line && map) { try { map.removeOverLay(playbackState.line); } catch(e){} }
                    playbackState.line = new T.Polyline(playbackState.path, { color: '#00FFFF', weight: 1, opacity: 0.9 });
                    if (map) map.addOverLay(playbackState.line);
                }
            } catch(e) { console.warn('更新回放覆盖物失败:', e); }
            updatePlaybackTimeLabel(next.ts);
            scheduleNext();
        }, delay);
    }

    function stopPlayback(){
        if (playbackState.timer) { clearTimeout(playbackState.timer); playbackState.timer = null; }
        playbackState.running = false;
        playbackState.idx = 0;
        try {
            // 移除DOM标记
            removePlaybackDom();
            if (playbackState.marker && map) map.removeOverLay(playbackState.marker);
            if (playbackState.line && map) map.removeOverLay(playbackState.line);
        } catch(e){}
        playbackState.marker = null;
        playbackState.line = null;
        updatePlaybackTimeLabel('—');
        // 按钮回到初始状态
        updatePlaybackButtonsState('idle');
    }

    function updatePlaybackTimeLabel(text){
        const el = document.getElementById('playbackTimeLabel');
        if (el) el.textContent = '时间：' + (text || '—');
    }

    // 时间滑动条：配置与跳转
    function configureTimeSlider(points){
        try {
            const slider = document.getElementById('playbackTimeSlider');
            const cursor = document.getElementById('playbackTimeCursor');
            if (!slider || !points || !points.length) return;
            const minMs = points[0].time.getTime();
            const maxMs = points[points.length - 1].time.getTime();
            const prev = parseInt(slider.value, 10);
            slider.min = String(minMs);
            slider.max = String(maxMs);
            slider.step = '1000'; // 以秒为步进
            let val = (isFinite(prev) && prev >= minMs && prev <= maxMs) ? prev : minMs;
            slider.value = String(val);
            if (cursor) cursor.textContent = formatTimeForLabel(val);
        } catch(e) { console.warn('配置时间滑动条失败:', e); }
    }
    function formatTimeForLabel(ms){
        if (!isFinite(ms)) return '—';
        const d = new Date(ms);
        const pad = n => String(n).padStart(2,'0');
        const y = d.getFullYear();
        const M = pad(d.getMonth()+1);
        const da = pad(d.getDate());
        const h = pad(d.getHours());
        const m = pad(d.getMinutes());
        const s = pad(d.getSeconds());
        return `${y}-${M}-${da} ${h}:${m}:${s}`;
    }
    function findIndexByTime(points, ms){
        try {
            if (!points || !points.length) return 0;
            const n = points.length;
            const minMs = points[0].time.getTime();
            const maxMs = points[n-1].time.getTime();
            if (!isFinite(ms)) return 0;
            if (ms <= minMs) return 0;
            if (ms >= maxMs) return n-1;
            let lo = 0, hi = n - 1, ans = 0;
            while (lo <= hi) {
                const mid = (lo + hi) >> 1;
                const t = points[mid].time.getTime();
                if (t < ms) { lo = mid + 1; ans = lo; }
                else { hi = mid - 1; ans = mid; }
            }
            return Math.max(0, Math.min(n-1, ans));
        } catch(e){ console.warn('findIndexByTime失败:', e); return 0; }
    }
    function jumpToSliderTime(){
        try {
            const slider = document.getElementById('playbackTimeSlider');
            if (!slider || !playbackState.points || !playbackState.points.length) return;
            const ms = parseInt(slider.value, 10);
            if (!isFinite(ms)) return;
            const idx = findIndexByTime(playbackState.points, ms);
            playbackState.idx = idx;
            const pts = playbackState.points;
            const ll = pts[idx].ll;
            playbackState.path = pts.slice(0, idx+1).map(p=>p.ll);
            // 更新折线
            try {
                if (playbackState.line && typeof playbackState.line.setLngLats === 'function') {
                    playbackState.line.setLngLats(playbackState.path);
                } else {
                    if (playbackState.line && map) { try { map.removeOverLay(playbackState.line); } catch(e){} }
                    playbackState.line = new T.Polyline(playbackState.path, { color: '#00FFFF', weight: 1, opacity: 0.9 });
                    if (map) map.addOverLay(playbackState.line);
                }
            } catch(e){ console.warn('滑块更新折线失败:', e); }
            // 更新标记与时间
            ensurePlaybackDom(ll);
            updatePlaybackDom(ll);
            updatePlaybackTimeLabel(pts[idx].ts);
            // 若正在播放，立即按新位置继续
            if (playbackState.running) {
                if (playbackState.timer) { clearTimeout(playbackState.timer); playbackState.timer = null; }
                scheduleNext();
            }
        } catch(e) { console.warn('滑块跳转失败:', e); }
    }

    // DOM标记：使用容器坐标实现可见移动
    let playbackDom = { el: null, lastLL: null, bound: false };

    function ensurePlaybackDom(ll){
        try {
            playbackDom.lastLL = ll;
            const pane = (map && map.getPanes && map.getPanes().overlayPane) || document.getElementById('mapContainer');
            if (!pane) { console.warn('未找到overlayPane或mapContainer'); return; }
            if (!playbackDom.el) {
                const el = document.createElement('div');
                el.id = 'playbackDomMarker';
                el.style.position = 'absolute';
                el.style.width = '16px';
                el.style.height = '16px';
                el.style.borderRadius = '50%';
                el.style.background = '#2C64A7';
                el.style.border = '2px solid #fff';
                el.style.boxShadow = '0 0 0 1px rgba(0,0,0,.25)';
                el.style.zIndex = '9999';
                pane.appendChild(el);
                playbackDom.el = el;
                console.log('[Playback] 创建DOM标记，父节点=', pane === document.getElementById('mapContainer') ? '#mapContainer' : 'overlayPane');
                bindPlaybackDomEvents();
            }
            updatePlaybackDom(ll);
        } catch(e) { console.warn('创建DOM标记失败:', e); }
    }

    function updatePlaybackDom(ll){
        try {
            playbackDom.lastLL = ll;
            if (!map || !playbackDom.el || !ll) { console.log('[Playback] update取消：map/el/ll缺失'); return; }
            let p;
            if (typeof map.lngLatToLayerPoint === 'function') {
                p = map.lngLatToLayerPoint(ll);
                console.log('[Playback] 使用layerPoint定位:', ll && ll.lng, ll && ll.lat, '=>', p && p.x, p && p.y);
            } else if (typeof map.lngLatToContainerPoint === 'function') {
                p = map.lngLatToContainerPoint(ll);
                console.log('[Playback] 使用containerPoint定位:', ll && ll.lng, ll && ll.lat, '=>', p && p.x, p && p.y);
            } else {
                console.warn('地图对象不支持lngLat到像素坐标转换');
                return;
            }
            playbackDom.el.style.left = p.x + 'px';
            playbackDom.el.style.top = p.y + 'px';
        } catch(e) { console.warn('更新DOM标记位置失败:', e); }
    }

    function bindPlaybackDomEvents(){
        if (playbackDom.bound) return;
        const updater = function(){
            try {
                if (!map || !playbackDom.el || !playbackDom.lastLL) return;
                let p;
                if (typeof map.lngLatToLayerPoint === 'function') {
                    p = map.lngLatToLayerPoint(playbackDom.lastLL);
                } else if (typeof map.lngLatToContainerPoint === 'function') {
                    p = map.lngLatToContainerPoint(playbackDom.lastLL);
                }
                if (!p) return;
                playbackDom.el.style.left = p.x + 'px';
                playbackDom.el.style.top = p.y + 'px';
            } catch(e){}
        };
        try {
            map.addEventListener('move', updater);
            map.addEventListener('zoom', updater);
            playbackDom.bound = true;
        } catch(e){}
    }

    function removePlaybackDom(){
        try {
            const el = playbackDom.el;
            playbackDom.lastLL = null;
            if (el && el.parentNode) el.parentNode.removeChild(el);
        } catch(e){}
        playbackDom.el = null;
        playbackDom.bound = false;
    }

</script>
</body>

</html>
