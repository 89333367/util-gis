<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>展示轮廓</title>
    <style>
        body {
            margin: 0;
            padding: 0;
        }

        #mapContainer {
            width: 100vw;
            height: 100vh;
            position: relative;
        }

        #mapLoading {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 999;
            transition: opacity 0.3s;
        }

        .loading-text {
            font-size: 16px;
            color: #333;
            padding: 10px 20px;
            background: white;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .wkt-input-container {
            position: absolute;
            top: 20px;
            right: 10px;
            z-index: 1000;
            background: white;
            padding: 12px;
            border-radius: 6px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            width: min(320px, 90vw);
            box-sizing: border-box;
            transition: all 0.3s;
        }

        .minimize-btn {
            position: absolute;
            top: -5px;
            right: -4px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #f0f0f0;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: #666;
            z-index: 1001;
            transition: background 0.2s;
        }

        .minimize-btn:hover {
            background: #e0e0e0;
        }

        .content-wrapper {
            transition: all 0.3s;
        }

        .wkt-input-container.minimized {
            width: 40px;
            height: 40px;
            padding: 0;
        }

        .wkt-input-container.minimized .content-wrapper {
            display: none;
        }

        .wkt-input-container.minimized .min-icon {
            display: none;
        }

        .wkt-input-container.minimized .restore-icon {
            display: inline;
        }

        #wktTextarea {
            width: 100%;
            height: 120px;
            margin-bottom: 10px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: monospace;
            resize: vertical;
            box-sizing: border-box;
        }

        .button-group {
            display: flex;
            gap: 10px;
        }

        /* 页签样式 */
        .tabs-header {
            display: flex;
            gap: 8px;
            margin-bottom: 8px;
        }
        .tab-btn {
            flex: 1;
            padding: 6px 0;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            background: #f5f5f5;
            color: #333;
            transition: background 0.2s;
        }
        .tab-btn.active { background: #337AFF; color: #fff; }
        .tab-pane { display: none; }
        .tab-pane.active { display: block; }

        /* Multi → Polygons 分割器样式 */
        .split-section {
            margin-top: 10px;
            padding: 10px;
            background: #fafafa;
            border: 1px solid #eee;
            border-radius: 6px;
        }
        .split-section .title {
            font-size: 13px;
            font-weight: 600;
            color: #333;
            margin-bottom: 6px;
        }
        .split-section .desc {
            font-size: 12px;
            color: #666;
            margin-bottom: 8px;
        }
        #multiInput, #polyOutput {
            width: 100%;
            height: 90px;
            margin-bottom: 8px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: monospace;
            resize: vertical;
            box-sizing: border-box;
        }
        .split-actions {
            display: flex;
            gap: 8px;
            margin-bottom: 8px;
        }
        .split-actions button {
            flex: 1;
            padding: 6px 0;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            transition: background 0.2s;
        }
        #splitMultiBtn { background: #337AFF; color: #fff; }
        #splitMultiBtn:hover { background: #2860E0; }
        #copyPolysBtn { background: #f5f5f5; color: #333; }
        #copyPolysBtn:hover { background: #e0e0e0; }
        #drawButton,
        #clearButton,
        #drawTrackButton,
        #clearTrackButton {
            width: 50%;
            padding: 8px 0;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.2s;
        }

        #drawButton,
        #drawTrackButton {
            background: #337AFF;
            color: white;
        }

        #drawButton:hover,
        #drawTrackButton:hover {
            background: #2860E0;
        }

        #clearButton,
        #clearTrackButton {
            background: #f5f5f5;
            color: #333;
        }

        #clearButton:hover,
        #clearTrackButton:hover {
            background: #e0e0e0;
        }

        #drawButton:disabled,
        #clearButton:disabled,
        #drawTrackButton:disabled,
        #clearTrackButton:disabled {
            background: #e0e0e0;
            color: #999;
            cursor: not-allowed;
        }

        .tip {
            font-size: 12px;
            color: #666;
            margin-bottom: 8px;
            line-height: 1.4;
        }

        .area-label {
             position: absolute;
             background: rgba(255, 0, 0, 0.85);
             border: 1px solid #000;
             border-radius: 3px;
             padding: 4px 6px;
             font-size: 12px;
             color: #fff;
             font-weight: 600;
             box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
             white-space: nowrap;
             z-index: 9999;
             pointer-events: none;
         }
         /* 默认隐藏标签容器下的标签 */
          .labels-hidden .area-label { display: none; }

          /* Batch → Generator 样式 */
          .batch-section { margin-top: 10px; padding: 10px; background: #fafafa; border: 1px solid #eee; border-radius: 6px; }
          .batch-section .title { font-size: 13px; font-weight: 600; color: #333; margin-bottom: 6px; }
          .batch-section .desc { font-size: 12px; color: #666; margin-bottom: 8px; }
          #batchInput, #multiOutput { width: 100%; height: 90px; margin-bottom: 8px; padding: 8px; border: 1px solid #ddd; border-radius: 4px; font-family: monospace; resize: vertical; box-sizing: border-box; }
          .batch-actions { display: flex; gap: 8px; margin-bottom: 8px; }
          .batch-actions button { flex: 1; padding: 6px 0; border: none; border-radius: 4px; cursor: pointer; font-size: 13px; transition: background 0.2s; }
          #generateMultiBtn { background: #337AFF; color: #fff; }
          #generateMultiBtn:hover { background: #2860E0; }
          #copyMultiBtn { background: #f5f5f5; color: #333; }
          #copyMultiBtn:hover { background: #e0e0e0; }
          
          /* 左侧工具条样式 */
          #leftToolbar {
              position: absolute;
              bottom: 20px;
              left: 20px;
              z-index: 1000;
              background: white;
              border-radius: 4px;
              box-shadow: 0 1px 4px rgba(0, 0, 0, 0.15);
              padding: 6px 0;
              display: flex;
              flex-direction: column;
              gap: 2px;
              width: 40px;
          }
          
          .toolbar-btn {
              width: 100%;
              padding: 6px 0;
              border: none;
              background: transparent;
              cursor: pointer;
              font-size: 12px;
              color: #333;
              transition: background 0.2s;
              display: flex;
              flex-direction: column;
              align-items: center;
              justify-content: center;
          }
          
          .toolbar-btn:hover {
              background: #f5f5f5;
          }
          
          .toolbar-btn span {
              font-size: 12px;
              margin-top: 4px;
          }
          
          .toolbar-divider {
            height: 1px;
            background-color: #e0e0e0;
            margin: 2px 4px;
        }
        
        /* 颜色选择器样式 */
        .color-picker-container {
            margin-top: 10px;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 4px;
            border: 1px solid #e0e0e0;
        }
        
        .color-picker-title {
            font-size: 13px;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }
        
        .color-picker-row {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .color-picker-label {
            font-size: 12px;
            color: #555;
            width: 60px;
            flex-shrink: 0;
        }
        
        .color-picker {
            width: 30px;
            height: 30px;
            border: 1px solid #ccc;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 8px;
            flex-shrink: 0;
        }
        
        .color-input {
            flex: 1;
            padding: 4px 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 12px;
            font-family: monospace;
        }
        
        .opacity-slider-container {
            display: flex;
            align-items: center;
            margin-top: 8px;
        }
        
        .opacity-slider {
            flex: 1;
            margin-right: 8px;
        }
        
        .opacity-value {
            font-size: 12px;
            color: #555;
            width: 40px;
            text-align: right;
        }
      </style>
    <script src="https://api.tianditu.gov.cn/api?v=4.0&tk=648f621977051d0199ff0f965d3fd322"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/Turf.js/6.5.0/turf.min.js"></script>
    <script src="https://lib.baomitu.com/terraformer/1.0.12/terraformer.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://unpkg.com/terraformer-wkt-parser@1.2.1/terraformer-wkt-parser.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- 已移除动态备用加载器 ensureTerraformer：改为仅使用静态脚本标签加载 Terraformer 核心库与 WKT 解析器 -->
    <script>
        // 检查Turf.js是否加载成功
        window.addEventListener('load', function () {
            if (typeof turf === 'undefined') {
                console.warn('Turf.js加载失败，已启用备用面积算法');
            } else {
                console.log('Turf.js加载成功');
            }
        });
    </script>
</head>

<body>
<!-- 左侧工具条 -->
<div id="leftToolbar">
    <button class="toolbar-btn" id="measureDistanceBtn" title="测距">
        <span>测距</span>
    </button>
    <div class="toolbar-divider"></div>
    <button class="toolbar-btn" id="measureAreaBtn" title="测面">
        <span>测面</span>
    </button>
    <div class="toolbar-divider"></div>
    <button class="toolbar-btn" id="mapTypeBtn" title="切换地图类型">
        <span>地图</span>
    </button>
</div>

<div id="mapContainer">
    <div id="mapLoading">
        <div class="loading-text">地图正在加载中...</div>
    </div>
</div>

<div class="wkt-input-container">
    <div class="minimize-btn" id="minimizeBtn">
        <span class="min-icon">−</span>
        <span class="restore-icon" style="display:none;">+</span>
    </div>

    <div class="content-wrapper">
        <div class="tabs-header">
            <button class="tab-btn active" id="tabDrawBtn">轮廓</button>
            <button class="tab-btn" id="tabTrackBtn">轨迹</button>
            <button class="tab-btn" id="tabSplitBtn">分割器</button>
            <button class="tab-btn" id="tabBatchBtn">合并器</button>
        </div>
        <div class="tab-pane active" id="tabDraw">
            <div class="tip">请输入WKT字符串（支持POLYGON/MULTIPOLYGON）：</div>
            <textarea id="wktTextarea">MULTIPOLYGON (((124.48103632498962 45.33639522349582, 124.48103630777986 45.336395265368196, 124.48103627943934 45.33639530411222, 124.4810362410329 45.33639533827209, 124.48103619400383 45.3363953665643, 124.4810361401191 45.33639538792578, 124.48103608140326 45.33639540155391, 124.4810360200626 45.33639540693663, 124.48103595840195 45.336395403871656, 124.48103589873823 45.336395392474195, 124.48103584331305 45.336395373172465, 124.48103579420902 45.336395346691745, 124.48103575327124 45.336395314026966, 124.4810339441846 45.336393552189165, 124.48103392351129 45.33639353572986, 124.48103165480013 45.33639205199637, 124.4810316299713 45.33639203869733, 124.48102899446961 45.33639089559427, 124.48102896643914 45.3363908859665, 124.48102606540502 45.33639012741265, 124.48102603524997 45.336390121826206, 124.48102298014372 45.33638977696586, 124.48102294902306 45.33638977563547, 124.48101985722468 45.33638985771847, 124.48101982633388 45.33638986069518, 124.48101681663279 45.336390366567834, 124.48101678723226 45.336390373719404, 124.4810139474975 45.336391294113184, 124.4809629489949 45.3364122946009, 124.4809605844672 45.33641348678228, 124.48096056230358 45.336413500295585, 124.48095854780588 45.3364149780423, 124.48095852953072 45.33641499419316, 124.48095693336724 45.336416707399636, 124.48095691960089 45.33641672563985, 124.4809557958928 45.33641861621621, 124.4809557871022 45.33641863592681, 124.48095517395245 45.33642063976752, 124.48095517043494 45.336420660281924, 124.4809550886337 45.33642270944176, 124.48095509050903 45.33642273006298, 124.4809555428299 45.33642475506027, 124.48095555001655 45.336424775039134, 124.48095653219633 45.33642672641359, 124.48097536261066 45.33645546824641, 124.48100321853491 45.336504213281756, 124.48100463836468 45.336506134166235, 124.48100465527521 45.33650615245001, 124.48100657567008 45.33650784303979, 124.48100659728094 45.336507858667716, 124.48100666688727 45.33650790005615, 124.48100670419842 45.33650792625031, 124.48100673489071 45.33650795641699, 124.48100675812758 45.33650798973401, 124.48107816769746 45.336636123471536, 124.48107957645605 45.336638066564454, 124.48107959330467 45.33663808506902, 124.48107989650215 45.33663835552364, 124.4810799240766 45.33663838448173, 124.48107994497036 45.33663841609871, 124.48112020023629 45.33671418415658, 124.48119112225568 45.33683904713346, 124.48130518980409 45.33705627153562, 124.48130520304548 45.337056304096826, 124.48130520920296 45.33705633769129, 124.48130859727623 45.33710122983284, 124.48130859415664 45.33710127534863, 124.48130857809244 45.33710131948666, 124.48130854974328 45.33710136043501, 124.48130851027283 45.33710139651269, 124.4813084613015 45.33710142623868, 124.4812782216909 45.33711630605049, 124.48127816935657 45.33711632692777, 124.48127811239613 45.33711634050573, 124.48127805283431 45.33711634630168, 124.48127799278876 45.33711634410956, 124.48127793439387 45.337116334007305, 124.4812778797256 45.33711631635404, 124.48127783072734 45.33711629177735, 124.48127778914109 45.33711626115088, 124.48127775644511 45.33711622556342, 124.48121456542039 45.33703073180761, 124.4812145548364 45.33703071602174, 124.48121266266843 45.33702758475863, 124.48121121234307 45.33702570685564, 124.481211195218 45.33702568900861, 124.48120926259746 45.33702404134253, 124.48120924094984 45.337024026133726, 124.48120689731607 45.337022669465945, 124.48120687194452 45.33702265745663, 124.48120420376613 45.33702164184137, 124.48120417560695 45.33702163347476, 124.48120128132686 45.33702099638336, 124.4812012514193 45.337020991968245, 124.48119823782238 45.33702075690628, 124.48119820726964 45.33702075660547, 124.48119518554357 45.337020932245665, 124.48119515547275 45.337020936070275, 124.48119223710462 45.33702151593234, 124.48119220862537 45.33702152374128, 124.481189501289 45.337022486431025, 124.48118947545213 45.33702249793613, 124.48118707903542 45.337023807934855, 124.48118705679354 45.33702382271208, 124.48118505971311 45.33702543168682, 124.48118504188731 45.33702544919072, 124.48118351782506 45.337027297778725, 124.48118350507396 45.33702731736239, 124.48118251026065 45.3370293373598, 124.48118250305369 45.33702935830168, 124.4811820741938 45.33703147517924, 124.48118207279691 45.33703149670749, 124.48118222571317 45.337033632362505, 124.48118223016691 45.337033653628396, 124.48118296798854 45.337035749956584, 124.48118396738 45.337037747063256, 124.48118486630126 45.33703920522908, 124.48118570122129 45.3370403348298, 124.48118571184206 45.337040350676624, 124.48124733756184 45.33714241551416, 124.48124883325407 45.337144340425986, 124.48124885096284 45.33714435867953, 124.48125085309182 45.337146039200064, 124.48125087553555 45.33714605464899, 124.48125330626866 45.33714742544881, 124.48125333257431 45.3371474374918, 124.4812560974168 45.33714844528117, 124.48125612656095 45.33714845344975, 124.48125911802924 45.337149059050674, 124.48125914887923 45.337149063027475, 124.48126225067884 45.337149242896906, 124.48126228203573 45.337149242527374, 124.48126537358343 45.33714898967287, 124.48126540422803 45.33714898497135, 124.48126566431166 45.33714892561823, 124.481265726691 45.33714891611633, 124.48126579050383 45.33714891556477, 124.48126585319456 45.33714892398567, 124.48126591225247 45.337148941041775, 124.48126596531245 45.33714896604999, 124.4812660102495 45.33714899800879, 124.48126604526375 45.33714903563826, 124.48126952168296 45.33715373901997, 124.48126953381556 45.33715375741396, 124.48130208112951 45.33720955283734, 124.48130209788579 45.337209590798565, 124.4813021049025 45.337209630247564, 124.481302201808 45.33721151269947, 124.48130220609612 45.33721153481045, 124.4813029390835 45.337213688521146, 124.48130294949355 45.337213709596654, 124.48130427251121 45.3372157183421, 124.48130428863034 45.33721573754624, 124.48130614931011 45.33721752181506, 124.48130617050077 45.337217538388565, 124.48130849519139 45.33721902755402, 124.48130852061571 45.33721904084129, 124.48131121729888 45.33722017595796, 124.48131124594998 45.337220185432614, 124.48131420788467 45.337220921570044, 124.48131423862799 45.337220926856865, 124.48131734857253 45.337221234876665, 124.4813173801911 45.33722123576642, 124.48132051504581 45.33722110347628, 124.48132054628836 45.337221099933814, 124.4813235819667 45.33722053257014, 124.4813236115964 45.337220524735706, 124.48132642793793 45.3372195447563, 124.48132645478246 45.33721953293984, 124.48132894030853 45.33721817913509, 124.48132896324752 45.33721816384274, 124.48133103906787 45.337216472243725, 124.48133203785112 45.33721547152844, 124.48133359399941 45.33721352682528, 124.48133360681297 45.337213506221566, 124.48133410139094 45.337212428025005, 124.48133411931916 45.337212397033, 124.48134427921659 45.337198001448456, 124.48134537372843 45.337195978378155, 124.48134538189464 45.337195957331225, 124.48134590041754 45.33719382310467, 124.48134590265238 45.337193801342266, 124.4813458255734 45.33719163669327, 124.48134582179235 45.33719161503634, 124.48134543702379 45.33719040104975, 124.48134542937358 45.33719035508273, 124.48134543522636 45.33719030898457, 124.48136283092146 45.33712732454745, 124.4813628494446 45.337127281256365, 124.4813628798722 45.33712724145357, 124.4813629209741 45.33712720674806, 124.48136297108886 45.33712717854277, 124.48136302819064 45.33712715797787, 124.48136308997111 45.33712714588467, 124.481363153933 45.337127142752045, 124.48136321749048 45.33712714870661, 124.48136327807451 45.337127163507645, 124.48136333323589 45.33712718655688, 124.48136338074492 45.33712721692254, 124.48136341868097 45.33712725337712, 124.48136344551058 45.33712729444699, 124.48137110808221 45.33714301843003, 124.48145505373788 45.337297918226284, 124.48149513459619 45.33737606707704, 124.48157800119267 45.33752682445091, 124.48160988794523 45.337593586664696, 124.48161021275673 45.33759420651568, 124.48164600732058 45.33765684703089, 124.48164601462726 45.33765686116318, 124.48167802442 45.33772586097475, 124.48180902092854 45.33797885435918, 124.48190501353041 45.33814885426313, 124.48190501978944 45.33814886634113, 124.48192212079488 45.33818504228271, 124.48195812172702 45.33825104309037, 124.48195883443518 45.338252162366935, 124.48197730089963 45.3382773998848, 124.48197732338322 45.33827743940169, 124.4819958414554 45.33832172177522, 124.48199585387285 45.338321771515375, 124.48199585023967 45.33832182195556, 124.4819958307392 45.3383218705522, 124.48199472709345 45.33832377326386, 124.48199471816964 45.3383237943481, 124.48199412781412 45.338325937827996, 124.48199412489727 45.338325959735045, 124.48199413914348 45.33832814325461, 124.4819941423379 45.33832816508679, 124.48199476839731 45.338330326080154, 124.48200193053961 45.33834667512991, 124.48207392666559 45.33849366729952, 124.48207440623703 45.338494530527136, 124.48217507305984 45.33865599619157, 124.48217508450398 45.33865601738916, 124.48219182952384 45.33869246245328, 124.48219224407791 45.338693261360596, 124.48236613641156 45.33899307586279, 124.48244204179161 45.33913789502998, 124.48250718002716 45.33924915235547, 124.48255204700976 45.33933190697479, 124.48261585033384 45.33945751983429, 124.48261585537638 45.33945753061073, 124.48262959639365 45.339489593005744, 124.48262960953603 45.339489645529824, 124.48262960477182 45.33948969875949, 124.4826243165432 45.33950997626194, 124.48262405762596 45.33951215099535, 124.48262405807525 45.33951217298431, 124.48262440572363 45.339514341548565, 124.48262441224723 45.33951436305398, 124.48262535310063 45.339516442117485, 124.48262536544806 45.33951646231242, 124.48262686335006 45.33951837197867, 124.48262688104637 45.33951839008636, 124.48262887843391 45.33952005696819, 124.48262890079876 45.33952007229287, 124.48263132091336 45.33952143233278, 124.48263134708763 45.33952144428584, 124.48263409692537 45.3395224452179, 124.48263412590367 45.33952245334019, 124.48263709978932 45.33952305669914, 124.48263713045776 45.33952306067833, 124.482640214107 45.33952324327752, 124.48264024528679 45.339523242960695, 124.48264332019654 45.339522997782915, 124.4826433506896 45.339522993182264, 124.48264629869315 45.33952232964951, 124.48264632732712 45.339522320941974, 124.4826490351338 45.33952126455351, 124.48264906080935 45.33952125207338, 124.48265142435923 45.33951984342591, 124.48265144608958 45.339519827652616, 124.48265337455312 45.33951812087969, 124.48265339150244 45.33951810241991, 124.48265481077061 45.33951616311106, 124.4826548222586 45.33951614272564, 124.48265568497001 45.33951402392584, 124.48265968177375 45.33949870283089, 124.4826596992957 45.33949866003862, 124.48265972843139 45.33949862052072, 124.48265976803839 45.33949858582709, 124.48265981656307 45.33949855731838, 124.48265987210239 45.33949853611273, 124.48265993247816 45.33949852304178, 124.48265999532235 45.33949851861824, 124.48266005817018 45.33949852301558, 124.48266011855691 45.339498536061306, 124.48266017411397 45.339498557243786, 124.48266022266264 45.33949858573223, 124.4826602622987 45.33949862040935, 124.48266029146754 45.339498659915094, 124.4826603090253 45.33949870270003, 124.4826606759312 45.339500104513256, 124.48266068457004 45.33950012564435, 124.48266182917351 45.33950215324616, 124.48266184349167 45.33950217278227, 124.4826635269931 45.33950400394271, 124.4826635464398 45.33950402113291, 124.48266570414305 45.33950558548098, 124.48266572797196 45.33950559966569, 124.48266827695731 45.3395068370842, 124.4826683042527 45.33950684771799, 124.48267114656385 45.33950771065372, 124.48267117627658 45.339507717327784, 124.48267420268583 45.33950817261885, 124.48267423367342 45.339508175076546, 124.48267732787741 45.339508205226316, 124.48267735894936 45.33950820337332, 124.48268040203939 45.33950780722308, 124.48268043200177 45.339507801130615, 124.48268330703334 45.33950699390423, 124.48268333473467 45.33950698380639, 124.48268593122208 45.33950579652513, 124.48268595559767 45.33950578281008, 124.48268817375954 45.339504261100274, 124.48268819387233 45.33950424429539, 124.48268994846599 45.339502446635436, 124.48268996350582 45.33950242743442, 124.48269119806373 45.33950040223922, 124.48270519663367 45.33946940166042, 124.48270584979456 45.33946721878507, 124.48270585321781 45.33946719643619, 124.48270587611646 45.3394649655492, 124.48270587315255 45.33946494316844, 124.4827052648706 45.33946275385615, 124.48270525566161 45.339462732395106, 124.48270402688652 45.3394606522023, 124.4827028186105 45.339459072149964, 124.48270279441307 45.33945903134501, 124.48270278200677 45.339458987989396, 124.48270278187152 45.339458943759844, 124.4827027940125 45.3394589003669, 124.48270281796013 45.33945885948873, 124.48270285278828 45.33945882270626, 124.48270289715005 45.33945879144202, 124.48270294932972 45.33945876690513, 124.48270300730933 45.3394587500445, 124.48270306884659 45.33945874151224, 124.4827031315616 45.33945874163832, 124.48270319302883 45.33945875041783, 124.48270325087125 45.33945876751126, 124.4827048192268 45.33945936501444, 124.48270484798313 45.33945937351989, 124.48270780523703 45.339460016245255, 124.48270783579373 45.33946002063079, 124.48271091402039 45.33946024412786, 124.48271094520288 45.33946024422495, 124.48271402610789 45.3394600399048, 124.48271405671795 45.33946003570974, 124.48271702190364 45.33945941142427, 124.48271705076536 45.3394594030982, 124.48271978628078 45.3394583828385, 124.48271981228471 45.33945837070146, 124.48272221300623 45.33945699367539, 124.48272223509778 45.33945697823229, 124.48272422753037 45.3394552796971, 124.48276822641262 45.339409278815126, 124.48276972855476 45.339407305542196, 124.48276974077721 45.33940728468746, 124.48277065247544 45.33940513930422, 124.4827706585317 45.33940511714626, 124.48277094288814 45.33940288648157, 124.48277094253288 45.33940286391637, 124.4827705880388 45.33940063825333, 124.48277058128669 45.33940061619515, 124.48276960228971 45.33939848561261, 124.48276958941362 45.339398464953916, 124.48276802553715 45.33939651568431, 124.48276800705867 45.33939649726161, 124.48276592159762 45.33939480819793, 124.48276589826472 45.33939479275662, 124.48276337562481 45.33939343226119, 124.48276334838158 45.339393420426056, 124.48276049066273 45.33939244356271, 124.48276046061204 45.33939243581283, 124.4827573834754 45.33939188211849, 124.48275735191184 45.33939187877578, 124.48275414778128 45.33939177069628, 124.48273210531785 45.339392587084255, 124.48273204269286 45.339392585051975, 124.48273198184177 45.339392574418774, 124.48273192511596 45.339392555595545, 124.48269691082233 45.33937781273945, 124.48269686170168 45.339377787270216, 124.4826968203512 45.33937775567396, 124.48269678828224 45.33937771910546, 124.48269676666689 45.33937767890127, 124.48269675629518 45.33937763653078, 124.48269675754617 45.3393775935426, 124.4826967703741 45.3393775515079, 124.48269679431014 45.33937751196299, 124.48269682847948 45.33937747635319, 124.48269820308094 45.33937630334942, 124.48269822024822 45.33937628542737, 124.48269967274062 45.339374399529405, 124.4826996847127 45.339374379617226, 124.48270059710488 45.33937233220614, 124.48270060343688 45.33937231104397, 124.48270094182118 45.339370178208746, 124.48270094227773 45.339370156583506, 124.4827006940782 45.33936801758916, 124.48270068865581 45.339367996356394, 124.48269985334237 45.3393659101115, 124.48245585969286 45.338923921822676, 124.48235483911121 45.338748882685465, 124.48231378146951 45.33867278291296, 124.48222378395877 45.33851578732588, 124.48217085351078 45.33842889475682, 124.48217084613408 45.33842888150554, 124.48212508350177 45.33833835092645, 124.4820761468211 45.3382334866696, 124.48202692212627 45.338135037214855, 124.48188173302233 45.33786292802504, 124.481881717064 45.33786288635762, 124.48188171268504 45.33786284330758, 124.4818817200467 45.337862800460314, 124.48188173887783 45.33786275939377, 124.48188176848483 45.337862721620304, 124.48188180777761 45.337862688531025, 124.48188185530894 45.337862661344516, 124.4818819093284 45.33786264106195, 124.48188196784652 45.33786262843032, 124.48188202870848 45.3378626239148, 124.48188208967274 45.33786262768167, 124.4818821484942 45.337862639592224, 124.48188220300659 45.3378626592078, 124.48188225120235 45.33786268580605, 124.48188229130672 45.33786271840741, 124.48188395360098 45.337864365759444, 124.48188397374918 45.33786438211768, 124.48188618600621 45.33786586161012, 124.48188621023813 45.33786587493198, 124.48188878450544 45.33786702689477, 124.4818888119164 45.337867036682695, 124.48189165216577 45.337867818143955, 124.48189168173323 45.337867824032976, 124.48189468201446 45.3378682058417, 124.48189471263547 45.33786820761214, 124.4818977610281 45.33786817552553, 124.48189779156064 45.33786817311139, 124.48190077434957 45.33786772832644, 124.4819008036548 45.33786772181773, 124.48190360957265 45.33786688092635, 124.48190363655736 45.33786687056581, 124.48190616093467 45.33786566493583, 124.48190618459132 45.33786565111039, 124.48190681263561 45.337865205245805, 124.48190686328952 45.33786517600763, 124.48190692134094 45.33786515467936, 124.48190698434391 45.337865142159586, 124.48190704964414 45.33786513897577, 124.4819071144906 45.337865145262036, 124.48190717615117 45.33786516075355, 124.48190723202792 45.33786518479764, 124.48190727976699 45.33786521638132, 124.48190731735696 45.33786525417393, 124.48190908130614 45.33786748393717, 124.48191082524752 45.33786926001713, 124.48191084520103 45.33786927662805, 124.48191304264041 45.33787078168671, 124.48191306676705 45.33787079526686, 124.48191426207293 45.33787134325328, 124.48191431394564 45.33787137291618, 124.48191435592169 45.33787140954771, 124.4819143861601 45.33787145154148, 124.48205603002113 45.338132874832695, 124.48209892207785 45.338218658844625, 124.4821758850529 45.33838057994492, 124.48217654107481 45.33838174064809, 124.48222843900938 45.338460585617504, 124.48226720785654 45.338524206687396, 124.48234716966665 45.338674130869066, 124.48243608222035 45.33883297471863, 124.48249620585482 45.33895019504046, 124.48258206665565 45.33910095070141, 124.48264987687533 45.33923756772629, 124.48268381827043 45.33931243466371, 124.48268504499654 45.33931443823903, 124.4826850601049 45.33931445747739, 124.48268681750083 45.33931625377141, 124.48268683764027 45.33931627056099, 124.48268905817191 45.33931779054512, 124.4826890825689 45.33931780424131, 124.48269168090198 45.33931898950315, 124.48269170861921 45.33931899957951, 124.48269458490131 45.339319804570124, 124.48269461487298 45.33931981063929, 124.48269765857037 45.33932020442337, 124.48269768964495 45.339320206252204, 124.48270078378975 45.33932017369678, 124.48270081477347 45.339320171214986, 124.48270384045932 45.33931971357117, 124.48270387016095 45.339319706874164, 124.48270671111264 45.339318841728904, 124.48270673839096 45.339318831073996, 124.48270928543201 45.33931759167448, 124.48270930923879 45.33931757747117, 124.48271146448769 45.33931601144685, 124.48271148390826 45.339315994240714, 124.48271316454046 45.33931416177289, 124.48271317882795 45.339314142225646, 124.48271432025736 45.339312113735026, 124.48271432886304 45.33931209259778, 124.48271488722536 45.33930994603817, 124.48271488981848 45.33930992412306, 124.48271484365627 45.33930774198535, 124.4827148401461 45.3393077201895, 124.48271418318818 45.33930556499659, 124.48269106963154 45.33925458856504, 124.48269105665375 45.33925454628107, 124.48269105539569 45.33925450302698, 124.48269106590415 45.339254460403254, 124.48269108779 45.339254419987085, 124.48269112024359 45.33925438327399, 124.48269116206401 45.33925435162242, 124.48269121170385 45.33925432620357, 124.48269126732619 45.33925430795799, 124.48269132687301 45.33925429756079, 124.48269138814082 45.339254295396735, 124.48269144886264 45.33925430154588, 124.48269150679164 45.33925431578067, 124.48269155978429 45.33925433757442, 124.48269160587971 45.33925436612068, 124.48269164337219 45.33925440036318, 124.48269167087459 45.33925443903488, 124.48269705594987 45.33926427294602, 124.4827199445419 45.33931070156492, 124.48272105098143 45.33931244638905, 124.48272106420455 45.339312463199285, 124.48272259378449 45.339314064383025, 124.48273859418228 45.339328063543796, 124.48274036583504 45.33932937829726, 124.48274038512437 45.33932939045457, 124.48274245731766 45.33933049533304, 124.4827714600977 45.33934349534596, 124.48277416705636 45.33934446483372, 124.48277419554242 45.33934447270859, 124.48277545136412 45.339344724765894, 124.48277550567491 45.33934473956384, 124.4827755552656 45.33934476107893, 124.48277559848347 45.33934478859397, 124.48277638486206 45.33934538984385, 124.48277640814844 45.33934540446902, 124.48277890968556 45.33934668913886, 124.48277893657149 45.33934670027962, 124.48278174541616 45.33934761608604, 124.48278177486668 45.339347623313465, 124.48278478307735 45.33934813506279, 124.48278481396144 45.33934813809935, 124.48278790593379 45.33934822612522, 124.48278793706446 45.33934822485418, 124.48279099397574 45.33934788577382, 124.4827910241566 45.33934788024403, 124.48279392853111 45.339347127088175, 124.4827939566028 45.339347117512006, 124.48279659682723 45.339345979223985, 124.48279662171004 45.33934596596981, 124.48279889632218 45.339344486293356, 124.48279891706062 45.33934446987016, 124.48280073864835 45.339342705668294, 124.48280075444487 45.33934268670773, 124.48280205300534 45.33934070577824, 124.48280206325373 45.33934068500767, 124.48280278888419 45.33933856347656, 124.48280279317915 45.33933854174973, 124.48280291773581 45.33933633907641, 124.48279780404727 45.33927404535558, 124.48279780674228 45.339274000437136, 124.48279782205152 45.339273956794166, 124.4827978493633 45.33927391617062, 124.48279788758616 45.339273880189815, 124.48279793519295 45.33927385028949, 124.48279799028107 45.339273827664464, 124.48279805064948 45.3392738132188, 124.48279811388578 45.33927380752976, 124.48279817746305 45.33927381082467, 124.48279823884084 45.33927382297185, 124.4827982955665 45.33927384348592, 124.48279834537331 45.33927387154716, 124.48279838627103 45.33927390603423, 124.4827984166254 45.339273945569076, 124.48281229677704 45.33929734855795, 124.48281374400918 45.33929924783424, 124.48281376115291 45.33929926588783, 124.48281570037189 45.33930093278886, 124.48281572212942 45.33930094817363, 124.48281808059637 45.33930232017628, 124.4828181061508 45.339302332314524, 124.48282079539742 45.33930335795377, 124.48282082379029 45.339303366390254, 124.48282374293986 45.33930400719323, 124.48282377310606 45.33930401161148, 124.4828268126584 45.33930424354092, 124.48282684346624 45.33930424377524, 124.48282988940414 45.33930405813121, 124.48282991969842 45.339304054172814, 124.4828328577652 45.33930345791902, 124.48283288640934 45.3393034499164, 124.4828356063953 45.33930246541894, 124.48283563231459 45.339302453672374, 124.48283803219016 45.33930111786071, 124.48283805441234 45.33930110281091, 124.48284004415537 45.3392994657928, 124.48284006184718 45.33929944800414, 124.48284156682011 45.339297571186215, 124.4828415793182 45.339297551325615, 124.482842543068 45.339295505109185, 124.4828425499029 45.33929548392247, 124.48284293627843 45.33929334506282, 124.48284293719414 45.33929332334467, 124.48284273170206 45.33929117207286, 124.4828427266769 45.3392911506911, 124.48284192761433 45.339289046933516, 124.48279875545602 45.33920773635225, 124.4827987383254 45.33920768886963, 124.48279873618101 45.33920763989748, 124.48279894114962 45.33920579679104, 124.48279894056088 45.33920577499422, 124.48279858446395 45.33920362636322, 124.48279857790946 45.33920360505902, 124.4827976393257 45.3392015455618, 124.48279762705275 45.33920152555367, 124.48279614142186 45.339199632954795, 124.4827961238941 45.3391996149987, 124.48279414731243 45.339197960761226, 124.48279412519129 45.339197945534586, 124.48279283968172 45.33919721845546, 124.4827928001408 45.33919719185942, 124.48279276761798 45.339197160893335, 124.4827927430681 45.33919712646625, 124.48262886562168 45.33890793104419, 124.48255176564608 45.3387637553909, 124.48240276966278 45.33850576246099, 124.48232390892595 45.338383953670785, 124.48232389519627 45.33838392859686, 124.48227204862788 45.33826928269061, 124.48214205219438 45.338007290017195, 124.48206991476536 45.33787901955804, 124.4820268109463 45.33779483507301, 124.48196621164875 45.337687544563856, 124.48196619866782 45.33768751626774, 124.48195740456629 45.337662892809554, 124.48195739547775 45.337662851320566, 124.48195739748041 45.33766280936311, 124.48195741050432 45.337662768399085, 124.4819575670436 45.3376624284865, 124.48195757369108 45.3376624071933, 124.48195793909201 45.337660259003464, 124.48195793977413 45.33766023720591, 124.48195770911207 45.33765807973828, 124.48195770381618 45.337658058312314, 124.481956876105 45.33765595228363, 124.4819508744051 45.33764495234002, 124.48194944283627 45.33764295456347, 124.48194942561665 45.337642935559906, 124.48194745632999 45.337641180150754, 124.48194743406793 45.33764116396069, 124.48194500667086 45.33763972187692, 124.48194498026575 45.3376397091546, 124.48194219289236 45.337638638696134, 124.48194216341253 45.337638629956444, 124.48194072263621 45.337638318715555, 124.48194065608385 45.33763829824167, 124.48194059782325 45.33763826768098, 124.48194055087473 45.33763822861779, 124.48192466200697 45.33762145704263, 124.48192463247926 45.33762141805703, 124.48192461433243 45.337621375751525, 124.48192460826724 45.33762133175996, 124.48192461451802 45.33762128778132, 124.48192463284317 45.33762124551408, 124.48192466253522 45.33762120659061, 124.4819247024473 45.33762117251417, 124.48192475103801 45.3376211446008, 124.48192480643078 45.33762112392854, 124.48192548319213 45.33762092869311, 124.48192551158093 45.337620918024534, 124.48192816295285 45.33761966360151, 124.48192818771673 45.33761964912239, 124.4819304269456 45.33761804408139, 124.4819304470723 45.33761802638351, 124.48193218255115 45.337616136387034, 124.48193219721642 45.33761611619518, 124.48193335794697 45.337614018562846, 124.48193336655133 45.33761399670261, 124.48193390504808 45.337611777248426, 124.48193390723922 45.33761175461478, 124.48193380147214 45.33760950413744, 124.48193379717145 45.33760948171155, 124.4819330423568 45.33760727042233, 124.48185380613046 45.337447826722, 124.48172117447055 45.33721347765817, 124.48172116235129 45.337213451794796, 124.48171241030292 45.337190115989, 124.48171154320606 45.33718839168411, 124.48171153249311 45.337188374904045, 124.48171026306105 45.33718675824035, 124.4816824302215 45.337157288186184, 124.48168239153895 45.33715723123783, 124.48166419820971 45.33711660323511, 124.48166294729403 45.337114552710894, 124.48166293181616 45.337114533044975, 124.48166112600806 45.33711269975575, 124.48166110527909 45.33711268266367, 124.48165881718202 45.33711114031655, 124.48165879203405 45.33711112648433, 124.48165611364368 45.337109937091284, 124.48165608508923 45.33710992707581, 124.481653124093 45.33710913845764, 124.48165309327955 45.337109132661304, 124.48164996872833 45.337108776525554, 124.48164993689467 45.33710877518137, 124.48164677441483 45.33710886584687, 124.48164674284091 45.337108869008894, 124.48164366958329 45.337109402830436, 124.48164363953904 45.33710941037137, 124.48164077906806 45.33711036588599, 124.48164075176074 45.33711037750284, 124.4816382190852 45.33711171629293, 124.48163819561293 45.33711173151854, 124.48163609256225 45.337113399756184, 124.48163607386859 45.33711341797868, 124.48163448499831 45.33711534859054, 124.48163447183526 45.337115369076635, 124.48163346102763 45.33711748444084, 124.48163345392445 45.33711750636672, 124.48163333391594 45.337118184316125, 124.48163331923386 45.33711822919309, 124.48163329189794 45.3371182710198, 124.48163325305447 45.337118308042285, 124.48163320433244 45.33711833870806, 124.48163314777479 45.33711836173115, 124.48163308575343 45.337118376146144, 124.48163302086895 45.33711838134854, 124.4816329558424 45.337118377120184, 124.48163289340049 45.337118363638375, 124.4816328361617 45.33711834146848, 124.48163278652626 45.337118311540166, 124.48162172999473 45.337110121515806, 124.48162168449106 45.33711007853225, 124.48160656245568 45.33709152881404, 124.48160653525862 45.33709148540771, 124.48160652158052 45.33709143894294, 124.48160555741048 45.33708459335714, 124.48160555845485 45.3370845424303, 124.4816055757195 45.33708449297506, 124.48161613951393 45.337064387680975, 124.48161616560766 45.3370643495083, 124.48161620139102 45.33706431546538, 124.48161624559353 45.33706428676082, 124.48161629664604 45.33706426441368, 124.48161635273594 45.33706424921734, 124.48161641187205 45.33706424171133, 124.48161647195477 45.33706424216211, 124.48161653085104 45.3370642505537, 124.48161658646988 45.337064266588136, 124.48161698032128 45.33706441204479, 124.48161700862238 45.337064420161255, 124.4816199135727 45.33706503162941, 124.4816199435517 45.33706503578042, 124.481622960668 45.33706524430787, 124.48162299121968 45.33706524434038, 124.48162600921421 45.337065042235544, 124.48162603921116 45.33706503814831, 124.48162894676446 45.33706443286595, 124.48162897510046 45.337064424809675, 124.48163166496597 45.3370634386758, 124.48163169059524 45.33706342694787, 124.48163406355661 45.337062096336396, 124.4816340855344 45.33706208136918, 124.4816360540634 45.33706045536036, 124.48163607157888 45.33706043770605, 124.48163756306568 45.33705857627595, 124.48163757547309 45.33705855658525, 124.48163853490352 45.337056528393866, 124.48163854174503 45.3370565073933, 124.48163893373054 45.33705438725068, 124.48163893475353 45.33705436571517, 124.48163874483558 45.33705223182385, 124.48163874001447 45.33705221060063, 124.48163796606065 45.33705012103007, 124.48146497357968 45.33671713567062, 124.48139849841061 45.3366043204079, 124.48130449253098 45.336459314165275, 124.48130287893441 45.33645737229014, 124.48130286000347 45.3364573540303, 124.48130070281118 45.33645566461374, 124.48129418653474 45.33645149420253, 124.4812941433208 45.33645146030829, 124.48129411068422 45.33645142096497, 124.48129408996525 45.336451377788585, 124.48129408201518 45.33645133255263, 124.48129408716058 45.33645128711519, 124.48129410518997 45.33645124334261, 124.48129530257724 45.336449154660116, 124.48129531146839 45.336449133127275, 124.4812958871683 45.33644693926401, 124.48129588979903 45.33644691686048, 124.48129583366969 45.33644468609175, 124.48129582992286 45.3364446638237, 124.48129513574102 45.3364424639902, 124.48122913413175 45.3363014642903, 124.4812278359813 45.33629941356434, 124.48122782001373 45.33629939393839, 124.48122596470003 45.336297568700736, 124.48122594347173 45.336297551733914, 124.48122360649829 45.33629602626336, 124.48122358087451 45.336296012647146, 124.4812208573474 45.336294849024874, 124.48122082836989 45.3362948393128, 124.48121782912756 45.33629408489427, 124.48121779797567 45.33629407948164, 124.48121464507611 45.3362937649688, 124.4812146130178 45.33629376407599, 124.48121143477233 45.33629390226833, 124.48121140311248 45.336293905931655, 124.48120832886389 45.336294491205315, 124.48120829889082 45.33629449927564, 124.48120545375026 45.336295507812146, 124.48120542668383 45.33629551996099, 124.48120292643786 45.33629691071662, 124.48120290337951 45.33629692644956, 124.48120084977975 45.33629864282525, 124.48120083166707 45.33629866150277, 124.48119930828709 45.3363006336485, 124.4811992958585 45.336300654509095, 124.48119836469448 45.33630280216579, 124.48119835847044 45.33630282430662, 124.48119805597968 45.336305082761946, 124.48119905765506 45.33641608302095, 124.48119941484207 45.3364183682276, 124.48119942179156 45.33641839086384, 124.48120043691783 45.336420575593216, 124.4812004503123 45.33642059674055, 124.48120208008423 45.33642258781768, 124.48120209930393 45.336422606526675, 124.48120429744158 45.33642433554073, 124.48126069025001 45.33646042695457, 124.48126072634659 45.336460454236395, 124.48126075555052 45.336460485352056, 124.48126077705798 45.33646051944501, 124.4812984304143 45.336536662920466, 124.48129844489871 45.33653670469872, 124.48131731829449 45.33662846865569, 124.48131732121604 45.3366285119395, 124.48131731231396 45.336628554815086, 124.4813172919189 45.33662859569084, 124.4813172607877 45.33662863304938, 124.48131722007628 45.33662866550389, 124.48131717129571 45.33662869184963, 124.48131711625682 45.3366287111086, 124.48131705700277 45.33662872256589, 124.4813169957332 45.33662872579613, 124.48131693472246 45.33662872067948, 124.4813168762355 45.33662870740584, 124.48131682244328 45.336628686467954, 124.48131677534268 45.336628658643065, 124.48131673668226 45.336628624964085, 124.481316707897 45.336628586681236, 124.48118873474982 45.3364097051794, 124.48118760626889 45.33640813874712, 124.48118759318751 45.33640812366859, 124.4811861137402 45.33640668801372, 124.48115248660727 45.336378932306125, 124.48115244820893 45.336378892746836, 124.48115242257089 45.336378848346406, 124.48115241085813 45.33637880112229, 124.48115241360291 45.33637875322019, 124.48115243068035 45.336378706816625, 124.4811526670252 45.336378264954234, 124.48115269081897 45.336378229957894, 124.48115272278945 45.33637819836779, 124.48115276198439 45.336378171124636, 124.48115280723673 45.33637814903974, 124.48115518021545 45.33637719316713, 124.48115520503427 45.33637718081401, 124.48115749054014 45.33637579481722, 124.48115751157708 45.33637577936209, 124.4811593818651 45.33637411223103, 124.48115939835299 45.33637409423747, 124.481160785223 45.33637220676424, 124.4811607965611 45.33637218688777, 124.48116164944176 45.33637014789792, 124.4811616552013 45.3363701269173, 124.4811619444489 45.3363679893997, 124.4811619430538 45.33636698951432, 124.48116166159738 45.33636489651612, 124.48116165594956 45.336364875705655, 124.48116088920118 45.33636302083567, 124.4811608772155 45.33636297340229, 124.48116087982947 45.33636292525683, 124.48116089692319 45.33636287860881, 124.48116192222999 45.336360958771174, 124.48116271737477 45.33635888493786, 124.48116272249145 45.336358863591144, 124.48116293806173 45.33635672071336, 124.48116293726974 45.33635669907117, 124.48116256525934 45.33635456688896, 124.48116255858825 45.33635454575679, 124.4811616128498 45.3363525036669, 124.48116160054802 45.33635248383188, 124.48116011629808 45.336350607875566, 124.48116009882413 45.33635059007673, 124.48115813133197 45.336348950109326, 124.48115810933659 45.33634893500918, 124.48115573186611 45.33634759209886, 124.48115570616774 45.336347580259314, 124.48115300725024 45.336346584412645, 124.48115297880547 45.33634657627452, 124.48115005894091 45.336345964573844, 124.4811500288094 45.33634596044046, 124.48114699672496 45.336345755663636, 124.48114696610537 45.33634575568887, 124.4811439042366 45.336345968613756, 124.48110790481381 45.33635096955977, 124.48110504351177 45.33635156987665, 124.48110501561455 45.336351577823066, 124.48110236574055 45.336352547344816, 124.4811023404641 45.33635255885327, 124.48109999678978 45.33635386290454, 124.48109997503755 45.33635387756357, 124.48109802138919 45.336355469502216, 124.48109800393877 45.33635548678786, 124.48109651019216 45.336357309675336, 124.4810964976681 45.336357328969115, 124.48109551724976 45.33635931760654, 124.4810955101 45.336359338218124, 124.48109507807645 45.33636142147858, 124.48109507655678 45.33636144267088, 124.48109520838005 45.33636354604215, 124.48109521254507 45.33636356705789, 124.48109556736716 45.33636461888421, 124.48109557580788 45.336364662609796, 124.48109557198036 45.33636470665612, 124.48109555603202 45.33636474932747, 124.48109552857674 45.336364788981115, 124.48109549067162 45.33636482409045, 124.48109544377584 45.336364853303806, 124.48109538969486 45.336364875496564, 124.4810953305107 45.33636488981433, 124.48108231826075 45.336367059643564, 124.48107937537854 45.33636777237868, 124.48107934687212 45.33636778158713, 124.48107665942061 45.336368887621376, 124.4810766340293 45.336368900594785, 124.48107430641997 45.33637035695423, 124.48107428513079 45.33637037318823, 124.48107240781034 45.33637212328139, 124.48107239149067 45.33637214209847, 124.48107102511449 45.33637413835008, 124.48106961071474 45.33637685834931, 124.48106958707442 45.3363768938702, 124.48106955504036 45.33637692595262, 124.4810695155878 45.33637695361998, 124.48106946991759 45.33637697603012, 124.48104405855779 45.336387249899396, 124.481041586211 45.33638848583373, 124.48104156310548 45.33638849991855, 124.48103947120468 45.336390046289374, 124.48103945234053 45.336390063229445, 124.48103781798203 45.33639186304416, 124.48103780405563 45.336391882214144, 124.48103668747794 45.33639386913597, 124.48103667900232 45.33639388982956, 124.48103632498962 45.33639522349582), (124.4827692579633 45.33931543757779, 124.48276925530001 45.3393154823398, 124.48276924010929 45.33931552584144, 124.48276921299389 45.339315566356554, 124.48276917502969 45.33931560227746, 124.48276912772324 45.33931563217884, 124.48276907295165 45.33931565487416, 124.48276901288817 45.3393156694629, 124.48276894991626 45.33931567536615, 124.4827688865346 45.33931567234966, 124.4827688252583 45.339315660533146, 124.48276876851868 45.33931564038549, 124.48276181240081 45.339312522124914, 124.48276177096878 45.33931250001512, 124.48276173517735 45.33931247345407, 124.4827528375159 45.33930468800242, 124.48275280215692 45.339304649649186, 124.48275277853372 45.3393046070434, 124.48275276762371 45.3393045619478, 124.48275272963424 45.33930416335238, 124.482752724536 45.33930414176624, 124.48275191245672 45.3393020185718, 124.48272041611222 45.3392431701811, 124.48271505088738 45.33923229334545, 124.4827130179119 45.33922950614857, 124.48271202072418 45.33922851072976, 124.48271139888507 45.339228001038926, 124.48271136702 45.33922796989281, 124.48271134313384 45.33922793537718, 124.48249887537587 45.33883995040024, 124.48236181857958 45.338601847391956, 124.48231359285117 45.33851446799879, 124.48225573824182 45.338421701163426, 124.4822129958684 45.33834416841408, 124.48211711932346 45.33814242829514, 124.48207186635399 45.338052934326036, 124.4819828586924 45.337890925105974, 124.48198101904507 45.337888507562376, 124.48190301884149 45.33781050964835, 124.48190076978597 45.33780870924913, 124.48190074449485 45.33780869294304, 124.48189806152854 45.33780730571682, 124.48189801103302 45.33780727319683, 124.48189797152874 45.33780723383205, 124.48188873342252 45.337795544791526, 124.48188870785569 45.337795502970835, 124.48187219984041 45.33775860626663, 124.48187099527424 45.337756613929535, 124.48187098042355 45.337756594779826, 124.48186925166105 45.33775480464867, 124.48186923183448 45.33775478788988, 124.48186704430897 45.33775326771975, 124.48186702025683 45.337753253985944, 124.48186445676893 45.337752061317495, 124.48186442940148 45.33775205112819, 124.48186191419161 45.33775132550349, 124.48186185438396 45.337751302730084, 124.48186180277776 45.33775127153505, 124.4818617617172 45.33775123333546, 124.48186173306763 45.33775118986657, 124.48185423304703 45.33773566348626, 124.48185422798967 45.33773565202296, 124.48185366141422 45.33773423558654, 124.48185364965452 45.337734182864594, 124.48185286907218 45.33771935188478, 124.4818528727573 45.3377193084551, 124.48185288822968 45.33771926633842, 124.48185291491056 45.33771922711079, 124.48185295180144 45.33771919224016, 124.48185299752166 45.33771916303144, 124.48185305036051 45.33771914057763, 124.48185310834064 45.337719125719005, 124.48185316929231 45.33771911901158, 124.48185349525592 45.33771910568353, 124.48185352669174 45.33771910214768, 124.48185658116235 45.337718532778425, 124.48185661096993 45.337718524898236, 124.48185944348798 45.33771753793218, 124.48185947047376 45.33771752602318, 124.48186196756949 45.33771616099798, 124.4818619906516 45.337716145537684, 124.48186350526974 45.3377149051254, 124.48186354890464 45.33771487558878, 124.48186359966184 45.3377148523936, 124.48186365571566 45.33771483637421, 124.48186371504974 45.33771482810684, 124.48186377552987 45.33771482788884, 124.48186383498067 45.33771483572805, 124.48186389126366 45.3377148513425, 124.4818639423544 45.337714874170544, 124.48186398641512 45.337714903391074, 124.48186402186103 45.33771493795301, 124.48186404741703 45.337714976613206, 124.48186898078534 45.33772477258857, 124.48187027909226 45.33772672644812, 124.48187029482045 45.33772674515176, 124.48187210316634 45.33772848566216, 124.48187212371431 45.33772850187399, 124.4818743741724 45.33772996365986, 124.48187439876892 45.337729976771634, 124.48187700679513 45.33773110491721, 124.4818770345157 45.33773111443611, 124.48187990213326 45.33773186655989, 124.48187993193734 45.3377318721286, 124.4818829514178 45.337732219975415, 124.48188298218462 45.33773222138456, 124.48188604009445 45.33773215188668, 124.48188607066896 45.3377321490834, 124.48188905213046 45.337731664851674, 124.48188908136352 45.33773165794137, 124.48189187437124 45.337730777167046, 124.4818919011655 45.337730766409095, 124.4818944007931 45.337729522180744, 124.48189442414159 45.33772950797935, 124.48189653648566 45.33772794703889, 124.48189655551083 45.337727929927865, 124.48189820121591 45.33772611091591, 124.48189821520354 45.3377260915375, 124.48189933244493 45.337724082789606, 124.4818993408694 45.33772406187184, 124.48189988767555 45.337721938851224, 124.48189989022018 45.33772191718036, 124.48189984604943 45.33771975964276, 124.48189984262709 45.33771973808637, 124.48189920128557 45.33771760597761, 124.48188220755766 45.33767962001996, 124.48188183985523 45.33767888662899, 124.48185963807407 45.337639005380986, 124.48182591206324 45.337572018692036, 124.48174485565119 45.33742091521075, 124.48159791140847 45.33715501623023, 124.48157295467078 45.33710723344638, 124.48157293897053 45.33710719102169, 124.48157293523987 45.33710714725475, 124.48157294362036 45.337107103809025, 124.48157296379365 45.337107062335676, 124.48157299499297 45.33710702441094, 124.48157303603266 45.33710699147619, 124.4815730853528 45.337106964783125, 124.48157314107914 45.33710694534624, 124.4815732010935 45.337106933904266, 124.48157326311524 45.337106930892055, 124.48157332478696 45.337106936424085, 124.48157338376491 45.337106950290114, 124.48157343780753 45.33710697196315, 124.48157348486089 45.3371070006195, 124.48159594068842 45.33712363458505, 124.48159598618984 45.33712367756586, 124.48165218644644 45.337192614285264, 124.48165401998148 45.33719441919698, 124.48165404093595 45.33719443599356, 124.48165634586853 45.33719594838113, 124.48165637113242 45.33719596191081, 124.48165905577838 45.33719712161598, 124.4816590843469 45.33719713134062, 124.48166204191632 45.33719789223259, 124.48166207265257 45.33719789776524, 124.48166275991493 45.337197971023556, 124.4816628253462 45.33719798311491, 124.48166288568967 45.3371980046672, 124.48166293823057 45.33719803471082, 124.48166298060492 45.33719807189412, 124.4816630109065 45.3371981145442, 124.48171713696084 45.33730007133511, 124.48182600279081 45.33749782770752, 124.48186911339506 45.33758802787748, 124.4818741826447 45.33759733591842, 124.48187420043733 45.337597383750875, 124.48187420297802 45.337597433169464, 124.48187419014417 45.337597481785124, 124.4818741625561 45.337597527247574, 124.48187341155563 45.33759846411441, 124.48187339873326 45.33759848468282, 124.48187242241356 45.337600605742956, 124.48187241566089 45.33760062770168, 124.48187205833462 45.33760284344314, 124.4818720579229 45.33760286591047, 124.48187233392831 45.337605087425445, 124.48187233987404 45.33760510949999, 124.48187323813627 45.3376072476481, 124.4818732501707 45.337607268391864, 124.48187475104302 45.33760925674204, 124.48188866725708 45.33762394609628, 124.48188869979079 45.33762399039801, 124.48192994215802 45.33769971407225, 124.48192994842378 45.33769972668396, 124.48195414472504 45.33775349627954, 124.4819541578538 45.337753540373306, 124.4819541582574 45.33775358542789, 124.48195414591966 45.33775362963514, 124.48195412133569 45.337753671220966, 124.48195408549202 45.33775370851645, 124.48195403982727 45.337753740024844, 124.48195398617396 45.33775376448168, 124.48195392668535 45.33775378090547, 124.48195386374863 45.33775378863711, 124.4819537998898 45.33775378736628, 124.48195351718402 45.33775376159505, 124.48195348636699 45.33775376091069, 124.48195043341943 45.33775390233185, 124.48195040299444 45.337753905853106, 124.48194744607652 45.337754459985355, 124.48194741718571 45.33775446758005, 124.4819446673825 45.337755413605755, 124.48194464111215 45.33775542498838, 124.4819422017281 45.33775672736741, 124.48194217906499 45.33775674211019, 124.48194014174283 45.33775835191494, 124.48194012353783 45.337758369464446, 124.48193856481595 45.337760226217526, 124.48193855175326 45.33776024591417, 124.48193753018921 45.33776227986173, 124.48193752275978 45.33776230096511, 124.48193707673227 45.33776443569543, 124.48193707521472 45.337764457413286, 124.48193722147985 45.33776661272914, 124.48193722592038 45.33776663419232, 124.48193796782878 45.33776875002589, 124.48194696931364 45.337786749766146, 124.48194827609666 45.3377887228554, 124.48194829195961 45.33778874173483, 124.48195000950298 45.337790392978526, 124.48195004916 45.337790443722824, 124.48197216782988 45.3378301241315, 124.48197361318394 45.337832107014734, 124.48197363051047 45.33783212586493, 124.48197560711839 45.33783386585775, 124.4819756294236 45.33783388189509, 124.48197805800771 45.33783530921084, 124.48197808439612 45.33783532179163, 124.48198086754935 45.33783637918271, 124.48198089696353 45.33783638780275, 124.48198392305638 45.33783703285817, 124.48198395431623 45.33783703717163, 124.48198710197592 45.33783724401907, 124.48198713382763 45.33783724385295, 124.48199027680519 45.33783700419603, 124.48199030797132 45.33783699955696, 124.48199332020602 45.337836323008034, 124.48199334943625 45.33783631408209, 124.48199530513207 45.33783554453007, 124.48199536217615 45.33783552698751, 124.4819954229648 45.33783551759243, 124.48199548518319 45.33783551670261, 124.48199554646203 45.33783552435194, 124.48199560446757 45.33783554024913, 124.48199565699086 45.33783556378876, 124.48199570203191 45.337835594074434, 124.48199573787531 45.33783562995279, 124.48199576315615 45.33783567005758, 124.48200109618926 45.33784699677667, 124.48208501534933 45.33800284697324, 124.48219283297448 45.3382214772744, 124.48222674050973 45.33830026185845, 124.4822639382961 45.3383756909246, 124.48226442435872 45.33837655940208, 124.48231325635531 45.33845429199976, 124.48231326246783 45.338454302428744, 124.48239811484139 45.338610031564286, 124.48248620893618 45.33876220070336, 124.48256612172308 45.33890404593807, 124.48260922669826 45.33898523143149, 124.48271223231342 45.339164238390204, 124.48271367138261 45.33916617042473, 124.48271368851994 45.33916618879742, 124.4827156343888 45.33916788571054, 124.48271565627935 45.33916790137246, 124.48271803416934 45.339169297952914, 124.4827180599711 45.339169310301756, 124.48272077850189 45.339170352880046, 124.4827208072241 45.33917036144162, 124.48272376192297 45.33917100995159, 124.48272379246195 45.3391710143969, 124.48272686978184 45.339171243916844, 124.48272690096367 45.339171244074954, 124.48272998264488 45.33917104578456, 124.48273001327149 45.33917104164939, 124.48273298088687 45.33917042316883, 124.48273300978072 45.339170414899364, 124.48273574928598 45.33916939999661, 124.48273577533789 45.339169387910275, 124.4827381814554 45.339168015587475, 124.48273820366286 45.33916800014932, 124.48274018392739 45.33916632314386, 124.48274020143765 45.33916630494677, 124.48274029967237 45.339166177544726, 124.48274033320546 45.33916614240435, 124.48274037548602 45.339166112321294, 124.48274042501463 45.33916608836251, 124.48274048003451 45.339166071377825, 124.48274053859403 45.339166061969635, 124.4827405986163 45.339166060471634, 124.48274065797233 45.33916606693699, 124.4827407145569 45.339166081136355, 124.48274076636297 45.33916610256612, 124.48274081155307 45.33916613046617, 124.48274084852437 45.33916616384693, 124.48274087596552 45.339166201524435, 124.48276041139245 45.339200675664785, 124.48276042915585 45.33920071942235, 124.48276043406358 45.3392007648061, 124.48276042591442 45.33920080995734, 124.48276019837205 45.339201501658714, 124.48276019437755 45.33920152276294, 124.4827600822761 45.33920366059188, 124.48276024279244 45.339205615984646, 124.48276024189569 45.339205650256886, 124.48276005632272 45.33920702769678, 124.48276005642994 45.3392070496865, 124.48276037030712 45.339209220703424, 124.48276037649528 45.339209242256814, 124.48276056726944 45.339209680376705, 124.48276058078734 45.3392097334021, 124.4827692579633 45.33931543757779), (124.48266201222775 45.33942275393947, 124.48266197634743 45.33942271648463, 124.48266195181137 45.33942267472631, 124.4826619396108 45.33942263035125, 124.48266194023847 45.33942258515184, 124.48266195366912 45.33942254095382, 124.48266197936002 45.33942249954242, 124.48266201627375 45.33942246259037, 124.48266206291903 45.33942243159023, 124.48266211741186 45.3394224077942, 124.48266217755115 45.33942239216344, 124.48266224090771 45.33942238532933, 124.48266230492243 45.33942238756788, 124.48266236700954 45.33942239878871, 124.48266242466126 45.339422418538554, 124.4826639840984 45.33942309712865, 124.48266401211309 45.339423106786455, 124.4826669120489 45.3394238684099, 124.48266694219714 45.33942387402771, 124.48266999709735 45.33942422202422, 124.48267002822024 45.33942422338607, 124.48267312068658 45.3394241443823, 124.48267315158847 45.339424141435856, 124.48267616277903 45.33942363846794, 124.48267619227215 45.339423631326426, 124.48267900646927 45.33942272372302, 124.48267903341964 45.33942271266104, 124.48268154247461 45.339421435300885, 124.48268156584737 45.33942142074331, 124.48268367333884 45.33941982271474, 124.48268369223551 45.33941980522099, 124.48268531717311 45.33941794793574, 124.48268533086767 45.339417928178015, 124.48268641080696 45.3394158830097, 124.4826864187726 45.33941586174819, 124.48268691221176 45.339413707291655, 124.48268691414279 45.339413685342535, 124.4826868021192 45.339411504392395, 124.48268679795198 45.33941148265458, 124.48268607608341 45.33940933781353, 124.48268029952959 45.33939747466661, 124.482680284828 45.33939743021126, 124.48268028315721 45.339397384578064, 124.48268029458586 45.339397339646865, 124.48268031864339 45.3393972972686, 124.4826803543385 45.339397259189035, 124.48268040020092 45.339397226976864, 124.48268045434126 45.33939720195905, 124.48268051452925 45.33939718516624, 124.48268057828551 45.33939717729016, 124.48268064298345 45.3393971786553, 124.48268070595789 45.33939718920542, 124.48268076461468 45.33939720850591, 124.48271984034785 45.339413660173754, 124.48272264821307 45.33941459190274, 124.48272267767847 45.33941459928466, 124.48272394262399 45.33941482032277, 124.48272400032192 45.33941483466866, 124.48272405307377 45.33941485652075, 124.48272409893818 45.33941488507484, 124.48272413622726 45.33941491928005, 124.48272416356868 45.33941495787757, 124.48272417995625 45.339414999446916, 124.4827241847868 45.339415042458256, 124.48272417788255 45.33941508532867, 124.48272415949762 45.339415126480425, 124.48272413030863 45.33941516439903, 124.48269777374684 45.33944272090459, 124.48269630297416 45.33944464103457, 124.48269629091388 45.33944466131485, 124.4826953795638 45.33944674690546, 124.4826953733455 45.339446768454614, 124.48269516471977 45.33944819760116, 124.48269515231243 45.33944824066864, 124.48269512826629 45.33944828121226, 124.48269509349954 45.33944831768402, 124.48269504933971 45.33944834869133, 124.48269499747279 45.33944837305027, 124.48269493987931 45.33944838983077, 124.48269487875821 45.33944839839212, 124.48269481644321 45.339448398407455, 124.48269475531356 45.33944838987613, 124.48269469770354 45.33944837312393, 124.48269464581256 45.3394483487905, 124.48269460162203 45.3394483178049, 124.4826945668193 45.33944828135025, 124.48269102800506 45.33944365500089, 124.48268975194607 45.33944224977262, 124.48268973763952 45.33944223635122, 124.48268816168657 45.339440969167015, 124.48266275003175 45.33942337648541, 124.48266272846166 45.339423359982966, 124.48266201222775 45.33942275393947), (124.48264566929089 45.339449534426265, 124.48264565343902 45.339449488473655, 124.48264565156292 45.33944944119924, 124.48264566374567 45.33944939469328, 124.48264568944855 45.339449351012156, 124.48264572753506 45.33944931208729, 124.48264577632105 45.33944927963977, 124.48264584151669 45.339449244630075, 124.48264586430606 45.33944922969588, 124.48264790949119 45.3394475988475, 124.48264792772336 45.33944758107077, 124.48264927316698 45.339445955141045, 124.48264931103232 45.33944591846143, 124.48264935856561 45.33944588788778, 124.48264941383253 45.339445864664306, 124.48264947458391 45.33944584973614, 124.48264953834756 45.33944584371073, 124.48264960252843 45.339445846833335, 124.48264966451472 45.33944585897686, 124.48264972178384 45.339445879647116, 124.48264977200529 45.33944590800291, 124.48266407530217 45.33945581028514, 124.48266410680829 45.33945583563746, 124.48266413258747 45.33945586402609, 124.48267268812172 45.33946705203668, 124.48267271266846 45.33946709365021, 124.4826727249573 45.339467137879865, 124.48267272449463 45.33946718294943, 124.4826727112991 45.33946722704898, 124.4826623987937 45.33949006186801, 124.48266237457536 45.33949010172193, 124.48266233996316 45.339490137557746, 124.48266229624355 45.339490168043504, 124.48266224504145 45.33949019204612, 124.48266218826006 45.339490208673524, 124.48266212800965 45.33949021730767, 124.48266206652976 45.33949021762767, 124.48266200610523 45.33949020962161, 124.48266194898196 45.339490193587075, 124.48266189728317 45.33949017012002, 124.48266185293038 45.33949014009267, 124.48266181757191 45.33949010462106, 124.4826617925221 45.339490065023575, 124.4826617787119 45.339490022771955, 124.4826617766546 45.3394899794366, 124.48266191933175 45.33948838632428, 124.48266191723584 45.33948835985622, 124.4826612579204 45.339485733723336, 124.48264626453859 45.339450749187684, 124.4826460098905 45.3394502049799, 124.48264566929089 45.339449534426265), (124.48265628666198 45.33941721901674, 124.48265630661922 45.33941725970245, 124.48265631521849 45.339417302324605, 124.4826563121449 45.33941734532143, 124.48265629751089 45.33941738711751, 124.4826562718527 45.339417426181384, 124.4826562361106 45.33941746108171, 124.48265619159407 45.3394174905397, 124.48265613993425 45.339417513475986, 124.48265608302411 45.33941752905016, 124.4826560229488 45.339417536691585, 124.48265596190959 45.33941753612024, 124.48265590214305 45.339417527357064, 124.48265584583902 45.33941751072316, 124.48265579506058 45.33941748682801, 124.48265575166832 45.33941745654716, 124.48262697937525 45.33939311076273, 124.48262694823502 45.339393079301715, 124.48262692513043 45.33939304456564, 124.4825808272118 45.33930486326246, 124.4824188724637 45.339015944123304, 124.48237476871 45.33893376061844, 124.48226581447834 45.33874484006286, 124.48224908075439 45.33871457710634, 124.48224906402069 45.33871453529287, 124.48224905899886 45.338714491990494, 124.48224906587627 45.3387144488151, 124.48224908439626 45.33871440737789, 124.4822491138678 45.3387143692252, 124.48224915319093 45.33871433578079, 124.48224920089837 45.33871430829271, 124.48224925520972 45.33871428778676, 124.48225050681104 45.33871391999495, 124.48225053381488 45.33871390980752, 124.48225306295141 45.33871272171853, 124.48225308668673 45.33871270807073, 124.48225524615678 45.33871120021386, 124.48225526574439 45.338711183611245, 124.48225697551744 45.338709411867995, 124.48225699023128 45.33870939292587, 124.48225818694326 45.33870742295701, 124.4822581962376 45.338707402378155, 124.4822588355379 45.33870530719141, 124.48225883906017 45.33870528579029, 124.48225889637841 45.338703121369896, 124.48225824220135 45.338697161113586, 124.48225824377111 45.33869711553324, 124.48225825834295 45.33869707111276, 124.4822582853181 45.33869702967767, 124.48225832358791 45.33869699293079, 124.48225837157972 45.3386969623823, 124.4822584273212 45.338696939287615, 124.48225848852148 45.33869692459586, 124.48225855266564 45.338696918910784, 124.4822586171174 45.33869692246606, 124.48225867922815 45.33869693511555, 124.48225873644533 45.33869695633943, 124.48225878641745 45.338696985265464, 124.48225882709099 45.338697020704885, 124.4822588567943 45.33869706120127, 124.48231316872548 45.33879412918598, 124.48239817888835 45.3389401496765, 124.48248019355202 45.339091173459124, 124.48257812975218 45.33926406091211, 124.48261899104978 45.33934080032061, 124.48265592536491 45.33941666182539, 124.48265628666198 45.33941721901674), (124.4822205303108 45.33857131626858, 124.48222051500211 45.33857127405244, 124.48222051152364 45.338571230546705, 124.48222052000604 45.33857118738445, 124.48222054013081 45.33857114618589, 124.48222057114252 45.338571108497476, 124.48222061187717 45.338571075733974, 124.48222066080562 45.33857104912521, 124.4822207160912 45.338571029670014, 124.48222077565875 45.3385710180987, 124.48222083727205 45.3385710148456, 124.48222089861858 45.338571020032845, 124.48222095739528 45.33857103346571, 124.48222101139596 45.33857105463997, 124.48222105859362 45.33857108276078, 124.4822210972165 45.33857111677257, 124.48222112581472 45.338571155398654, 124.48224546767703 45.338613618461444, 124.48224548571868 45.33861366228568, 124.4822454908457 45.338613707776226, 124.48224548284722 45.33861375306026, 124.48224546205239 45.338613796273464, 124.48224542931739 45.33861383563684, 124.48224538598993 45.338613869529816, 124.48224533385356 45.33861389655703, 124.48224527505488 45.33861391560584, 124.48224521201442 45.33861392589201, 124.48224514732762 45.33861392699207, 124.48224508365759 45.33861391886071, 124.4822450236254 45.33861390183272, 124.48224496970259 45.33861387660912, 124.4822428271601 45.3386126364111, 124.48224280029372 45.33861262384126, 124.48224143217251 45.33861211635535, 124.4822413763214 45.338612089995564, 124.48224132954304 45.33861205596657, 124.48224129391485 45.33861201577962, 124.48224127101899 45.338611971219336, 124.48224098767213 45.33861116196788, 124.4822205303108 45.33857131626858), (124.4817130001523 45.33766149675465, 124.48171301453989 45.337661536859706, 124.4817130182689 45.33766157814483, 124.48171301121306 45.33766161921325, 124.48170841289513 45.33767663707976, 124.4817080571559 45.33767893456519, 124.48170805699786 45.33767895784766, 124.48170838155033 45.337681257620105, 124.48170838821174 45.337681280422636, 124.48170937906755 45.337683483375656, 124.48170939222837 45.337683504663474, 124.48171102447547 45.33768553557644, 124.48173884848926 45.33771307279312, 124.48173888943762 45.3377131283298, 124.48183296899902 45.33790075216013, 124.48195207028282 45.3381189497138, 124.48199394391757 45.338199706254414, 124.4820658657482 45.33835254022984, 124.48210096102177 45.338422736758254, 124.4821012864257 45.33842333346149, 124.48217213411026 45.338543076079425, 124.48221041396761 45.3386176720006, 124.48221043014675 45.33861771851188, 124.48221794095441 45.33865703989113, 124.48221794324151 45.338657083330425, 124.48221793363713 45.33865712626865, 124.48221791249993 45.33865716710187, 124.48221788061952 45.3386572043047, 124.48221783918676 45.33865723648739, 124.48221778974951 45.33865726244778, 124.48221773415446 45.33865728121608, 124.48221767447835 45.338657292091185, 124.4822176129506 45.338657294666845, 124.48221755186935 45.33865728884687, 124.48221749351656 45.33865727484864, 124.48221744007193 45.338657253195066, 124.48221739353187 45.338657224695055, 124.48221735563504 45.33865719041323, 124.48221732779703 45.33865715163023, 124.48217185756344 45.338574918126945, 124.48212275944209 45.33849473929135, 124.48208996435166 45.338435111946765, 124.48201852749335 45.33829050059215, 124.48201851290939 45.338290458225956, 124.48201851018915 45.33829041467132, 124.48201851943487 45.33829037156485, 124.48201876102357 45.33828969642019, 124.48201876562962 45.33828967499667, 124.48201892946207 45.3382875279689, 124.48201892814265 45.3382875063201, 124.48201850369743 45.33828537712497, 124.48201849651996 45.3382853561119, 124.48201748816544 45.338283303987964, 124.48200673562683 45.338266761628304, 124.48200672625818 45.3382667456139, 124.48179500437479 45.337861194022096, 124.4816445898787 45.33755940728486, 124.4816445755948 45.337559367143925, 124.48164457198165 45.33755932583671, 124.48164457916131 45.3375592847619, 124.48164459689094 45.33755924531033, 124.48164462456998 45.33755920881784, 124.48164466126137 45.337559176520074, 124.48164470572262 45.33755914951065, 124.48164475644828 45.33755912870415, 124.48164605710181 45.33755870284797, 124.48164608343491 45.33755869194753, 124.48164853717539 45.33755743844438, 124.48164856007013 45.33755742419661, 124.48165062903726 45.33755586315098, 124.48165064765068 45.33755584608062, 124.48165225561907 45.3375540350051, 124.4816522692655 45.33755401574059, 124.48165335699436 45.337552021358945, 124.4816533651706 45.337552000611026, 124.48165389258617 45.33754989639936, 124.48165389499106 45.3375498749322, 124.48165384266206 45.3375477384153, 124.48165383921575 45.337547717072155, 124.48165320127946 45.337545606064666, 124.48165274198452 45.337544579408146, 124.48165272897748 45.33754453540762, 124.48165272863572 45.33754449046164, 124.48165274097305 45.337544446365264, 124.48165276549655 45.337544404879615, 124.4816528012268 45.33754436766154, 124.48165284673692 45.33754433619746, 124.48165394164472 45.3375437176582, 124.48165399384082 45.337543693670405, 124.4816540516537 45.33754367729766, 124.48165411287704 45.33754366916485, 124.48165417517399 45.337543669582374, 124.48165423616706 45.3375436785343, 124.48165429352842 45.33754369567895, 124.48165434506869 45.337543720362014, 124.48165438882083 45.33754375164141, 124.48165442311507 45.33754378832335, 124.48165444664257 45.337543829007835, 124.48165671720729 45.33754920666061, 124.48165696884327 45.33754975192198, 124.4817130001523 45.33766149675465), (124.48187823623445 45.337855097553195, 124.48187825041353 45.33785514004018, 124.48187825268944 45.33785518365862, 124.48187824297648 45.337855226765676, 124.48187822164047 45.337855267737815, 124.481878189485 45.33785530503186, 124.48187814772119 45.337855337243205, 124.48187809792196 45.33785536315866, 124.48187804196283 45.33785538180216, 124.48187798195161 45.3378553924715, 124.48187792014845 45.33785539476486, 124.48187785888103 45.33785538859587, 124.48187780045691 45.33785537419687, 124.48187774707652 45.33785535211015, 124.48187770075046 45.337855323167624, 124.4818776632234 45.33785528845932, 124.48187763590879 45.33785524929248, 124.48187592416515 45.33785204117428, 124.48185606562075 45.337816605654666, 124.48185604881193 45.33781656463357, 124.48185604329885 45.33781652211125, 124.48185604928025 45.337816479620436, 124.48185606654052 45.33781643869268, 124.48185609445754 45.33781640080323, 124.48185613202507 45.33781636731778, 124.48185617788894 45.337816339443336, 124.48185623039605 45.337816318184586, 124.48185628765376 45.33781630430782, 124.48185634759828 45.337816298313214, 124.48185640806881 45.33781630041686, 124.48185646688587 45.3378163105429, 124.4818565219293 45.33781632832638, 124.48186013867256 45.337817804548145, 124.48186018537237 45.33781782778217, 124.48186022544209 45.33781785652185, 124.48186025759478 45.33781788984413, 124.48186028079783 45.337817926678824, 124.48187823623445 45.337855097553195), (124.48186107768723 45.33788935207944, 124.481861062779 45.33788930955007, 124.4818610598441 45.33788926578923, 124.48186106899391 45.33788922245732, 124.4818610898813 45.337889181198506, 124.48186112171366 45.33788914357826, 124.48186116328321 45.33788911102405, 124.48186121301265 45.33788908477106, 124.4818612690151 45.33788906581542, 124.48186132916561 45.337889054876364, 124.48186139118194 45.33788905236896, 124.48186145271097 45.33788905838835, 124.48186151141807 45.337889072706126, 124.48186156507569 45.337889094779044, 124.48186161164789 45.33788912376957, 124.48186164936769 45.337889158577724, 124.48186167680367 45.337889197882774, 124.48186890342599 45.33790274187954, 124.48186891957785 45.33790278436237, 124.48186892369719 45.33790282824987, 124.4818689156266 45.33790287186358, 124.48186889567461 45.33790291353549, 124.48186886460435 45.33790295167186, 124.48186882360402 45.33790298481418, 124.48186877424172 45.337903011694934, 124.48186871840534 45.337903031286054, 124.48186865823035 45.3379030428383, 124.48186859601796 45.337903045909826, 124.4818685341477 45.3379030403832, 124.48186847498563 45.33790302646976, 124.48186842079443 45.337903004701644, 124.48186837364675 45.33790297591135, 124.48186833534555 45.33790294119998, 124.48186830735575 45.337902901895056, 124.48186296084526 45.33789310741219, 124.48186107768723 45.33788935207944), (124.48180890562156 45.33765532025876, 124.48180894789547 45.33765534968831, 124.48180898169733 45.33765538413663, 124.48180900585433 45.33765542240853, 124.48181718675131 45.33767251464217, 124.48181720052227 45.33767255590268, 124.48181720307157 45.33767259825268, 124.48181719430879 45.3376726401879, 124.48181717454511 45.337672680218766, 124.48181714448249 45.33767271692333, 124.48181710518901 45.33767274899784, 124.4818170580601 45.33767277530296, 124.48181700476997 45.337672794904364, 124.48181694721158 45.33767280710576, 124.4818168874293 45.33767281147376, 124.4818152780311 45.33767282152615, 124.48181524635046 45.33767282397618, 124.48181215249075 45.33767328808986, 124.481812122139 45.3376732949454, 124.48180922159817 45.33767418478068, 124.48180919379352 45.33767419576655, 124.48180660303959 45.33767547559312, 124.48180657889957 45.33767549026774, 124.48180440196215 45.33767710869534, 124.481804382455 45.33767712647004, 124.4818027067478 45.337679018511636, 124.48180269265693 45.33767903867267, 124.4818015854662 45.33768112835502, 124.48180157735737 45.33768115009329, 124.48180108314111 45.337683353507586, 124.48180108134501 45.33768337589255, 124.48180122293564 45.33768562702646, 124.48181353181698 45.33774541311135, 124.48181353465611 45.337745457641354, 124.4818135249873 45.33774550169167, 124.48181350319032 45.337745543531994, 124.4818134701215 45.33774558151882, 124.48181342707979 45.33774561416001, 124.48181337575575 45.337745640173424, 124.4818133181655 45.33774565853722, 124.48181325657107 45.33774566853009, 124.48181319339221 45.33774566975949, 124.48181313111023 45.33774566217715, 124.48181307217183 45.3377456460809, 124.48181301889213 45.33774562210298, 124.48181297336379 45.33774559118529, 124.48181293737537 45.33774555454225, 124.48176608153601 45.33768599203733, 124.48176604916848 45.33768593197108, 124.48175189923461 45.337641271325396, 124.48175189156154 45.337641223075344, 124.48175189874992 45.33764117478818, 124.48175981253473 45.33761533858716, 124.4817598313631 45.337615297097756, 124.4817598611792 45.33761525894654, 124.48175990086436 45.33761522556486, 124.48175994892976 45.33761519820503, 124.48176000357222 45.33761517789351, 124.48176006274171 45.33761516539231, 124.48176012421837 45.33761516117044, 124.48176018569585 45.33761516538628, 124.48176024486783 45.33761517788166, 124.4817602995143 45.33761519818782, 124.48176034758514 45.33761522554291, 124.48176038727684 45.337615258920714, 124.48176041710045 45.33761529706899, 124.48176043593703 45.33761533855655, 124.48176841987234 45.33764138620616, 124.48176937569464 45.33764347817403, 124.48176938822921 45.33764349848001, 124.48177090817084 45.33764541723589, 124.48177092611799 45.3376454354096, 124.48177295093699 45.33764710616851, 124.48177297359678 45.33764712150117, 124.481775424371 45.3376484791413, 124.48177545086 45.3376484910353, 124.48177823206302 45.33764948263835, 124.48177826134986 45.337649490630454, 124.48178126457667 45.337650077546144, 124.48178129551904 45.337650081324526, 124.48178440371106 45.33765024067634, 124.48178443510258 45.33765024009372, 124.48178752710926 45.33764996567043, 124.48178755772724 45.33764996074951, 124.48179051302922 45.33764926324757, 124.48179054167947 45.33764925418021, 124.48179324508578 45.337648160786664, 124.481793270652 45.33764814792618, 124.48179561678981 45.337646701259125, 124.48179563827539 45.33764668510678, 124.48179591005159 45.33764643536997, 124.48179595172533 45.33764640385616, 124.48179600115603 45.33764637852628, 124.48179605652932 45.33764636031018, 124.48179611581206 45.33764634987662, 124.48179617682815 45.337646347608604, 124.48179623733759 45.33764635358939, 124.48179629511911 45.33764636759945, 124.48179634805128 45.33764638912441, 124.48179639419106 45.337646417374096, 124.48179643184469 45.33764645131147, 124.48179645962976 45.33764648969061, 124.48179683592355 45.337647161666105, 124.4817968507913 45.33764718190906, 124.48179860842016 45.33764907498967, 124.4817986287344 45.33764909265044, 124.48180091685009 45.33765071135024, 124.48180890562156 45.33765532025876), (124.48175655176509 45.33750627814656, 124.4817565684728 45.33750632255656, 124.48175657203515 45.33750636843448, 124.48175656230352 45.33750641386563, 124.48175653968401 45.33750645695395, 124.48175650512059 45.33750649590113, 124.4817564600559 45.33750652908173, 124.48175640637066 45.33750655511094, 124.48175607285826 45.33750668359159, 124.4817560477875 45.33750669556539, 124.48175373172643 45.337508045249564, 124.48175371032599 45.33750806035693, 124.48175295972752 45.3375087022662, 124.48175291461547 45.337508733828074, 124.48175286152606 45.3375087584552, 124.48175280256736 45.337508775169695, 124.48175274008015 45.337508783307925, 124.48175267654564 45.33750878254676, 124.48175261448652 45.33750877291642, 124.48175255636663 45.33750875479929, 124.48175250449385 45.33750872891469, 124.48175246092784 45.3375086962904, 124.4817524273981 45.33750865822176, 124.48175240523625 45.3375086162203, 124.48174442064749 45.33748714179261, 124.4817438760575 45.33748595228342, 124.48159592260384 45.337215037642885, 124.48159168616976 45.337206922900606, 124.48159167048276 45.337206880494215, 124.48159166675428 45.337206836747285, 124.48159167512618 45.33720679332097, 124.48159169528036 45.3372067518642, 124.48159172645148 45.33720671395114, 124.4815917674562 45.33720668102138, 124.48159181673738 45.33720665432531, 124.48159187242365 45.3372066348766, 124.48159193240069 45.33720662341375, 124.48159199439107 45.337206620372015, 124.48159205604098 45.337206625866884, 124.48159211500939 45.337206639689725, 124.48159216905735 45.33720666131564, 124.48159221613243 45.33720668992351, 124.48159225444735 45.33720672442703, 124.48159228254713 45.33720676351607, 124.48171511434747 45.33742903049849, 124.48175655176509 45.33750627814656), (124.48129109193881 45.336739823082354, 124.48129107524932 45.336739779634605, 124.48129107116179 45.336739734713056, 124.48129267559756 45.33670844806011, 124.48129268389265 45.33670840459723, 124.48129270398913 45.336708363095966, 124.4812927351229 45.336708325134225, 124.4812927761102 45.336708292155365, 124.48129282539256 45.33670826541329, 124.48129288109624 45.33670824592478, 124.48129294110335 45.33670823443079, 124.4812930031323 45.33670823136835, 124.48129306482475 45.336708236853895, 124.48129312383492 45.33670825067886, 124.48129317791931 45.336708272317615, 124.48129322502149 45.3367083009474, 124.48129326335057 45.33670833547968, 124.48129329144933 45.33670837460149, 124.48132511221752 45.33676602629835, 124.48142406012828 45.336950929070504, 124.48156612001284 45.337223040320396, 124.48171379537992 45.337493446091614, 124.48171380626255 45.337493469884045, 124.48174159070885 45.33756820052147, 124.4817416010611 45.337568252655196, 124.48174159394681 45.33756830505805, 124.48173879526912 45.337577441924935, 124.48173877596889 45.337577484182866, 124.48173874527501 45.33757752294368, 124.48173870438325 45.337577556697035, 124.48173865488714 45.337577584127715, 124.48173859871532 45.33757760416685, 124.48173853805653 45.33757761603362, 124.48173847527438 45.3375776192656, 124.48173841281518 45.33757761373687, 124.48173835311282 45.33757759966288, 124.48173829849345 45.33757757759201, 124.4817382510855 45.33757754838425, 124.48173821273622 45.337577513177735, 124.48173818493993 45.337577473344304, 124.48171201746626 45.33752821661761, 124.48167409319542 45.33744937737369, 124.4816728384435 45.3374474160682, 124.48167282318764 45.33744739730418, 124.48167103784843 45.337445625753794, 124.48166687755968 45.337442241116406, 124.4816668392145 45.337442202333214, 124.48166681321294 45.33744215875326, 124.48166680070416 45.337442112302526, 124.481666802241 45.3374420650339, 124.48166693623132 45.337441332137416, 124.48166693713496 45.337441309820086, 124.48166671384341 45.337439099642374, 124.4816667084756 45.33743907769535, 124.48166585897816 45.33743692121101, 124.48155090836153 45.33722801098454, 124.48140495248977 45.33695009514722, 124.48129109193881 45.336739823082354), (124.48160417851142 45.33743602583417, 124.48160416558319 45.337435982352524, 124.48160416502618 45.337435937926905, 124.4816041768623 45.33743589429081, 124.48160420062943 45.33743585314698, 124.4816042354004 45.337435816100836, 124.48160427981821 45.33743578459795, 124.4816043321499 45.33743575986758, 124.48160439035324 45.33743574287473, 124.48160445215726 45.33743573428244, 124.48160451515022 45.33743573442602, 124.4816045768742 45.33743574329983, 124.48160463492067 45.33743576055764, 124.48160468702454 45.337435785526026, 124.48160473115286 45.33743581723073, 124.48160476558353 45.33743585443458, 124.48161386032221 45.33744819488332, 124.48161557491643 45.33745004574875, 124.48161559473341 45.337450063096426, 124.48161779410748 45.33745163849373, 124.4816178183942 45.33745165273726, 124.48162041581256 45.337452890541, 124.48162044361203 45.33745290111912, 124.48162333663468 45.337453752511315, 124.48162336684925 45.337453759006294, 124.4816264413769 45.33745419040853, 124.48162647281552 45.337454192564415, 124.48162960759052 45.337454186962354, 124.48162963901315 45.337454184694145, 124.48163271040158 45.33745374230872, 124.48163274056914 45.33745373570583, 124.48163562743694 45.33745287398456, 124.4816356551598 45.337452863307306, 124.4816367235962 45.33745234856092, 124.48163678184478 45.337452326367924, 124.4816368453357 45.33745231313583, 124.48163691133243 45.33745230943498, 124.48163697699037 45.33745231542484, 124.48163703947966 45.3374523308473, 124.48163709610695 45.3374523550376, 124.48163714443163 45.337452386953146, 124.48164486368091 45.337458667015454, 124.48164489936444 45.33745870245936, 124.48164492471356 45.33745874208262, 124.48166025471394 45.33749061239036, 124.48166026877747 45.33749065469085, 124.48166027104634 45.33749069810916, 124.48166026143569 45.33749074102498, 124.48166024030422 45.33749078183675, 124.48166020844063 45.3374908190214, 124.48166016703392 45.33749085119127, 124.48166011762937 45.33749087714581, 124.48166006207077 45.33749089591643, 124.48166000243144 45.337490906802635, 124.48165994093699 45.33749090939818, 124.4816598798824 45.33749090360616, 124.48165982154612 45.33749088964275, 124.48165816042703 45.337490360932286, 124.48165813177985 45.337490354042146, 124.48165521002592 45.337489864190715, 124.48165518004723 45.3374898612518, 124.48165217962857 45.33748977053318, 124.48165214940327 45.33748977165179, 124.48164917892625 45.337490083349756, 124.48164914954837 45.337490088485424, 124.48164631653569 45.33749079131743, 124.48164628906873 45.337490800284186, 124.4816436960675 45.33749186880971, 124.48164367150535 45.3374918812831, 124.481641412374 45.33749327682477, 124.48164139160616 45.33749329235317, 124.48163954811928 45.33749496439633, 124.48163953189743 45.33749498241748, 124.48163817078331 45.33749687043956, 124.48163815972241 45.33749689025151, 124.48163732324774 45.33749894675184, 124.48163644844146 45.33750225157411, 124.48163643019258 45.33750229532234, 124.48163639980649 45.33750233557517, 124.48163635853226 45.33750237067773, 124.4816363080667 45.3375023991869, 124.4816362504845 45.33750241993067, 124.48163618815312 45.3375024320562, 124.48163612363493 45.337502435065005, 124.48163605958234 45.33750242883338, 124.48163599862878 45.33750241361752, 124.4816359432801 45.33750239004297, 124.48163589581165 45.33750235907892, 124.48163585817498 45.33750232199834, 124.48163137030339 45.33749679043648, 124.48163134297313 45.337496746410906, 124.48160417851142 45.33743602583417), (124.48135094423594 45.33668714368254, 124.48135092584444 45.33668710023736, 124.48135092018171 45.3366870550734, 124.48135092747768 45.336687010026154, 124.48135094743603 45.33668696692635, 124.48135097924549 45.33668692752557, 124.48135102161348 45.3366868934251, 124.48135107281801 45.3366868660108, 124.4813511307782 45.336686846396795, 124.48135384228398 45.33668615611374, 124.48135387042781 45.33668614665847, 124.48135651950903 45.336685019841724, 124.48135654449739 45.33668500669663, 124.48135883108587 45.33668353711406, 124.4813588519591 45.33668352078403, 124.48136068822552 45.336681764883224, 124.48136070418245 45.336681745994944, 124.48136201959565 45.3366797712205, 124.48136203002257 45.336679750499904, 124.48136277405689 45.33667763270396, 124.48136277854212 45.33667761100156, 124.48136292255704 45.336675409463446, 124.48135926242094 45.33662538787124, 124.48135926553485 45.336625342872026, 124.48135928130294 45.336625299213374, 124.4813593090923 45.33662525864714, 124.48135934778807 45.33662522280118, 124.4813593958373 45.33662519311381, 124.48135945131212 45.33662517077634, 124.48135951198627 45.33662515668509, 124.48135957542539 45.33662515140547, 124.48135963908355 45.33662515514936, 124.48135970040654 45.33662516776651, 124.48135975693368 45.336625188750666, 124.48135980639664 45.33662521725977, 124.48135984681062 45.33662525214987, 124.48135987655402 45.336625292020905, 124.48139815495408 45.33669210535372, 124.48144704430476 45.336782900007776, 124.481526879245 45.33693957615885, 124.4815652849784 45.33702623463653, 124.48156529793843 45.33702627950208, 124.481573081789 45.3370815449643, 124.48157308074617 45.337081595882275, 124.48157306348867 45.337081645329604, 124.48156704503901 45.33709310257577, 124.48156668559429 45.33709404829584, 124.48156666384712 45.337094089157645, 124.48156663131914 45.337094126287624, 124.48156658923534 45.33709415828753, 124.4815665391806 45.33709418395222, 124.48156648303987 45.337094202315214, 124.48156642292749 45.337094212684974, 124.48156636110723 45.33709421467095, 124.4815662999071 45.337094208198394, 124.48156624163182 45.33709419351103, 124.48156618847614 45.33709417116199, 124.48156614244179 45.33709414199291, 124.4815661052624 45.33709410710228, 124.48156607833819 45.33709406780404, 124.48151604527288 45.33699827272366, 124.48149711255124 45.336958417966045, 124.48149587833062 45.336956465647454, 124.48149586327152 45.336956446905376, 124.48149412274569 45.33695469694366, 124.48149410288569 45.336954680577286, 124.48149390054849 45.33695454309195, 124.48149385503812 45.33695450435578, 124.48149382287417 45.336954459454226, 124.48137174249005 45.33672271681016, 124.48135094423594 45.33668714368254), (124.48144989343322 45.337101638400746, 124.4814499088 45.33710159394108, 124.48144993660847 45.3371015525954, 124.48144997570743 45.33710151607543, 124.48145002447829 45.33710148589303, 124.48145008090181 45.33710146329776, 124.4814501426422 45.33710144922504, 124.48145020714344 45.33710144425746, 124.48145027173527 45.337101448600684, 124.48145033374357 45.33710146207491, 124.48145039060111 45.337101484122314, 124.48145043995427 45.33710151383014, 124.48145047975972 45.33710154996851, 124.4814505083696 45.33710159104132, 124.481521047151 45.337235904304045, 124.4815707205698 45.337326182270225, 124.48157073774759 45.33732622630981, 124.48157074195537 45.33732627188889, 124.4815707330194 45.33732631712762, 124.48157071130842 45.337326360160134, 124.48157067771795 45.337326399211626, 124.48157063363307 45.33732643267146, 124.4815705808723 45.337326459159605, 124.48157052161167 45.337326477583616, 124.48157045829522 45.33732648718356, 124.48157039353431 45.337326487563566, 124.48157033000018 45.3373264787079, 124.48157027031306 45.337326460981856, 124.48157021693468 45.33732643511649, 124.48156910559237 45.33732576994654, 124.48156908033576 45.33732575757856, 124.48156641767326 45.33732470687536, 124.48156638951471 45.337324698165396, 124.48156348997749 45.3373240283752, 124.48156345996921 45.3373240236487, 124.48156043188972 45.337323759796256, 124.4815604011525 45.33732375922971, 124.48155735766541 45.337323911173044, 124.48155732734797 45.337323914787675, 124.48155438216413 45.33732447684987, 124.48155435339908 45.337324484510596, 124.48155161655572 45.33732543569203, 124.48155159041784 45.33732544711264, 124.48154916416938 45.337326751875075, 124.48154914163487 45.33732676662907, 124.48154711663004 45.33732837622449, 124.48154709854181 45.337328393759826, 124.48154555043892 45.337330248050584, 124.48154553747159 45.33733026771314, 124.48154452411103 45.33733229741916, 124.48154451674986 45.33733231847317, 124.48154407599277 45.3373344477609, 124.48154407451226 45.337334469420966, 124.48154422282624 45.337336618736096, 124.48154422727077 45.33733664013846, 124.48154496794174 45.33733875002919, 124.48155740272458 45.3373636196084, 124.48155741807449 45.3373636646589, 124.48156786845914 45.33741890250481, 124.48156787065804 45.337418946068254, 124.4815678609003 45.33741898911262, 124.48156783955233 45.33741903002096, 124.48156780741608 45.33741906725651, 124.48156776569877 45.337419099420536, 124.48156771596751 45.33741912530479, 124.48156766009053 45.337419143936884, 124.48156760016691 45.337419154616946, 124.48156753844745 45.33741915694374, 124.4815674772509 45.337419150829874, 124.48156741887612 45.33741913650501, 124.48156736551579 45.337419114507284, 124.48156731917454 45.337419085663036, 124.48156728159321 45.3374190510558, 124.48156725418345 45.33741901198562, 124.48144795098877 45.3371970912759, 124.48135699135521 45.33702016995026, 124.48130888950926 45.33693497437503, 124.48122478540346 45.33677379063195, 124.48102577993045 45.33642578411653, 124.48102433001915 45.3364238297835, 124.48101903980013 45.33641813262703, 124.4810190099811 45.33641809203261, 124.48101899241769 45.33641804802392, 124.48101898783575 45.33641800241952, 124.48101899642457 45.336417957103826, 124.48101901782925 45.33641791394939, 124.48101905116539 45.33641787473946, 124.48101909505533 45.336417841094224, 124.48103258542534 45.3364094081649, 124.4810346887781 45.33640780781384, 124.48103470763043 45.33640779029979, 124.48103632794063 45.33640593132358, 124.4810363415868 45.33640591155226, 124.48103741661068 45.33640386536669, 124.4810374245261 45.33640384409825, 124.48103750385111 45.336403494146985, 124.48103751923931 45.33640345242867, 124.48103754562975 45.33640341354716, 124.48103758205319 45.33640337893085, 124.4810376271715 45.33640334985135, 124.48103767932724 45.336403327376914, 124.4810377366044 45.336403312333154, 124.48103779689902 45.33640330527272, 124.48103785799597 45.33640330645497, 124.48103791765095 45.33640331583646, 124.48103797367236 45.33640333307258, 124.48103802400249 45.33640335753014, 124.48103806679211 45.336403388310686, 124.48103810046955 45.33640342428347, 124.48103812379763 45.33640346412703, 124.48104268601708 45.336414029278494, 124.48104269805096 45.33641407094174, 124.481042698752 45.33641411345781, 124.48104268809523 45.33641415530717, 124.4810426664614 45.336414194994134, 124.48104210450963 45.33641499153169, 124.48104209342216 45.336415012086505, 124.48104128192973 45.336417118083496, 124.48104127674095 45.33641713976904, 124.48104106338624 45.336419316956594, 124.48104106429572 45.33641933893895, 124.48104145727783 45.33642150364895, 124.48104146423282 45.336421525030026, 124.48104245983322 45.33642361463285, 124.4810912755863 45.3365003251328, 124.48109128214105 45.33650033621614, 124.4811661246512 45.33663704859893, 124.48121516115626 45.33672211688807, 124.48134106732525 45.33695594274313, 124.4814190490803 45.33710490481023, 124.48142040019256 45.3371068681655, 124.48142041649123 45.33710688691316, 124.48142228473705 45.33710862663967, 124.4814223059092 45.3371086427851, 124.4814246194929 45.33711009202665, 124.48142464472383 45.337110104948486, 124.48142731473664 45.33711120801202, 124.48142734305739 45.33711121721401, 124.48143026689122 45.33711193170903, 124.48143029721358 45.337111936837566, 124.48143336250772 45.3371122353066, 124.48143339366551 45.337112236164444, 124.48143648262243 45.33711210713744, 124.48143651341881 45.33711210369172, 124.48143950733126 45.337111552127126, 124.48143953658288 45.337111544510215, 124.4814423203963 45.33711059160439, 124.48144234697901 45.337110580109055, 124.48144481371318 45.33710926248154, 124.48144483660516 45.337109247549584, 124.48144689146493 45.337107615836125, 124.48144690978668 45.33710759804132, 124.48144847380485 45.3371057149477, 124.48144848685207 45.33710569497401, 124.48144949992447 45.33710363286644, 124.48144950719583 45.33710361148169, 124.48144989343322 45.337101638400746), (124.48147148768314 45.33697668377437, 124.48147147224807 45.33697664246798, 124.48147146816493 45.336976599848384, 124.48147147558092 45.33697655745302, 124.48147149422856 45.33697651681127, 124.48147152343525 45.336976479389165, 124.48147156214726 45.3369764465367, 124.48147160896832 45.33697641943897, 124.4814716622092 45.33697639907349, 124.48147171994943 45.3369763861749, 124.48147178010605 45.3369763812085, 124.4814718405091 45.336976384353456, 124.4814718989795 45.336976395496315, 124.48147195340817 45.3369764142351, 124.4814720018315 45.33697643989386, 124.48147204250283 45.336976471547004, 124.4814720444499 45.336976473387026, 124.48147207140683 45.33697650359817, 124.4814720912471 45.33697653643675, 124.48147210124684 45.33697655748075, 124.48147211513118 45.33697660004691, 124.48147211708822 45.33697664370311, 124.48147210704398 45.33697668680283, 124.48147208537735 45.33697672772054, 124.48147205290549 45.33697676491306, 124.48147201085305 45.33697679697763, 124.48147196080619 45.33697682270492, 124.4814719046522 45.33697684112463, 124.48147184450916 45.33697685154207, 124.48147178264517 45.336976853564316, 124.48147172139372 45.33697684711512, 124.48147166306477 45.33697683243769, 124.48147160985818 45.33697681008563, 124.48147156378064 45.336976780901914, 124.48147152657015 45.33697674598722, 124.48147149962996 45.33697670665839, 124.48147148768314 45.33697668377437), (124.48140258080164 45.33684582376798, 124.48140259670683 45.336845866331664, 124.48140260055291 45.336845910265026, 124.48140259219254 45.33684595388537, 124.48140257194589 45.336845995521834, 124.48140254058848 45.33684603357967, 124.4814024993215 45.33684606660108, 124.48140244972548 45.3368460933213, 124.48140239370012 45.336846112716835, 124.48140233339139 45.336846124044776, 124.4814022711093 45.33684612687125, 124.48140220923943 45.336846121087966, 124.48140215015161 45.33684610691647, 124.48140209610906 45.336846084899534, 124.48140204918184 45.33684605588052, 124.48140201116725 45.33684602097092, 124.48140198352162 45.336845981507864, 124.4813549180573 45.3367580302732, 124.48131633481809 45.33668812588478, 124.4813163180292 45.3366880837038, 124.48131631315384 45.336688040027546, 124.48131632037688 45.336687996513305, 124.48131633942427 45.336687954812305, 124.48131636957334 45.33668791650693, 124.4813164096799 45.3366878830507, 124.48131645822221 45.33668785571315, 124.4813165133582 45.336687835531656, 124.48131657299574 45.33668782327199, 124.48131663487167 45.33668781939939, 124.48131669663825 45.33668782406077, 124.48131675595161 45.336687837079296, 124.48131681056088 45.33668785796091, 124.48131685839414 45.33668788591329, 124.48131689763608 45.33668791987573, 124.48131692679769 45.33668795855948, 124.48134215381495 45.336731106568976, 124.48140258080164 45.33684582376798), (124.4813390576535 45.33708169805399, 124.48133906038878 45.33708165438656, 124.48133907504841 45.33708161191694, 124.48133910107893 45.33708157224924, 124.48133913749687 45.33708153688173, 124.481339182927 45.33708150715026, 124.4813392356531 45.3370814841778, 124.48133929368392 45.337081468832054, 124.48133935482738 45.33708146169263, 124.48133941677423 45.337081463029186, 124.48133947718466 45.33708147279123, 124.48133953377683 45.337081490610075, 124.48133958441343 45.33708151581264, 124.48133962718161 45.33708154744707, 124.4813396604662 45.33708158431847, 124.48133968300996 45.337081625034195, 124.48134160325732 45.337086425654284, 124.48134161496468 45.33708647743536, 124.48134160935349 45.33708652972107, 124.48134038577487 45.33709095992248, 124.48134036826049 45.33709100148079, 124.48134033976548 45.33709103989687, 124.4813403013488 45.33709107374316, 124.48134025443784 45.337091101761935, 124.48134020077592 45.33709112291205, 124.48134014235715 45.33709113640753, 124.48134008135233 45.33709114174689, 124.48134002002844 45.33709113873176, 124.48133996066412 45.33709112747413, 124.48133990546543 45.33709110839234, 124.48133985648369 45.337091082195506, 124.48133981553886 45.33709104985707, 124.48133978415254 45.33709101257873, 124.48133976349101 45.33709097174575, 124.4813397543221 45.3370909288755, 124.4813390576535 45.33708169805399), (124.4812969815861 45.3369758811861, 124.48129696580237 45.33697583887616, 124.48129696193143 45.33697579521157, 124.48129697012001 45.336975751844555, 124.48129699005796 45.33697571041613, 124.48129702099101 45.33697567249388, 124.48129706174866 45.3369756395128, 124.4812971107886 45.33697561272086, 124.48129716625523 45.33697559313187, 124.48129722604969 45.33697558148704, 124.48129728790941 45.33697557822702, 124.48129734949363 45.336975583475166, 124.48129740847207 45.33697559703289, 124.48129746261301 45.33697561838717, 124.48129750986782 45.33697564672998, 124.48129754844831 45.336975680988836, 124.48129757689463 45.33697571986741, 124.48132709319714 45.33702799482596, 124.4813391739594 45.33705149187117, 124.48133918906893 45.337051533068966, 124.48133919290535 45.33705157553656, 124.48133918533136 45.337051617753666, 124.4813391666181 45.33705165820895, 124.48133913743548 45.33705169545417, 124.48133909882822 45.33705172815604, 124.48133905217836 45.33705175514382, 124.48133787987713 45.337052311410815, 124.48133785622812 45.337052325139155, 124.48133731271467 45.33705270822659, 124.48133726274803 45.33705273694872, 124.48133720561233 45.337052757997135, 124.48133714364218 45.33705277051181, 124.4813370793697 45.33705277398136, 124.48133701542088 45.33705276826405, 124.48133695440879 45.33705275359346, 124.48133689882637 45.33705273056905, 124.48133685094474 45.33705270013158, 124.4813368127203 45.33705266352475, 124.4813367857149 45.33705262224428, 124.48133677103203 45.33705257797692, 124.48133661578353 45.337051730960354, 124.48133661093884 45.337051714438324, 124.4813359480151 45.337050086575324, 124.4812969815861 45.3369758811861), (124.48133264992642 45.337116947605296, 124.48133270484807 45.33711692592198, 124.4813327647386 45.337116912268975, 124.48133282726467 45.33711690717814, 124.48133288999051 45.33711691084779, 124.48133295047273 45.337116923135, 124.48133300635493 45.33711694356107, 124.48133305546024 45.337116971330296, 124.48133309587574 45.33711700536085, 124.48133312602685 45.33711704432706, 124.48133314473901 45.3371170867109, 124.4813331512833 45.33711713086126, 124.48133314540478 45.337117175058175, 124.48131713165141 45.33717515581171, 124.48131711368286 45.33717519815513, 124.4813170843196 45.33717523720247, 124.48131704469563 45.337175271445695, 124.4813169963412 45.33717529956232, 124.48131694112398 45.337175320466436, 124.48131688117627 45.33717533335073, 124.48131681881347 45.3371753377176, 124.48131675644399 45.33717533339839, 124.48131669647648 45.33717532055991, 124.48131664122717 45.337175299697996, 124.48131659282964 45.33717527161834, 124.48131655315306 45.33717523740541, 124.48131652372983 45.33717519838052, 124.48129874827826 45.337144726173605, 124.48129813558333 45.33714379728011, 124.48129291750475 45.337136737544746, 124.4812928933295 45.337136694547866, 124.48129288213694 45.33713664897232, 124.48129288440049 45.337136602745765, 124.48129290002433 45.337136557823385, 124.48129292834781 45.33713651610517, 124.48129296817282 45.3371364793556, 124.48129301781495 45.337136449129, 124.48133264992642 45.337116947605296), (124.48125336905181 45.336580430028526, 124.48125335391983 45.33658038791626, 124.48125335054996 45.33658034453778, 124.48125335906782 45.3365803015116, 124.48125337915565 45.3365802604431, 124.48125341006401 45.33658022286462, 124.48125345063946 45.336580190178246, 124.48125349936834 45.336580163603564, 124.48125355443224 45.33658014413212, 124.48125361377689 45.33658013249042, 124.4812536751879 45.33658012911282, 124.48125373637389 45.33658013412536, 124.48125379505207 45.336580147340996, 124.48125384903302 45.336580168266636, 124.4812538963026 45.33658019612155, 124.48125393509716 45.336580229866385, 124.48125396396908 45.33658026824209, 124.48126464916228 45.3365985440073, 124.4812646669163 45.33659858516751, 124.4812646732328 45.33659862795892, 124.48126466788092 45.336598670815704, 124.48126465105632 45.33659871216965, 124.48126462337473 45.3365987505075, 124.48126458584905 45.33659878442643, 124.48126453985248 45.33659881268527, 124.48126448706802 45.33659883424997, 124.48126442942723 45.33659884833142, 124.48126436903935 45.33659885441436, 124.48126430811394 45.336598852276204, 124.48126424888054 45.33659884199518, 124.48126419350662 45.33659882394751, 124.48126245339488 45.3365981070488, 124.48126240808115 45.33659808443384, 124.48126236901454 45.33659805661934, 124.48126233737904 45.336598024448115, 124.4812623141331 45.33659798889509, 124.48125336905181 45.336580430028526), (124.48111366962634 45.33638641506109, 124.48111373324942 45.336386405118525, 124.48111379840977 45.336386404505376, 124.48111386238631 45.336386413247276, 124.48111392250732 45.33638643097913, 124.4811139762622 45.33638645696049, 124.481114021406 45.336386490106335, 124.48111405605351 45.336386529032495, 124.48111407875804 45.33638657211338, 124.48111408857118 45.33638661754995, 124.48111408508329 45.33638666344473, 124.48111406843992 45.33638670788115, 124.481109077549 45.33639604213089, 124.48110824352078 45.33639828622513, 124.48110823850438 45.336398309326114, 124.48110808202931 45.336400626593814, 124.48110808391023 45.336400649925956, 124.48110861177895 45.33640293975236, 124.48110862047551 45.33640296230314, 124.48110980976475 45.33640512525107, 124.48110982486166 45.33640514598967, 124.48111164353848 45.33640710708887, 124.4811252238922 45.33641887673125, 124.48112526898258 45.336418928990604, 124.48116130340347 45.33647736337289, 124.48121010331654 45.33656201632147, 124.48124120785805 45.33662307290304, 124.48124122488888 45.33662312540642, 124.48124667030766 45.336659609829304, 124.48124667087798 45.33665965272049, 124.48124665989249 45.33665969490803, 124.48124663775094 45.336659734857456, 124.48124660525865 45.336659771115734, 124.48124656359737 45.33665980236411, 124.48124651428235 45.336659827465986, 124.48124645910741 45.336659845508386, 124.48124640007923 45.33665985583504, 124.48124633934478 45.33665985807038, 124.48124627911325 45.33665985213309, 124.48124622157526 45.33665983823912, 124.48124616882352 45.33665981689383, 124.4812461227768 45.33665978887357, 124.4812460851099 45.336659755197495, 124.48124605719279 45.33665971709049, 124.48113580133457 45.3364658187134, 124.48113522790639 45.33646492423689, 124.48109041605285 45.336402374385074, 124.48109039275 45.336402331431444, 124.48109038232288 45.33640228603272, 124.4810903852074 45.336402240087224, 124.481090401283 45.33640219551617, 124.48109546902995 45.336392449844986, 124.48109549267232 45.33639241432164, 124.48109552470946 45.33639238223733, 124.48109556416615 45.336392354568844, 124.48109560984102 45.33639233215851, 124.48110551280902 45.33638832882831, 124.48110557095268 45.33638831049386, 124.48111366962634 45.33638641506109), (124.4812308647221 45.3364071117863, 124.48123087053764 45.33640706757685, 124.48123088855388 45.336407025034596, 124.48123091806855 45.3364069858175, 124.48123095793156 45.33640695145385, 124.4812310065894 45.33640692328285, 124.48123106214568 45.336406902402395, 124.4812311224354 45.3364068896262, 124.48123118510905 45.33640688545215, 124.48123124772401 45.33640689004293, 124.48123130784018 45.33640690321964, 124.48123136311479 45.33640692446876, 124.48123141139368 45.336406952962186, 124.48123145079528 45.33640698758949, 124.48123147978426 45.33640702700121, 124.48123481323331 45.3364129186812, 124.48123483034126 45.33641296006419, 124.48123483594082 45.33641300298904, 124.48123482982632 45.336413045878906, 124.48123481222247 45.336413087158284, 124.48123478377578 45.336413125310834, 124.48123474553134 45.33641315893503, 124.48123469889404 45.33641318679571, 124.48123464557688 45.336413207869455, 124.48123458753867 45.336413221382124, 124.48123452691127 45.33641322683735, 124.48123446592166 45.33641322403475, 124.48123440681046 45.33641321307724, 124.48123435174894 45.33641319436737, 124.48123430275976 45.3364131685924, 124.48123100336663 45.33641105697863, 124.48123095942778 45.33641102238156, 124.4812309265022 45.33641098215668, 124.48123090599401 45.33641093801957, 124.48123089877795 45.33641089185254, 124.4812308647221 45.3364071117863), (124.48113622090322 45.33668024738259, 124.48113620489347 45.33668020512331, 124.4811362007847 45.336680161477645, 124.48113620873234 45.33668011809652, 124.48113622843559 45.33668007662083, 124.48113625914944 45.33668003861944, 124.48113629971195 45.336680005529736, 124.48113634858879 45.33667997860338, 124.4811364039313 45.33667995885886, 124.48113646364611 45.33667994704303, 124.4811365254743 45.336679943602824, 124.48113658707746 45.33667994866838, 124.48113664612517 45.33667996204807, 124.48113670038414 45.33667998323582, 124.48113674780181 45.33668001143018, 124.48113678658477 45.3366800455647, 124.48113681526588 45.336680084348195, 124.48119511919136 45.33678204252713, 124.48121024192099 45.336811027539284, 124.48121025756609 45.33681106981534, 124.48121026132615 45.33681111342707, 124.48121025305919 45.33681115672859, 124.48121023307748 45.33681119808569, 124.48121020213483 45.33681123593759, 124.48121016139918 45.33681126885571, 124.48121011240784 45.33681129559777, 124.48121005700979 45.336811315154485, 124.4812099972956 45.33681132678781, 124.4812099355191 45.3368113300587, 124.48120987401153 45.33681132484371, 124.48120981509436 45.336811311339645, 124.48120976099102 45.336811290056154, 124.48120971374333 45.33681126179649, 124.48120967513454 45.33681122762716, 124.48120964662164 45.33681118883769, 124.48114986923102 45.33670593814283, 124.48113622090322 45.33668024738259)), ((124.48259440191154 45.339635154328946, 124.48259445586315 45.33963515285914, 124.48259681364819 45.33963522964018, 124.48259684478896 45.339635228496434, 124.48259990445126 45.33963490191913, 124.48259993467767 45.33963489651274, 124.48260284520897 45.33963415524328, 124.48260287335849 45.339634145782234, 124.4826055229088 45.339633018307005, 124.48260554790014 45.339633005154816, 124.48260783464814 45.33963153480234, 124.48260785552145 45.339631518464024, 124.48260969158889 45.33962976173908, 124.48260970754095 45.339629742843435, 124.48261102236893 45.33962776725595, 124.48261103278791 45.33962774652755, 124.48261177584803 45.33962562799897, 124.48261178033273 45.33962560623561, 124.48261192307008 45.33962342617845, 124.48261192144831 45.33962340421686, 124.48261145837766 45.3396212464105, 124.48261145071152 45.33962122509321, 124.4826103996285 45.339619172460935, 124.4826103862127 45.33961915260803, 124.48260878750979 45.33961728403092, 124.48260876885998 45.3396172664054, 124.48260668397445 45.33961565369177, 124.48260666080765 45.339615638971054, 124.48260657737706 45.33961559560113, 124.482606535763 45.33961556974344, 124.48260650113069 45.33961553919213, 124.48260647452739 45.339615504871226, 124.48260645675794 45.3396154678188, 124.48260604679557 45.33961428160014, 124.48260603637364 45.33961426069055, 124.48260471648749 45.33961226782595, 124.4826047004396 45.33961224876936, 124.48260285074029 45.339610477813764, 124.48260282969333 45.3396104613546, 124.48260052238602 45.33960898143918, 124.48260049716104 45.339608968219416, 124.48259782231385 45.3396078371144, 124.4825977938964 45.33960782765048, 124.4825948559252 45.33960708950993, 124.48259482542366 45.339607084170986, 124.48259173901606 45.339606767809116, 124.4825917076214 45.33960676680363, 124.48258859325844 45.33960688456999, 124.48258856219633 45.33960688793722, 124.48258554145102 45.339607435234626, 124.48258551193388 45.33960744284315, 124.48258270272422 45.33960839830726, 124.48258267590423 45.33960840986005, 124.48258018789093 45.339609736193296, 124.48258016481569 45.33960975123908, 124.48257809512157 45.33961139666645, 124.4825780766907 45.339611414618595, 124.4825765061086 45.33961331490886, 124.48257649307527 45.3396133350151, 124.48257547419276 45.33961543731898, 124.48257447566877 45.33961843832694, 124.48257405980095 45.339620767720284, 124.48257405914352 45.33962079136465, 124.48257434519165 45.33962313041934, 124.48257435157996 45.33962315363599, 124.48257532681423 45.33962539837063, 124.48257533993137 45.339625420071826, 124.48257697886868 45.33962749073515, 124.48257997943246 45.33963048943219, 124.4825820022193 45.33963214105649, 124.48258202481678 45.33963215620993, 124.48258446558555 45.33963349777093, 124.48258449194127 45.339633509524354, 124.4825872569253 45.339634489491544, 124.48258728602548 45.339634497392844, 124.4825902689679 45.33963507810662, 124.48259029969513 45.339635081852364, 124.48259338596267 45.33963524099624, 124.48259341713586 45.33963524044237, 124.48259440191154 45.339635154328946)))</textarea>
            <div class="coord-settings" style="margin-bottom:8px;font-size:12px;color:#333;">
                <label>WKT坐标系：
                    <select id="coordSysSelect" style="margin-left:6px;">
                        <option value="wgs84" selected>WGS84</option>
                        <option value="gcj02">GCJ-02（国测局）</option>
                        <option value="bd09">BD-09（百度）</option>
                        <option value="cgcs2000">CGCS2000</option>
                    </select>
                </label>
                <!-- 已移除“不进行绘制坐标转换”选项，统一使用WGS84绘制 -->
            </div>

            <div class="button-group">
                <button id="drawButton">绘制轮廓</button>
                <button id="clearButton">清空轮廓</button>
            </div>
            <!-- 显示开关：仅保留显示亩数 -->
            <div class="display-toggles" style="margin-top:8px;font-size:12px;color:#333;">
                <label><input type="checkbox" id="toggleLabelsCheckbox"> 显示亩数</label>
            </div>
            <!-- 颜色选择器 -->
            <div class="color-picker-container" style="margin-top:8px;">
                <div style="margin-bottom:6px;font-size:12px;color:#333;">轮廓颜色设置：</div>
                <div style="display:flex;align-items:center;gap:8px;">
                    <div style="display:flex;align-items:center;gap:4px;">
                        <label style="font-size:12px;">边框颜色:</label>
                        <div id="outlineColorPicker" class="color-picker" style="width:24px;height:24px;border:1px solid #ccc;cursor:pointer;background-color:#FFD700;"></div>
                        <input type="color" id="outlineColorInput" value="#FFD700" style="display:none;">
                    </div>
                    <div style="display:flex;align-items:center;gap:4px;">
                        <label style="font-size:12px;">填充颜色:</label>
                        <div id="fillColorPicker" class="color-picker" style="width:24px;height:24px;border:1px solid #ccc;cursor:pointer;background-color:#FFFF00;"></div>
                        <input type="color" id="fillColorInput" value="#FFFF00" style="display:none;">
                    </div>
                    <div style="display:flex;align-items:center;gap:4px;">
                        <label style="font-size:12px;">透明度:</label>
                        <input type="range" id="fillOpacitySlider" min="0" max="100" value="35" style="width:60px;">
                        <span id="fillOpacityValue" style="font-size:12px;">35%</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-pane" id="tabSplit">
            <!-- MultiPolygon → 多个 Polygon 分割器 -->
            <div class="split-section">
                <div class="title">MultiPolygon → 多个 Polygon 分割器</div>
                <div class="desc">输入一个 MULTIPOLYGON WKT，分割为多行 POLYGON WKT。</div>
                <textarea id="multiInput"></textarea>
                <div class="split-actions">
                    <button id="splitMultiBtn">分割为多个 POLYGON</button>
                    <button id="copyPolysBtn">复制结果</button>
                </div>
                <textarea id="polyOutput" readonly></textarea>
            </div>
        </div>

        <div class="tab-pane" id="tabBatch">
            <!-- 批量POLYGON → MULTIPOLYGON 生成器 -->
            <div class="batch-section">
                <div class="title">批量POLYGON → MULTIPOLYGON 合并器</div>
                <div class="desc">每行一个 POLYGON WKT（或用分号分隔）。生成后可一键填充到上方并绘制。</div>
                <textarea id="batchInput"></textarea>
                <div class="batch-actions">
                    <button id="generateMultiBtn">生成 MULTIPOLYGON</button>
                    <button id="copyMultiBtn">复制结果</button>
                </div>
                <textarea id="multiOutput" readonly></textarea>
            </div>
        </div>
        <div class="tab-pane" id="tabTrack">
            <div class="tip">请粘贴轨迹文本（支持两种格式：1）每行一条：定位时间yyyyMMddHHmmss, 经度, 纬度；2）单行#分隔：经度,纬度,定位时间yyyyMMddHHmmss#经度,纬度,定位时间yyyyMMddHHmmss#…）。</div>
            <div class="coord-settings" style="margin-bottom:8px;font-size:12px;color:#333;">
                <label>轨迹坐标系：
                    <select id="trackCoordSysSelect" style="margin-left:6px;">
                        <option value="wgs84" selected>WGS84</option>
                        <option value="gcj02">GCJ-02（国测局）</option>
                        <option value="bd09">BD-09（百度）</option>
                        <option value="cgcs2000">CGCS2000</option>
                    </select>
                </label>
            </div>
            <textarea id="trackTextarea" style="width:100%;height:120px;margin-bottom:10px;padding:8px;border:1px solid #ddd;border-radius:4px;font-family:monospace;resize:vertical;box-sizing:border-box;">20251005060816,124.504376,45.342028
20251005061446,124.503261,45.341735
20251005061456,124.502850,45.341662
20251005061506,124.502552,45.342048
20251005061516,124.502322,45.342373
20251005061526,124.501993,45.342506
20251005061536,124.501630,45.342735
20251005061546,124.501190,45.342706
20251005061556,124.500843,45.343088
20251005061606,124.500244,45.343708
20251005061616,124.499677,45.344322
20251005061626,124.499172,45.344880
20251005061636,124.498664,45.345475
20251005061646,124.498373,45.345870
20251005061656,124.498071,45.346216
20251005061706,124.497756,45.346427
20251005061716,124.497376,45.346722
20251005061726,124.497034,45.346889
20251005061736,124.496457,45.346638
20251005061746,124.495757,45.346331
20251005061756,124.495031,45.346009
20251005061806,124.494262,45.345676
20251005061816,124.493597,45.345394
20251005061826,124.492999,45.345123
20251005061836,124.492203,45.344772
20251005061846,124.491551,45.344263
20251005061856,124.490934,45.343717
20251005061906,124.490314,45.343263
20251005061916,124.489783,45.342880
20251005061926,124.489346,45.342651
20251005061937,124.488684,45.342378
20251005061947,124.487878,45.342018
20251005061957,124.487196,45.341683
20251005062007,124.486576,45.341343
20251005062017,124.485942,45.340985
20251005062027,124.485235,45.340797
20251005062037,124.484488,45.340913
20251005062047,124.483634,45.340914
20251005062057,124.482930,45.340985
20251005062107,124.482504,45.341176
20251005062117,124.482462,45.341170
20251005062127,124.482327,45.341108
20251005062137,124.482196,45.341027
20251005062147,124.482101,45.340935
20251005062157,124.482020,45.340828
20251005062207,124.481939,45.340717
20251005062217,124.481950,45.340603
20251005062227,124.482000,45.340555
20251005062237,124.482014,45.340539
20251005062247,124.482099,45.340428
20251005062257,124.482180,45.340314
20251005062307,124.482274,45.340180
20251005062317,124.482410,45.339976
20251005062327,124.482544,45.339763
20251005062337,124.482587,45.339633
20251005062347,124.482591,45.339627
20251005062357,124.482591,45.339627
20251005062602,124.482596,45.339624
20251005062612,124.482592,45.339623
20251005062622,124.482591,45.339618
20251005062632,124.482591,45.339618
20251005062642,124.482590,45.339619
20251005062652,124.482590,45.339621
20251005062702,124.482593,45.339624
20251005062838,124.482640,45.339512
20251005062848,124.482645,45.339490
20251005062858,124.482646,45.339489
20251005062908,124.482631,45.339454
20251005062918,124.482599,45.339393
20251005062928,124.482567,45.339328
20251005062938,124.482522,45.339245
20251005062948,124.482478,45.339169
20251005062958,124.482457,45.339134
20251005063008,124.482421,45.339067
20251005063018,124.482381,45.338989
20251005063028,124.482350,45.338937
20251005063038,124.482314,45.338875
20251005063048,124.482274,45.338806
20251005063058,124.482236,45.338739
20251005063108,124.482207,45.338689
20251005063118,124.482190,45.338652
20251005063128,124.482158,45.338600
20251005063138,124.482120,45.338540
20251005063148,124.482089,45.338490
20251005063158,124.482058,45.338426
20251005063208,124.482044,45.338399
20251005063218,124.482034,45.338380
20251005063228,124.482017,45.338343
20251005063238,124.482010,45.338327
20251005063248,124.482013,45.338323
20251005063258,124.481990,45.338268
20251005063308,124.482003,45.338288
20251005063318,124.481973,45.338247
20251005063328,124.481937,45.338181
20251005063338,124.481920,45.338145
20251005063348,124.481886,45.338084
20251005063358,124.481856,45.338031
20251005063408,124.481824,45.337975
20251005063418,124.481792,45.337914
20251005063429,124.481757,45.337844
20251005063439,124.481727,45.337786
20251005063449,124.481693,45.337722
20251005063459,124.481661,45.337653
20251005063509,124.481625,45.337590
20251005063519,124.481593,45.337523
20251005063529,124.481555,45.337452
20251005063539,124.481510,45.337372
20251005063549,124.481470,45.337294
20251005063559,124.481427,45.337214
20251005063609,124.481386,45.337139
20251005063619,124.481348,45.337061
20251005063629,124.481358,45.337086
20251005063639,124.481332,45.337176
20251005063649,124.481329,45.337191
20251005063659,124.481324,45.337201
20251005063709,124.481330,45.337193
20251005063719,124.481318,45.337210
20251005063729,124.481318,45.337210
20251005063739,124.481319,45.337209
20251005063749,124.481319,45.337209
20251005063759,124.481319,45.337209
20251005063809,124.481319,45.337209
20251005063819,124.481319,45.337209
20251005063829,124.481319,45.337209
20251005063839,124.481319,45.337209
20251005063849,124.481319,45.337209
20251005063859,124.481319,45.337209
20251005063909,124.481319,45.337209
20251005063919,124.481319,45.337209
20251005063929,124.481319,45.337209
20251005063939,124.481319,45.337209
20251005063949,124.481319,45.337209
20251005063959,124.481319,45.337209
20251005064009,124.481319,45.337209
20251005064019,124.481319,45.337209
20251005064029,124.481319,45.337209
20251005064039,124.481319,45.337209
20251005064049,124.481319,45.337209
20251005064059,124.481319,45.337209
20251005064109,124.481319,45.337209
20251005064119,124.481319,45.337209
20251005064129,124.481319,45.337209
20251005064139,124.481319,45.337209
20251005064149,124.481284,45.337149
20251005064159,124.481199,45.337034
20251005064209,124.481198,45.337032
20251005064219,124.481262,45.337138
20251005064229,124.481325,45.337107
20251005064239,124.481321,45.337057
20251005064249,124.481321,45.337054
20251005064259,124.481316,45.337044
20251005064309,124.481278,45.336970
20251005064319,124.481241,45.336902
20251005064329,124.481206,45.336835
20251005064339,124.481172,45.336773
20251005064349,124.481135,45.336710
20251005064359,124.481106,45.336657
20251005064409,124.481102,45.336650
20251005064419,124.481084,45.336614
20251005065456,124.481093,45.336632
20251005065506,124.481093,45.336632
20251005065516,124.481074,45.336597
20251005065526,124.481030,45.336521
20251005065536,124.480986,45.336440
20251005065546,124.481018,45.336500
20251005065556,124.481011,45.336490
20251005065606,124.480990,45.336451
20251005065616,124.480971,45.336422
20251005065626,124.481022,45.336401
20251005065636,124.480998,45.336416
20251005065646,124.481011,45.336430
20251005065656,124.481050,45.336497
20251005065706,124.481078,45.336546
20251005065716,124.481120,45.336622
20251005065726,124.481169,45.336708
20251005065736,124.481210,45.336778
20251005065746,124.481251,45.336855
20251005065756,124.481294,45.336939
20251005065806,124.481342,45.337024
20251005065816,124.481388,45.337112
20251005065826,124.481433,45.337201
20251005065836,124.481456,45.337242
20251005065846,124.481499,45.337322
20251005065856,124.481539,45.337397
20251005065906,124.481576,45.337467
20251005065916,124.481623,45.337550
20251005065926,124.481662,45.337629
20251005065936,124.481700,45.337707
20251005065946,124.481742,45.337787
20251005065956,124.481780,45.337865
20251005070006,124.481824,45.337951
20251005070016,124.481871,45.338041
20251005070026,124.481906,45.338104
20251005070036,124.481944,45.338179
20251005070046,124.481993,45.338273
20251005070056,124.482038,45.338364
20251005070106,124.482069,45.338427
20251005070116,124.482035,45.338359
20251005070126,124.482030,45.338348
20251005070136,124.482031,45.338348
20251005070146,124.482031,45.338348
20251005070156,124.482031,45.338349
20251005070206,124.482031,45.338349
20251005070216,124.482075,45.338439
20251005070226,124.482108,45.338499
20251005070236,124.482157,45.338579
20251005070246,124.482206,45.338666
20251005070256,124.482251,45.338749
20251005070306,124.482293,45.338821
20251005070316,124.482330,45.338886
20251005070326,124.482360,45.338938
20251005070336,124.482404,45.339020
20251005070346,124.482438,45.339081
20251005070356,124.482470,45.339136
20251005070406,124.482519,45.339225
20251005070416,124.482566,45.339309
20251005070426,124.482610,45.339394
20251005070436,124.482635,45.339441
20251005070446,124.482612,45.339398
20251005070456,124.482651,45.339431
20251005070506,124.482677,45.339449
20251005070516,124.482690,45.339466
20251005070526,124.482676,45.339497
20251005070536,124.482676,45.339497
20251005070801,124.482671,45.339413
20251005070811,124.482634,45.339337
20251005070821,124.482593,45.339260
20251005070831,124.482546,45.339177
20251005070841,124.482495,45.339087
20251005070851,124.482447,45.339000
20251005070901,124.482413,45.338936
20251005070911,124.482373,45.338865
20251005070921,124.482328,45.338790
20251005070931,124.482284,45.338710
20251005070941,124.482242,45.338635
20251005070951,124.482234,45.338622
20251005071001,124.482243,45.338704
20251005071011,124.482243,45.338704
20251005071021,124.482243,45.338704
20251005071031,124.482243,45.338703
20251005071041,124.482243,45.338703
20251005071051,124.482226,45.338615
20251005071101,124.482187,45.338539
20251005071111,124.482158,45.338490
20251005071121,124.482116,45.338419
20251005071131,124.482081,45.338349
20251005071141,124.482044,45.338269
20251005071151,124.482009,45.338196
20251005071201,124.481967,45.338115
20251005071211,124.481937,45.338060
20251005071221,124.481892,45.337978
20251005071231,124.481848,45.337897
20251005071241,124.481808,45.337816
20251005071251,124.481772,45.337743
20251005071301,124.481746,45.337692
20251005071311,124.481712,45.337624
20251005071321,124.481672,45.337546
20251005071331,124.481653,45.337501
20251005071341,124.481644,45.337535
20251005071351,124.481601,45.337482
20251005071401,124.481638,45.337549
20251005071411,124.481587,45.337435
20251005071421,124.481573,45.337361
20251005071431,124.481560,45.337335
20251005071441,124.481564,45.337342
20251005071451,124.481564,45.337342
20251005071501,124.481564,45.337342
20251005071511,124.481564,45.337342
20251005071521,124.481564,45.337342
20251005071531,124.481564,45.337342
20251005072027,124.481434,45.337101
20251005072037,124.481397,45.337030
20251005072047,124.481356,45.336952
20251005072057,124.481315,45.336876
20251005072107,124.481272,45.336796
20251005072117,124.481230,45.336718
20251005072127,124.481181,45.336633
20251005072137,124.481136,45.336551
20251005072147,124.481106,45.336496
20251005072157,124.481057,45.336419
20251005072207,124.481071,45.336441
20251005072217,124.481052,45.336397
20251005072227,124.481099,45.336378
20251005072237,124.481146,45.336367
20251005072247,124.481146,45.336368
20251005072257,124.481086,45.336378
20251005072307,124.481073,45.336403
20251005072317,124.481121,45.336470
20251005072327,124.481171,45.336557
20251005072337,124.481222,45.336646
20251005072347,124.481266,45.336725
20251005072357,124.481308,45.336802
20251005072407,124.481347,45.336876
20251005072417,124.481390,45.336954
20251005072427,124.481435,45.337041
20251005072437,124.481478,45.337123
20251005072447,124.481424,45.337018
20251005072457,124.481424,45.337018
20251005072507,124.481424,45.337018
20251005072517,124.481424,45.337018
20251005072527,124.481424,45.337018
20251005072537,124.481424,45.337018
20251005072547,124.481424,45.337019
20251005072557,124.481424,45.337019
20251005072607,124.481428,45.337027
20251005072617,124.481491,45.337148
20251005072627,124.481536,45.337232
20251005072637,124.481585,45.337322
20251005072647,124.481630,45.337403
20251005072657,124.481651,45.337441
20251005072707,124.481594,45.337371
20251005072717,124.481628,45.337443
20251005072727,124.481600,45.337405
20251005072737,124.481659,45.337453
20251005072747,124.481697,45.337532
20251005072757,124.481731,45.337596
20251005072807,124.481719,45.337589
20251005072817,124.481751,45.337690
20251005072827,124.481810,45.337765
20251005072837,124.481861,45.337856
20251005072847,124.481910,45.337948
20251005072857,124.481959,45.338041
20251005072907,124.482012,45.338139
20251005072917,124.482061,45.338237
20251005072927,124.482110,45.338342
20251005072937,124.482156,45.338433
20251005072947,124.482209,45.338520
20251005072957,124.482266,45.338620
20251005073007,124.482299,45.338677
20251005073017,124.482340,45.338753
20251005073027,124.482388,45.338835
20251005073037,124.482441,45.338928
20251005073047,124.482463,45.338970
20251005073057,124.482507,45.339048
20251005073107,124.482556,45.339135
20251005073117,124.482605,45.339225
20251005073127,124.482658,45.339321
20251005073137,124.482685,45.339370
20251005073147,124.482646,45.339309
20251005073157,124.482646,45.339309
20251005073207,124.482646,45.339309
20251005073217,124.482646,45.339309
20251005073227,124.482646,45.339309
20251005073237,124.482646,45.339310
20251005073247,124.482646,45.339310
20251005073257,124.482651,45.339327
20251005073307,124.482658,45.339359
20251005073317,124.482658,45.339359
20251005073327,124.482671,45.339380
20251005073337,124.482728,45.339404
20251005073347,124.482755,45.339403
20251005073357,124.482711,45.339449
20251005074013,124.482699,45.339309
20251005074023,124.482665,45.339234
20251005074033,124.482629,45.339161
20251005074043,124.482597,45.339097
20251005074053,124.482553,45.339022
20251005074103,124.482511,45.338946
20251005074113,124.482490,45.338905
20251005074123,124.482451,45.338829
20251005074133,124.482408,45.338751
20251005074143,124.482362,45.338670
20251005074153,124.482326,45.338601
20251005074203,124.482282,45.338520
20251005074213,124.482243,45.338456
20251005074223,124.482191,45.338377
20251005074233,124.482152,45.338295
20251005074243,124.482114,45.338215
20251005074253,124.482071,45.338129
20251005074303,124.482022,45.338041
20251005074313,124.481972,45.337948
20251005074323,124.481922,45.337854
20251005074333,124.481923,45.337862
20251005074343,124.481874,45.337800
20251005074353,124.481857,45.337762
20251005074403,124.481896,45.337857
20251005074413,124.481839,45.337739
20251005074423,124.481817,45.337684
20251005074433,124.481831,45.337752
20251005074443,124.481821,45.337775
20251005074453,124.481724,45.337679
20251005074503,124.481758,45.337568
20251005074513,124.481729,45.337490
20251005074523,124.481682,45.337404
20251005074533,124.481633,45.337313
20251005074543,124.481581,45.337219
20251005074553,124.481533,45.337127
20251005074603,124.481485,45.337036
20251005074613,124.481439,45.336947
20251005074623,124.481390,45.336856
20251005074633,124.481340,45.336762
20251005074643,124.481289,45.336671
20251005074653,124.481255,45.336608
20251005074703,124.481276,45.336742
20251005074713,124.481275,45.336742
20251005074723,124.481275,45.336742
20251005074733,124.481275,45.336742
20251005074743,124.481275,45.336742
20251005074753,124.481279,45.336664
20251005074803,124.481225,45.336558
20251005074813,124.481176,45.336473
20251005074823,124.481139,45.336413
20251005074833,124.481124,45.336400
20251005074843,124.481147,45.336357
20251005074853,124.481111,45.336362
20251005074903,124.481168,45.336409
20251005074913,124.481174,45.336414
20251005074923,124.481174,45.336414
20251005074933,124.481212,45.336477
20251005074943,124.481257,45.336555
20251005074953,124.481307,45.336640
20251005075003,124.481357,45.336727
20251005075013,124.481399,45.336808
20251005075023,124.481445,45.336893
20251005075033,124.481485,45.336970
20251005075043,124.481482,45.336962
20251005075053,124.481501,45.337002
20251005075103,124.481543,45.337082
20251005075113,124.481583,45.337159
20251005075123,124.481629,45.337243
20251005075133,124.481679,45.337333
20251005075143,124.481730,45.337425
20251005075153,124.481781,45.337522
20251005075203,124.481811,45.337576
20251005075213,124.481841,45.337635
20251005075223,124.481884,45.337721
20251005075233,124.481867,45.337683
20251005075243,124.481813,45.337586
20251005075253,124.481765,45.337516
20251005075303,124.481791,45.337624
20251005075313,124.481765,45.337577
20251005075323,124.481784,45.337639
20251005075333,124.481795,45.337591
20251005075343,124.481851,45.337708
20251005075353,124.481837,45.337657
20251005075403,124.481811,45.337642
20251005075413,124.481833,45.337645
20251005075423,124.481841,45.337797
20251005075433,124.481890,45.337817
20251005075443,124.481968,45.337895
20251005075453,124.482019,45.337987
20251005075503,124.482057,45.338057
20251005075513,124.482102,45.338146
20251005075523,124.482152,45.338251
20251005075533,124.482198,45.338348
20251005075543,124.482241,45.338426
20251005075553,124.482299,45.338519
20251005075603,124.482347,45.338606
20251005075613,124.482389,45.338679
20251005075623,124.482434,45.338757
20251005075633,124.482484,45.338844
20251005075643,124.482532,45.338933
20251005075653,124.482583,45.339026
20251005075703,124.482638,45.339125
20251005075713,124.482690,45.339218
20251005075723,124.482737,45.339306
20251005075733,124.482699,45.339235
20251005075743,124.482700,45.339236
20251005075753,124.482700,45.339236
20251005075803,124.482700,45.339236
20251005075813,124.482700,45.339236
20251005075823,124.482700,45.339236
20251005075833,124.482704,45.339246
20251005075843,124.482735,45.339306
20251005075853,124.482735,45.339307
20251005075903,124.482751,45.339321
20251005075913,124.482780,45.339334
20251005075923,124.482779,45.339330
20251005082034,124.482727,45.339160
20251005082044,124.482680,45.339079
20251005082054,124.482657,45.339036
20251005082104,124.482624,45.338981
20251005082114,124.482581,45.338900
20251005082124,124.482541,45.338829
20251005082134,124.482501,45.338758
20251005082144,124.482457,45.338683
20251005082154,124.482413,45.338606
20251005082204,124.482377,45.338540
20251005082214,124.482328,45.338450
20251005082224,124.482279,45.338372
20251005082234,124.482242,45.338297
20251005082244,124.482208,45.338218
20251005082254,124.482164,45.338129
20251005082304,124.482135,45.338070
20251005082314,124.482100,45.337999
20251005082324,124.482060,45.337926
20251005082334,124.482016,45.337843
20251005082344,124.481993,45.337794
20251005082354,124.481984,45.337775
20251005082404,124.481987,45.337826
20251005082414,124.481953,45.337765
20251005082424,124.481962,45.337783
20251005082434,124.481972,45.337756
20251005082444,124.481945,45.337696
20251005082454,124.481925,45.337658
20251005082504,124.481884,45.337584
20251005082514,124.481841,45.337494
20251005082524,124.481788,45.337399
20251005082534,124.481732,45.337296
20251005082544,124.481675,45.337189
20251005082554,124.481646,45.337134
20251005082604,124.481679,45.337187
20251005082614,124.481649,45.337120
20251005082625,124.481666,45.337187
20251005082635,124.481591,45.337095
20251005082645,124.481581,45.337024
20251005082655,124.481542,45.336936
20251005082705,124.481504,45.336860
20251005082715,124.481462,45.336779
20251005082725,124.481413,45.336688
20251005082735,124.481358,45.336592
20251005082745,124.481335,45.336547
20251005082755,124.481338,45.336553
20251005082805,124.481347,45.336676
20251005082815,124.481347,45.336676
20251005082825,124.481343,45.336675
20251005082835,124.481343,45.336674
20251005082845,124.481343,45.336673
20251005082855,124.481337,45.336646
20251005082905,124.481314,45.336534
20251005082915,124.481269,45.336443
20251005082925,124.481226,45.336367
20251005082935,124.481280,45.336446
20251005082945,124.481214,45.336305
20251005082955,124.481215,45.336416
20251005083005,124.481226,45.336422
20251005083015,124.481290,45.336464
20251005083025,124.481313,45.336498
20251005083035,124.481384,45.336609
20251005083045,124.481450,45.336721
20251005083055,124.481507,45.336829
20251005083105,124.481567,45.336945
20251005083115,124.481623,45.337054
20251005083125,124.481613,45.337038
20251005083135,124.481582,45.337097
20251005083145,124.481663,45.337157
20251005083155,124.481697,45.337193
20251005083205,124.481706,45.337217
20251005083215,124.481718,45.337236
20251005083225,124.481780,45.337346
20251005083235,124.481839,45.337452
20251005083245,124.481899,45.337574
20251005083255,124.481918,45.337611
20251005083305,124.481916,45.337608
20251005083315,124.481888,45.337603
20251005083325,124.481942,45.337660
20251005083335,124.481936,45.337649
20251005083345,124.481951,45.337691
20251005083355,124.482012,45.337799
20251005083405,124.482055,45.337883
20251005083415,124.482127,45.338011
20251005083425,124.482194,45.338144
20251005083435,124.482257,45.338273
20251005083445,124.482309,45.338388
20251005083455,124.482388,45.338510
20251005083505,124.482458,45.338633
20251005083515,124.482537,45.338768
20251005083525,124.482614,45.338912
20251005083535,124.482678,45.339026
20251005083545,124.482719,45.339099
20251005083555,124.482784,45.339212
20251005083605,124.482827,45.339293
20251005083615,124.482776,45.339207
20251005083625,124.482779,45.339206
20251005083635,124.482783,45.339206
20251005083645,124.482781,45.339207
20251005083655,124.482780,45.339206
20251005083704,124.482778,45.339204
20251005083714,124.482776,45.339203
20251005083724,124.482787,45.339337
20251005084211,124.482177,45.340309
20251005084221,124.481979,45.340570
20251005084231,124.481960,45.340751
20251005084241,124.482089,45.340929
20251005084251,124.482300,45.341098
20251005084301,124.482588,45.341167
20251005084311,124.482956,45.340973
20251005084321,124.483249,45.340848
20251005084331,124.483422,45.340887
20251005084341,124.483801,45.340943
20251005084351,124.484241,45.340956
20251005084401,124.484660,45.340889
20251005084411,124.485076,45.340814
20251005084421,124.485503,45.340825
20251005084431,124.485899,45.340969
20251005084441,124.486241,45.341140
20251005084451,124.486386,45.341230
20251005084501,124.486816,45.341489
20251005084511,124.487368,45.341774
20251005084521,124.488019,45.342091
20251005084531,124.488742,45.342407
20251005084541,124.489540,45.342743
20251005084551,124.490077,45.343100
20251005084601,124.490628,45.343495
20251005084611,124.491196,45.343951
20251005084621,124.491773,45.344479
20251005084631,124.491996,45.344665
20251005084641,124.492699,45.344993
20251005084651,124.493614,45.345395
20251005084701,124.494504,45.345782
20251005084711,124.495389,45.346173
20251005084721,124.496215,45.346533
20251005084731,124.496913,45.346840
20251005084741,124.497293,45.346812
20251005084751,124.497809,45.346415
20251005084801,124.498221,45.346053
20251005084811,124.498868,45.345265
20251005084821,124.499345,45.344694
20251005084831,124.499570,45.344453
20251005084841,124.500174,45.343811
20251005084851,124.500282,45.343675
20251005084901,124.500333,45.343620
20251005084911,124.500429,45.343543
20251005084921,124.500865,45.343085
20251005084931,124.501137,45.342763
20251005084941,124.501511,45.342725
20251005084951,124.501911,45.342585
20251005085001,124.502207,45.342403
20251005085011,124.502486,45.342163
20251005085021,124.502792,45.341727
20251005085031,124.503161,45.341713
20251005085041,124.503952,45.341946
20251005153234,124.504474,45.342040
20251005153244,124.504471,45.342047
20251005153254,124.504447,45.342116
20251005153304,124.504510,45.342231</textarea>
            <div class="button-group">
                <button id="drawTrackButton" disabled style="flex: 1;">绘制轨迹</button>
                <button id="showTrackPointsButton" disabled style="flex: 1;" class="btn-warning">打点</button>
                <button id="clearTrackButton" disabled style="flex: 1;">清空轨迹</button>
            </div>
            <!-- 轨迹颜色选择器 -->
            <div class="color-picker-container" style="margin-top:8px;">
                <div style="margin-bottom:6px;font-size:12px;color:#333;">轨迹颜色设置：</div>
                <div style="display:flex;align-items:center;gap:8px;">
                    <div style="display:flex;align-items:center;gap:4px;">
                        <label style="font-size:12px;">轨迹线颜色:</label>
                        <div id="trackLineColorPicker" class="color-picker" style="width:24px;height:24px;border:1px solid #ccc;cursor:pointer;background-color:#FF0000;"></div>
                        <input type="color" id="trackLineColorInput" value="#FF0000" style="display:none;">
                    </div>
                    <div style="display:flex;align-items:center;gap:4px;">
                        <label style="font-size:12px;">轨迹点颜色:</label>
                        <div id="trackPointColorPicker" class="color-picker" style="width:24px;height:24px;border:1px solid #ccc;cursor:pointer;background-color:#68EAF3;"></div>
                        <input type="color" id="trackPointColorInput" value="#68EAF3" style="display:none;">
                    </div>
                </div>
            </div>
            <!-- 回放控制 -->
            <div class="split-section" style="margin-top:8px;">
                <div class="title">轨迹回放</div>
                <div class="playback-actions" style="display:flex;gap:8px;margin-bottom:8px;">
                    <button id="playbackStartBtn" disabled>开始</button>
                    <button id="playbackPauseBtn" disabled>继续</button>
                    <button id="playbackStopBtn" disabled>结束</button>
                </div>
                <div class="playback-speed" style="display:flex;align-items:center;gap:8px;margin-bottom:8px;">
                    <label>速度：
                        <select id="playbackSpeedSelect" disabled>
                            <option value="1" selected>1×</option>
                            <option value="2">2×</option>
                            <option value="4">4×</option>
                            <option value="8">8×</option>
                            <option value="16">16×</option>
                            <option value="32">32×</option>
                            <option value="64">64×</option>
                            <option value="128">128×</option>
                            <option value="256">256×</option>
                            <option value="512">512×</option>
                            <option value="1024">1024×</option>
                        </select>
                    </label>
                    <span id="playbackTimeLabel" style="font-size:12px;color:#666;">时间：—</span>
                </div>
                <div class="playback-time" style="display:flex;flex-direction:column;gap:4px;margin-bottom:8px;">
                    <label class="playback-time-label" style="display:flex;align-items:center;gap:8px;flex:1 1 auto;min-width:0;">
                        <span class="playback-time-text" style="white-space:nowrap;">起始时间：</span>
                        <input type="range" id="playbackTimeSlider" disabled min="0" max="0" step="1000" value="0" style="flex:1 1 auto;min-width:0;max-width:100%;vertical-align:middle;">
                    </label>
                    <span id="playbackTimeCursor" style="font-size:12px;color:#666;align-self:flex-end;">—</span>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    let map;
    let currentPolygons = []; // 存储多边形和其标签
    let currentTracks = []; // 存储轨迹折线及相关覆盖物
    let mapLoaded = false;
    let mapLabelHandlers = []; // 存储地图事件处理器
    let labelsEnabled = false; // 标签显示开关（默认关闭）
    let isDrawing = false; // 绘制进行中防止重复点击
    let currentMapType = 'satellite'; // 当前地图类型：'satellite'（卫星图）或'street'（街道图）

    window.onload = function () {
        if (typeof T === 'undefined') {
            alert("天地图API加载失败，请检查网络或密钥！");
            return;
        }
        initMap();
        bindDrawEvent();
        bindMinimizeEvent();
        bindTabs();
        bindBatchGenerator();
        bindMultiSplitter();
        bindLabelsToggle(); // 绑定标签显示开关
        bindTrackEvents();  // 绑定轨迹绘制与清空
        bindPlaybackControls(); // 绑定轨迹回放
        bindMeasureEvents(); // 绑定测量功能
        bindMapTypeEvent(); // 绑定地图类型切换功能
        initColorPickers(); // 初始化颜色选择器
    };

    function initMap() {
        showLoading();
        disableButtons(true);

        try {
            map = new T.Map("mapContainer", {
                zoom: 12,
                center: new T.LngLat(116.40769, 39.90403)
            });

            // 已移除测试标签
            map.enableScrollWheelZoom();

            // 不再添加地图类型控件到地图，改为使用左侧工具条按钮切换
            // const mapTypeCtrl = new T.Control.MapType({
            //     mapTypes: [TMAP_NORMAL_MAP, TMAP_SATELLITE_MAP, TMAP_TERRAIN_MAP],
            //     position: T_ANCHOR_TOP_LEFT
            // });
            // map.addControl(mapTypeCtrl);

            // 加载影像底图（卫星）
            const tk = "648f621977051d0199ff0f965d3fd322";

            // 方案1：使用默认地图类型（作为备选）
            map.setMapType(TMAP_SATELLITE_MAP);
            currentMapType = 'satellite';
            updateMapTypeButton('卫星图');

            // 方案2：手动添加影像图层（底图 + 标注）
            const vecLayer = new T.TileLayer(`https://t0.tianditu.gov.cn/img_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=img&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk=${tk}`);
            const cvaLayer = new T.TileLayer(`https://t0.tianditu.gov.cn/cia_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=cia&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk=${tk}`);

            // 添加图层并监听加载状态
            vecLayer.addEventListener("load", function () {
                console.log("影像底图加载完成");
            });

            vecLayer.addEventListener("error", function (e) {
                console.error("影像底图加载错误:", e);
                alert("影像底图加载错误，将使用默认地图类型");
            });

            map.addLayer(vecLayer);
            map.addLayer(cvaLayer);

            // 监听地图加载事件
            map.addEventListener("loaded", function () {
                console.log("地图加载完成");
                markMapLoaded();
            });
            map.addEventListener("load", function () {
                console.log("地图load事件触发");
                markMapLoaded();
            });
            map.addEventListener("tilesloaded", function () {
                console.log("地图瓦片加载完成");
                markMapLoaded();
            });
            // 监听地图加载失败事件
            map.addEventListener("error", function (e) {
                console.error("地图加载错误:", e);
                alert("地图加载错误: " + e.message);
                hideLoading();
            });

            // 监听地图移动事件，用于更新标签位置
            const moveHandler = function () {
                updateAllLabelsPosition();
            };
            map.addEventListener("move", moveHandler);
            map.addEventListener("zoom", moveHandler);

            // 存储事件处理器，用于清理
            mapLabelHandlers.push({ event: "move", handler: moveHandler });
            mapLabelHandlers.push({ event: "zoom", handler: moveHandler });

            // 超时容错
            setTimeout(() => {
                if (!mapLoaded) markMapLoaded();
            }, 8000);

        } catch (error) {
            alert("地图初始化失败：" + error.message);
            console.error(error);
            hideLoading();
        }
    }

    function markMapLoaded() {
        if (!mapLoaded) {
            mapLoaded = true;
            hideLoading();
            // 不再禁用按钮，保持按钮始终可用
            // disableButtons(false);
            disableTrackButtons(false);
            // 仅开启速度选择，回放按钮按状态控制
            const speedSel = document.getElementById('playbackSpeedSelect');
            if (speedSel) speedSel.disabled = false;
            updatePlaybackButtonsState('idle');
        }
    }

    function showLoading() {
        const loading = document.getElementById("mapLoading");
        loading.style.display = "flex";
        loading.style.opacity = "1";
    }

    function hideLoading() {
        const loading = document.getElementById("mapLoading");
        loading.style.opacity = "0";
        setTimeout(() => loading.style.display = "none", 300);
    }

    function disableButtons(disabled) {
        // 不再禁用按钮，保持按钮始终可用
        // document.getElementById("drawButton").disabled = disabled;
        // document.getElementById("clearButton").disabled = disabled;
    }

    function disableTrackButtons(disabled) {
        const drawTrackBtn = document.getElementById("drawTrackButton");
        const showTrackPointsBtn = document.getElementById("showTrackPointsButton");
        const clearTrackBtn = document.getElementById("clearTrackButton");
        if (drawTrackBtn) drawTrackBtn.disabled = disabled;
        if (showTrackPointsBtn) showTrackPointsBtn.disabled = disabled;
        if (clearTrackBtn) clearTrackBtn.disabled = disabled;
    }
    // 回放控件的禁用/启用
    function disablePlaybackButtons(disabled) {
        ["playbackStartBtn","playbackPauseBtn","playbackStopBtn","playbackSpeedSelect","playbackTimeSlider"].forEach(id=>{
            const el = document.getElementById(id);
            if (el) el.disabled = disabled;
        });
    }

    // 回放按钮状态管理：空闲/播放/暂停
    function updatePlaybackButtonsState(state){
        try {
            const startBtn = document.getElementById('playbackStartBtn');
            const pauseBtn = document.getElementById('playbackPauseBtn');
            const stopBtn = document.getElementById('playbackStopBtn');
            if (!startBtn || !pauseBtn || !stopBtn) return;
            if (state === 'idle') {
                startBtn.disabled = false;
                pauseBtn.disabled = true;
                stopBtn.disabled = true;
                pauseBtn.textContent = '继续';
            } else if (state === 'playing') {
                startBtn.disabled = true;
                pauseBtn.disabled = false;
                stopBtn.disabled = false;
                pauseBtn.textContent = '暂停';
            } else if (state === 'paused') {
                startBtn.disabled = true;
                pauseBtn.disabled = false;
                stopBtn.disabled = false;
                pauseBtn.textContent = '继续';
            }
        } catch(e) { console.warn('更新按钮状态失败:', e); }
    }

    function bindDrawEvent() {
        document.getElementById("drawButton").addEventListener("click", function () {
            if (isDrawing) { console.log('绘制进行中，忽略重复点击'); return; }
            isDrawing = true;
            showLoading();
            try {
                const wktStr = document.getElementById("wktTextarea").value.trim();
                if (!wktStr) { alert("请输入WKT字符串！"); return; }
                clearOverlays();
                const geojson = parseWkt(wktStr);
    
                const polygonData = [];
                if (geojson.type === "Polygon") {
                    polygonData.push({ index: 1, coordinates: geojson.coordinates });
                } else if (geojson.type === "MultiPolygon") {
                    geojson.coordinates.forEach((polygon, index) => {
                        polygonData.push({ index: index + 1, coordinates: polygon });
                    });
                }
    
                // 重置并绘制
                polygonInfoList = [];
                polygonData.forEach(pd => processPolygon(pd.index, pd.coordinates));
    
                // 视图居中到所有已绘制轮廓
                try { fitViewportToPolygons(); } catch (e) { console.warn('视图居中失败', e); }
    
                // 在视图稳定后再创建/更新标签
                setTimeout(() => {
                    if (labelsEnabled) {
                        try {
                            createAllLabels();
                            updateAllLabelsPosition();
                        } catch (e) {
                            console.warn('创建或更新标签失败:', e);
                        }
                    }
                }, 150);
            } catch (e) {
                alert('绘制失败：' + (e && e.message ? e.message : e));
                console.error('绘制异常:', e);
            } finally {
                hideLoading();
                isDrawing = false;
                // 不再禁用按钮，保持按钮始终可用
                // disableButtons(false);
            }
        });

        document.getElementById("clearButton").addEventListener("click", function () {
            if (isDrawing) { console.log('绘制进行中，暂不清空'); return; }
            clearOverlays();
            console.log("已清空所有轮廓");
        });
    }

    // 存储多边形数据，用于后续标签创建
    let polygonInfoList = [];

    // 处理单个多边形的绘制和面积计算
    function processPolygon(actualPolygonIndex, polygonCoords) {
        console.log('开始处理多边形', actualPolygonIndex);

        // 坐标系选择（绘制始终使用WGS84坐标）
        const coordSys = (document.getElementById('coordSysSelect') && document.getElementById('coordSysSelect').value) || 'wgs84';

        // 统一转换为WGS84用于绘制与面积计算
        function toWgs(point){
            const lng = point[0], lat = point[1];
            if (coordSys === 'wgs84' || coordSys === 'cgcs2000') {
                return [lng, lat];
            } else if (coordSys === 'gcj02') {
                const w = gcj02ToWgs84(lng, lat);
                return [w.lng, w.lat];
            } else if (coordSys === 'bd09') {
                const gcj = bd09ToGcj02(lng, lat);
                const w = gcj02ToWgs84(gcj.lng, gcj.lat);
                return [w.lng, w.lat];
            }
            return [lng, lat];
        }
        const coordsWGS84 = polygonCoords.map(ring => ring.map(toWgs));
        let outerRingWGS = coordsWGS84[0] || [];

        // 生成用于绘制的坐标（直接使用WGS84坐标）
        const rings = coordsWGS84.map(ring => ring.map(([lng, lat]) => new T.LngLat(lng, lat)));


         // 创建半透明填充的多边形（无边框）
          const polygon = new T.Polygon(rings, {
              color: currentOutlineColor,
              weight: 1,
              opacity: 1,
              fillColor: currentFillColor,
              fillOpacity: currentFillOpacity
          });
 
          // 使用WGS84坐标计算面积（更准确的面积计算）
         let areaSqm;
         let areaMu;



         try {
             // 检查Turf.js是否可用
             if (typeof turf !== 'undefined' && turf.area) {
                 // 使用Turf.js计算多边形面积
                // 构造GeoJSON格式的多边形
                const geoJsonPolygon = {
                    type: "Polygon",
                    coordinates: coordsWGS84
                };


                 // 使用Turf.js计算面积（平方米）
                 areaSqm = turf.area(geoJsonPolygon);
                 areaMu = (areaSqm / 666.6667).toFixed(4); // 转换为亩
                 console.log(`多边形${actualPolygonIndex}面积计算结果(Turf.js): ${areaSqm}平方米 = ${areaMu}亩`);
             } else {
                 // 如果Turf.js不可用，回退到之前的计算方法
                 console.warn('Turf.js不可用，使用备用计算方法');
                 // 计算带孔洞的多边形面积
                 areaSqm = 0;
                 // 计算外环面积
                 outerRingWGS = coordsWGS84[0] || [];
                 areaSqm += calculatePolygonArea(outerRingWGS);

                 // 减去内环（孔洞）面积
                 for (let i = 1; i < coordsWGS84.length; i++) {
                     const innerRingArea = calculatePolygonArea(coordsWGS84[i]);
                     areaSqm -= innerRingArea;
                 }

                  areaMu = (areaSqm / 666.6667).toFixed(4); // 使用更精确的转换系数
                  console.log(`多边形${actualPolygonIndex}面积计算结果(备用): ${areaSqm}平方米 = ${areaMu}亩`);
              }
          } catch (error) {
              console.error(`面积计算失败:`, error);
              areaSqm = 0;
              areaMu = '0.0000';
          }

          // 计算多边形的中心点和底部中心点（WGS84）
          const centerPoint = calculatePolygonCenter(outerRingWGS);
          const bottomCenterPoint = calculatePolygonBottomCenter(outerRingWGS);

          // 添加多边形到地图
          if (map) {
              map.addOverLay(polygon);
              console.log(`多边形${actualPolygonIndex}已添加到地图`);
          } else {
              console.error('地图对象不存在');
          }

          // 存储多边形信息，用于后续标签创建
          polygonInfoList.push({
              index: actualPolygonIndex,
              polygon: polygon,
              area: areaMu,
              bottomCenter: { lng: bottomCenterPoint.lng, lat: bottomCenterPoint.lat },
              ringPoints: rings
          });
      }

    // 视图居中：根据已绘制的GCJ-02点
    function fitViewportToPolygons() {
        const points = [];
        try {
            if (!map || !map.setViewport) return;
            polygonInfoList.forEach(info => {
                if (!info || !info.ringPoints) return;
                info.ringPoints.forEach(ring => {
                    ring.forEach(ll => points.push(ll));
                });
            });
            if (!points.length) return;
            map.setViewport(points);
        } catch (e) {
            try {
                const lngs = points.map(p => p.lng);
                const lats = points.map(p => p.lat);
                const center = new T.LngLat(
                    (Math.min(...lngs) + Math.max(...lngs)) / 2,
                    (Math.min(...lats) + Math.max(...lats)) / 2
                );
                if (map && map.panTo) map.panTo(center);
            } catch (e2) {
                console.warn('视图居中失败:', e2);
            }
        }
    }

    // 统一创建所有多边形的标签
    function createAllLabels() {
        const mapContainer = document.getElementById('mapContainer');
        if (!mapContainer || !map) return;

        polygonInfoList.forEach(info => {
            if (!info) return;
            // 防止重复创建
            if (info.labelRef) return;
            // 创建标签元素
            const labelDiv = document.createElement('div');
            labelDiv.className = 'area-label';
            labelDiv.innerHTML = `多边形${info.index}：${info.area}亩`;

            // 添加到地图容器并根据屏幕边界定位到轮廓下方
            mapContainer.appendChild(labelDiv);
            positionLabelForPolygon(labelDiv, info);

            // 记录引用，避免重复创建
            info.labelRef = labelDiv;

            // 存储到 currentPolygons 以复用现有定位/清理逻辑
            const labelObj = {
                domElement: labelDiv,
                isDomLabel: true,
                polygonInfo: info
            };
            currentPolygons.push({ polygon: info.polygon, label: labelObj });
        });

        // 不清空 polygonInfoList，便于开关随时创建/隐藏标签
    }

    // 根据多边形屏幕边界定位标签，保证始终在轮廓下方
    function positionLabelForPolygon(labelDiv, info) {
        if (!map || !info || !info.ringPoints) return;
        const points = [];
        info.ringPoints.forEach(ring => {
            ring.forEach(ll => {
                const p = map.lngLatToContainerPoint(ll);
                points.push(p);
            });
        });
        if (!points.length) return;
        const minX = Math.min(...points.map(p => p.x));
        const maxX = Math.max(...points.map(p => p.x));
        const maxY = Math.max(...points.map(p => p.y));
        const container = document.getElementById('mapContainer');
        const labelWidth = labelDiv.offsetWidth;
        const labelHeight = labelDiv.offsetHeight;
        const targetLeft = Math.round((minX + maxX) / 2 - labelWidth / 2);
        const targetTop = Math.round(maxY + 6);
        const clampedLeft = Math.max(0, Math.min(targetLeft, container.clientWidth - labelWidth));
        const clampedTop = Math.max(0, Math.min(targetTop, container.clientHeight - labelHeight));
        labelDiv.style.left = clampedLeft + 'px';
        labelDiv.style.top = clampedTop + 'px';
    }

    // 更新所有标签位置（地图move/zoom时调用）
    function updateAllLabelsPosition() {
        try {
            if (!map) return;
            const container = document.getElementById('mapContainer');
            if (!container) return;
            currentPolygons.forEach(item => {
                if (!item || !item.label) return;
                const labelObj = item.label;
                if (labelObj.isDomLabel && labelObj.domElement && labelObj.polygonInfo) {
                    // 确保标签在容器中
                    if (!labelObj.domElement.parentNode) {
                        container.appendChild(labelObj.domElement);
                    }
                    positionLabelForPolygon(labelObj.domElement, labelObj.polygonInfo);
                }
            });
        } catch (e) {
            console.warn('更新标签位置时出错:', e);
        }
    }
    // 确保在全局可用（处理第三方库事件回调作用域差异）
    window.updateAllLabelsPosition = updateAllLabelsPosition;

    // 绑定“显示亩数标签”开关（默认隐藏）
    function bindLabelsToggle() {
        const cb = document.getElementById('toggleLabelsCheckbox');
        const container = document.getElementById('mapContainer');
        if (!cb || !container) return;
        // 默认隐藏标签
        container.classList.add('labels-hidden');
        cb.addEventListener('change', () => {
            labelsEnabled = cb.checked;
            if (labelsEnabled) {
                container.classList.remove('labels-hidden');
                const hasAnyLabel = currentPolygons.some(item => item && item.label && item.label.domElement);
                if (!hasAnyLabel) {
                    try { createAllLabels(); } catch (e) { console.warn('创建标签失败:', e); }
                }
                updateAllLabelsPosition();
            } else {
                container.classList.add('labels-hidden');
            }
        });
    }

    /**
     * 计算多边形中心点（比底部中心更适合显示标签）
     */
    function calculatePolygonCenter(outerRing) {
        let sumLng = 0, sumLat = 0;
        const len = outerRing.length;

        for (let i = 0; i < len; i++) {
            sumLng += outerRing[i][0];
            sumLat += outerRing[i][1];
        }

        return {
            lng: sumLng / len,
            lat: sumLat / len
        };
    }

    /**
     * 计算多边形面积（球面多边形面积计算）
     * 使用更准确的球面坐标面积计算方法，确保面积与视觉大小一致
     */
    function calculatePolygonArea(coordinates) {
        // 地球半径（米）- 使用更精确的值
        const R = 6371000.8;
        const n = coordinates.length;

        // 将所有坐标转换为弧度
        const coordsRad = coordinates.map(point => [
            point[0] * Math.PI / 180,
            point[1] * Math.PI / 180
        ]);

        let areaRad = 0;

        // 使用更准确的球面多边形面积公式（Girard定理）
        for (let i = 0; i < n; i++) {
            const j = (i + 1) % n;
            const lon1 = coordsRad[i][0];
            const lat1 = coordsRad[i][1];
            const lon2 = coordsRad[j][0];
            const lat2 = coordsRad[j][1];

            // 计算球面多边形面积增量
            const dlon = lon2 - lon1;
            const sinLat1 = Math.sin(lat1);
            const sinLat2 = Math.sin(lat2);
            const cosLat1 = Math.cos(lat1);
            const cosLat2 = Math.cos(lat2);

            // 使用更精确的公式
            areaRad += dlon * (sinLat1 * cosLat2 * Math.cos(dlon / 2) + sinLat2 * cosLat1);
        }

        // 计算总面积（平方米）
        const areaSqm = Math.abs(areaRad) * R * R * 0.5;

        return areaSqm;
    }

    /**
     * 清空所有多边形和标签（同时处理 polygonInfoList 与 currentPolygons）
     */
    function clearOverlays() {
        try {
            // 先移除 polygonInfoList 中记录的多边形与其DOM标签
            polygonInfoList.forEach(info => {
                if (info && info.polygon && map && map.removeOverLay) {
                    try { map.removeOverLay(info.polygon); } catch (e) { console.warn('移除多边形失败:', e); }
                }
                if (info && info.labelRef && info.labelRef.parentNode) {
                    try { info.labelRef.parentNode.removeChild(info.labelRef); } catch (e) { console.warn('移除DOM标签失败:', e); }
                    info.labelRef = null;
                }
            });

            // 再处理 currentPolygons（兼容旧路径与标签对象）
            currentPolygons.forEach(item => {
                if (item.polygon && map && map.removeOverLay) {
                    try { map.removeOverLay(item.polygon); } catch (e) { console.warn('移除多边形失败:', e); }
                }
                if (item.label) {
                    if (item.label.domElement && item.label.domElement.parentNode) {
                        try { item.label.domElement.parentNode.removeChild(item.label.domElement); } catch (e) { console.warn('移除DOM标签失败:', e); }
                    } else if (map && map.removeOverLay && !item.label.isDomLabel) {
                        try { map.removeOverLay(item.label); } catch (e) { console.warn('移除地图覆盖物标签失败:', e); }
                    }
                }
            });

            // 清空记录数组
            currentPolygons = [];
            polygonInfoList = [];

            console.log('已清空所有多边形和标签（保留事件监听器）');
        } catch (error) {
            console.error('清空覆盖物时出错:', error);
        }
    }

    // 其他辅助函数（保持不变）
    function bindMinimizeEvent() {
        const container = document.querySelector(".wkt-input-container");
        const btn = document.getElementById("minimizeBtn");
        const minIcon = btn?.querySelector(".min-icon");
        const restoreIcon = btn?.querySelector(".restore-icon");

        btn?.addEventListener("click", () => {
            const minimized = container.classList.toggle("minimized");
            if (minIcon && restoreIcon) {
                if (minimized) {
                    minIcon.style.display = "none";
                    restoreIcon.style.display = "";
                } else {
                    minIcon.style.display = "";
                    restoreIcon.style.display = "none";
                }
            }
        });
    }

    // 在脚本内部补充：页签切换（3个页签）
     function bindTabs() {
         const tabs = [
             { btn: document.getElementById('tabDrawBtn'), pane: document.getElementById('tabDraw'), key: 'draw' },
             { btn: document.getElementById('tabTrackBtn'), pane: document.getElementById('tabTrack'), key: 'track' },
             { btn: document.getElementById('tabSplitBtn'), pane: document.getElementById('tabSplit'), key: 'split' },
             { btn: document.getElementById('tabBatchBtn'), pane: document.getElementById('tabBatch'), key: 'batch' },
         ];
         if (tabs.some(t => !t.btn || !t.pane)) return;
         function activate(key) {
             tabs.forEach(t => {
                 const active = t.key === key;
                 t.btn.classList.toggle('active', active);
                 t.pane.classList.toggle('active', active);
             });
         }
         tabs.forEach(t => t.btn.addEventListener('click', () => activate(t.key)));
         activate('draw');
     }
    function updateParserStatus() {
        const el = document.getElementById('parserStatus');
        if (!el) return;
        const ok = (typeof Terraformer !== 'undefined' && Terraformer.WKT && typeof Terraformer.WKT.parse === 'function');
        if (ok) {
            el.textContent = 'Terraformer WKT Parser';
            el.style.color = '#2f8f2f';
        } else {
            el.textContent = '本地回退解析（仅支持POLYGON/MULTIPOLYGON）';
            el.style.color = '#c77d1e';
        }
    }
     function parseWkt(wkt) {
         wkt = wkt.trim();
         // 优先使用成熟库（Terraformer WKT Parser）
         if (typeof Terraformer !== 'undefined' && Terraformer.WKT && Terraformer.WKT.parse) {
             try {
                 return Terraformer.WKT.parse(wkt);
             } catch (e) {
                 console.warn('Terraformer解析失败，尝试本地回退解析:', e);
             }
         } else {
             // 不再提示“未加载”，由状态栏展示回退信息
         }
         // 回退解析：仅支持 POLYGON / MULTIPOLYGON
         const typeMatch = wkt.match(/^\s*(POLYGON|MULTIPOLYGON)\s*\(/i);
         if (!typeMatch) throw new Error('仅支持POLYGON/MULTIPOLYGON');
         const type = typeMatch[1].toUpperCase();
         const inner = wkt.substring(wkt.indexOf('('));
         if (type === 'POLYGON') {
             const coords = parsePolygonCoords(inner.replace(/^\(/, '').replace(/\)$/, ''));
             return { type: 'Polygon', coordinates: coords };
         } else {
             const trimmed = inner.replace(/^\(\(/, '').replace(/\)\)$/, '');
             const coords = parseMultiPolygonCoords(trimmed);
             return { type: 'MultiPolygon', coordinates: coords };
         }
     }

     function bindMultiSplitter() {
         const input = document.getElementById('multiInput');
         const output = document.getElementById('polyOutput');
         const splitBtn = document.getElementById('splitMultiBtn');
         const copyBtn = document.getElementById('copyPolysBtn');
         if (!input || !output || !splitBtn || !copyBtn) return;

         // 本地WKT序列化辅助
         function ringToText(ring) {
             if (!ring || !ring.length) return '()';
             const first = ring[0];
             const last = ring[ring.length - 1];
             const closed = (first[0] === last[0] && first[1] === last[1]) ? ring : ring.concat([[first[0], first[1]]]);
             return '(' + closed.map(pt => pt[0] + ' ' + pt[1]).join(', ') + ')';
         }
         function toWktPolygonCoords(coords) {
             return 'POLYGON(' + coords.map(ringToText).join(', ') + ')';
         }
         function toWktMulti(coords) {
             return 'MULTIPOLYGON(' + coords.map(poly => '(' + poly.map(ringToText).join(', ') + ')').join(', ') + ')';
         }

         function polygonsFromMulti(text) {
             const geo = parseWkt(text.trim());
             if (geo.type !== 'MultiPolygon') throw new Error('请输入有效的 MULTIPOLYGON WKT');
             const polys = geo.coordinates.map(rings => toWktPolygonCoords(rings));
             return polys;
         }
         splitBtn.addEventListener('click', () => {
             try {
                 const list = polygonsFromMulti(input.value.trim());
                 output.value = list.join('\n');
             } catch (e) {
                 alert('分割失败：' + e.message);
             }
         });
         copyBtn.addEventListener('click', async () => {
             const val = output.value.trim();
             if (!val) { alert('没有可复制的结果'); return; }
             try { await navigator.clipboard.writeText(val); alert('已复制到剪贴板'); } catch (e) { console.warn('复制失败', e); }
         });
     }

     function bindBatchGenerator() {
         const batchInput = document.getElementById('batchInput');
         const output = document.getElementById('multiOutput');
         const genBtn = document.getElementById('generateMultiBtn');
         const copyBtn = document.getElementById('copyMultiBtn');

         // 本地WKT序列化辅助（与分割器保持一致）
         function ringToText(ring) {
             if (!ring || !ring.length) return '()';
             const first = ring[0];
             const last = ring[ring.length - 1];
             const closed = (first[0] === last[0] && first[1] === last[1]) ? ring : ring.concat([[first[0], first[1]]]);
             return '(' + closed.map(pt => pt[0] + ' ' + pt[1]).join(', ') + ')';
         }
         function toWktMulti(coords) {
             return 'MULTIPOLYGON(' + coords.map(poly => '(' + poly.map(ringToText).join(', ') + ')').join(', ') + ')';
         }

         genBtn.addEventListener('click', () => {
             try {
                 const lines = batchInput.value.trim().split(/\n|;/).map(s => s.trim()).filter(Boolean);
                 if (lines.length === 0) throw new Error('请按每行或分号输入至少一个POLYGON');
                 const polygons = lines.map((line, idx) => {
                     const g = parseWkt(line);
                     if (g.type !== 'Polygon') throw new Error(`第${idx + 1}行不是有效的POLYGON WKT`);
                     return g;
                 });
                 const multiGeo = { type: 'MultiPolygon', coordinates: polygons.map(p => p.coordinates) };
                 output.value = toWktMulti(multiGeo.coordinates);
             } catch (e) {
                 alert('生成失败：' + e.message);
             }
         });

         copyBtn.addEventListener('click', async () => {
             const val = output.value.trim();
             if (!val) { alert('没有可复制的结果'); return; }
             try { await navigator.clipboard.writeText(val); alert('已复制到剪贴板'); } catch (e) { console.warn('复制失败', e); }
         });

     }

     function setExampleWkt() {
         const exampleWkt = "MULTIPOLYGON(" +
             "(" +
             "(116.35 39.93, 116.39 39.93, 116.39 39.90, 116.35 39.90, 116.35 39.93)," + // 外环
             "(116.36 39.92, 116.38 39.92, 116.38 39.91, 116.36 39.91, 116.36 39.92)" +  // 内环
             ")," +
             "(" +
             "(116.40 39.95, 116.43 39.97, 116.46 39.96, 116.49 39.98, 116.52 39.95, 116.55 39.93, 116.58 39.94, 116.61 39.92, 116.64 39.95, 116.40 39.95)" +
             ")" +
             ")";
         document.getElementById("wktTextarea").value = exampleWkt;
     }

     function parsePolygonCoords(coordStr) {
         const ringStrs = coordStr.split(/\)\s*,\s*\(/).map(s => s.replace(/[()]/g, '').trim());
         const rings = [];
         ringStrs.forEach(ringStr => {
             const pts = ringStr.split(/,\s*/).map(pointStr => {
                 const [lng, lat] = pointStr.split(/\s+/).map(Number);
                 if (isNaN(lng) || isNaN(lat)) throw new Error("坐标格式错误：" + pointStr);
                 return [lng, lat];
             });
             // 自动拆分：如果一个ring中包含多次回到起点（闭合），则拆分为多个环
             // 兼容用户将外环与内环错误地写在同一对括号中的情况
             let start = 0;
             while (start < pts.length) {
                 const startPt = pts[start];
                 let closeIdx = -1;
                 for (let i = start + 1; i < pts.length; i++) {
                     if (pts[i][0] === startPt[0] && pts[i][1] === startPt[1]) {
                         closeIdx = i;
                         break;
                     }
                 }
                 if (closeIdx === -1) {
                     // 未找到闭合：将剩余点视为一个环，并强制闭合
                     const ring = pts.slice(start);
                     if (ring.length && (ring[0][0] !== ring[ring.length - 1][0] || ring[0][1] !== ring[ring.length - 1][1])) {
                         ring.push([ring[0][0], ring[0][1]]);
                     }
                     rings.push(ring);
                     break;
                 } else {
                     const ring = pts.slice(start, closeIdx + 1);
                     rings.push(ring);
                     start = closeIdx + 1;
                 }
             }
         });
         return rings;
     }

     function parseMultiPolygonCoords(coordStr) {
         const polygonStrs = coordStr.split(/\)\s*\)\s*,\s*\(\s*\(/).map(s => s.replace(/[()]/g, '').trim());
         return polygonStrs.map(polygonStr => parsePolygonCoords(polygonStr));
     }

     function wgs84ToGcj02(lng, lat) {
         const x_PI = 3.14159265358979324 * 3000.0 / 180.0;
         const PI = 3.1415926535897932384626;
         const a = 6378245.0;
         const ee = 0.00669342162296594323;

         if (outOfChina(lng, lat)) return { lng, lat };

         let dlat = transformLat(lng - 105.0, lat - 35.0);
         let dlng = transformLng(lng - 105.0, lat - 35.0);
         const radlat = lat / 180.0 * PI;
         let magic = Math.sin(radlat);
         magic = 1 - ee * magic * magic;
         const sqrtmagic = Math.sqrt(magic);
         dlat = (dlat * 180.0) / ((a * (1 - ee)) / (magic * sqrtmagic) * PI);
         dlng = (dlng * 180.0) / (a / sqrtmagic * Math.cos(radlat) * PI);

         return { lng: lng + dlng, lat: lat + dlat };

         function outOfChina(lng, lat) {
             return (lng < 72.004 || lng > 137.8347) || (lat < 0.8293 || lat > 55.8271);
         }

         function transformLat(x, y) {
             let ret = -100.0 + 2.0 * x + 3.0 * y + 0.2 * y * y + 0.1 * x * y + 0.2 * Math.sqrt(Math.abs(x));
             ret += (20.0 * Math.sin(6.0 * x * PI) + 20.0 * Math.sin(2.0 * x * PI)) * 2.0 / 3.0;
             ret += (20.0 * Math.sin(y * PI) + 40.0 * Math.sin(y / 3.0 * PI)) * 2.0 / 3.0;
             ret += (160.0 * Math.sin(y / 12.0 * PI) + 320 * Math.sin(y * PI / 30.0)) * 2.0 / 3.0;
             return ret;
         }

         function transformLng(x, y) {
             let ret = 300.0 + x + 2.0 * y + 0.1 * x * x + 0.1 * x * y + 0.1 * Math.sqrt(Math.abs(x));
             ret += (20.0 * Math.sin(6.0 * x * PI) + 20.0 * Math.sin(2.0 * x * PI)) * 2.0 / 3.0;
             ret += (20.0 * Math.sin(x * PI) + 40.0 * Math.sin(x / 3.0 * PI)) * 2.0 / 3.0;
             ret += (150.0 * Math.sin(x / 12.0 * PI) + 300.0 * Math.sin(x / 30.0 * PI)) * 2.0 / 3.0;
             return ret;
         }
     }

     function gcj02ToWgs84(lng, lat) {
         const g = wgs84ToGcj02(lng, lat);
         return { lng: lng * 2 - g.lng, lat: lat * 2 - g.lat };
     }

     function bd09ToGcj02(bdLng, bdLat) {
         const x_PI = 3.14159265358979324 * 3000.0 / 180.0;
         const x = bdLng - 0.0065;
         const y = bdLat - 0.006;
         const z = Math.sqrt(x * x + y * y) - 0.00002 * Math.sin(y * x_PI);
         const theta = Math.atan2(y, x) - 0.000003 * Math.cos(x * x_PI);
         const ggLng = z * Math.cos(theta);
         const ggLat = z * Math.sin(theta);
         return { lng: ggLng, lat: ggLat };
     }

     function calculatePolygonBottomCenter(outerRing) {
         let minLat = Infinity;
         let bottomPoints = [];
         outerRing.forEach(point => {
             const lat = point[1];
             if (lat < minLat) {
                 minLat = lat;
                 bottomPoints = [point];
             } else if (lat === minLat) {
                 bottomPoints.push(point);
             }
         });

         const sumLng = bottomPoints.reduce((sum, point) => sum + point[0], 0);
         const centerLng = sumLng / bottomPoints.length;

         return { lng: centerLng, lat: minLat };
     }

     function fitBounds(geojson) {
         try {
             const allPoints = [];
             function collectPoints(coords) {
                 if (typeof coords[0] === 'number') {
                     allPoints.push(coords);
                 } else {
                     coords.forEach(coord => collectPoints(coord));
                 }
             }
             collectPoints(geojson.coordinates);

             if (allPoints.length === 0) return;

             const lats = allPoints.map(p => p[1]);
             const lngs = allPoints.map(p => p[0]);
             const minLng = Math.min(...lngs);
             const maxLng = Math.max(...lngs);
             const minLat = Math.min(...lats);
             const maxLat = Math.max(...lats);

             const sw = wgs84ToGcj02(minLng, minLat);
             const ne = wgs84ToGcj02(maxLng, maxLat);

             // 修复setViewport方法的使用，确保参数格式正确
             if (map && map.setViewport) {
                 map.setViewport([
                     new T.LngLat(sw.lng, sw.lat),
                     new T.LngLat(ne.lng, ne.lat)
                 ], { padding: [50, 50] });
             } else {
                 console.warn('地图对象或setViewport方法不可用');
             }
         } catch (error) {
             console.error('调整视图范围时出错:', error);
         }
     }
// 轨迹绘制与解析
    function bindTrackEvents() {
        const drawBtn = document.getElementById('drawTrackButton');
        const showPointsBtn = document.getElementById('showTrackPointsButton');
        const clearBtn = document.getElementById('clearTrackButton');
        const ta = document.getElementById('trackTextarea');
        if (!drawBtn || !showPointsBtn || !clearBtn || !ta) return;

        drawBtn.addEventListener('click', function(){
            try {
                const text = ta.value.trim();
                if (!text) { alert('请粘贴轨迹文本（时间戳,经度,纬度）'); return; }
                const points = parseTrackText(text);
                if (points.length < 2) { alert('有效轨迹点不足，至少需要两点'); return; }
                drawTrackFromPoints(points);
                fitViewportToTrack(points);
            } catch (e) {
                alert('绘制轨迹失败：' + (e && e.message ? e.message : e));
                console.error('绘制轨迹异常:', e);
            }
        });

        showPointsBtn.addEventListener('click', function(){
            try {
                const text = ta.value.trim();
                if (!text) { alert('请粘贴轨迹文本（时间戳,经度,纬度）'); return; }
                const points = parseTrackText(text);
                if (points.length === 0) { alert('未找到有效轨迹点'); return; }
                showTrackPoints(points);
                fitViewportToTrack(points);
            } catch (e) {
                alert('显示轨迹点失败：' + (e && e.message ? e.message : e));
                console.error('显示轨迹点异常:', e);
            }
        });

        clearBtn.addEventListener('click', function(){
            clearTrackOverlays();
            console.log('已清空轨迹');
        });
    }

    function showTrackPoints(points) {
        // 先移除旧轨迹（不影响轮廓）
        clearTrackOverlays(false);
        
        if (!map || !points || points.length === 0) {
            console.log('无轨迹点可显示');
            return;
        }
        
        console.log(`准备显示${points.length}个轨迹点`);
        
        // 使用批量处理和更小的图标来提高性能
        // 创建一个更小的自定义颜色点SVG图标
        const smallColoredDotIcon = new T.Icon({
            iconUrl: `data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="1" height="1"><circle cx="0.5" cy="0.5" r="0.3" fill="%23${currentTrackPointColor.substring(1)}"/></svg>`,
            iconSize: new T.Point(1, 1),
            iconAnchor: new T.Point(0.5, 0.5)
        });
        
        // 优化批量添加点的速度
        const batchSize = 2000; // 增加每批处理的点数
        const concurrentBatches = 4; // 并发批次数量
        
        // 预创建点击事件处理函数，避免重复创建
        function createClickHandler(point, index) {
            return function() {
                const infoWindow = new T.InfoWindow({
                    content: `点${index + 1}<br/>经度: ${point.lng.toFixed(6)}<br/>纬度: ${point.lat.toFixed(6)}`,
                    offset: new T.Point(0, -20)
                });
                infoWindow.open(map, point);
            };
        }
        
        // 使用setTimeout实现更高效的批量添加，避免阻塞UI
        let currentIndex = 0;
        
        function addBatch() {
            if (currentIndex >= points.length) {
                console.log(`已显示${points.length}个轨迹点`);
                return;
            }
            
            // 添加当前批次的点
            const endIndex = Math.min(currentIndex + batchSize, points.length);
            const markersToAdd = [];
            
            // 先创建所有标记
            for (let i = currentIndex; i < endIndex; i++) {
                const point = points[i];
                const index = i;
                
                const marker = new T.Marker(point, {
                    icon: smallColoredDotIcon
                });
                
                // 添加点击事件
                marker.addEventListener('click', createClickHandler(point, index));
                
                markersToAdd.push(marker);
            }
            
            // 批量添加到地图和数组
            markersToAdd.forEach(marker => {
                map.addOverLay(marker);
                currentTracks.push(marker);
            });
            
            currentIndex = endIndex;
            
            // 使用setTimeout而不是requestAnimationFrame，减少对渲染周期的依赖
            // 设置为0，将任务放入微任务队列，但允许UI有短暂的呼吸空间
            setTimeout(addBatch, 0);
        }
        
        // 启动批量添加
        addBatch();
    }
    
    // 恢复原始的clearTrackOverlays函数
    function clearTrackOverlays(resetArray = true){        
        try {
            currentTracks.forEach(pl => {
                if (pl && map && map.removeOverLay) {
                    try { map.removeOverLay(pl); } catch (e) { console.warn('移除轨迹失败:', e); }
                }
            });
            if (resetArray) currentTracks = [];
        } catch (e) {
            console.warn('清空轨迹时出错:', e);
        }
    }

    function parseTrackText(text){
        // 选择输入坐标系（优先使用轨迹页签专属选择器，若未设置则回退到绘制页签选择器）
        const coordSysEl = document.getElementById('trackCoordSysSelect') || document.getElementById('coordSysSelect');
        const coordSys = (coordSysEl && coordSysEl.value) || 'wgs84';
        const isHash = text.indexOf('#') !== -1;
        const items = isHash ? text.split('#') : text.split(/\r?\n/);
        const pts = [];
        for (let i=0;i<items.length;i++){
            const raw = items[i];
            if (!raw) continue;
            const line = raw.trim();
            if (!line) continue;
            const parts = line.split(',');
            if (parts.length < 3) continue;
            let lng = parseFloat((parts[isHash ? 0 : 1] || '').trim());
            let lat = parseFloat((parts[isHash ? 1 : 2] || '').trim());
            // 初步过滤：数值合法性与正常范围
            if (!isFinite(lng) || !isFinite(lat)) continue;
            if (lng === 0 || lat === 0) continue; // 丢弃0.0异常点
            if (lng < -180 || lng > 180 || lat < -90 || lat > 90) continue; // 超出经纬度范围丢弃

            // 将输入坐标转换为WGS84
            let w;
            if (coordSys === 'wgs84' || coordSys === 'cgcs2000') {
                w = { lng, lat };
            } else if (coordSys === 'gcj02') {
                w = gcj02ToWgs84(lng, lat);
            } else if (coordSys === 'bd09') {
                const g = bd09ToGcj02(lng, lat);
                w = gcj02ToWgs84(g.lng, g.lat);
            } else {
                w = { lng, lat };
            }
            // 转换结果兜底检查
            if (!isFinite(w.lng) || !isFinite(w.lat)) continue;
            if (w.lng < -180 || w.lng > 180 || w.lat < -90 || w.lat > 90) continue;

            // 使用WGS84坐标绘制到地图
            pts.push(new T.LngLat(w.lng, w.lat));
        }
        return pts;
    }

    function drawTrackFromPoints(points){
        // 先移除旧轨迹（不影响轮廓）
        clearTrackOverlays(false);
        const polyline = new T.Polyline(points, {
            color: currentTrackLineColor,
            weight: 1,
            opacity: 0.9
        });
        if (map) {
            map.addOverLay(polyline);
        }
        currentTracks.push(polyline);
    }

    function clearTrackOverlays(resetArray = true){
        try {
            currentTracks.forEach(pl => {
                if (pl && map && map.removeOverLay) {
                    try { map.removeOverLay(pl); } catch (e) { console.warn('移除轨迹失败:', e); }
                }
            });
            if (resetArray) currentTracks = [];
        } catch (e) {
            console.warn('清空轨迹时出错:', e);
        }
    }


    function fitViewportToTrack(points){
        try {
            if (!map || !map.setViewport || !points || !points.length) return;
            map.setViewport(points);
        } catch (e) {
            console.warn('轨迹视图居中失败:', e);
        }
    }

    // ========= 轨迹回放功能 =========
    let playbackState = { points: [], idx: 0, speed: 1, timer: null, running: false, marker: null, line: null, path: [] };

    function bindPlaybackControls(){
        const startBtn = document.getElementById('playbackStartBtn');
        const pauseBtn = document.getElementById('playbackPauseBtn');
        const stopBtn = document.getElementById('playbackStopBtn');
        const speedSel = document.getElementById('playbackSpeedSelect');
        const timeSlider = document.getElementById('playbackTimeSlider');
        const timeCursor = document.getElementById('playbackTimeCursor');
        const ta = document.getElementById('trackTextarea');
        if (!startBtn || !pauseBtn || !stopBtn || !speedSel) return;

        // 初始按钮状态
        updatePlaybackButtonsState('idle');

        startBtn.addEventListener('click', function(){
            try {
                const text = (ta && ta.value || '').trim();
                if (!text) { alert('请粘贴轨迹文本（时间戳,经度,纬度）'); return; }
                const pts = parseTrackTextWithTime(text);
                if (pts.length < 2) { alert('有效轨迹点不足，至少需要两点'); return; }
                startPlayback(pts);
                // 状态在startPlayback中已设置为playing
            } catch (e) {
                alert('开始回放失败：' + (e && e.message ? e.message : e));
                console.error('开始回放异常:', e);
            }
        });

        pauseBtn.addEventListener('click', function(){
            if (!playbackState.running) {
                // 继续
                playbackState.running = true;
                scheduleNext();
                updatePlaybackButtonsState('playing');
            } else {
                // 暂停
                if (playbackState.timer) { clearTimeout(playbackState.timer); playbackState.timer = null; }
                playbackState.running = false;
                updatePlaybackButtonsState('paused');
            }
        });

        stopBtn.addEventListener('click', function(){ 
            stopPlayback(); 
            updatePlaybackButtonsState('idle');
        });

        speedSel.addEventListener('change', function(){
            const v = parseFloat(speedSel.value);
            playbackState.speed = (isFinite(v) && v > 0) ? v : 1;
        });

        if (timeSlider) {
            timeSlider.addEventListener('input', function(){
                const ms = parseInt(timeSlider.value, 10);
                const txt = formatTimeForLabel(ms);
                if (timeCursor) timeCursor.textContent = txt;
            });
            timeSlider.addEventListener('change', function(){
                jumpToSliderTime();
            });
        }
    }

    function parseTrackTextWithTime(text){
        const coordSysEl = document.getElementById('trackCoordSysSelect') || document.getElementById('coordSysSelect');
        const coordSys = (coordSysEl && coordSysEl.value) || 'wgs84';
        const isHash = text.indexOf('#') !== -1;
        const items = isHash ? text.split('#') : text.split(/\r?\n/);
        const out = [];
        for (let i=0;i<items.length;i++){
            const raw = items[i];
            if (!raw) continue;
            const line = raw.trim();
            if (!line) continue;
            const parts = line.split(',');
            if (parts.length < 3) continue;
            const tsRaw = (parts[isHash ? 2 : 0] || '').trim();
            const ts = (tsRaw || '').replace(/\D/g,'');
            let lng = parseFloat((parts[isHash ? 0 : 1] || '').trim());
            let lat = parseFloat((parts[isHash ? 1 : 2] || '').trim());
            if (!isFinite(lng) || !isFinite(lat)) continue;
            if (lng === 0 || lat === 0) continue;
            if (lng < -180 || lng > 180 || lat < -90 || lat > 90) continue;
            const t = parseTimestamp(ts);
            if (!t) continue;
            let w;
            if (coordSys === 'wgs84' || coordSys === 'cgcs2000') {
                w = { lng, lat };
            } else if (coordSys === 'gcj02') {
                w = gcj02ToWgs84(lng, lat);
            } else if (coordSys === 'bd09') {
                const g = bd09ToGcj02(lng, lat);
                w = gcj02ToWgs84(g.lng, g.lat);
            } else { w = { lng, lat }; }
            if (!isFinite(w.lng) || !isFinite(w.lat)) continue;
            if (w.lng < -180 || w.lng > 180 || w.lat < -90 || w.lat > 90) continue;
            out.push({ ll: new T.LngLat(w.lng, w.lat), time: t, ts });
        }
        out.sort((a,b)=>a.time - b.time);
        return out;
    }

    function parseTimestamp(ts){
        const tstr = (ts || '').replace(/\D/g,'');
        const m = tstr && tstr.match(/^\d{14}$/);
        if (!m) return null;
        const y = parseInt(tstr.slice(0,4),10);
        const M = parseInt(tstr.slice(4,6),10) - 1;
        const d = parseInt(tstr.slice(6,8),10);
        const h = parseInt(tstr.slice(8,10),10);
        const m2 = parseInt(tstr.slice(10,12),10);
        const s = parseInt(tstr.slice(12,14),10);
        const dt = new Date(y,M,d,h,m2,s);
        return isNaN(dt.getTime()) ? null : dt;
    }

    function startPlayback(points){
        console.log('[Playback] startPlayback: 点数=', points && points.length);
        stopPlayback();
        playbackState.points = points;
        playbackState.idx = 0;
        playbackState.speed = playbackState.speed || 1;
        playbackState.running = true;
        // 配置时间滑动条，并尊重现有滑块位置作为起始
        configureTimeSlider(points);
        // 启用滑块
        const slider = document.getElementById('playbackTimeSlider');
        if (slider) slider.disabled = false;
        let initIdx = 0;
        if (slider && slider.min && slider.max) {
            const ms = parseInt(slider.value, 10);
            if (isFinite(ms)) initIdx = findIndexByTime(points, ms);
        }
        playbackState.idx = initIdx;
        const first = points[initIdx];
        console.log('[Playback] 首点:', first && first.ts, first && first.ll, 'initIdx=', initIdx);
        playbackState.path = points.slice(0, initIdx+1).map(p=>p.ll);
        playbackState.line = new T.Polyline(playbackState.path, { color: currentTrackLineColor, weight: 1, opacity: 0.9 });
        if (map) {
            map.addOverLay(playbackState.line);
        }
        currentTracks.push(playbackState.line);
        // 创建并定位DOM标记以保证可见移动
        ensurePlaybackDom(first.ll);
        updatePlaybackDom(first.ll);
        updatePlaybackTimeLabel(first.ts);
        try { fitViewportToTrack(points.map(p=>p.ll)); } catch(e){}
        // 更新按钮状态
        updatePlaybackButtonsState('playing');
        scheduleNext();
    }

    function scheduleNext(){
        if (!playbackState.running) return;
        if (!playbackState.points || playbackState.idx >= playbackState.points.length - 1) {
            playbackState.running = false;
            console.log('[Playback] 回放结束：idx=', playbackState.idx, '点数=', playbackState.points ? playbackState.points.length : 0);
            updatePlaybackButtonsState('idle'); // 播放结束后按钮回到初始状态：开始可点，继续/结束灰化
            return;
        }
        const next = playbackState.points[playbackState.idx+1];
        const speed = playbackState.speed || 1;
        const delay = Math.max(4, Math.round(1000 / speed)); // 1x=1000ms/点，2x=500ms/点...
        console.log('[Playback] scheduleNext: idx=', playbackState.idx, '->', playbackState.idx+1, 'delay=', delay, 'speed=', speed);
        playbackState.timer = setTimeout(()=>{
            playbackState.idx++;
            const nextLL = next.ll;
            console.log('[Playback] 下一点:', next && next.ts, nextLL);
            try {
                // 维护路径数组
                playbackState.path = playbackState.path || [];
                playbackState.path.push(nextLL);
                console.log('[Playback] 路径长度=', playbackState.path.length);
                // 使用DOM标记进行移动（容器/图层坐标）
                if (!playbackDom.el) console.log('[Playback] DOM标记不存在，将尝试创建');
                updatePlaybackDom(nextLL);
                // 折线更新：优先setLngLats，兜底重建
                if (playbackState.line && typeof playbackState.line.setLngLats === 'function') {
                    try { playbackState.line.setLngLats(playbackState.path); }
                    catch(e){
                        console.warn('[Playback] setLngLats失败，重建折线', e);
                        if (map) { try { map.removeOverLay(playbackState.line); } catch(e){} }
                        playbackState.line = new T.Polyline(playbackState.path, { color: currentTrackLineColor, weight: 1, opacity: 0.9 });
                        if (map) map.addOverLay(playbackState.line);
                    }
                } else {
                    console.log('[Playback] 折线不支持setLngLats，重建');
                    if (playbackState.line && map) { try { map.removeOverLay(playbackState.line); } catch(e){} }
                    playbackState.line = new T.Polyline(playbackState.path, { color: currentTrackLineColor, weight: 1, opacity: 0.9 });
                    if (map) map.addOverLay(playbackState.line);
                }
            } catch(e) { console.warn('更新回放覆盖物失败:', e); }
            updatePlaybackTimeLabel(next.ts);
            scheduleNext();
        }, delay);
    }

    function stopPlayback(){
        if (playbackState.timer) { clearTimeout(playbackState.timer); playbackState.timer = null; }
        playbackState.running = false;
        playbackState.idx = 0;
        try {
            // 移除DOM标记
            removePlaybackDom();
            if (playbackState.marker && map) map.removeOverLay(playbackState.marker);
            if (playbackState.line && map) map.removeOverLay(playbackState.line);
        } catch(e){}
        playbackState.marker = null;
        playbackState.line = null;
        updatePlaybackTimeLabel('—');
        // 按钮回到初始状态
        updatePlaybackButtonsState('idle');
    }

    function updatePlaybackTimeLabel(text){
        const el = document.getElementById('playbackTimeLabel');
        if (el) el.textContent = '时间：' + (text || '—');
    }

    // 时间滑动条：配置与跳转
    function configureTimeSlider(points){
        try {
            const slider = document.getElementById('playbackTimeSlider');
            const cursor = document.getElementById('playbackTimeCursor');
            if (!slider || !points || !points.length) return;
            const minMs = points[0].time.getTime();
            const maxMs = points[points.length - 1].time.getTime();
            const prev = parseInt(slider.value, 10);
            slider.min = String(minMs);
            slider.max = String(maxMs);
            slider.step = '1000'; // 以秒为步进
            let val = (isFinite(prev) && prev >= minMs && prev <= maxMs) ? prev : minMs;
            slider.value = String(val);
            if (cursor) cursor.textContent = formatTimeForLabel(val);
        } catch(e) { console.warn('配置时间滑动条失败:', e); }
    }
    function formatTimeForLabel(ms){
        if (!isFinite(ms)) return '—';
        const d = new Date(ms);
        const pad = n => String(n).padStart(2,'0');
        const y = d.getFullYear();
        const M = pad(d.getMonth()+1);
        const da = pad(d.getDate());
        const h = pad(d.getHours());
        const m = pad(d.getMinutes());
        const s = pad(d.getSeconds());
        return `${y}-${M}-${da} ${h}:${m}:${s}`;
    }
    function findIndexByTime(points, ms){
        try {
            if (!points || !points.length) return 0;
            const n = points.length;
            const minMs = points[0].time.getTime();
            const maxMs = points[n-1].time.getTime();
            if (!isFinite(ms)) return 0;
            if (ms <= minMs) return 0;
            if (ms >= maxMs) return n-1;
            let lo = 0, hi = n - 1, ans = 0;
            while (lo <= hi) {
                const mid = (lo + hi) >> 1;
                const t = points[mid].time.getTime();
                if (t < ms) { lo = mid + 1; ans = lo; }
                else { hi = mid - 1; ans = mid; }
            }
            return Math.max(0, Math.min(n-1, ans));
        } catch(e){ console.warn('findIndexByTime失败:', e); return 0; }
    }
    function jumpToSliderTime(){
        try {
            const slider = document.getElementById('playbackTimeSlider');
            if (!slider || !playbackState.points || !playbackState.points.length) return;
            const ms = parseInt(slider.value, 10);
            if (!isFinite(ms)) return;
            const idx = findIndexByTime(playbackState.points, ms);
            playbackState.idx = idx;
            const pts = playbackState.points;
            const ll = pts[idx].ll;
            playbackState.path = pts.slice(0, idx+1).map(p=>p.ll);
            // 更新折线
            try {
                if (playbackState.line && typeof playbackState.line.setLngLats === 'function') {
                    playbackState.line.setLngLats(playbackState.path);
                } else {
                    if (playbackState.line && map) { try { map.removeOverLay(playbackState.line); } catch(e){} }
                    playbackState.line = new T.Polyline(playbackState.path, { color: currentTrackLineColor, weight: 1, opacity: 0.9 });
                    if (map) map.addOverLay(playbackState.line);
                }
            } catch(e){ console.warn('滑块更新折线失败:', e); }
            // 更新标记与时间
            ensurePlaybackDom(ll);
            updatePlaybackDom(ll);
            updatePlaybackTimeLabel(pts[idx].ts);
            // 若正在播放，立即按新位置继续
            if (playbackState.running) {
                if (playbackState.timer) { clearTimeout(playbackState.timer); playbackState.timer = null; }
                scheduleNext();
            }
        } catch(e) { console.warn('滑块跳转失败:', e); }
    }

    // DOM标记：使用容器坐标实现可见移动
    let playbackDom = { el: null, lastLL: null, bound: false };

    function ensurePlaybackDom(ll){
        try {
            playbackDom.lastLL = ll;
            const pane = (map && map.getPanes && map.getPanes().overlayPane) || document.getElementById('mapContainer');
            if (!pane) { console.warn('未找到overlayPane或mapContainer'); return; }
            if (!playbackDom.el) {
                const el = document.createElement('div');
                el.id = 'playbackDomMarker';
                el.style.position = 'absolute';
                el.style.width = '0';
                el.style.height = '0';
                el.style.borderLeft = '3px solid transparent';
                el.style.borderRight = '3px solid transparent';
                el.style.borderBottom = '4px solid #2C64A7';
                el.style.borderTop = '0';
                el.style.transform = 'translate(-50%, -50%)';
                el.style.zIndex = '9999';
                // 添加伪元素来增强箭头效果
                el.style.clipPath = 'polygon(50% 0, 100% 100%, 0 100%)';
                pane.appendChild(el);
                playbackDom.el = el;
                console.log('[Playback] 创建DOM标记，父节点=', pane === document.getElementById('mapContainer') ? '#mapContainer' : 'overlayPane');
                bindPlaybackDomEvents();
            }
            updatePlaybackDom(ll);
        } catch(e) { console.warn('创建DOM标记失败:', e); }
    }

    function updatePlaybackDom(ll){
        try {
            playbackDom.lastLL = ll;
            if (!map || !playbackDom.el || !ll) { console.log('[Playback] update取消：map/el/ll缺失'); return; }
            let p;
            if (typeof map.lngLatToLayerPoint === 'function') {
                p = map.lngLatToLayerPoint(ll);
                console.log('[Playback] 使用layerPoint定位:', ll && ll.lng, ll && ll.lat, '=>', p && p.x, p && p.y);
            } else if (typeof map.lngLatToContainerPoint === 'function') {
                p = map.lngLatToContainerPoint(ll);
                console.log('[Playback] 使用containerPoint定位:', ll && ll.lng, ll && ll.lat, '=>', p && p.x, p && p.y);
            } else {
                console.warn('地图对象不支持lngLat到像素坐标转换');
                return;
            }
            playbackDom.el.style.left = p.x + 'px';
            playbackDom.el.style.top = p.y + 'px';
        } catch(e) { console.warn('更新DOM标记位置失败:', e); }
    }

    function bindPlaybackDomEvents(){
        if (playbackDom.bound) return;
        const updater = function(){
            try {
                if (!map || !playbackDom.el || !playbackDom.lastLL) return;
                let p;
                if (typeof map.lngLatToLayerPoint === 'function') {
                    p = map.lngLatToLayerPoint(playbackDom.lastLL);
                } else if (typeof map.lngLatToContainerPoint === 'function') {
                    p = map.lngLatToContainerPoint(playbackDom.lastLL);
                }
                if (!p) return;
                playbackDom.el.style.left = p.x + 'px';
                playbackDom.el.style.top = p.y + 'px';
            } catch(e){}
        };
        try {
            map.addEventListener('move', updater);
            map.addEventListener('zoom', updater);
            playbackDom.bound = true;
        } catch(e){}
    }

    function removePlaybackDom(){
        try {
            const el = playbackDom.el;
            playbackDom.lastLL = null;
            if (el && el.parentNode) el.parentNode.removeChild(el);
        } catch(e){}
        playbackDom.el = null;
        playbackDom.bound = false;
    }

    // 测量功能相关变量
    let measureState = {
        isActive: false,
        mode: '', // 'distance' or 'area'
        points: [],
        tempLine: null,
        lines: [],
        markers: [],
        labels: [],
        polygon: null,
        areaLabel: null
    };

    // 绑定测量按钮事件
    function bindMeasureEvents() {
        const distanceBtn = document.getElementById('measureDistanceBtn');
        const areaBtn = document.getElementById('measureAreaBtn');
        
        if (distanceBtn) {
            distanceBtn.addEventListener('click', function() {
                startMeasureDistance();
            });
        }
        
        if (areaBtn) {
            areaBtn.addEventListener('click', function() {
                startMeasureArea();
            });
        }
    }

    // 绑定地图类型切换按钮事件
    function bindMapTypeEvent() {
        const mapTypeBtn = document.getElementById('mapTypeBtn');
        
        if (mapTypeBtn) {
            mapTypeBtn.addEventListener('click', function() {
                toggleMapType();
            });
        }
    }

    // 切换地图类型
    function toggleMapType() {
        if (!map) {
            alert('地图未初始化');
            return;
        }
        
        // 切换地图类型
        if (currentMapType === 'satellite') {
            // 切换到街道地图
            map.setMapType(TMAP_NORMAL_MAP);
            currentMapType = 'street';
            updateMapTypeButton('街道图');
        } else {
            // 切换到卫星地图
            map.setMapType(TMAP_SATELLITE_MAP);
            currentMapType = 'satellite';
            updateMapTypeButton('卫星图');
        }
    }

    // 更新地图类型按钮显示
    function updateMapTypeButton(typeName) {
        const mapTypeBtn = document.getElementById('mapTypeBtn');
        if (mapTypeBtn) {
            mapTypeBtn.innerHTML = `<span>${typeName}</span>`;
            mapTypeBtn.title = `当前：${typeName}，点击切换`;
        }
    }

    // 开始测距
    function startMeasureDistance() {
        if (!map) {
            alert('地图未初始化');
            return;
        }
        
        // 先移除所有可能存在的事件监听器
        try {
            map.removeEventListener('click', handleMapClick);
            map.removeEventListener('click', handleAreaMapClick);
            map.removeEventListener('mousemove', handleMouseMove);
            map.removeEventListener('mousemove', handleAreaMouseMove);
            map.removeEventListener('dblclick', finishMeasure);
            map.removeEventListener('dblclick', finishAreaMeasure);
        } catch(e) {
            console.log('移除事件监听器时出错:', e);
        }
        
        // 重置测量状态
        clearMeasureResult();
        
        // 设置测量状态为激活
        measureState.isActive = true;
        measureState.mode = 'distance'; // 设置为距离测量模式
        
        // 禁用其他按钮
        disableButtons(true);
        
        // 添加地图点击事件监听器
        map.addEventListener('click', handleMapClick);
        
        // 添加鼠标移动事件监听器
        map.addEventListener('mousemove', handleMouseMove);
        
        // 添加双击事件监听器结束测量
        map.addEventListener('dblclick', finishMeasure);
        
        console.log('测距功能已启动');
    }

    // 开始测面
    function startMeasureArea() {
        if (!map) {
            alert('地图未初始化');
            return;
        }
        
        // 先移除所有可能存在的事件监听器
        try {
            map.removeEventListener('click', handleMapClick);
            map.removeEventListener('click', handleAreaMapClick);
            map.removeEventListener('mousemove', handleMouseMove);
            map.removeEventListener('mousemove', handleAreaMouseMove);
            map.removeEventListener('dblclick', finishMeasure);
            map.removeEventListener('dblclick', finishAreaMeasure);
        } catch(e) {
            console.log('移除事件监听器时出错:', e);
        }
        
        // 重置测量状态
        clearMeasureResult();
        
        // 设置测量状态为激活
        measureState.isActive = true;
        measureState.mode = 'area'; // 设置为面积测量模式
        
        // 禁用其他按钮
        disableButtons(true);
        
        // 添加地图点击事件监听器
        map.addEventListener('click', handleAreaMapClick);
        
        // 添加鼠标移动事件监听器
        map.addEventListener('mousemove', handleAreaMouseMove);
        
        // 添加双击事件监听器结束测量
        map.addEventListener('dblclick', finishAreaMeasure);
        
        console.log('测面功能已启动');
    }

    // 处理地图点击事件
    function handleMapClick(event) {
        if (!measureState.isActive || measureState.mode !== 'distance') return;
        
        const point = event.lnglat;
        measureState.points.push(point);
        
        // 创建小圆点图标
        const smallDotIcon = new T.Icon({
            iconUrl: 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="8" height="8"><circle cx="4" cy="4" r="3" fill="%23FF0000" stroke="%23FFFFFF" stroke-width="1"/></svg>',
            iconSize: new T.Point(8, 8),
            iconAnchor: new T.Point(4, 4)
        });
        
        // 创建点标记
        const marker = new T.Marker(point, {icon: smallDotIcon});
        map.addOverLay(marker);
        measureState.markers.push(marker);
        
        // 如果不是第一个点，创建线段
        if (measureState.points.length > 1) {
            const prevPoint = measureState.points[measureState.points.length - 2];
            const line = new T.Polyline([prevPoint, point], {
                color: '#FF0000',
                weight: 3,
                opacity: 0.8
            });
            map.addOverLay(line);
            measureState.lines.push(line);
            
            // 计算距离并显示标签
            const distance = calculateDistance(prevPoint, point);
            showDistanceLabel(point, distance);
        }
        
        // 移除临时线
        if (measureState.tempLine) {
            map.removeOverLay(measureState.tempLine);
            measureState.tempLine = null;
        }
    }

    // 处理测面地图点击事件
    function handleAreaMapClick(event) {
        if (!measureState.isActive || measureState.mode !== 'area') return;
        
        const point = event.lnglat;
        measureState.points.push(point);
        
        // 创建小圆点图标（与测距功能一致）
        const smallDotIcon = new T.Icon({
            iconUrl: 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="8" height="8"><circle cx="4" cy="4" r="3" fill="%23FF0000" stroke="%23FFFFFF" stroke-width="1"/></svg>',
            iconSize: new T.Point(8, 8),
            iconAnchor: new T.Point(4, 4)
        });
        
        // 创建点标记
        const marker = new T.Marker(point, {icon: smallDotIcon});
        map.addOverLay(marker);
        measureState.markers.push(marker);
        
        // 移除之前的多边形
        if (measureState.polygon) {
            map.removeOverLay(measureState.polygon);
        }
        
        // 如果点数大于2，创建多边形
        if (measureState.points.length >= 3) {
            const polygon = new T.Polygon(measureState.points, {
                color: currentOutlineColor,
                weight: 3,
                opacity: 0.8,
                fillColor: currentFillColor,
                fillOpacity: currentFillOpacity
            });
            map.addOverLay(polygon);
            measureState.polygon = polygon;
            
            // 计算面积并显示标签
            const area = calculatePolygonArea(measureState.points);
            showAreaLabel(getPolygonCenter(measureState.points), area);
        }
        
        // 移除临时线
        if (measureState.tempLine) {
            map.removeOverLay(measureState.tempLine);
            measureState.tempLine = null;
        }
    }

    // 处理鼠标移动事件
    function handleMouseMove(event) {
        if (!measureState.isActive || measureState.mode !== 'distance' || measureState.points.length === 0) return;
        
        const lastPoint = measureState.points[measureState.points.length - 1];
        const currentPoint = event.lnglat;
        
        // 移除之前的临时线
        if (measureState.tempLine) {
            map.removeOverLay(measureState.tempLine);
        }
        
        // 创建新的临时线
        measureState.tempLine = new T.Polyline([lastPoint, currentPoint], {
            color: '#0000FF',
            weight: 2,
            opacity: 0.6,
            dashArray: [5, 5]
        });
        map.addOverLay(measureState.tempLine);
    }

    // 处理测面鼠标移动事件
    function handleAreaMouseMove(event) {
        if (!measureState.isActive || measureState.mode !== 'area' || measureState.points.length === 0) return;
        
        const firstPoint = measureState.points[0];
        const lastPoint = measureState.points[measureState.points.length - 1];
        const currentPoint = event.lnglat;
        
        // 移除之前的临时线
        if (measureState.tempLine) {
            map.removeOverLay(measureState.tempLine);
        }
        
        // 创建新的临时线（从最后一个点到当前点，再到第一个点形成闭合效果）
        const tempPoints = [lastPoint, currentPoint];
        if (measureState.points.length >= 2) {
            tempPoints.push(firstPoint);
        }
        
        measureState.tempLine = new T.Polyline(tempPoints, {
            color: '#0000FF',
            weight: 2,
            opacity: 0.6,
            dashArray: [5, 5]
        });
        map.addOverLay(measureState.tempLine);
    }

    // 结束测量
    function finishMeasure() {
        if (!measureState.isActive || measureState.mode !== 'distance') return;
        
        // 移除事件监听器
        map.removeEventListener('click', handleMapClick);
        map.removeEventListener('mousemove', handleMouseMove);
        map.removeEventListener('dblclick', finishMeasure);
        
        // 移除临时线
        if (measureState.tempLine) {
            map.removeOverLay(measureState.tempLine);
            measureState.tempLine = null;
        }
        
        // 显示总距离
        if (measureState.points.length > 1) {
            const totalDistance = calculateTotalDistance();
            showTotalDistanceLabel(totalDistance);
        }
        
        // 重置测量状态
        measureState.isActive = false;
        measureState.mode = '';
        
        // 恢复其他按钮
        disableButtons(false);
        
        console.log('测距功能已完成');
    }

    // 结束测面测量
    function finishAreaMeasure() {
        if (!measureState.isActive || measureState.mode !== 'area') return;
        
        // 移除事件监听器
        map.removeEventListener('click', handleAreaMapClick);
        map.removeEventListener('mousemove', handleAreaMouseMove);
        map.removeEventListener('dblclick', finishAreaMeasure);
        
        // 移除临时线
        if (measureState.tempLine) {
            map.removeOverLay(measureState.tempLine);
            measureState.tempLine = null;
        }
        
        // 如果点数大于等于3，创建最终多边形
        if (measureState.points.length >= 3) {
            // 移除之前的多边形
            if (measureState.polygon) {
                map.removeOverLay(measureState.polygon);
            }
            
            const polygon = new T.Polygon(measureState.points, {
                color: currentOutlineColor,
                weight: 3,
                opacity: 0.8,
                fillColor: currentFillColor,
                fillOpacity: currentFillOpacity
            });
            map.addOverLay(polygon);
            measureState.polygon = polygon;
            
            // 计算并显示总面积
            const area = calculatePolygonArea(measureState.points);
            showTotalAreaLabel(getPolygonCenter(measureState.points), area);
        } else {
            // 点数不足3个，移除所有标记
            clearMeasureResult();
        }
        
        // 重置测量状态
        measureState.isActive = false;
        measureState.mode = '';
        
        // 恢复其他按钮
        disableButtons(false);
        
        console.log('测面功能已完成');
    }

    // 计算两点间距离（米）
    function calculateDistance(point1, point2) {
        // 使用天地图提供的距离计算方法
        if (T.CRS && T.CRS.EPSG4326 && T.CRS.EPSG4326.distance) {
            return T.CRS.EPSG4326.distance(point1, point2);
        }
        
        // 如果没有提供，则使用球面距离公式
        const R = 6371000; // 地球半径（米）
        const dLat = (point2.lat - point1.lat) * Math.PI / 180;
        const dLon = (point2.lng - point1.lng) * Math.PI / 180;
        const a = 
            Math.sin(dLat/2) * Math.sin(dLat/2) +
            Math.cos(point1.lat * Math.PI / 180) * Math.cos(point2.lat * Math.PI / 180) * 
            Math.sin(dLon/2) * Math.sin(dLon/2);
        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
        return R * c;
    }

    // 计算多边形面积（平方米）
    function calculatePolygonArea(points) {
        // 使用天地图提供的面积计算方法（如果可用）
        if (T.GeometryUtils && T.GeometryUtils.computeArea) {
            return T.GeometryUtils.computeArea(points);
        }
        
        // 如果没有提供，则使用球面多边形面积计算公式
        // 这里使用简单的平面近似计算，对于小面积比较准确
        if (points.length < 3) return 0;
        
        let area = 0;
        const n = points.length;
        
        for (let i = 0; i < n; i++) {
            const j = (i + 1) % n;
            area += points[i].lng * points[j].lat;
            area -= points[j].lng * points[i].lat;
        }
        
        area = Math.abs(area) / 2.0;
        
        // 转换为平方米（这是一个简化的近似值）
        // 更精确的计算需要考虑地球曲率
        const earthRadius = 6371000; // 地球半径（米）
        const degreeToMeter = (2 * Math.PI * earthRadius) / 360; // 每度对应的米数
        
        // 这个转换只是一个粗略的近似
        return area * degreeToMeter * degreeToMeter;
    }

    // 获取多边形中心点
    function getPolygonCenter(points) {
        if (points.length === 0) return null;
        
        let x = 0, y = 0;
        for (let i = 0; i < points.length; i++) {
            x += points[i].lng;
            y += points[i].lat;
        }
        
        return new T.LngLat(x / points.length, y / points.length);
    }

    // 计算总距离
    function calculateTotalDistance() {
        let total = 0;
        for (let i = 1; i < measureState.points.length; i++) {
            const distance = calculateDistance(measureState.points[i-1], measureState.points[i]);
            total += distance;
        }
        return total;
    }

    // 显示两点间距离标签
    function showDistanceLabel(point, distance) {
        const label = document.createElement('div');
        label.className = 'distance-label';
        label.innerHTML = distance.toFixed(2) + ' 米';
        label.style.position = 'absolute';
        label.style.backgroundColor = 'rgba(255, 255, 255, 0.9)';
        label.style.padding = '2px 6px';
        label.style.borderRadius = '3px';
        label.style.fontSize = '12px';
        label.style.boxShadow = '0 1px 2px rgba(0,0,0,0.3)';
        label.style.zIndex = '1000';
        label.style.transform = 'translate(-50%, -50%)';
        
        // 添加删除按钮
        const closeBtn = document.createElement('span');
        closeBtn.innerHTML = '×';
        closeBtn.style.marginLeft = '5px';
        closeBtn.style.cursor = 'pointer';
        closeBtn.style.fontWeight = 'bold';
        closeBtn.onclick = function() {
            if (label.parentNode) {
                label.parentNode.removeChild(label);
            }
        };
        label.appendChild(closeBtn);
        
        document.getElementById('mapContainer').appendChild(label);
        
        // 定位标签（向上偏移20像素）
        const pixel = map.lngLatToContainerPoint(point);
        label.style.left = pixel.x + 'px';
        label.style.top = (pixel.y - 20) + 'px';
        
        measureState.labels.push(label);
    }

    // 显示面积标签
    function showAreaLabel(point, area) {
        // 如果已存在面积标签，先移除它
        if (measureState.areaLabel) {
            if (measureState.areaLabel.parentNode) {
                measureState.areaLabel.parentNode.removeChild(measureState.areaLabel);
            }
        }
        
        const label = document.createElement('div');
        label.className = 'area-label';
        label.innerHTML = area.toFixed(2) + ' 平方米';
        label.style.position = 'absolute';
        label.style.backgroundColor = 'rgba(255, 255, 255, 0.9)';
        label.style.padding = '2px 6px';
        label.style.borderRadius = '3px';
        label.style.fontSize = '12px';
        label.style.boxShadow = '0 1px 2px rgba(0,0,0,0.3)';
        label.style.zIndex = '1000';
        label.style.transform = 'translate(-50%, -50%)';
        
        // 添加删除按钮
        const closeBtn = document.createElement('span');
        closeBtn.innerHTML = '×';
        closeBtn.style.marginLeft = '5px';
        closeBtn.style.cursor = 'pointer';
        closeBtn.style.fontWeight = 'bold';
        closeBtn.onclick = function() {
            if (label.parentNode) {
                label.parentNode.removeChild(label);
            }
        };
        label.appendChild(closeBtn);
        
        document.getElementById('mapContainer').appendChild(label);
        
        // 定位标签
        const pixel = map.lngLatToContainerPoint(point);
        label.style.left = pixel.x + 'px';
        label.style.top = (pixel.y - 20) + 'px';
        
        measureState.areaLabel = label;
        measureState.labels.push(label);
    }

    // 显示总面积标签
    function showTotalAreaLabel(point, area) {
        // 如果已存在面积标签，先移除它
        if (measureState.areaLabel) {
            if (measureState.areaLabel.parentNode) {
                measureState.areaLabel.parentNode.removeChild(measureState.areaLabel);
            }
        }
        
        // 计算亩数（1亩 ≈ 666.6667平方米）
        const areaInMu = area / 666.6667;
        
        const label = document.createElement('div');
        label.className = 'total-area-label';
        label.innerHTML = '总面积: ' + area.toFixed(2) + ' 平方米<br>' + areaInMu.toFixed(2) + ' 亩';
        label.style.position = 'absolute';
        label.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';
        label.style.color = 'white';
        label.style.padding = '4px 8px';
        label.style.borderRadius = '4px';
        label.style.fontSize = '14px';
        label.style.fontWeight = 'bold';
        label.style.boxShadow = '0 2px 4px rgba(0,0,0,0.3)';
        label.style.zIndex = '1000';
        label.style.transform = 'translate(-50%, -50%)';
        label.style.lineHeight = '1.4';
        
        // 添加删除按钮
        const closeBtn = document.createElement('span');
        closeBtn.innerHTML = ' ×';
        closeBtn.style.cursor = 'pointer';
        closeBtn.style.fontWeight = 'bold';
        closeBtn.onclick = function() {
            if (label.parentNode) {
                label.parentNode.removeChild(label);
            }
        };
        label.appendChild(closeBtn);
        
        document.getElementById('mapContainer').appendChild(label);
        
        // 定位标签
        const pixel = map.lngLatToContainerPoint(point);
        label.style.left = pixel.x + 'px';
        label.style.top = (pixel.y - 40) + 'px';
        
        measureState.areaLabel = label;
        measureState.labels.push(label);
    }

    // 显示总距离标签
    function showTotalDistanceLabel(totalDistance) {
        const lastPoint = measureState.points[measureState.points.length - 1];
        const label = document.createElement('div');
        label.className = 'total-distance-label';
        label.innerHTML = '总距离: ' + totalDistance.toFixed(2) + ' 米';
        label.style.position = 'absolute';
        label.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';
        label.style.color = 'white';
        label.style.padding = '4px 8px';
        label.style.borderRadius = '4px';
        label.style.fontSize = '14px';
        label.style.fontWeight = 'bold';
        label.style.boxShadow = '0 2px 4px rgba(0,0,0,0.3)';
        label.style.zIndex = '1000';
        label.style.transform = 'translate(-50%, -50%)';
        
        // 添加删除按钮
        const closeBtn = document.createElement('span');
        closeBtn.innerHTML = ' ×';
        closeBtn.style.cursor = 'pointer';
        closeBtn.style.fontWeight = 'bold';
        closeBtn.onclick = function() {
            if (label.parentNode) {
                label.parentNode.removeChild(label);
            }
        };
        label.appendChild(closeBtn);
        
        document.getElementById('mapContainer').appendChild(label);
        
        // 定位标签（向上偏移40像素，比段距离标签更高）
        const pixel = map.lngLatToContainerPoint(lastPoint);
        label.style.left = pixel.x + 'px';
        label.style.top = (pixel.y - 60) + 'px';  // 从-40改为-60，增加间距
        
        measureState.labels.push(label);
    }

    // 清除测量结果
    function clearMeasureResult() {
        // 移除所有线条
        measureState.lines.forEach(line => {
            if (map && map.removeOverLay) {
                try { map.removeOverLay(line); } catch(e) {}
            }
        });
        
        // 移除所有标记
        measureState.markers.forEach(marker => {
            if (map && map.removeOverLay) {
                try { map.removeOverLay(marker); } catch(e) {}
            }
        });
        
        // 移除所有标签
        measureState.labels.forEach(label => {
            if (label.parentNode) {
                try { label.parentNode.removeChild(label); } catch(e) {}
            }
        });
        
        // 移除临时线
        if (measureState.tempLine) {
            if (map && map.removeOverLay) {
                try { map.removeOverLay(measureState.tempLine); } catch(e) {}
            }
            measureState.tempLine = null;
        }
        
        // 移除多边形
        if (measureState.polygon) {
            if (map && map.removeOverLay) {
                try { map.removeOverLay(measureState.polygon); } catch(e) {}
            }
            measureState.polygon = null;
        }
        
        // 移除面积标签
        if (measureState.areaLabel) {
            if (measureState.areaLabel.parentNode) {
                try { measureState.areaLabel.parentNode.removeChild(measureState.areaLabel); } catch(e) {}
            }
            measureState.areaLabel = null;
        }
        
        // 重置状态
        measureState.points = [];
        measureState.lines = [];
        measureState.markers = [];
        measureState.labels = [];
        measureState.isActive = false;
        measureState.mode = '';
    }

    // 添加CSS样式用于距离标签
    const style = document.createElement('style');
    style.innerHTML = `
        .distance-label, .total-distance-label {
            font-family: Arial, sans-serif;
            pointer-events: auto;
        }
    `;
    document.head.appendChild(style);

    // 颜色选择器相关变量和函数
    let currentOutlineColor = "#FFD700"; // 默认边框颜色
    let currentFillColor = "#FFFF00";   // 默认填充颜色
    let currentFillOpacity = 0.35;       // 默认透明度
    
    // 轨迹颜色相关变量
    let currentTrackLineColor = "#FF0000"; // 默认轨迹线颜色
    let currentTrackPointColor = "#68EAF3"; // 默认轨迹点颜色

    // 初始化颜色选择器
    function initColorPickers() {
        // 边框颜色选择器
        const outlineColorPicker = document.getElementById('outlineColorPicker');
        const outlineColorInput = document.getElementById('outlineColorInput');
        
        outlineColorPicker.addEventListener('click', function() {
            outlineColorInput.click();
        });
        
        outlineColorInput.addEventListener('change', function() {
            currentOutlineColor = this.value;
            outlineColorPicker.style.backgroundColor = currentOutlineColor;
        });
        
        // 填充颜色选择器
        const fillColorPicker = document.getElementById('fillColorPicker');
        const fillColorInput = document.getElementById('fillColorInput');
        
        fillColorPicker.addEventListener('click', function() {
            fillColorInput.click();
        });
        
        fillColorInput.addEventListener('change', function() {
            currentFillColor = this.value;
            fillColorPicker.style.backgroundColor = currentFillColor;
        });
        
        // 透明度滑块
        const fillOpacitySlider = document.getElementById('fillOpacitySlider');
        const fillOpacityValue = document.getElementById('fillOpacityValue');
        
        fillOpacitySlider.addEventListener('input', function() {
            currentFillOpacity = this.value / 100;
            fillOpacityValue.textContent = this.value + '%';
        });
        
        // 轨迹线颜色选择器
        const trackLineColorPicker = document.getElementById('trackLineColorPicker');
        const trackLineColorInput = document.getElementById('trackLineColorInput');
        
        if (trackLineColorPicker && trackLineColorInput) {
            trackLineColorPicker.addEventListener('click', function() {
                trackLineColorInput.click();
            });
            
            trackLineColorInput.addEventListener('change', function() {
                currentTrackLineColor = this.value;
                trackLineColorPicker.style.backgroundColor = currentTrackLineColor;
            });
        }
        
        // 轨迹点颜色选择器
        const trackPointColorPicker = document.getElementById('trackPointColorPicker');
        const trackPointColorInput = document.getElementById('trackPointColorInput');
        
        if (trackPointColorPicker && trackPointColorInput) {
            // 设置初始背景色
            trackPointColorPicker.style.backgroundColor = currentTrackPointColor;
            
            trackPointColorPicker.addEventListener('click', function() {
                trackPointColorInput.click();
            });
            
            trackPointColorInput.addEventListener('change', function() {
                currentTrackPointColor = this.value;
                trackPointColorPicker.style.backgroundColor = currentTrackPointColor;
            });
        }
    }

</script>
</body>

</html>
